(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[19147],{"./node_modules/@pdftron/webviewer-react-toolkit/dist/esm/components/Input/Input.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{p:()=>Input});var tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@pdftron/webviewer-react-toolkit/dist/esm/hooks/useFocus.js"),_Icon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@pdftron/webviewer-react-toolkit/dist/esm/components/Icon/Icon.js"),Input=(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((function(_a,ref){var _b=_a.message,message=void 0===_b?"default":_b,messageText=_a.messageText,fillWidth=_a.fillWidth,wrapperClassName=_a.wrapperClassName,padMessageText=_a.padMessageText,className=_a.className,onFocus=_a.onFocus,onBlur=_a.onBlur,rightElement=_a.rightElement,leftElement=_a.leftElement,_c=_a.type,type=void 0===_c?"text":_c,props=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.Tt)(_a,["message","messageText","fillWidth","wrapperClassName","padMessageText","className","onFocus","onBlur","rightElement","leftElement","type"]),_d=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.i)(onFocus,onBlur),focused=_d.focused,handleOnFocus=_d.handleOnFocus,handleOnBlur=_d.handleOnBlur,rightIcon=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((function(){if(rightElement)return rightElement;var icon=void 0;switch(message){case"warning":icon="Warning";break;case"error":icon="Error"}return icon?react__WEBPACK_IMPORTED_MODULE_1__.createElement(_Icon__WEBPACK_IMPORTED_MODULE_4__.I,{className:"ui__input__icon",icon}):void 0}),[message,rightElement]),wrapperClass=classnames__WEBPACK_IMPORTED_MODULE_0___default()("ui__base ui__input__wrapper",{"ui__input__wrapper--fill":fillWidth,"ui__input__wrapper--pad":padMessageText&&!messageText},wrapperClassName),mainClass=classnames__WEBPACK_IMPORTED_MODULE_0___default()("ui__input","ui__input--message-"+message,{"ui__input--focused":focused}),inputClass=classnames__WEBPACK_IMPORTED_MODULE_0___default()("ui__input__input",{"ui__input__input--disabled":props.disabled},className);return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:wrapperClass},react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:mainClass},leftElement,react__WEBPACK_IMPORTED_MODULE_1__.createElement("input",(0,tslib__WEBPACK_IMPORTED_MODULE_2__.Cl)({},props,{type,onFocus:handleOnFocus,onBlur:handleOnBlur,className:inputClass,ref})),rightIcon),messageText?react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"ui__input__messageText"},messageText):void 0)}))},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/PortfolioItem/PortfolioItem.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,"",""]),module.exports=exports},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/PortfolioItemContent/PortfolioItemContent.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.PortfolioPanel .bookmark-outline-single-container .bookmark-outline-label-row{align-items:center}.PortfolioPanel .bookmark-outline-single-container .bookmark-outline-label-row.editing{background-color:var(--faded-component-background);padding:var(--padding-medium) 20px}.PortfolioPanel .bookmark-outline-single-container .bookmark-outline-label-row.editing.focus-visible,.PortfolioPanel .bookmark-outline-single-container .bookmark-outline-label-row.editing:focus-visible{outline:var(--focus-visible-outline)}.PortfolioPanel .bookmark-outline-single-container .portfolio-input-label{font-weight:600;padding-bottom:var(--padding-small)}.PortfolioPanel .bookmark-outline-single-container .portfolio-input{-webkit-font-smoothing:antialiased}.PortfolioPanel .bookmark-outline-single-container .portfolio-input .ui__input{border-color:var(--border)}.PortfolioPanel .bookmark-outline-single-container .portfolio-input .ui__input.ui__input--message-warning{border-color:var(--error-border-color)}.PortfolioPanel .bookmark-outline-single-container .portfolio-input .ui__input.ui__input--message-warning.ui__input--focused{box-shadow:none}.PortfolioPanel .bookmark-outline-single-container .portfolio-input .ui__input.ui__input--message-warning .ui__input__icon svg{fill:var(--error-border-color)}.PortfolioPanel .bookmark-outline-single-container .portfolio-input .ui__input.ui__input--message-default.ui__input--focused{border-color:var(--outline-color);box-shadow:none}.PortfolioPanel .bookmark-outline-single-container .portfolio-input .ui__input .ui__input__input{padding:var(--padding-small);color:var(--text-color);height:auto;overflow:auto;line-height:normal}.PortfolioPanel .bookmark-outline-single-container .portfolio-input .ui__input .ui__input__input::-moz-placeholder{color:var(--placeholder-text)}.PortfolioPanel .bookmark-outline-single-container .portfolio-input .ui__input .ui__input__input::placeholder{color:var(--placeholder-text)}.PortfolioPanel .bookmark-outline-single-container .portfolio-input .ui__input__messageText{color:var(--error-text-color);margin-top:var(--padding-small);font-size:inherit}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/PortfolioPanel/PortfolioPanel.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.PortfolioPanel .portfolio-panel-control{display:flex}.PortfolioPanel .bookmark-outline-row{padding-top:6px}.PortfolioPanel .bookmark-outline-panel-header .header-title{font-size:16px;font-weight:400;margin:0}.PortfolioPanel .portfolio-panel-list{padding-top:8px}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./src/components/PortfolioItem/PortfolioItem.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/PortfolioItem/PortfolioItem.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/PortfolioItemContent/PortfolioItemContent.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_i18next__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),react_redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-redux/es/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_13__),helpers_outlineFlyoutHelper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/helpers/outlineFlyoutHelper.js"),constants_dataElement__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/constants/dataElement.js"),selectors__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/redux/selectors/index.js"),_pdftron_webviewer_react_toolkit__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@pdftron/webviewer-react-toolkit/dist/esm/components/Input/Input.js"),components_Button__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Button/index.js"),components_PortfolioPanel_PortfolioContext__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/PortfolioPanel/PortfolioContext.js"),helpers_portfolio__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/helpers/portfolio.js"),_PanelListItem_PanelListItem__WEBPACK_IMPORTED_MODULE_11__=(__webpack_require__("./src/constants/bookmarksOutlinesShared.scss"),__webpack_require__("./src/components/PortfolioItemContent/PortfolioItemContent.scss"),__webpack_require__("./src/components/PanelListItem/PanelListItem.js")),classnames__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_12__);const propTypes={portfolioItem:prop_types__WEBPACK_IMPORTED_MODULE_13___default().object.isRequired,isPortfolioRenaming:prop_types__WEBPACK_IMPORTED_MODULE_13___default().bool,setPortfolioRenaming:prop_types__WEBPACK_IMPORTED_MODULE_13___default().func,movePortfolio:prop_types__WEBPACK_IMPORTED_MODULE_13___default().func},PortfolioItemContent=({portfolioItem,isPortfolioRenaming,setPortfolioRenaming,movePortfolio})=>{const{refreshPortfolio,renamePortfolioItem,removePortfolioItem,openPortfolioItem,downloadPortfolioItem,isNameDuplicated,setActivePortfolioItem}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(components_PortfolioPanel_PortfolioContext__WEBPACK_IMPORTED_MODULE_7__.A),{name,nameWithoutExtension,extension,id}=portfolioItem,[t]=(0,react_i18next__WEBPACK_IMPORTED_MODULE_14__.B)(),inputRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(),[isDefault,setIsDefault]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[portfolioEditName,setPortfolioEditName]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(nameWithoutExtension),onDoubleClick=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((()=>{isPortfolioRenaming||(openPortfolioItem(portfolioItem),setActivePortfolioItem(portfolioItem.id))}),[isPortfolioRenaming,portfolioItem,openPortfolioItem,setActivePortfolioItem]),isRenameButtonDisabled=()=>!portfolioEditName||nameWithoutExtension===portfolioEditName||isNameDuplicated(`${portfolioEditName}.${extension}`,id),onRenamePortfolioItem=()=>{setPortfolioRenaming(!1),renamePortfolioItem(id,`${portfolioEditName}.${extension}`)},onCancelPortfolio=()=>{isPortfolioRenaming&&(setPortfolioRenaming(!1),setPortfolioEditName(nameWithoutExtension)),refreshPortfolio()};(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{isPortfolioRenaming&&(inputRef.current.focus(),inputRef.current.select()),setIsDefault(!isPortfolioRenaming)}),[isPortfolioRenaming]);const flyoutSelector=`${constants_dataElement__WEBPACK_IMPORTED_MODULE_4__.A.BOOKMARK_OUTLINE_FLYOUT}-${id}`,currentFlyout=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.d4)((state=>selectors__WEBPACK_IMPORTED_MODULE_5__.A.getFlyout(state,flyoutSelector))),contextMenuMoreButtonOptions={moreOptionsDataElement:`portfolio-item-more-button-${id}`,flyoutToggleElement:flyoutSelector},contentMenuFlyoutOptions={shouldHideDeleteButton:!1,currentFlyout,flyoutSelector,type:"portfolio",handleOnClick:val=>{switch(val){case helpers_outlineFlyoutHelper__WEBPACK_IMPORTED_MODULE_3__.N.MOVE_UP:case helpers_outlineFlyoutHelper__WEBPACK_IMPORTED_MODULE_3__.N.MOVE_DOWN:movePortfolio(id,val);break;case helpers_outlineFlyoutHelper__WEBPACK_IMPORTED_MODULE_3__.N.OPENFILE:(0,helpers_portfolio__WEBPACK_IMPORTED_MODULE_8__.zU)(extension)&&openPortfolioItem(portfolioItem);break;case helpers_outlineFlyoutHelper__WEBPACK_IMPORTED_MODULE_3__.N.RENAME:setPortfolioRenaming(!0);break;case helpers_outlineFlyoutHelper__WEBPACK_IMPORTED_MODULE_3__.N.DOWNLOAD:downloadPortfolioItem(portfolioItem);break;case helpers_outlineFlyoutHelper__WEBPACK_IMPORTED_MODULE_3__.N.DELETE:removePortfolioItem(id)}}};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"bookmark-outline-single-container",children:[isDefault&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_PanelListItem_PanelListItem__WEBPACK_IMPORTED_MODULE_11__.A,{iconGlyph:"icon-header-page-manipulation-page-layout-single-page-line",labelHeader:name,enableMoreOptionsContextMenuFlyout:!0,onDoubleClick,contextMenuMoreButtonOptions,contentMenuFlyoutOptions}),isPortfolioRenaming&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_12___default()({"bookmark-outline-label-row":!0,editing:isPortfolioRenaming}),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"portfolio-input-label",htmlFor:id,children:t("portfolio.portfolioDocumentTitle")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_pdftron_webviewer_react_toolkit__WEBPACK_IMPORTED_MODULE_15__.p,{id,type:"text",name:"outline",ref:inputRef,wrapperClassName:"portfolio-input",value:portfolioEditName,onKeyDown:e=>{"Enter"===e.key&&(e.stopPropagation(),isPortfolioRenaming&&!isRenameButtonDisabled()&&onRenamePortfolioItem()),"Escape"===e.key&&onCancelPortfolio()},onChange:e=>setPortfolioEditName(e.target.value),fillWidth:!0,messageText:isNameDuplicated(`${portfolioEditName}.${extension}`,id)?t("portfolio.fileNameAlreadyExists"):"",message:isNameDuplicated(`${portfolioEditName}.${extension}`,id)?"warning":"default","aria-label":`${t("action.rename")} ${portfolioEditName}.${extension}`}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"bookmark-outline-editing-controls",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_6__.A,{className:"bookmark-outline-cancel-button",label:t("action.cancel"),onClick:onCancelPortfolio}),isPortfolioRenaming&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_6__.A,{className:"bookmark-outline-save-button",label:t("action.save"),isSubmitType:!0,disabled:isRenameButtonDisabled(),onClick:onRenamePortfolioItem})]})]})]})};PortfolioItemContent.propTypes=propTypes;const __WEBPACK_DEFAULT_EXPORT__=PortfolioItemContent;PortfolioItemContent.__docgenInfo={description:"",methods:[],displayName:"PortfolioItemContent",props:{portfolioItem:{description:"",type:{name:"object"},required:!0},isPortfolioRenaming:{description:"",type:{name:"bool"},required:!1},setPortfolioRenaming:{description:"",type:{name:"func"},required:!1},movePortfolio:{description:"",type:{name:"func"},required:!1}}}},"./src/components/PortfolioItemContent/PortfolioItemContent.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/PortfolioItemContent/PortfolioItemContent.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/PortfolioPanel/PortfolioContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("./node_modules/react/index.js").createContext()},"./src/components/PortfolioPanel/PortfolioPanel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>components_PortfolioPanel_PortfolioPanel});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),DndProvider=__webpack_require__("./node_modules/react-dnd/dist/esm/core/DndProvider.js"),esm=__webpack_require__("./node_modules/react-dnd-touch-backend/dist/esm/index.js"),dist_esm=__webpack_require__("./node_modules/react-dnd-html5-backend/dist/esm/index.js"),selectors=__webpack_require__("./src/redux/selectors/index.js"),actions=__webpack_require__("./src/redux/actions/index.js"),Button=__webpack_require__("./src/components/Button/index.js"),PortfolioContext=__webpack_require__("./src/components/PortfolioPanel/PortfolioContext.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),DropTarget=__webpack_require__("./node_modules/react-dnd/dist/esm/decorators/DropTarget.js"),DragSource=__webpack_require__("./node_modules/react-dnd/dist/esm/decorators/DragSource.js"),getEmptyImage=__webpack_require__("./node_modules/react-dnd-html5-backend/dist/esm/getEmptyImage.js"),dnd=__webpack_require__("./src/constants/dnd.js");const components_PortfolioItemContent=__webpack_require__("./src/components/PortfolioItemContent/PortfolioItemContent.js").A;__webpack_require__("./src/components/PortfolioItem/PortfolioItem.scss");const propTypes={portfolioItem:prop_types_default().object.isRequired,connectDragSource:prop_types_default().func,connectDragPreview:prop_types_default().func,connectDropTarget:prop_types_default().func,isDragging:prop_types_default().bool,isDraggedUpwards:prop_types_default().bool,isDraggedDownwards:prop_types_default().bool,movePortfolio:prop_types_default().func},PortfolioItem_PortfolioItem=(0,react.forwardRef)((({portfolioItem,connectDragSource,connectDragPreview,connectDropTarget,isDragging,isDraggedUpwards,isDraggedDownwards,movePortfolio},ref)=>{const elementRef=(0,react.useRef)(null);connectDragSource(elementRef),connectDragPreview((0,getEmptyImage.n)(),{captureDraggingState:!0}),connectDropTarget(elementRef);const opacity=isDragging?.5:1;(0,react.useImperativeHandle)(ref,(()=>({getNode:()=>elementRef.current})));const[isRenaming,setIsRenaming]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)("div",{ref:elementRef,className:"outline-drag-container",style:{opacity},children:[(0,jsx_runtime.jsx)("div",{className:"outline-drag-line",style:{opacity:isDraggedUpwards?1:0}}),(0,jsx_runtime.jsx)(components_PortfolioItemContent,{movePortfolio,portfolioItem,isPortfolioRenaming:isRenaming,setPortfolioRenaming:setIsRenaming}),(0,jsx_runtime.jsx)("div",{className:"outline-drag-line",style:{opacity:isDraggedDownwards?1:0}})]})}));PortfolioItem_PortfolioItem.propTypes=propTypes,PortfolioItem_PortfolioItem.displayName="PortfolioItem";const PortfolioItemNested=(0,DropTarget.T)(dnd.ll.PORTFOLIO,{hover(props,dropTargetMonitor,dropTargetContainer){if(!dropTargetContainer)return;const dragObject=dropTargetMonitor.getItem();if(!dragObject)return;const{dragPortfolioItem,dragSourceNode}=dragObject,{portfolioItem:dropPortfolioItem}=props,dropTargetNode=dropTargetContainer.getNode();if(!dragSourceNode||!dropTargetNode)return;if(dragSourceNode.contains(dropTargetNode))return dragObject.dropTargetNode=void 0,void(dragObject.dropLocation=dnd.V7.INITIAL);dragObject.dropTargetNode=dropTargetNode;if(dragPortfolioItem.id===dropPortfolioItem.id)return;const dropTargetBoundingRect=dropTargetNode.getBoundingClientRect(),dropTargetVerticalMiddlePoint=dropTargetBoundingRect.height/2+dropTargetBoundingRect.top,dropTargetClientY=dropTargetMonitor.getClientOffset().y;switch(!0){case dropTargetClientY>dropTargetVerticalMiddlePoint:dragObject.dropLocation=dnd.V7.BELOW_TARGET,dropTargetNode.classList.remove("isNesting");break;case dropTargetClientY<dropTargetVerticalMiddlePoint:dragObject.dropLocation=dnd.V7.ABOVE_TARGET,dropTargetNode.classList.remove("isNesting");break;default:dragObject.dropLocation=dnd.V7.INITIAL,dropTargetNode.classList.remove("isNesting")}},drop(props,dropTargetMonitor,dropTargetContainer){if(!dropTargetContainer)return;const dragObject=dropTargetMonitor.getItem(),{dragPortfolioItem,dropTargetNode}=dragObject,{portfolioItem:dropPortfolioItem,movePortfolioInward,movePortfolioBeforeTarget,movePortfolioAfterTarget}=props;if(dropTargetNode){switch(dragObject.dropLocation){case dnd.V7.ON_TARGET_HORIZONTAL_MIDPOINT:movePortfolioInward(dragPortfolioItem,dropPortfolioItem);break;case dnd.V7.ABOVE_TARGET:movePortfolioBeforeTarget(dragPortfolioItem.id,dropPortfolioItem.id);break;case dnd.V7.BELOW_TARGET:movePortfolioAfterTarget(dragPortfolioItem.id,dropPortfolioItem.id)}dropTargetNode.classList.remove("isNesting"),dragObject.dropLocation=dnd.V7.INITIAL}}},((connect,dropTargetState)=>({connectDropTarget:connect.dropTarget(),isDraggedUpwards:dropTargetState.isOver({shallow:!0})&&dropTargetState.getItem()?.dropLocation===dnd.V7.ABOVE_TARGET,isDraggedDownwards:dropTargetState.isOver({shallow:!0})&&dropTargetState.getItem()?.dropLocation===dnd.V7.BELOW_TARGET})))((0,DragSource.I)(dnd.ll.PORTFOLIO,{beginDrag:(props,dragSourceMonitor,dragSourceContainer)=>({sourceId:dragSourceMonitor.sourceId,dragPortfolioItem:props.portfolioItem,dragSourceNode:dragSourceContainer.getNode(),dropLocation:dnd.V7.INITIAL}),canDrag:()=>!0},((connect,dragSourceState)=>({connectDragSource:connect.dragSource(),connectDragPreview:connect.dragPreview(),isDragging:dragSourceState.isDragging()})))(PortfolioItem_PortfolioItem));PortfolioItemNested.propTypes=propTypes;const components_PortfolioItem_PortfolioItem=PortfolioItemNested;PortfolioItem_PortfolioItem.__docgenInfo={description:"",methods:[{name:"getNode",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PortfolioItem",props:{portfolioItem:{description:"",type:{name:"object"},required:!0},connectDragSource:{description:"",type:{name:"func"},required:!1},connectDragPreview:{description:"",type:{name:"func"},required:!1},connectDropTarget:{description:"",type:{name:"func"},required:!1},isDragging:{description:"",type:{name:"bool"},required:!1},isDraggedUpwards:{description:"",type:{name:"bool"},required:!1},isDraggedDownwards:{description:"",type:{name:"bool"},required:!1},movePortfolio:{description:"",type:{name:"func"},required:!1}}};const components_PortfolioItem=components_PortfolioItem_PortfolioItem;var useDragLayer=__webpack_require__("./node_modules/react-dnd/dist/esm/hooks/useDragLayer.js");const layerStyles={position:"fixed",pointerEvents:"none",zIndex:99999,left:0,top:0,width:"100%",height:"100%"},getItemStyles=(initialOffset,currentOffset)=>{if(!initialOffset||!currentOffset)return{display:"none"};const{x,y}=currentOffset,transform=`translate(calc(${x}px - 50%), calc(${y}px - 100%))`;return{transform,WebkitTransform:transform}},PortfolioDragLayer=()=>{const{itemType,item,isDragging,initialOffset,currentOffset}=(0,useDragLayer.V)((dragLayerState=>({itemType:dragLayerState.getItemType(),item:dragLayerState.getItem(),isDragging:dragLayerState.isDragging(),initialOffset:dragLayerState.getInitialSourceClientOffset(),currentOffset:dragLayerState.getClientOffset()})));return isDragging?(0,jsx_runtime.jsx)("div",{style:layerStyles,children:(0,jsx_runtime.jsx)("div",{className:"bookmark-outline-single-container preview",style:getItemStyles(initialOffset,currentOffset),children:(()=>{if(!item)return null;const{dragPortfolioItem}=item;return itemType===dnd.ll.PORTFOLIO?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:dragPortfolioItem.name}):null})()})}):null};PortfolioDragLayer.__docgenInfo={description:"",methods:[],displayName:"PortfolioDragLayer"};var DataElementWrapper=__webpack_require__("./src/components/DataElementWrapper/index.js"),dataElement=__webpack_require__("./src/constants/dataElement.js"),device=__webpack_require__("./src/helpers/device.js"),TabManager=__webpack_require__("./src/helpers/TabManager.js"),portfolio=__webpack_require__("./src/helpers/portfolio.js"),core=__webpack_require__("./src/core/index.js"),outlineFlyoutHelper=(__webpack_require__("./src/constants/bookmarksOutlinesShared.scss"),__webpack_require__("./src/components/PortfolioPanel/PortfolioPanel.scss"),__webpack_require__("./src/helpers/outlineFlyoutHelper.js"));const PortfolioPanel_PortfolioPanel=()=>{const[isDisabled,tabManager,portfolioFiles]=(0,es.d4)((state=>[selectors.A.isElementDisabled(state,dataElement.A.PORTFOLIO_PANEL),selectors.A.getTabManager(state),selectors.A.getPortfolio(state)]),es.bN),dispatch=(0,es.wA)(),[t]=(0,useTranslation.B)(),[activePortfolioItem,setActivePortfolioItem]=(0,react.useState)(null),[isAddingNewFolder,setAddingNewFolder]=(0,react.useState)(!1),fileInputRef=(0,react.useRef)(null),onAddFile=()=>{fileInputRef?.current?.click()},refreshPortfolio=async()=>{dispatch(actions.A.setPortfolio(await(0,portfolio.Gi)())),setAddingNewFolder(!1)},movePortfolioInward=(dragItem,dropItem)=>{console.log(dragItem.name,"Inward",dropItem.name)},moveFileInArray=async(portfolioFiles,dragItemId,dropItemId,moveDirection)=>{const fileArray=[...portfolioFiles],fromIndex=fileArray.findIndex((file=>file.id===dragItemId)),dropItemIndex=fileArray.findIndex((file=>file.id===dropItemId));let moveToIndex=dropItemIndex;moveDirection===dnd.V7.ABOVE_TARGET&&fromIndex<dropItemIndex&&(moveToIndex=dropItemIndex-1),moveDirection===dnd.V7.BELOW_TARGET&&fromIndex>dropItemIndex&&(moveToIndex=dropItemIndex+1),fileArray.splice(moveToIndex,0,fileArray.splice(fromIndex,1)[0]);for(const[index,file]of fileArray.entries())file.order!==index&&await(0,portfolio.Kz)(file.id,index)},movePortfolio=async(fileId,direction)=>{const portfolioFiles=await(0,portfolio.Gi)(),fromIndex=portfolioFiles.findIndex((file=>file.id===fileId));if(0===fromIndex&&direction===outlineFlyoutHelper.N.MOVE_UP||fromIndex===portfolioFiles.length-1&&direction===outlineFlyoutHelper.N.MOVE_DOWN)return;const moveToIndex=direction===outlineFlyoutHelper.N.MOVE_UP?fromIndex-1:fromIndex+1;portfolioFiles.splice(moveToIndex,0,portfolioFiles.splice(fromIndex,1)[0]);for(const[index,file]of portfolioFiles.entries())file.order!==index&&await(0,portfolio.Kz)(file.id,index);await refreshPortfolio()},movePortfolioBeforeTarget=(0,react.useCallback)((async(dragItemId,dropItemId)=>{await moveFileInArray(portfolioFiles,dragItemId,dropItemId,dnd.V7.ABOVE_TARGET),refreshPortfolio()}),[portfolioFiles]),movePortfolioAfterTarget=(0,react.useCallback)((async(dragItemId,dropItemId)=>{await moveFileInArray(portfolioFiles,dragItemId,dropItemId,dnd.V7.BELOW_TARGET),refreshPortfolio()}),[portfolioFiles]);return isDisabled?null:(0,jsx_runtime.jsxs)(DataElementWrapper.A,{className:"Panel PortfolioPanel bookmark-outline-panel",dataElement:dataElement.A.PORTFOLIO_PANEL,children:[(0,jsx_runtime.jsxs)("div",{className:"bookmark-outline-panel-header",children:[(0,jsx_runtime.jsx)("h2",{className:"header-title",children:t("portfolio.portfolioPanelTitle")}),(0,jsx_runtime.jsxs)("div",{className:"portfolio-panel-control",children:[(0,jsx_runtime.jsx)(Button.A,{className:"portfolio-panel-control-button",dataElement:dataElement.A.PORTFOLIO_ADD_FILE,img:"icon-add-file",title:t("portfolio.addFile"),disabled:isAddingNewFolder,onClick:onAddFile}),(0,jsx_runtime.jsx)("input",{ref:fileInputRef,style:{display:"none"},type:"file",onChange:event=>{(async e=>{const files=e.target.files;if(1===files.length){const file=files[0];if(portfolioFiles.some((item=>item.name===file.name))){const warning={message:t("portfolio.fileAlreadyExistsMessage",{fileName:file.name}),title:t("portfolio.fileAlreadyExists"),confirmBtnText:t("portfolio.reselect"),onConfirm:()=>onAddFile()};dispatch(actions.A.showWarningMessage(warning))}else{const doc=core.A.getDocument();if(doc){const pdfDoc=await doc.getPDFDoc();pdfDoc&&(await(0,portfolio.sM)(pdfDoc,file),refreshPortfolio())}}}})(event),event.target.value=null}})]})]}),(0,jsx_runtime.jsx)(PortfolioContext.A.Provider,{value:{activePortfolioItem,setActivePortfolioItem,isPortfolioItemActive:portfolioItem=>portfolioItem?.id===activePortfolioItem,isAddingNewFolder,setAddingNewFolder,addNewFolder:name=>{name||(name=t("message.untitled")),refreshPortfolio()},renamePortfolioItem:async(id,newName)=>{await(0,portfolio.fm)(id,newName),refreshPortfolio()},removePortfolioItem:id=>{const fileToRemove=portfolioFiles.find((file=>file.id===id)),warning={message:t("portfolio.deletePortfolio",{fileName:fileToRemove.name}),title:t("action.delete"),confirmBtnText:t("action.delete"),onConfirm:async()=>{await(0,portfolio.gX)(id),refreshPortfolio()}};dispatch(actions.A.showWarningMessage(warning))},openPortfolioItem:portfolioItem=>{(0,portfolio.zU)(portfolioItem.extension)&&(dispatch((0,TabManager.Cf)()),dispatch(actions.A.addPortfolioTab(portfolioItem)))},downloadPortfolioItem:async portfolioItem=>{dispatch(actions.A.openElement(dataElement.A.LOADING_MODAL)),await(0,portfolio.x6)(portfolioItem),dispatch(actions.A.closeElement(dataElement.A.LOADING_MODAL))},refreshPortfolio,isNameDuplicated:(newName,id)=>portfolioFiles.filter((file=>file.id!==id)).some((file=>file.name===newName)),tabManager},children:(0,jsx_runtime.jsxs)(DndProvider.Q,{backend:device.Xb?esm.A:dist_esm.t2,children:[(0,jsx_runtime.jsx)(PortfolioDragLayer,{}),(0,jsx_runtime.jsxs)("div",{className:"portfolio-panel-list",children:[portfolioFiles.map((item=>(0,jsx_runtime.jsx)(components_PortfolioItem,{portfolioItem:item,movePortfolioInward,movePortfolioBeforeTarget,movePortfolioAfterTarget,movePortfolio},item.id))),isAddingNewFolder&&(0,jsx_runtime.jsx)(DataElementWrapper.A,{className:"bookmark-outline-single-container editing",children:(0,jsx_runtime.jsx)(components_PortfolioItemContent,{name:"",id:"0",isFolder:!0,isAdding:!0})})]})]})})]})},components_PortfolioPanel_PortfolioPanel=PortfolioPanel_PortfolioPanel;PortfolioPanel_PortfolioPanel.__docgenInfo={description:"",methods:[],displayName:"PortfolioPanel"}},"./src/components/PortfolioPanel/PortfolioPanel.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/PortfolioPanel/PortfolioPanel.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/constants/dnd.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{V7:()=>DropLocation,ll:()=>ItemTypes,n0:()=>BUFFER_ROOM});const ItemTypes={OUTLINE:"outline",PORTFOLIO:"portfolio"},DropLocation={ON_TARGET_HORIZONTAL_MIDPOINT:"onTargetHorizontalMidPoint",ABOVE_TARGET:"aboveTarget",BELOW_TARGET:"belowTarget",INITIAL:"initial"},BUFFER_ROOM=8}}]);