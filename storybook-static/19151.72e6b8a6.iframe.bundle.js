(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[19151],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/Model3DModal/Model3DModal.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".open.Model3DModal{visibility:visible}.closed.Model3DModal{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.Model3DModal .footer .modal-button.confirm:hover{background:var(--primary-button-hover);border-color:var(--primary-button-hover);color:var(--gray-0)}.Model3DModal .footer .modal-button.confirm{background:var(--primary-button);border-color:var(--primary-button);color:var(--primary-button-text)}.Model3DModal .footer .modal-button.confirm.disabled{cursor:default;background:var(--disabled-button-color);color:var(--primary-button-text)}.Model3DModal .footer .modal-button.confirm.disabled span{color:var(--primary-button-text)}.Model3DModal .footer .modal-button.cancel:hover,.Model3DModal .footer .modal-button.secondary-btn-custom:hover{border:none;box-shadow:inset 0 0 0 1px var(--blue-6);color:var(--blue-6)}.Model3DModal .footer .modal-button.cancel,.Model3DModal .footer .modal-button.secondary-btn-custom{border:none;box-shadow:inset 0 0 0 1px var(--primary-button);color:var(--primary-button)}.Model3DModal .footer .modal-button.cancel.disabled,.Model3DModal .footer .modal-button.secondary-btn-custom.disabled{cursor:default;border:none;box-shadow:inset 0 0 0 1px rgba(43,115,171,.5);color:rgba(43,115,171,.5)}.Model3DModal .footer .modal-button.cancel.disabled span,.Model3DModal .footer .modal-button.secondary-btn-custom.disabled span{color:rgba(43,115,171,.5)}.Model3DModal{position:fixed;inset-inline-start:0;inset-block-end:0;z-index:100;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:var(--modal-negative-space)}.Model3DModal .modal-container .wrapper .modal-content{padding:10px}.Model3DModal .footer{display:flex;flex-direction:row;justify-content:flex-end;width:100%;margin-top:13px}.Model3DModal .footer.modal-footer{padding:16px;margin:0;border-top:1px solid var(--divider)}.Model3DModal .footer .modal-button{display:flex;justify-content:center;align-items:center;padding:6px 18px;margin:8px 0 0;width:auto;width:-moz-fit-content;width:fit-content;border-radius:4px;height:30px;cursor:pointer}.Model3DModal .footer .modal-button.confirm{margin-inline-start:4px}.Model3DModal .footer .modal-button.secondary-btn-custom{border-radius:4px;padding:2px 20px 4px;cursor:pointer}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Model3DModal .footer .modal-button{padding:23px 8px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Model3DModal .footer .modal-button{padding:23px 8px}}.Model3DModal .swipe-indicator{background:var(--swipe-indicator-bg);border-radius:2px;height:4px;width:38px;position:absolute;inset-block-start:12px;margin-inline-start:auto;margin-inline-end:auto;inset-inline-start:0;inset-inline-end:0}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Model3DModal .swipe-indicator{display:none}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .Model3DModal .swipe-indicator{display:none}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Model3DModal .swipe-indicator{width:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Model3DModal .swipe-indicator{width:32px}}.Model3DModal .container{overflow-y:auto;max-height:100%}@media(max-height:500px){.App:not(.is-web-component) .Model3DModal .container,.Model3DModal .App:not(.is-web-component) .container{overflow:auto;max-height:100%}}@container (max-height: 500px){.App.is-web-component .Model3DModal .container,.Model3DModal .App.is-web-component .container{overflow:auto;max-height:100%}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Model3DModal .container,.Model3DModal .App:not(.is-in-desktop-only-mode):not(.is-web-component) .container{width:100%;position:fixed;inset-inline-start:0;inset-block-end:0;padding-top:4px;min-width:100px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Model3DModal .container,.Model3DModal .App.is-web-component:not(.is-in-desktop-only-mode) .container{width:100%;position:fixed;inset-inline-start:0;inset-block-end:0;padding-top:4px;min-width:100px}}.Model3DModal .container{display:flex;flex-direction:column;justify-content:center;align-items:center;width:500px;border-radius:4px;padding:8px;box-shadow:0 0 3px 0 var(--document-box-shadow);background:var(--component-background)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Model3DModal .container{padding-top:24px;padding-bottom:16px;padding-inline-start:24px;padding-inline-end:24px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Model3DModal .container{padding-top:24px;padding-bottom:16px;padding-inline-start:24px;padding-inline-end:24px}}.Model3DModal .container .inputWrapper>label{width:100%}.Model3DModal .container .divider{height:1px;width:100%;background:var(--divider);margin:16px 0}.Model3DModal .container input{margin-top:8px;width:100%;height:30px;padding-inline-start:8px;border:1px solid var(--border);border-radius:4px;color:var(--text-color);padding-bottom:6px;padding-inline-end:42px;padding-top:4px}.Model3DModal .container input:focus{outline:none;border:1px solid var(--focus-border)}.Model3DModal .container input::-moz-placeholder{color:var(--placeholder-text)}.Model3DModal .container input::placeholder{color:var(--placeholder-text)}.Model3DModal .container input::-webkit-inner-spin-button,.Model3DModal .container input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.Model3DModal .container input[type=number]{-moz-appearance:textfield}.Model3DModal .container form{width:100%}.Model3DModal .container .error{width:100%;color:red;margin:5px 0}.Model3DModal .container .Button{display:flex;justify-content:center;align-items:center;color:var(--primary-button-text);font-weight:600;padding:6px 18px;margin-top:8px;margin-inline-start:5px;width:auto;width:-moz-fit-content;width:fit-content;background:var(--primary-button);border-radius:4px;height:30px;cursor:pointer}.Model3DModal .container .Button:hover{background:var(--primary-button-hover)}.Model3DModal .container .Button.disabled{background:var(--gray-6);border-color:var(--gray-6);cursor:not-allowed}.model-3D-btn{padding:0;border:none;background-color:transparent;border:1px solid var(--icon-color);width:162px;height:26px;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer;margin-inline-end:8px}:host(:not([data-tabbing=true])) .model-3D-btn,html:not([data-tabbing=true]) .model-3D-btn{outline:none}.model-3D-btn img{max-width:100%;max-height:100%}.model-3D-btn.interactable:hover{background:var(--tools-overlay-button-hover)}.model-3D-btn.active,.model-3D-btn.interactable.active{background:var(--tools-overlay-button-active)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .model-3D-btn.add-btn{width:auto;padding-inline-start:0;width:190px;height:30px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .model-3D-btn.add-btn{width:auto;padding-inline-start:0;width:190px;height:30px}}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./src/components/Model3DModal/Model3DModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),react_i18next__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),components_Button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Button/index.js"),core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/core/index.js"),_Choice_Choice__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Choice/Choice.js"),react_swipeable__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-swipeable/es/index.js");__webpack_require__("./src/components/Model3DModal/Model3DModal.scss");const Model3DModal=({fileInput,urlInput,error,setError,file,setFile,url,setURL,closeModal,isDisabled,isOpen})=>{const[t]=(0,react_i18next__WEBPACK_IMPORTED_MODULE_8__.B)(),[typeOfInput,setTypeOfInput]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("url"),[base64,setBase64]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),urlInputRadio=react__WEBPACK_IMPORTED_MODULE_1__.createRef(),fileInputRadio=react__WEBPACK_IMPORTED_MODULE_1__.createRef(),draw3DAnnotation=e=>{const model3DAnnotation=new window.Core.Annotations.Model3DAnnotation;model3DAnnotation.set3DData(base64),"url"===typeOfInput&&model3DAnnotation.set3DData(url,"url");const zoom=core__WEBPACK_IMPORTED_MODULE_4__.A.getZoom();model3DAnnotation.X=e.layerX/zoom,model3DAnnotation.Y=e.layerY/zoom,model3DAnnotation.Width=300,model3DAnnotation.Height=300,model3DAnnotation.Author=core__WEBPACK_IMPORTED_MODULE_4__.A.getCurrentUser(),model3DAnnotation.setPageNumber(core__WEBPACK_IMPORTED_MODULE_4__.A.getCurrentPage()),core__WEBPACK_IMPORTED_MODULE_4__.A.addAnnotations([model3DAnnotation]),core__WEBPACK_IMPORTED_MODULE_4__.A.drawAnnotationsFromList([model3DAnnotation]),core__WEBPACK_IMPORTED_MODULE_4__.A.removeEventListener("click",draw3DAnnotation)},getExtension=fileName=>fileName.split(".").pop(),drawModel3DHandler=async e=>{if(e.preventDefault(),"url"===typeOfInput){if("glb"!==getExtension(url))return void setError({...error,urlError:t("Model3D.formatError")});const base64StrGenerator=async url=>await(url=>new Promise((function(resolve){const xhr=new XMLHttpRequest;xhr.onload=async function(){const reader=new FileReader;reader.onloadend=function(){resolve(reader.result)},await reader.readAsDataURL(xhr.response)},xhr.open("GET",url),xhr.responseType="blob",xhr.send()})))(url);setBase64(await base64StrGenerator(url))}else if("file"===typeOfInput&&"glb"!==getExtension(file.name))return void setError({...error,urlError:t("Model3D.formatError")});closeModal(),core__WEBPACK_IMPORTED_MODULE_4__.A.setToolMode("Pan");core__WEBPACK_IMPORTED_MODULE_4__.A.getViewerElement().style.cursor="crosshair",core__WEBPACK_IMPORTED_MODULE_4__.A.addEventListener("click",draw3DAnnotation)},modalClass=classnames__WEBPACK_IMPORTED_MODULE_2___default()({Modal:!0,Model3DModal:!0,open:isOpen,closed:!isOpen}),urlInputElement=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{className:"urlInput",type:"url",ref:urlInput,value:url,onChange:e=>(url=>{setTypeOfInput("url"),setURL(url.trim()),setError(""),fileInput.current.value=null})(e.target.value),onFocus:()=>urlInputRadio.current.click(),placeholder:t("Model3D.enterurl")}),fileInputElement=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"file",ref:fileInput,onChange:async event=>{setTypeOfInput("file");const file=event.target.files[0];setFile(file);await(file=>new Promise((()=>{const reader=new FileReader;reader.readAsDataURL(file),reader.onload=()=>setBase64(reader.result)})))(file),setError({}),setURL("")},accept:".glb",onFocus:()=>fileInputRadio.current.click()});return isDisabled?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_swipeable__WEBPACK_IMPORTED_MODULE_6__.Hx,{onSwipedUp:closeModal,onSwipedDown:closeModal,preventDefaultTouchmoveEvent:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:modalClass,"data-element":"Model3DModal",onMouseDown:closeModal,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"container",onMouseDown:e=>e.stopPropagation(),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"swipe-indicator"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{onSubmit:drawModel3DHandler,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"col",children:t("Model3D.enterurlOrLocalFile")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Choice_Choice__WEBPACK_IMPORTED_MODULE_5__.A,{dataElement:"3DAnnotationLink",id:"3D-annotation-link",name:"3DInput",className:"inputWrapper",ref:urlInputRadio,radio:!0,label:urlInputElement,center:!0}),error?.urlError&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"error",children:["* ",error.urlError]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Choice_Choice__WEBPACK_IMPORTED_MODULE_5__.A,{dataElement:"3DAnnotationLocalFile",id:"3D-annotation-file",name:"3DInput",className:"inputWrapper",ref:fileInputRadio,radio:!0,label:fileInputElement,center:!0}),error?.fileError&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"error",children:["* ",error.fileError]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_3__.A,{dataElement:"linkSubmitButton",label:t("action.draw"),onClick:drawModel3DHandler})]})]})})})},__WEBPACK_DEFAULT_EXPORT__=Model3DModal;Model3DModal.__docgenInfo={description:"",methods:[],displayName:"Model3DModal"}},"./src/components/Model3DModal/Model3DModal.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/Model3DModal/Model3DModal.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/Model3DModal/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>components_Model3DModal});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),selectors=__webpack_require__("./src/redux/selectors/index.js"),actions=__webpack_require__("./src/redux/actions/index.js"),core=__webpack_require__("./src/core/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),Model3DModal=__webpack_require__("./src/components/Model3DModal/Model3DModal.js");function Model3DModalContainer(props){const{close3DModal,...rest}=props,newProps={...rest,closeModal:(0,react.useCallback)((()=>{close3DModal()}),[close3DModal])};return(0,jsx_runtime.jsx)(Model3DModal.A,{...newProps})}const Model3DModal_Model3DModalContainer=Model3DModalContainer;Model3DModalContainer.__docgenInfo={description:"",methods:[],displayName:"Model3DModalContainer"};var dataElement=__webpack_require__("./src/constants/dataElement.js");function Model3DModalRedux(props){const dispatch=(0,es.wA)(),[url,setURL]=(0,react.useState)(""),[file,setFile]=(0,react.useState)({}),[error,setError]=(0,react.useState)({fileError:"",urlError:""}),fileInput=react.createRef(),urlInput=react.createRef(),[isDisabled,isOpen]=(0,es.d4)((state=>[selectors.A.isElementDisabled(state,dataElement.A.MODEL3D_MODAL),selectors.A.isElementOpen(state,dataElement.A.MODEL3D_MODAL)]));(0,react.useEffect)((()=>{const onToolUpdated=()=>{dispatch(actions.A.closeElement(dataElement.A.MODEL3D_MODAL))};return core.A.addEventListener("toolUpdated",onToolUpdated),()=>core.A.removeEventListener("toolUpdated",onToolUpdated)}),[]),(0,react.useEffect)((()=>{isOpen&&(urlInput.current.focus(),dispatch(actions.A.closeElements([dataElement.A.PRINT_MODAL,dataElement.A.LOADING_MODAL,dataElement.A.PROGRESS_MODAL,dataElement.A.ERROR_MODAL,dataElement.A.OPEN_FILE_MODAL])))}),[dispatch,isOpen]);const newProps={...props,isDisabled,isOpen,close3DModal:()=>{dispatch(actions.A.closeElement(dataElement.A.MODEL3D_MODAL)),setURL(""),setFile({}),setError({}),fileInput.current&&(fileInput.current.value=null)},fileInput,urlInput,error,setError,file,setFile,url,setURL};return(0,jsx_runtime.jsx)(Model3DModal_Model3DModalContainer,{...newProps})}const Model3DModal_Model3DModalRedux=Model3DModalRedux;Model3DModalRedux.__docgenInfo={description:"",methods:[],displayName:"Model3DModalRedux"};const components_Model3DModal=Model3DModal_Model3DModalRedux}}]);