(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[218],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/PrintModal/WatermarkModal/WatermarkModal.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".Watermark{position:fixed;left:0;bottom:0;z-index:100;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:var(--modal-negative-space)}.Watermark .modal-container .wrapper .modal-content{padding:10px}.Watermark .footer{display:flex;flex-direction:row;justify-content:flex-end;width:100%;margin-top:13px}.Watermark .footer.modal-footer{padding:16px;margin:0;border-top:1px solid var(--divider)}.Watermark .footer .modal-button{display:flex;justify-content:center;align-items:center;padding:6px 18px;margin:8px 0 0;width:auto;width:-moz-fit-content;width:fit-content;border-radius:4px;height:30px;cursor:pointer}.Watermark .footer .modal-button.cancel{color:var(--secondary-button-text);border:1px solid var(--secondary-button-text)}.Watermark .footer .modal-button.cancel:hover{background-color:var(--document-background-color);color:var(--secondary-button-hover);border:1px solid var(--secondary-button-hover)}.Watermark .footer .modal-button.confirm{margin-left:4px;color:var(--primary-button-text);font-weight:600;background:var(--primary-button)}.Watermark .footer .modal-button.confirm:hover{background:var(--primary-button-hover)}.Watermark .footer .modal-button.confirm.disabled{background:var(--primary-button)!important;opacity:.5}.Watermark .footer .modal-button.secondary-btn-custom{border-radius:4px;border:1px solid var(--primary-button);color:var(--primary-button);padding:2px 20px 4px;cursor:pointer;background-color:#fff}.Watermark .footer .modal-button.secondary-btn-custom:hover{color:var(--secondary-button-hover)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .footer .modal-button{padding:23px 8px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .footer .modal-button{padding:23px 8px}}.Watermark .swipe-indicator{background:var(--divider);border-radius:2px;height:4px;width:38px;position:absolute;top:12px;margin-left:auto;margin-right:auto;left:0;right:0}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .swipe-indicator{display:none}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .swipe-indicator{display:none}}.open.Watermark{visibility:visible}.closed.Watermark{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}.Watermark{z-index:110}.Watermark .StylePopup{position:absolute;margin-top:-140px;background:var(--preset-background);display:flex;flex-direction:column;justify-content:center;border-radius:0 0 4px 4px;box-shadow:0 0 3px 0 var(--box-shadow);align-items:center}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.Watermark .StylePopup{margin-top:0}}.Watermark .StylePopup .ColorPalette{padding:10px}.Watermark .style-container{display:flex}.Watermark .style-container .Button{margin-right:8px}.Watermark .style-container .Button:hover{background:var(--popup-button-hover)}.Watermark .style-container .Button.active{background:var(--popup-button-active)}.Watermark .form-content-container{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:16px;width:100%}.Watermark .form-content-container form{width:auto}@media(min-width:315px)and (max-width:480px){.Watermark .form-content-container form{width:auto}}.Watermark .watermark-settings{display:flex;flex-direction:column;width:330px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .watermark-settings{width:100%}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .watermark-settings{width:100%}}.Watermark .watermark-settings .form-field{display:flex;flex-direction:column;margin:16px 0 16px 16px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .watermark-settings .form-field{margin-left:0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .watermark-settings .form-field{margin-left:0}}.Watermark .watermark-settings .form-field label{margin-bottom:8px;font-weight:700}.Watermark .watermark-settings .form-field .text-input,.Watermark .watermark-settings .form-field select{height:32px}.Watermark .watermark-settings .form-field.opacity-slider{display:flex}.Watermark .watermark-settings .form-field.opacity-slider .slider-property{font-weight:700}.Watermark .watermark-settings .form-field.opacity-slider .slider-svg-container{margin:0;height:30px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.Watermark .watermark-settings .form-field.opacity-slider{align-items:stretch}}.Watermark .watermark-settings .form-field .Dropdown__wrapper .Dropdown{text-align:left;height:32px}.Watermark .watermark-settings .form-field .Dropdown__wrapper .Dropdown__items{width:100%}.Watermark .watermark-settings .form-field .Dropdown__wrapper#location .Dropdown__items{z-index:81}.Watermark .watermark-settings .form-field .FontSizeDropdown{padding:2px;height:32px}.Watermark .watermark-settings .form-field .FontSizeDropdown .icon-button{cursor:pointer;width:14px;height:14px}.Watermark .watermark-settings .form-field .FontSizeDropdown .icon-button>.Icon{color:var(--icon-color);width:12px;height:16px;margin-top:2px}.Watermark .watermark-settings .colorSelect{width:18px;height:18px;margin:7px 8px 7px 7px;border-radius:10000000px}.Watermark .watermark-settings .white-color{border:1px solid var(--white-color-palette-border)}.Watermark .watermark-settings .slider-input-field{height:32px}.Watermark .canvas-container{display:flex;justify-content:center;align-items:center;width:500px;height:436px;background-color:var(--watermark-preview-background);border:1px solid var(--lighter-border)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .canvas-container{display:none}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .canvas-container{display:none}}.Watermark .canvas-container canvas{border:1px solid var(--border)!important;width:325px!important}.Watermark .divider{height:1px;width:100%;background:var(--divider)}.Watermark .divider.separator{margin-top:16px}.Watermark .button-container{display:flex;justify-content:space-between;align-items:baseline;width:100%;padding:16px}.Watermark .button-container .button{display:flex;justify-content:center;align-items:center;padding:6px 18px;width:auto;width:-moz-fit-content;width:fit-content;border-radius:4px;border:0;height:32px;cursor:pointer;font-size:13px}.Watermark .button-container .button.ok{color:var(--primary-button-text);background:var(--primary-button)}.Watermark .button-container .button.ok:hover{background:var(--primary-button-hover)}.Watermark .button-container .button.cancel{color:var(--secondary-button-text);background:none}.Watermark .button-container .button.cancel:hover{color:var(--secondary-button-hover)}.Watermark .button-container .reset-settings{background-color:transparent;cursor:pointer;background:none;border:0;color:var(--secondary-button-text);display:flex;font-size:13px;padding:6px 18px}:host(:not([data-tabbing=true])) .Watermark .button-container .reset-settings,html:not([data-tabbing=true]) .Watermark .button-container .reset-settings{outline:none}.Watermark .button-container .reset-settings:hover{color:var(--secondary-button-hover)}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./src/components/PrintModal/WatermarkModal/WatermarkModal.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/PrintModal/WatermarkModal/WatermarkModal.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/PrintModal/WatermarkModal/WatermarkModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>PrintModal_WatermarkModal_WatermarkModal});var ColorPalette=__webpack_require__("./src/components/ColorPalette/index.js"),Slider=__webpack_require__("./src/components/Slider/index.js"),slider=__webpack_require__("./src/constants/slider.js"),core=__webpack_require__("./src/core/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("./node_modules/react/index.js"),withTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/withTranslation.js"),Button=__webpack_require__("./src/components/Button/index.js"),FontSizeDropdown=__webpack_require__("./src/components/FontSizeDropdown/index.js"),FONTS=["Arial","Times New Roman","Tahoma ","Trebuchet MS","Courier","Verdana","Georgia","Palatino","Comic Sans MS","Arial Black","Impact"],ModalWrapper=(__webpack_require__("./src/components/PrintModal/WatermarkModal/WatermarkModal.scss"),__webpack_require__("./src/components/ModalWrapper/index.js")),DataElementWrapper=__webpack_require__("./src/components/DataElementWrapper/index.js"),Dropdown=__webpack_require__("./src/components/Dropdown/index.js");function _assert_this_initialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _get_prototype_of(o){return _get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_get_prototype_of(o)}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))),ownKeys.forEach((function(key){_define_property(target,key,source[key])}))}return target}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})),target}function _possible_constructor_return(self,call){return!call||"object"!==function _type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}(call)&&"function"!=typeof call?_assert_this_initialized(self):call}function _set_prototype_of(o,p){return _set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){return o.__proto__=p,o},_set_prototype_of(o,p)}function _create_super(Derived){var hasNativeReflectConstruct=function _is_native_reflect_construct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_get_prototype_of(Derived);if(hasNativeReflectConstruct){var NewTarget=_get_prototype_of(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possible_constructor_return(this,result)}}function _ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}var _obj,_obj1,WATERMARK_LOCATIONS={CENTER:"center",TOP_LEFT:"topLeft",TOP_RIGHT:"topRight",TOP_CENTER:"topCenter",BOT_LEFT:"bottomLeft",BOT_RIGHT:"bottomRight",BOT_CENTER:"bottomCenter"},FORM_FIELD_KEYS_fontSize="fontSize",FORM_FIELD_KEYS_text="text",FORM_FIELD_KEYS_color="color",FORM_FIELD_KEYS_opacity="opacity",FORM_FIELD_KEYS_font="font",FORM_FIELD_KEYS_isBolded="isBolded",FORM_FIELD_KEYS_isItalic="isItalic",FORM_FIELD_KEYS_isUnderlined="isUnderlined",DEFAULT_VALS=(_define_property(_obj={},"location",WATERMARK_LOCATIONS.CENTER),_define_property(_obj,FORM_FIELD_KEYS_fontSize,48),_define_property(_obj,FORM_FIELD_KEYS_text,""),_define_property(_obj,FORM_FIELD_KEYS_color,new window.Core.Annotations.Color(228,66,52)),_define_property(_obj,FORM_FIELD_KEYS_opacity,100),_define_property(_obj,FORM_FIELD_KEYS_font,FONTS[0]),_define_property(_obj,FORM_FIELD_KEYS_isBolded,!1),_define_property(_obj,FORM_FIELD_KEYS_isItalic,!1),_define_property(_obj,FORM_FIELD_KEYS_isUnderlined,!1),_obj),WATERMARK_API_LOCATIONS=(_define_property(_obj1={},WATERMARK_LOCATIONS.CENTER,"diagonal"),_define_property(_obj1,WATERMARK_LOCATIONS.TOP_LEFT,"headerLeft"),_define_property(_obj1,WATERMARK_LOCATIONS.TOP_RIGHT,"headerRight"),_define_property(_obj1,WATERMARK_LOCATIONS.TOP_CENTER,"headerCenter"),_define_property(_obj1,WATERMARK_LOCATIONS.BOT_LEFT,"footerLeft"),_define_property(_obj1,WATERMARK_LOCATIONS.BOT_RIGHT,"footerRight"),_define_property(_obj1,WATERMARK_LOCATIONS.BOT_CENTER,"footerCenter"),_obj1),WatermarkModal_WatermarkModal=function(_superClass){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_set_prototype_of(subClass,superClass)}(WatermarkModal,_superClass);var _super=_create_super(WatermarkModal);function WatermarkModal(props){var _this;!function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,WatermarkModal),_define_property(_assert_this_initialized(_this=_super.call(this,props)),"handleWatermarkOnVisibilityChanged",(function(){if(_this.props.isVisible){var _this1=_assert_this_initialized(_this);_this.setState({locationSettings:_this.state.previousLocationSettings},_async_to_generator((function(){return _ts_generator(this,(function(_state){switch(_state.label){case 0:return[4,core.A.getWatermark()];case 1:return _this1.preExistingWatermark=_state.sent(),_this1.addWatermarks(),[2]}}))})))}else _this.removeWatermarkCreatedByModal(),core.A.setWatermark(_this.preExistingWatermark)})),_define_property(_assert_this_initialized(_this),"addWatermarks",(function(){var watermarkOptions=_this.createWatermarks();core.A.setWatermark(watermarkOptions);var pageHeight=core.A.getPageHeight(_this.props.pageIndexToView+1),desiredZoomForWidth=300/core.A.getPageWidth(_this.props.pageIndexToView+1),desiredZoomForHeight=300/pageHeight,desiredZoom=Math.min(desiredZoomForHeight,desiredZoomForWidth);core.A.getDocument().loadCanvas({pageNumber:_this.props.pageIndexToView+1,zoom:desiredZoom,drawComplete:function(canvas){var nodes=_this.canvasContainerRef.current.childNodes;nodes&&nodes.length>0&&_this.canvasContainerRef.current.removeChild(nodes[0]),canvas.style.border="1px solid black",canvas.style.height=_this.canvasContainerRef.current.style.height,_this.canvasContainerRef.current.appendChild(canvas)}})})),_define_property(_assert_this_initialized(_this),"constructWatermarkOption",(function(value){var fontStyles=[];return value.isBolded&&fontStyles.push(core.A.getFontStyles().BOLD),value.isItalic&&fontStyles.push(core.A.getFontStyles().ITALIC),value.isUnderlined&&fontStyles.push(core.A.getFontStyles().UNDERLINE),{fontSize:value.fontSize,fontFamily:value.font,color:value.color.toString(),opacity:value.opacity,text:value.text,fontStyles}})),_define_property(_assert_this_initialized(_this),"createWatermarks",(function(){var watermarks={};return Object.keys(WATERMARK_LOCATIONS).forEach((function(key){var temp=_this.constructWatermarkOption(_this.state.locationSettings[key]);watermarks[WATERMARK_API_LOCATIONS[WATERMARK_LOCATIONS[key]]]=temp})),watermarks})),_define_property(_assert_this_initialized(_this),"removeWatermarkCreatedByModal",(function(){core.A.setWatermark({})})),_define_property(_assert_this_initialized(_this),"closeModal",(function(){_this.props.modalClosed()})),_define_property(_assert_this_initialized(_this),"handleInputChange",(function(key,value){var currLocationSettings=_object_spread({},_this.state.locationSettings),currSelectedLocation=_this.getCurrentSelectedLocation();currLocationSettings[currSelectedLocation]=_object_spread_props(_object_spread({},currLocationSettings[currSelectedLocation]),_define_property({},key,value)),_this.setState({locationSettings:currLocationSettings},(function(){_this.addWatermarks()}))})),_define_property(_assert_this_initialized(_this),"resetForm",(function(event){event.preventDefault();var locationSettings=_this.resetLocationSettings();_this.setState({locationSettings},(function(){return _this.addWatermarks()}))})),_define_property(_assert_this_initialized(_this),"onOkPressed",(function(){_this.setState({previousLocationSettings:_this.state.locationSettings},(function(){_this.props.modalClosed();var watermarkOptions=_this.createWatermarks();_this.props.formSubmitted(watermarkOptions)}))})),_define_property(_assert_this_initialized(_this),"getCirclePosn",(function(lineLength,opacity){return opacity*lineLength+slider.bg})),_define_property(_assert_this_initialized(_this),"setColorPaletteVisibility",(function(visible){_this.setState({isColorPaletteVisible:visible})})),_define_property(_assert_this_initialized(_this),"onLocationChanged",(function(key){var currLocationSettings=_object_spread({},_this.state.locationSettings);Object.keys(currLocationSettings).forEach((function(locationKey){var locationSetting=currLocationSettings[locationKey];locationSetting=_object_spread_props(_object_spread({},locationSetting),{isSelected:key===locationKey}),currLocationSettings[locationKey]=locationSetting})),_this.setState({locationSettings:currLocationSettings},(function(){_this.addWatermarks()}))})),_define_property(_assert_this_initialized(_this),"resetLocationSettings",(function(){var locationSettings={};return Object.keys(WATERMARK_LOCATIONS).forEach((function(key){var temp=_object_spread_props(_object_spread({},_extends({},function _object_destructuring_empty(o){if(null==o)throw new TypeError("Cannot destructure "+o);return o}(DEFAULT_VALS))),{isSelected:WATERMARK_LOCATIONS[key]===DEFAULT_VALS.location});locationSettings[key]=temp})),locationSettings})),_define_property(_assert_this_initialized(_this),"initializeLocationSettings",(function(){var locationSettings=_this.resetLocationSettings();return _this.props.watermarkLocations&&Object.keys(WATERMARK_LOCATIONS).forEach((function(key){var _this_props_watermarkLocations_WATERMARK_API_LOCATIONS_watermarkStrVal,watermarkStrVal=WATERMARK_LOCATIONS[key],tempWatermarkProps=null!==(_this_props_watermarkLocations_WATERMARK_API_LOCATIONS_watermarkStrVal=_this.props.watermarkLocations[WATERMARK_API_LOCATIONS[watermarkStrVal]])&&void 0!==_this_props_watermarkLocations_WATERMARK_API_LOCATIONS_watermarkStrVal&&_this_props_watermarkLocations_WATERMARK_API_LOCATIONS_watermarkStrVal;if(tempWatermarkProps){var temp=_this.constructWatermarkOption(tempWatermarkProps);locationSettings[key].text=temp.text;var _tempWatermarkProps_fontFamily,colorArray=tempWatermarkProps.color.slice(5).replace(")","").split(","),color=new window.Core.Annotations.Color(colorArray[0],colorArray[1],colorArray[2],colorArray[3]);locationSettings[key].color=color,locationSettings[key].opacity=temp.opacity,locationSettings[key].fontSize=temp.fontSize,tempWatermarkProps.fontStyles&&(locationSettings[key].isBolded=tempWatermarkProps.fontStyles.includes("BOLD"),locationSettings[key].isItalic=tempWatermarkProps.fontStyles.includes("ITALIC"),locationSettings[key].isUnderlined=tempWatermarkProps.fontStyles.includes("UNDERLINE"));var fontFamily=null!==(_tempWatermarkProps_fontFamily=tempWatermarkProps.fontFamily)&&void 0!==_tempWatermarkProps_fontFamily&&_tempWatermarkProps_fontFamily;fontFamily&&0!==fontFamily.trim().length||(locationSettings[key]=DEFAULT_VALS.font)}})),locationSettings})),_define_property(_assert_this_initialized(_this),"getKeyByValue",(function(object,value){return Object.keys(object).find((function(key){return object[key]===value}))})),_define_property(_assert_this_initialized(_this),"getCurrentSelectedLocation",(function(){return Object.keys(_this.state.locationSettings).find((function(locationKey){return _this.state.locationSettings[locationKey].isSelected}))})),_define_property(_assert_this_initialized(_this),"onColorChanged",(function(newColor){var currLocation=_this.getCurrentSelectedLocation(),currLocationSetting=_this.state.locationSettings[currLocation];currLocationSetting[FORM_FIELD_KEYS_color]=new window.Core.Annotations.Color(newColor.R,newColor.G,newColor.B);var locationSettings=_object_spread({},_this.state.locationSettings);currLocationSetting[FORM_FIELD_KEYS_text]||Object.keys(WATERMARK_LOCATIONS).forEach((function(location){var locationSetting=locationSettings[location];locationSetting[FORM_FIELD_KEYS_text]||(locationSetting[FORM_FIELD_KEYS_color]=new window.Core.Annotations.Color(newColor.R,newColor.G,newColor.B))})),_this.setState({locationSettings},(function(){_this.addWatermarks()}))}));var locationSettings=_this.initializeLocationSettings();return _this.preExistingWatermark=void 0,_this.state={isColorPaletteVisible:!1,locationSettings,previousLocationSettings:locationSettings,lockFocus:!1},_this.canvasContainerRef=react.createRef(),_this}return function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(WatermarkModal,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this=this;core.A.addEventListener("documentLoaded",this.closeModal),this.props.isVisible!==prevProps.isVisible&&(this.props.isVisible?this.setState({lockFocus:!0}):this.setState({lockFocus:!1}),this.setState({isColorPaletteVisible:!1},(function(){return _this.handleWatermarkOnVisibilityChanged()})))}},{key:"render",value:function render(){var _this=this;if(!this.props.isVisible)return null;var _this_props=this.props,t=_this_props.t,isCustomizableUI=_this_props.isCustomizableUI,currLocation=this.getCurrentSelectedLocation(),formInfo=this.state.locationSettings[currLocation],hexColor=formInfo[FORM_FIELD_KEYS_color].toHexString();return react.createElement(DataElementWrapper.A,{className:"Modal Watermark",id:"watermarkModal","data-element":"watermarkModal"},react.createElement(ModalWrapper.A,{isOpen:this.state.lockFocus,title:"option.watermark.addWatermark",closeButtonDataElement:"watermarkModalCloseButton",onCloseClick:this.closeModal,swipeToClose:!0,closeHandler:this.closeModal},react.createElement("div",{className:"swipe-indicator"}),react.createElement("div",{className:"form-content-container"},react.createElement("div",{className:"canvas-container",ref:this.canvasContainerRef}),react.createElement("div",{className:"watermark-settings"},react.createElement("form",{id:"form",onSubmit:function(e){return e.preventDefault()}},react.createElement("div",{className:"form-field"},react.createElement("label",{className:"section-label print-quality-section-label",htmlFor:"location"},t("option.watermark.location")),react.createElement(Dropdown.A,{id:"location",dataElement:"watermarkLocation",items:Object.keys(WATERMARK_LOCATIONS),getTranslationLabel:function(key){return t("option.watermark.locations.".concat(WATERMARK_LOCATIONS[key]))},currentSelectionKey:currLocation,onClickItem:this.onLocationChanged,width:314}),react.createElement("div",{className:"separator divider"})),react.createElement("div",{className:"form-field"},react.createElement("label",{htmlFor:"textInput"},t("option.watermark.text")),react.createElement("input",{className:"text-input",id:"textInput",value:formInfo[FORM_FIELD_KEYS_text],onChange:function(event){return _this.handleInputChange(FORM_FIELD_KEYS_text,event.target.value)},type:"text"})),react.createElement("div",{className:"form-field"},react.createElement("label",{htmlFor:"fonts"},t("option.watermark.font")),react.createElement(Dropdown.A,{id:"fonts",dataElement:"watermarkFont",items:FONTS,currentSelectionKey:formInfo[FORM_FIELD_KEYS_font],onClickItem:function(key){return _this.handleInputChange(FORM_FIELD_KEYS_font,key)},width:314})),react.createElement("div",{className:"form-field"},react.createElement("label",{htmlFor:"fontSize"},t("option.watermark.size")),react.createElement(FontSizeDropdown.A,{fontSize:formInfo[FORM_FIELD_KEYS_fontSize],key:"fontSize",fontUnit:"pt",onFontSizeChange:function(val){return _this.handleInputChange(FORM_FIELD_KEYS_fontSize,Number.parseInt(val))},maxFontSize:1600,initialFontValue:1,initialMaxFontValue:512})),react.createElement("div",{className:"form-field opacity-slider",id:"opacitySlider"},react.createElement(Slider.A,{dataElement:"watermarkOpacitySlider",property:"Opacity",displayProperty:"opacity",min:0,max:100,step:1,customCircleRadius:8,customLineStrokeWidth:4,value:formInfo[FORM_FIELD_KEYS_opacity]/100,getDisplayValue:function(opacity){return"".concat(Math.round(100*opacity),"%")},getCirclePosition:this.getCirclePosn,convertRelativeCirclePositionToValue:function(circlePosn){return circlePosn},withInputField:isCustomizableUI,inputFieldType:"number",onSliderChange:function(){},onStyleChange:function(property,value){return _this.handleInputChange(FORM_FIELD_KEYS_opacity,Math.round(100*value))},getLocalValue:function(opacity){return parseInt(opacity)/100}})),react.createElement("div",{className:"form-field"},react.createElement("label",null,t("option.watermark.style")),react.createElement("div",{className:"style-container"},react.createElement(Button.A,{id:"currentColorCell",className:"colorSelect ".concat("#FFFFFF"===hexColor?"white-color":""),ariaLabel:"colorSelectButton",style:{backgroundColor:hexColor},onClick:function(){return _this.setColorPaletteVisibility(!_this.state.isColorPaletteVisible)}}),react.createElement("div",{className:"style-container"},react.createElement(Button.A,{dataElement:"boldText",img:"icon-text-bold",isActive:formInfo[FORM_FIELD_KEYS_isBolded],onClick:function(){return _this.handleInputChange(FORM_FIELD_KEYS_isBolded,!formInfo[FORM_FIELD_KEYS_isBolded])}}),react.createElement(Button.A,{dataElement:"italicizeText",img:"icon-text-italic",isActive:formInfo[FORM_FIELD_KEYS_isItalic],onClick:function(){return _this.handleInputChange(FORM_FIELD_KEYS_isItalic,!formInfo[FORM_FIELD_KEYS_isItalic])}}),react.createElement(Button.A,{dataElement:"underlineText",img:"icon-text-underline",isActive:formInfo[FORM_FIELD_KEYS_isUnderlined],onClick:function(){return _this.handleInputChange(FORM_FIELD_KEYS_isUnderlined,!formInfo[FORM_FIELD_KEYS_isUnderlined])}}))),this.state.isColorPaletteVisible&&react.createElement("div",{className:"Popup StylePopup",id:"stylePopup",onClick:function(){return _this.setColorPaletteVisibility(!1)}},react.createElement(ColorPalette.A,{color:formInfo[FORM_FIELD_KEYS_color],property:"TextColor",onStyleChange:function(property,color){_this.onColorChanged(color),_this.setColorPaletteVisibility(!1)}})))))),react.createElement("div",{className:"divider"}),react.createElement("div",{className:"button-container"},react.createElement("button",{className:"reset-settings",id:"reset",onClick:this.resetForm},t("option.watermark.resetAllSettings")),react.createElement("button",{className:"ok button",id:"submit",onClick:this.onOkPressed},t("action.add")))))}}]),WatermarkModal}(react.PureComponent);_define_property(WatermarkModal_WatermarkModal,"propTypes",{isVisible:prop_types_default().bool,pageIndexToView:prop_types_default().number,watermarkLocations:prop_types_default().object,modalClosed:prop_types_default().func,formSubmitted:prop_types_default().func,t:prop_types_default().func.isRequired,isCustomizableUI:prop_types_default().bool});const PrintModal_WatermarkModal_WatermarkModal=(0,withTranslation.C)()(WatermarkModal_WatermarkModal);WatermarkModal_WatermarkModal.__docgenInfo={description:"",methods:[{name:"handleWatermarkOnVisibilityChanged",docblock:null,modifiers:[],params:[],returns:null},{name:"addWatermarks",docblock:null,modifiers:[],params:[],returns:null},{name:"constructWatermarkOption",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null},{name:"createWatermarks",docblock:null,modifiers:[],params:[],returns:null},{name:"removeWatermarkCreatedByModal",docblock:null,modifiers:[],params:[],returns:null},{name:"closeModal",docblock:null,modifiers:[],params:[],returns:null},{name:"handleInputChange",docblock:null,modifiers:[],params:[{name:"key",optional:!1,type:null},{name:"value",optional:!1,type:null}],returns:null},{name:"resetForm",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"onOkPressed",docblock:null,modifiers:[],params:[],returns:null},{name:"getCirclePosn",docblock:null,modifiers:[],params:[{name:"lineLength",optional:!1,type:null},{name:"opacity",optional:!1,type:null}],returns:null},{name:"setColorPaletteVisibility",docblock:null,modifiers:[],params:[{name:"visible",optional:!1,type:null}],returns:null},{name:"onLocationChanged",docblock:null,modifiers:[],params:[{name:"key",optional:!1,type:null}],returns:null},{name:"resetLocationSettings",docblock:null,modifiers:[],params:[],returns:null},{name:"initializeLocationSettings",docblock:null,modifiers:[],params:[],returns:null},{name:"getKeyByValue",docblock:null,modifiers:[],params:[{name:"object",optional:!1,type:null},{name:"value",optional:!1,type:null}],returns:null},{name:"getCurrentSelectedLocation",docblock:null,modifiers:[],params:[],returns:null},{name:"onColorChanged",docblock:null,modifiers:[],params:[{name:"newColor",optional:!1,type:null}],returns:null}],displayName:"WatermarkModal",props:{isVisible:{description:"",type:{name:"bool"},required:!1},pageIndexToView:{description:"",type:{name:"number"},required:!1},watermarkLocations:{description:"",type:{name:"object"},required:!1},modalClosed:{description:"",type:{name:"func"},required:!1},formSubmitted:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!0},isCustomizableUI:{description:"",type:{name:"bool"},required:!1}}}}}]);