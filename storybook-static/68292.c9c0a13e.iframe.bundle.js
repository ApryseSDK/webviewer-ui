(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[68292],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/FilterAnnotModal/FilterAnnotModal.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".open.FilterAnnotModal{visibility:visible}.closed.FilterAnnotModal{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.FilterAnnotModal .footer .modal-button.confirm:hover{background:var(--primary-button-hover);border-color:var(--primary-button-hover);color:var(--gray-0)}.FilterAnnotModal .footer .modal-button.confirm{background:var(--primary-button);border-color:var(--primary-button);color:var(--primary-button-text)}.FilterAnnotModal .footer .modal-button.confirm.disabled{cursor:default;background:var(--disabled-button-color);color:var(--primary-button-text)}.FilterAnnotModal .footer .modal-button.confirm.disabled span{color:var(--primary-button-text)}.FilterAnnotModal .footer .modal-button.cancel:hover,.FilterAnnotModal .footer .modal-button.secondary-btn-custom:hover{border:none;box-shadow:inset 0 0 0 1px var(--blue-6);color:var(--blue-6)}.FilterAnnotModal .footer .modal-button.cancel,.FilterAnnotModal .footer .modal-button.secondary-btn-custom{border:none;box-shadow:inset 0 0 0 1px var(--primary-button);color:var(--primary-button)}.FilterAnnotModal .footer .modal-button.cancel.disabled,.FilterAnnotModal .footer .modal-button.secondary-btn-custom.disabled{cursor:default;border:none;box-shadow:inset 0 0 0 1px rgba(43,115,171,.5);color:rgba(43,115,171,.5)}.FilterAnnotModal .footer .modal-button.cancel.disabled span,.FilterAnnotModal .footer .modal-button.secondary-btn-custom.disabled span{color:rgba(43,115,171,.5)}.FilterAnnotModal{position:fixed;inset-inline-start:0;inset-block-end:0;z-index:100;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:var(--modal-negative-space)}.FilterAnnotModal .modal-container .wrapper .modal-content{padding:10px}.FilterAnnotModal .footer{display:flex;flex-direction:row;justify-content:flex-end;width:100%;margin-top:13px}.FilterAnnotModal .footer.modal-footer{padding:16px;margin:0;border-top:1px solid var(--divider)}.FilterAnnotModal .footer .modal-button{display:flex;justify-content:center;align-items:center;padding:6px 18px;margin:8px 0 0;width:auto;width:-moz-fit-content;width:fit-content;border-radius:4px;height:30px;cursor:pointer}.FilterAnnotModal .footer .modal-button.confirm{margin-inline-start:4px}.FilterAnnotModal .footer .modal-button.secondary-btn-custom{border-radius:4px;padding:2px 20px 4px;cursor:pointer}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .FilterAnnotModal .footer .modal-button{padding:23px 8px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .FilterAnnotModal .footer .modal-button{padding:23px 8px}}.FilterAnnotModal .swipe-indicator{background:var(--swipe-indicator-bg);border-radius:2px;height:4px;width:38px;position:absolute;inset-block-start:12px;margin-inline-start:auto;margin-inline-end:auto;inset-inline-start:0;inset-inline-end:0}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .FilterAnnotModal .swipe-indicator{display:none}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .FilterAnnotModal .swipe-indicator{display:none}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .FilterAnnotModal .swipe-indicator{width:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .FilterAnnotModal .swipe-indicator{width:32px}}.FilterAnnotModal .container .filter-modal .body .tab-list{width:100%;height:28px;display:flex;border-radius:4px;color:var(--text-color)}.FilterAnnotModal .container .filter-modal .body .tab-list .tab-options-button{background-color:transparent;text-align:center;vertical-align:middle;line-height:24px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;flex:1;border-radius:0;cursor:pointer}.FilterAnnotModal .container .filter-modal .body .tab-list .tab-options-button:first-child{border-bottom-left-radius:4px;border-top-left-radius:4px}.FilterAnnotModal .container .filter-modal .body .tab-list .tab-options-button:last-child{border-bottom-right-radius:4px;border-top-right-radius:4px}.FilterAnnotModal .container .filter-modal .body .tab-list .tab-options-button:hover{background:var(--popup-button-hover)}.FilterAnnotModal .container .filter-modal .body .tab-list .tab-options-button.selected{background:var(--tab-color-selected);cursor:default}.FilterAnnotModal .container .filter-modal .body .tab-list .tab-options-button.focus-visible,.FilterAnnotModal .container .filter-modal .body .tab-list .tab-options-button:focus-visible{outline:var(--focus-visible-outline)}.FilterAnnotModal{font-size:.9em}.FilterAnnotModal .container{display:flex;flex-direction:column;align-items:center;border-radius:4px;background:var(--component-background);width:360px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .FilterAnnotModal .container{width:100%}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .FilterAnnotModal .container{width:100%}}.FilterAnnotModal .container .message{font-size:14px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .FilterAnnotModal .container .message{font-size:16px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .FilterAnnotModal .container .message{font-size:16px}}.FilterAnnotModal .container .filter-modal{display:flex;flex-direction:column;width:100%}.FilterAnnotModal .container .filter-modal .divider{height:1px;width:100%;background:var(--divider)}.FilterAnnotModal .container .filter-modal .header{display:flex;justify-content:space-between;margin:16px;font-size:16px;font-weight:700;align-items:center;height:24px}.FilterAnnotModal .container .filter-modal .header .Button{height:32px}.FilterAnnotModal .container .filter-modal .body{padding:16px}.FilterAnnotModal .container .filter-modal .body .filter-options{height:200px;width:100%}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel{height:100%;width:100%;display:flex;flex-direction:column}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel .include-replies{display:flex;height:20px;margin-top:12px}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel .include-replies label{color:var(--gray-7)}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel .three-column-filter{margin-top:20px;overflow-y:scroll;display:grid;grid-gap:5px 16px;grid-template-columns:repeat(3,minmax(0,1fr))}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel .color-filters{margin-top:20px;overflow-y:scroll;display:grid;grid-gap:16px;grid-template-columns:repeat(5,minmax(0,1fr))}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel .buttons{display:grid;padding:6px 0;grid-template-columns:100px 100px}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel .colorSelect{display:flex;flex-direction:row}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel .colorSelect .colorCell{width:22px;height:22px;border-radius:10000000px;margin-inline-start:4px;border:1px solid var(--gray-6)}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel label{overflow:hidden}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel label div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.FilterAnnotModal .container .filter-modal .settings-body{display:flex;flex-direction:column;margin:16px 0 0;border:0;padding:16px;font-size:var(--font-size-default);grid-gap:12px;gap:12px}.FilterAnnotModal .container .filter-modal .settings-body .settings-header{font-weight:var(--font-weight-bold);padding:0}.FilterAnnotModal .container .filter-modal .settings-body .settings{display:flex;flex-direction:column;grid-gap:8px;gap:8px}.FilterAnnotModal .container .filter-modal .footer{display:flex;justify-content:space-between;width:100%;padding:16px;margin-top:0}.FilterAnnotModal .container .filter-modal .footer .Button{display:flex;justify-content:center;align-items:center;color:var(--primary-button-text);padding:6px 18px;width:auto;width:-moz-fit-content;width:fit-content;background:var(--primary-button);border-radius:4px;height:32px;cursor:pointer}.FilterAnnotModal .container .filter-modal .footer .Button.filter-annot-apply:hover{background:var(--primary-button-hover)}.FilterAnnotModal .container .filter-modal .footer .Button.disabled{border-color:var(--gray-6);cursor:not-allowed}.FilterAnnotModal .container .filter-modal .footer .filter-annot-clear{color:var(--blue-5);background:none}.FilterAnnotModal .container .filter-modal .footer .filter-annot-clear:not(.disabled):hover{color:var(--secondary-button-hover);background:none}.FilterAnnotModal .container .filter-modal .footer .filter-annot-clear:disabled{opacity:.5}.FilterAnnotModal .container .filter-modal .footer .filter-annot-clear:disabled span{color:unset}.FilterAnnotModal .container .tab-list .tab-options-divider+.tab-options-button{border-inline-start:none!important}.FilterAnnotModal .container .tab-list .tab-options-button{border-top:1px solid var(--tab-border-color);border-bottom:1px solid var(--tab-border-color)}.FilterAnnotModal .container .tab-list .tab-options-button:first-child{border-inline-start:1px solid var(--tab-border-color)}.FilterAnnotModal .container .tab-list .tab-options-button:last-child{border-inline-end:1px solid var(--tab-border-color)}.FilterAnnotModal .container .tab-list .tab-options-button:hover{background:var(--tab-background-color-hover);border-top:1px solid var(--tab-border-color-hover);border-bottom:1px solid var(--tab-border-color-hover);border-inline-end:1px solid var(--tab-border-color-hover)}.FilterAnnotModal .container .tab-list .tab-options-button:hover+button,.FilterAnnotModal .container .tab-list .tab-options-button:hover+div{border-inline-start:none}.FilterAnnotModal .container .tab-list .tab-options-button.selected{background:var(--tab-color-selected);border:1px solid var(--tab-color-selected);color:var(--tab-text-color-selected)}.FilterAnnotModal .container .tab-list .tab-options-button.selected+button,.FilterAnnotModal .container .tab-list .tab-options-button.selected+div{border-inline-start:none!important}.FilterAnnotModal .container .tab-list .tab-options-button:not(.selected){border-inline-end:solid 1px var(--tab-border-color)}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./src/components/FilterAnnotModal/FilterAnnotModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),react_redux__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-redux/es/index.js"),react_i18next__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/core/index.js"),actions__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/redux/actions/index.js"),selectors__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/redux/selectors/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_22__),helpers_fireEvent__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/helpers/fireEvent.js"),constants_defaultTool__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/constants/defaultTool.js"),constants_events__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/constants/events.js"),constants_map__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/constants/map.js"),constants_dataElement__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/constants/dataElement.js"),helpers_color__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./src/helpers/color.js"),helpers_getAnnotationClass__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./src/helpers/getAnnotationClass.js"),components_Choice__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/components/Choice/index.js"),components_Button__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/components/Button/index.js"),components_Tabs__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/components/Tabs/index.js"),components_Tooltip__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/components/Tooltip/index.js"),constants_commonColors__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/constants/commonColors.js"),components_ModalWrapper__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./src/components/ModalWrapper/index.js");__webpack_require__("./src/components/FilterAnnotModal/FilterAnnotModal.scss");const TABS_ID="filterAnnotModal",FilterAnnotModal=({isInFormBuilderMode})=>{const[isDisabled,isOpen,colorMap,selectedTab,annotationFilters,isMeasurementAnnotationFilterEnabled,customNoteFilter]=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.d4)((state=>[selectors__WEBPACK_IMPORTED_MODULE_6__.A.isElementDisabled(state,constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.FILTER_MODAL),selectors__WEBPACK_IMPORTED_MODULE_6__.A.isElementOpen(state,constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.FILTER_MODAL),selectors__WEBPACK_IMPORTED_MODULE_6__.A.getColorMap(state),selectors__WEBPACK_IMPORTED_MODULE_6__.A.getSelectedTab(state,TABS_ID),selectors__WEBPACK_IMPORTED_MODULE_6__.A.getAnnotationFilters(state),selectors__WEBPACK_IMPORTED_MODULE_6__.A.getIsMeasurementAnnotationFilterEnabled(state),selectors__WEBPACK_IMPORTED_MODULE_6__.A.getCustomNoteFilter(state)])),[t]=(0,react_i18next__WEBPACK_IMPORTED_MODULE_19__.B)(),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.wA)(),[authors,setAuthors]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[annotTypes,setAnnotTypes]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[colors,setColorTypes]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[statuses,setStatusTypes]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[authorFilter,setAuthorFilter]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[typesFilter,setTypesFilter]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[colorFilter,setColorFilter]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[checkRepliesForAuthorFilter,setCheckRepliesForAuthorFilter]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!0),[isDocumentFilterActive,setIsDocumentFilterActive]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[statusFilter,setStatusFilter]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[filterCount,setFilterCount]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0),[ifShowAnnotationStatus,setIfShowAnnotationStatus]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),getIconColor=annot=>{const key=(0,constants_map__WEBPACK_IMPORTED_MODULE_10__.c7)(annot),iconColorProperty=colorMap[key]?.iconColor;return annot[iconColorProperty]},similarColorExist=(currColors,newColor)=>{const colorObject=currColors.map((c=>Object.assign({R:parseInt(`${c[1]}${c[2]}`,16),G:parseInt(`${c[3]}${c[4]}`,16),B:parseInt(`${c[5]}${c[6]}`,16)})));return!!colorObject.filter((c=>Math.abs(newColor.R-c.R)<10&&Math.abs(newColor.G-c.G)<10&&Math.abs(newColor.B-c.B)<10)).length},filterApply=()=>{const newFilter=(annot,documentViewerKey=1)=>{let type=!0,author=!0,color=!0,status=!0;if(typesFilter.length>0){const isMeasurementAnnotation=annot.IT||annot.getCustomData("trn-is-count");if(isMeasurementAnnotationFilterEnabled&&isMeasurementAnnotation){const measurementKey=(0,constants_map__WEBPACK_IMPORTED_MODULE_10__.c7)(annot);type=typesFilter.includes(measurementKey)}else type=typesFilter.includes((0,helpers_getAnnotationClass__WEBPACK_IMPORTED_MODULE_20__.u)(annot))}if(authorFilter.length>0&&(author=authorFilter.includes(core__WEBPACK_IMPORTED_MODULE_4__.A.getDisplayAuthor(annot.Author,documentViewerKey)),!author&&checkRepliesForAuthorFilter)){const allReplies=annot.getReplies();for(const reply of allReplies)if(authorFilter.includes(core__WEBPACK_IMPORTED_MODULE_4__.A.getDisplayAuthor(reply.Author,documentViewerKey))){author=!0;break}}if(colorFilter.length>0){const iconColor=getIconColor(annot);color=iconColor?similarColorExist(colorFilter,iconColor):colorFilter.includes(constants_commonColors__WEBPACK_IMPORTED_MODULE_16__.zb.gray8)}return statusFilter.length>0&&(status=annot.getStatus()?statusFilter.includes(annot.getStatus()):statusFilter.includes("None")),type&&author&&color&&status};dispatch(actions__WEBPACK_IMPORTED_MODULE_5__.A.setInternalNoteFilter(newFilter)),dispatch(actions__WEBPACK_IMPORTED_MODULE_5__.A.setAnnotationFilters({isDocumentFilterActive,includeReplies:checkRepliesForAuthorFilter,authorFilter,colorFilter,typeFilter:typesFilter,statusFilter}));const redrawList=[];isDocumentFilterActive?core__WEBPACK_IMPORTED_MODULE_4__.A.getDocumentViewers().forEach(((documentViewer,index)=>documentViewer.getAnnotationManager().getAnnotationsList().forEach((annot=>{if(!isInFormBuilderMode&&annot instanceof window.Core.Annotations.WidgetAnnotation)return;const shouldHide=!newFilter(annot,index+1);shouldHide!==annot.NoView&&(annot.NoView=shouldHide,redrawList.push(annot))})))):core__WEBPACK_IMPORTED_MODULE_4__.A.getDocumentViewers().forEach((documentViewer=>documentViewer.getAnnotationManager().getAnnotationsList().forEach((annot=>{!0===annot.NoView&&(annot.NoView=!1,redrawList.push(annot))})))),core__WEBPACK_IMPORTED_MODULE_4__.A.getDocumentViewers().forEach((documentViewer=>documentViewer.getAnnotationManager().drawAnnotationsFromList(redrawList))),(0,helpers_fireEvent__WEBPACK_IMPORTED_MODULE_7__.A)(constants_events__WEBPACK_IMPORTED_MODULE_9__.A.ANNOTATION_FILTER_CHANGED,{types:typesFilter,authors:authorFilter,colors:colorFilter,statuses:statusFilter,checkRepliesForAuthorFilter}),closeModal()},filterClear=()=>{setCheckRepliesForAuthorFilter(!1),setIsDocumentFilterActive(!1),setAuthorFilter([]),setTypesFilter([]),setColorFilter([]),setStatusFilter([]);const redrawList=[];core__WEBPACK_IMPORTED_MODULE_4__.A.getDocumentViewers().forEach((documentViewer=>documentViewer.getAnnotationManager().getAnnotationsList().forEach((annot=>{!0===annot.NoView&&(annot.NoView=!1,redrawList.push(annot))})))),core__WEBPACK_IMPORTED_MODULE_4__.A.getDocumentViewers().forEach((documentViewer=>documentViewer.getAnnotationManager().drawAnnotationsFromList(redrawList)))},closeModal=()=>{dispatch(actions__WEBPACK_IMPORTED_MODULE_5__.A.closeElement(constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.FILTER_MODAL)),core__WEBPACK_IMPORTED_MODULE_4__.A.setToolMode(constants_defaultTool__WEBPACK_IMPORTED_MODULE_8__.A)};(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{const clearAllFilters=()=>{filterClear(),filterApply()};return core__WEBPACK_IMPORTED_MODULE_4__.A.addEventListener("documentUnloaded",clearAllFilters),()=>{core__WEBPACK_IMPORTED_MODULE_4__.A.removeEventListener("documentUnloaded",clearAllFilters)}}),[]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{let annotLists=core__WEBPACK_IMPORTED_MODULE_4__.A.getDocumentViewers().map((documentViewer=>documentViewer.getAnnotationManager().getAnnotationsList()));if(customNoteFilter){const filteredList=annotLists[0]?annotLists[0].filter(customNoteFilter):[];annotLists[0]=filteredList;const filteredList2=annotLists[1]?annotLists[1].filter(customNoteFilter):[];annotLists[1]=filteredList2}const annots=[].concat(...annotLists).filter((annot=>!annot.Hidden)),authorsToBeAdded=new Set,annotTypesToBeAdded=new Set,annotColorsToBeAdded=new Set,annotStatusesToBeAdded=new Set;return annots.forEach((annot=>{const displayAuthor=core__WEBPACK_IMPORTED_MODULE_4__.A.getDisplayAuthor(annot.Author);displayAuthor&&""!==displayAuthor&&authorsToBeAdded.add(displayAuthor);if(!isInFormBuilderMode&&annot instanceof window.Core.Annotations.WidgetAnnotation||annot instanceof window.Core.Annotations.StickyAnnotation&&annot.isReply()||annot instanceof window.Core.Annotations.Link)return;const isMeasurementAnnotation=annot.IT||annot.getCustomData("trn-is-count");if(isMeasurementAnnotationFilterEnabled&&isMeasurementAnnotation){const measurementKey=(0,constants_map__WEBPACK_IMPORTED_MODULE_10__.c7)(annot);annotTypesToBeAdded.add(measurementKey)}else annotTypesToBeAdded.add((0,helpers_getAnnotationClass__WEBPACK_IMPORTED_MODULE_20__.u)(annot));const iconColor=getIconColor(annot);iconColor&&!similarColorExist([...annotColorsToBeAdded],iconColor)&&annotColorsToBeAdded.add((0,helpers_color__WEBPACK_IMPORTED_MODULE_21__.H)(iconColor.R,iconColor.G,iconColor.B,iconColor.A)),annot.getStatus()?annotStatusesToBeAdded.add(annot.getStatus()):annotStatusesToBeAdded.add("None")})),setAuthors([...authorsToBeAdded]),setAnnotTypes([...annotTypesToBeAdded]),setColorTypes([...annotColorsToBeAdded]),setStatusTypes([...annotStatusesToBeAdded]),core__WEBPACK_IMPORTED_MODULE_4__.A.addEventListener("documentUnloaded",closeModal),()=>{core__WEBPACK_IMPORTED_MODULE_4__.A.removeEventListener("documentUnloaded",closeModal)}}),[isOpen,isMeasurementAnnotationFilterEnabled]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{selectedTab!==constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.ANNOTATION_STATUS_FILTER_PANEL_BUTTON||ifShowAnnotationStatus||dispatch(actions__WEBPACK_IMPORTED_MODULE_5__.A.setSelectedTab(TABS_ID,constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.ANNOTATION_USER_FILTER_PANEL_BUTTON))}),[isOpen,selectedTab,ifShowAnnotationStatus]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{setFilterCount((checkRepliesForAuthorFilter?1:0)+(isDocumentFilterActive?1:0)+authorFilter.length+colorFilter.length+typesFilter.length+statusFilter.length)}),[checkRepliesForAuthorFilter,isDocumentFilterActive,authorFilter,colorFilter,typesFilter,statusFilter]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{setIfShowAnnotationStatus(statuses.length>1||1===statuses.length&&"None"!==statuses[0])}),[statuses]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{isOpen&&(setIsDocumentFilterActive(annotationFilters.isDocumentFilterActive),setCheckRepliesForAuthorFilter(annotationFilters.includeReplies),setAuthorFilter(annotationFilters.authorFilter),setColorFilter(annotationFilters.colorFilter),setTypesFilter(annotationFilters.typeFilter),setStatusFilter(annotationFilters.statusFilter))}),[isOpen]);const modalClass=classnames__WEBPACK_IMPORTED_MODULE_2___default()({Modal:!0,FilterAnnotModal:!0,open:isOpen,closed:!isOpen});return isDisabled?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:modalClass,"data-element":constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.FILTER_MODAL,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_ModalWrapper__WEBPACK_IMPORTED_MODULE_17__.A,{isOpen,title:`${t("option.filterAnnotModal.filters")} (${filterCount})`,closeHandler:closeModal,onCloseClick:closeModal,swipeToClose:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"container",onMouseDown:e=>e.stopPropagation(),children:core__WEBPACK_IMPORTED_MODULE_4__.A.getAnnotationsList().length>0?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"filter-modal",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"body",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.tU,{id:TABS_ID,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"tab-list",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.oz,{dataElement:constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.ANNOTATION_USER_FILTER_PANEL_BUTTON,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"tab-options-button",children:t("option.filterAnnotModal.user")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"tab-options-divider"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.oz,{dataElement:constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.ANNOTATION_COLOR_FILTER_PANEL_BUTTON,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"tab-options-button",children:t("option.filterAnnotModal.color")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"tab-options-divider"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.oz,{dataElement:constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.ANNOTATION_TYPE_FILTER_PANEL_BUTTON,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"tab-options-button",children:t("option.filterAnnotModal.type")})}),ifShowAnnotationStatus&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"tab-options-divider"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.oz,{dataElement:constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.ANNOTATION_STATUS_FILTER_PANEL_BUTTON,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"tab-options-button",children:t("option.filterAnnotModal.status")})})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"filter-options",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.Kp,{dataElement:"annotationUserFilterPanel",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"user-filters three-column-filter",children:[...authors].map(((val,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Choice__WEBPACK_IMPORTED_MODULE_12__.A,{type:"checkbox","aria-label":`${val} ${t("formField.types.checkbox")}`,label:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Tooltip__WEBPACK_IMPORTED_MODULE_15__.A,{content:val,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:val})}),checked:authorFilter.includes(val),id:val,onChange:e=>{-1===authorFilter.indexOf(e.target.getAttribute("id"))?setAuthorFilter([...authorFilter,e.target.getAttribute("id")]):setAuthorFilter(authorFilter.filter((author=>author!==e.target.getAttribute("id"))))}},index)))})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.Kp,{dataElement:"annotationColorFilterPanel",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"color-filters",children:[...colors].map(((val,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"colorSelect",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Tooltip__WEBPACK_IMPORTED_MODULE_15__.A,{content:`${t("option.colorPalette.colorLabel")} ${val?.toUpperCase?.()}`,hideOnClick:!1,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Choice__WEBPACK_IMPORTED_MODULE_12__.A,{type:"checkbox",checked:colorFilter.includes(val),"aria-label":`${t("option.colorPalette.colorLabel")} ${val?.toUpperCase()} ${t("formField.types.checkbox")}`,id:val,onChange:e=>{-1===colorFilter.indexOf(e.target.getAttribute("id"))?setColorFilter([...colorFilter,e.target.getAttribute("id")]):setColorFilter(colorFilter.filter((color=>color!==e.target.getAttribute("id"))))}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"colorCell",style:{background:(0,helpers_color__WEBPACK_IMPORTED_MODULE_21__.o_)(val)}})]},`color${index}`)))})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.Kp,{dataElement:"annotationTypeFilterPanel",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"type-filters three-column-filter",children:[...annotTypes].sort(((type1,type2)=>t(`annotation.${type1}`)<=t(`annotation.${type2}`)?-1:1)).map(((val,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Choice__WEBPACK_IMPORTED_MODULE_12__.A,{type:"checkbox",label:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Tooltip__WEBPACK_IMPORTED_MODULE_15__.A,{content:t(`annotation.${val}`),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:t(`annotation.${val}`)})}),checked:typesFilter.includes(val),id:val,onChange:e=>{-1===typesFilter.indexOf(e.target.getAttribute("id"))?setTypesFilter([...typesFilter,e.target.getAttribute("id")]):setTypesFilter(typesFilter.filter((type=>type!==e.target.getAttribute("id"))))}},index)))})}),ifShowAnnotationStatus&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.Kp,{dataElement:"annotationStatusFilterPanel",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"status-filters three-column-filter",children:[...statuses].map(((val,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Choice__WEBPACK_IMPORTED_MODULE_12__.A,{type:"checkbox",checked:statusFilter.includes(val),"aria-label":`${val} ${t("formField.types.checkbox")}`,label:t(`option.state.${val.toLocaleLowerCase()}`),id:val,onChange:e=>{-1===statusFilter.indexOf(e.target.getAttribute("id"))?setStatusFilter([...statusFilter,e.target.getAttribute("id")]):setStatusFilter(statusFilter.filter((status=>status!==e.target.getAttribute("id"))))}},index)))})})]})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"divider"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("fieldset",{className:"settings-body",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("legend",{id:"filter-settings",className:"settings-header",children:t("option.filterAnnotModal.filterSettings")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"settings",role:"group","aria-labelledby":"filter-settings",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Choice__WEBPACK_IMPORTED_MODULE_12__.A,{label:t("option.filterAnnotModal.includeReplies"),checked:checkRepliesForAuthorFilter,onChange:e=>setCheckRepliesForAuthorFilter(e.target.checked),id:"filter-annot-modal-include-replies"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Choice__WEBPACK_IMPORTED_MODULE_12__.A,{label:t("option.filterAnnotModal.filterDocument"),checked:isDocumentFilterActive,onChange:e=>setIsDocumentFilterActive(e.target.checked),id:"filter-annot-modal-filter-document"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"divider"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"footer",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_13__.A,{className:"filter-annot-clear",onClick:filterClear,label:t("action.clearAll"),disabled:0===filterCount}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_13__.A,{className:"filter-annot-apply",onClick:filterApply,label:t("action.apply")})]})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"swipe-indicator"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"message",children:t("message.noAnnotationsFilter")})]})})})})};FilterAnnotModal.propTypes={isInFormBuilderMode:prop_types__WEBPACK_IMPORTED_MODULE_22___default().bool};const __WEBPACK_DEFAULT_EXPORT__=FilterAnnotModal;FilterAnnotModal.__docgenInfo={description:"",methods:[],displayName:"FilterAnnotModal",props:{isInFormBuilderMode:{description:"",type:{name:"bool"},required:!1}}}},"./src/components/FilterAnnotModal/FilterAnnotModal.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/FilterAnnotModal/FilterAnnotModal.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}}}]);