(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[99727],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/DocumentControls/DocumentControls.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.documentControls{display:flex;flex-direction:column}.documentControls .divider{height:1px;background:var(--divider);margin:16px 0 8px}.documentControls .documentControlsInput{display:flex;flex-direction:row;padding-bottom:16px;padding-top:8px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .documentControls .documentControlsInput{padding-bottom:0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .documentControls .documentControlsInput{padding-bottom:0}}.documentControls .documentControlsInput.customizableUI{padding:8px 0}.documentControls .documentControlsInput .pagesInput{width:100%;height:30px;border:1px solid var(--border);border-radius:4px;color:var(--text-color);padding-top:4px;padding-bottom:4px;padding-inline-start:8px;padding-inline-end:8px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .documentControls .documentControlsInput .pagesInput{font-size:13px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .documentControls .documentControlsInput .pagesInput{font-size:13px}}.documentControls .documentControlsInput .pagesInput:focus{outline:none;border:1px solid var(--focus-border)}.documentControls .documentControlsInput .pagesInput::-moz-placeholder{color:var(--placeholder-text)}.documentControls .documentControlsInput .pagesInput::placeholder{color:var(--placeholder-text)}.documentControls .documentControlsInput .documentControlsButton{display:flex;flex-direction:row;padding-inline-start:2px}.documentControls .documentControlsInput .documentControlsButton .Button{height:30px;padding:0;width:30px;margin:0 4px}.documentControls .documentControlsInput .documentControlsButton .Button .Icon{height:24px;width:24px;color:var(--icon-color)}.documentControls .documentControlsInput .documentControlsButton .Button:hover{background:var(--view-header-button-hover);border-radius:4px}.documentControls .documentControlsLabel{margin-top:16px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .documentControls .documentControlsLabel{margin-top:8px;font-size:13px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .documentControls .documentControlsLabel{margin-top:8px;font-size:13px}}.documentControls .documentControlsLabel .multiSelectExampleLabel{color:var(--faded-text);margin-inline-start:2px}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/Thumbnail/Thumbnail.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.Thumbnail{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;cursor:pointer}.Thumbnail.active .container .page-image{border:2px solid var(--focus-border);box-shadow:none;box-sizing:content-box}.Thumbnail .container{position:relative;display:flex;justify-content:center;align-items:center;cursor:pointer}.Thumbnail .container .page-image{box-shadow:0 0 3px 0 var(--box-shadow)}.Thumbnail .container .annotation-image,.Thumbnail .container .page-image{position:absolute;inset-inline-start:50%;inset-block-start:50%;transform:translate(-50%,-50%)}.Thumbnail .container .annotation-image.right-to-left,.Thumbnail .container .page-image.right-to-left{transform:translate(-15%,-50%);inset-inline-start:0}.Thumbnail .container .checkbox{position:absolute;border-radius:4px;z-index:4}.Thumbnail .container .default{inset-block-start:3%;inset-inline-end:15%}.Thumbnail .container .rotated{inset-block-start:15%;inset-inline-end:3%}.Thumbnail .page-label{margin-top:11px}.Thumbnail.selected .container .thumbnail:before{color:#fff;background:var(--focus-border);width:16px;height:16px;position:absolute;z-index:10}.Thumbnail.selected .container canvas{background:hsla(0,0%,100%,.6)}.Thumbnail.active .page-label{color:var(--focus-border)!important}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/ThumbnailControls/ThumbnailControls.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,':host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.thumbnailControls-overlay{display:grid;text-align:center;z-index:2;margin-top:5px;grid-template-areas:"rotate delete . more";grid-template-columns:repeat(3,1fr)}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.thumbnailControls-overlay{display:flex}}.thumbnailControls-overlay .Button{height:32px;padding:0;width:32px}.thumbnailControls-overlay .Button .Icon{height:24px;width:24px;color:var(--icon-color)}.thumbnailControls-overlay .Button:hover{background:var(--view-header-button-hover);border-radius:4px}.thumbnailControls-overlay .Button.active{background:var(--view-header-button-active)}.thumbnailControls-overlay .Button.active .Icon{color:var(--selected-icon-color)}.thumbnailControls-overlay.modular-ui .Button:hover{border:1px solid var(--focus-border);background:var(--tools-button-hover)}.thumbnailControls-overlay .rotate-button{grid-area:rotate}.thumbnailControls-overlay .delete-button{grid-area:delete}.thumbnailControls-overlay .more-options{grid-area:more}.thumbnailControls-overlay.custom-buttons .Button{grid-area:auto}.thumbnailControls{display:flex;flex-direction:row;text-align:center;z-index:2;margin-top:5px}.thumbnailControls .Button{height:32px;padding:0;width:32px;margin:0 4px}.thumbnailControls .Button .Icon{height:24px;width:24px;color:var(--icon-color)}.thumbnailControls .Button:hover{background:var(--view-header-button-hover);border-radius:4px}',""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/ThumbnailControlsMulti/ThumbnailControlsMulti.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .documentControlsContainer{margin-inline-start:16px;margin-inline-end:16px;margin-bottom:16px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .documentControlsContainer{margin-inline-start:16px;margin-inline-end:16px;margin-bottom:16px}}.documentControlsContainer .PageControlContainer{display:flex;background-color:var(--gray-2);justify-content:center;align-content:center;border-radius:4px}.documentControlsContainer .PageControlContainer .dropdown-menu{position:relative}.documentControlsContainer .PageControlContainer .dropdown-menu .indicator{position:absolute;inset-block-end:1px;inset-inline-end:1px;width:0;height:0;border-inline-start:4px solid transparent;border-inline-end:4px solid transparent;border-top:4px solid #c4c4c4;transform:rotateY(0deg) rotate(315deg)}.documentControlsContainer .PageControlContainer button .Icon{height:21px;width:21px;color:var(--icon-color)}.documentControlsContainer .PageControlContainer .button-hover:hover{background:var(--view-header-button-hover);border-radius:4px}.documentControlsContainer .PageControlContainer .divider{height:20px;width:1px;background:var(--divider);margin:6px;display:block!important}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/ThumbnailsPanel/ThumbnailsPanel.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.thumbnail-slider-container{display:flex;align-items:center;width:230px;margin:0 auto;height:40px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .thumbnail-slider-container{width:inherit;margin:16px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .thumbnail-slider-container{width:inherit;margin:16px}}.thumbnail-slider-container .thumbnail-slider{width:100%;height:20px;padding:0;color:transparent;background-color:transparent;border:0 transparent}.thumbnail-slider-container input[type=range]{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;accent-color:green;height:3px;background:#2980b9}.thumbnail-slider-container input[type=range]::-webkit-slider-runnable-track{height:5px;border-radius:6px}.thumbnail-slider-container input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;height:14px;width:14px;background-color:var(--slider-filled);border-radius:50%;border:2px solid var(--slider-filled);margin-top:-4px}.thumbnail-slider-container input[type=range]::-moz-range-track{height:5px;border-radius:4px}.thumbnail-slider-container button{width:15px;height:15px;margin:2.5px;padding-top:6px}.thumbnail-slider-container button:hover{background:var(--view-header-button-hover);border-radius:4px}.thumbnail-slider-container .slider{width:100%}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .thumbnail-slider-container .slider{margin-top:0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .thumbnail-slider-container .slider{margin-top:0}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .thumbnail-slider-container .slider .slider-element-container{width:auto;margin-inline-start:auto}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .thumbnail-slider-container .slider .slider-element-container{width:auto;margin-inline-start:auto}}.ThumbnailsPanel{overflow:hidden!important;display:flex;height:100%}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .ThumbnailsPanel{width:inherit;margin:0 16px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .ThumbnailsPanel{width:inherit;margin:0 16px}}.ThumbnailsPanel #virtualized-thumbnails-container{flex:1}.ThumbnailsPanel .ReactVirtualized__Grid.ReactVirtualized__List.thumbnailsList.right-to-left{direction:rtl!important}.ThumbnailsPanel .row{display:flex;justify-content:space-around;align-items:center;flex-direction:column}.ThumbnailsPanel .thumbnailPlaceholder{width:150px;margin:2px;border:1px solid var(--focus-border)}.ThumbnailsPanel .columnsOfThumbnails.row{display:flex;justify-content:left;align-items:center;flex-direction:row}.ThumbnailsPanel .columnsOfThumbnails .cellThumbContainer{display:flex;flex-direction:row}.ThumbnailsPanel .columnsOfThumbnails .Thumbnail{display:inline-flex}.ThumbnailsPanel .columnsOfThumbnails .thumbnailPlaceholder{width:116px;min-width:116px;height:150px;margin-bottom:30px}.cellThumbContainer{border-radius:4px}.thumbnailAutoScrollArea{position:absolute;width:calc(100% - 55px);z-index:10;background:hsla(0,0%,100%,0)}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./src/components/DocumentControls/DocumentControls.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/DocumentControls/DocumentControls.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/Thumbnail/Thumbnail.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/Thumbnail/Thumbnail.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/ThumbnailControls/ThumbnailControls.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/ThumbnailControls/ThumbnailControls.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/ThumbnailControlsMulti/ThumbnailControlsMulti.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/ThumbnailControlsMulti/ThumbnailControlsMulti.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/ThumbnailsPanel/ThumbnailsPanel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>components_ThumbnailsPanel_ThumbnailsPanel});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),debounce=__webpack_require__("./node_modules/lodash/debounce.js"),debounce_default=__webpack_require__.n(debounce),react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),dist_es=__webpack_require__("./node_modules/react-virtualized/dist/es/index.js"),index_esm=__webpack_require__("./node_modules/react-measure/dist/index.esm.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),device=__webpack_require__("./src/helpers/device.js"),selectors=__webpack_require__("./src/redux/selectors/index.js"),actions=__webpack_require__("./src/redux/actions/index.js"),useDidUpdate=__webpack_require__("./src/hooks/useDidUpdate.js"),core=__webpack_require__("./src/core/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),pageManipulationFunctions=__webpack_require__("./src/helpers/pageManipulationFunctions.js"),Button=__webpack_require__("./src/components/Button/index.js"),dataElement=(__webpack_require__("./src/components/ThumbnailControls/ThumbnailControls.scss"),__webpack_require__("./src/constants/dataElement.js")),ToggleElementButton=__webpack_require__("./src/components/ModularComponents/ToggleElementButton/index.js");function PageManipulationOverlayButtonContainer(props){const{className,pageIndex}=props,dispatch=(0,es.wA)(),selectedPageIndexes=(0,es.d4)((state=>selectors.A.getSelectedThumbnailPageIndexes(state)));return(0,jsx_runtime.jsx)("div",{className,onClick:()=>{-1===selectedPageIndexes.indexOf(pageIndex)&&dispatch(actions.A.setSelectedPageThumbnails([pageIndex]))},children:(0,jsx_runtime.jsx)(ToggleElementButton.A,{dataElement:dataElement.A.PAGE_MANIPULATION_OVERLAY_BUTTON,toggleElement:dataElement.A.PAGE_MANIPULATION,img:"icon-tool-more",title:"option.thumbnailPanel.moreOptions"})})}const PageManipulationOverlayButton_PageManipulationOverlayButtonContainer=PageManipulationOverlayButtonContainer;PageManipulationOverlayButtonContainer.__docgenInfo={description:"",methods:[],displayName:"PageManipulationOverlayButtonContainer"};const PageManipulationOverlayButton=PageManipulationOverlayButton_PageManipulationOverlayButtonContainer;var types=__webpack_require__("./src/constants/types.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),findFocusableElements=__webpack_require__("./src/helpers/findFocusableElements.js");const propTypes={index:prop_types_default().number.isRequired},ThumbnailControls_ThumbnailControls=({index})=>{const{t}=(0,useTranslation.B)(),[isElementDisabled]=(0,es.d4)((state=>[selectors.A.isElementDisabled(state,"thumbnailControl")])),[isMoreOptionDisabled]=(0,es.d4)((state=>[selectors.A.isElementDisabled(state,dataElement.A.PAGE_MANIPULATION_OVERLAY_BUTTON)])),[isPageDeletionConfirmationModalEnabled,selectedIndexes]=(0,es.d4)((state=>[selectors.A.pageDeletionConfirmationModalEnabled(state),selectors.A.getSelectedThumbnailPageIndexes(state)])),dispatch=(0,es.wA)(),buttonsRef=(0,react.useRef)([]),buttonContainerRef=(0,react.useRef)(null),[currentPage,pageThumbnailControlMenuItems,featureFlags]=(0,es.d4)((state=>[selectors.A.getCurrentPage(state),selectors.A.getThumbnailControlMenuItems(state),selectors.A.getFeatureFlags(state)]),es.bN);let pageNumbers=selectedIndexes.length>0?selectedIndexes.map((i=>i+1)):[index+1];const isCurrentPageInTheSelection=pageNumbers.includes(currentPage),customizableUI=featureFlags.customizableUI;isCurrentPageInTheSelection||(pageNumbers=[currentPage]);const document=core.A.getDocument(),documentType=document?.type,isXod=documentType===types._.XOD,isOffice=documentType===types._.OFFICE||documentType===types._.LEGACY_OFFICE,BUTTONS_MAP={thumbRotateClockwise:(0,jsx_runtime.jsx)(Button.A,{className:"rotate-button",img:"icon-header-page-manipulation-page-rotation-clockwise-line",onClick:()=>(0,pageManipulationFunctions.gH)(pageNumbers),title:"option.thumbnailPanel.rotatePageClockwise",dataElement:"thumbRotateClockwise"}),thumbRotateCounterClockwise:(0,jsx_runtime.jsx)(Button.A,{img:"icon-header-page-manipulation-page-rotation-counterclockwise-line",onClick:()=>(0,pageManipulationFunctions.cV)(pageNumbers),title:"option.thumbnailPanel.rotatePageCounterClockwise",dataElement:"thumbRotateCounterClockwise"}),thumbDelete:(0,jsx_runtime.jsx)(Button.A,{className:"delete-button",img:"icon-delete-line",onClick:()=>(0,pageManipulationFunctions.Gt)(pageNumbers,dispatch,isPageDeletionConfirmationModalEnabled),title:"option.thumbnailPanel.delete",dataElement:"thumbDelete",onClickAnnouncement:`${t("action.delete")} ${t("action.modal")} ${t("action.isOpen")}`})};let isCustomized=!1;const occurredButtons=[],buttons=pageThumbnailControlMenuItems.map((item=>{const{dataElement}=item,key=dataElement;let component=BUTTONS_MAP[dataElement];if(occurredButtons.indexOf(dataElement)>-1)return null;if(occurredButtons.push(dataElement),!component){isCustomized=!0;const{img,onClick,title}=item;component=(0,jsx_runtime.jsx)(Button.A,{className:`${dataElement}-button`,img,onClick:()=>onClick(currentPage),title,dataElement})}return component?react.cloneElement(component,{key}):null}));return(0,react.useEffect)((()=>{buttonsRef.current=(0,findFocusableElements.A)(buttonContainerRef.current),buttonsRef.current.length>0&&buttonsRef.current.forEach((element=>{element.tabIndex=-1}))}),[buttonsRef.current,buttons]),isElementDisabled?null:isXod||isOffice||document?.isWebViewerServerDocument()?(0,jsx_runtime.jsxs)("div",{className:"thumbnailControls-overlay","data-element":"thumbnailControl",style:{display:"flex"},children:[(0,jsx_runtime.jsx)(Button.A,{img:"icon-header-page-manipulation-page-rotation-counterclockwise-line",onClick:()=>(0,pageManipulationFunctions.cV)(pageNumbers),title:"option.thumbnailPanel.rotatePageCounterClockwise",dataElement:"thumbRotateCounterClockwise"}),(0,jsx_runtime.jsx)(Button.A,{img:"icon-header-page-manipulation-page-rotation-clockwise-line",onClick:()=>(0,pageManipulationFunctions.gH)(pageNumbers),title:"option.thumbnailPanel.rotatePageClockwise",dataElement:"thumbRotateClockwise"})]}):(0,jsx_runtime.jsxs)("div",{className:classnames_default()({"thumbnailControls-overlay":!0,"custom-buttons":isCustomized,"modular-ui":customizableUI}),"data-element":"thumbnailControl",ref:buttonContainerRef,children:[buttons,isMoreOptionDisabled?null:(0,jsx_runtime.jsx)(PageManipulationOverlayButton,{className:"more-options",pageIndex:index})]})};ThumbnailControls_ThumbnailControls.propTypes=propTypes;const components_ThumbnailControls_ThumbnailControls=ThumbnailControls_ThumbnailControls;ThumbnailControls_ThumbnailControls.__docgenInfo={description:"",methods:[],displayName:"ThumbnailControls",props:{index:{description:"",type:{name:"number"},required:!0}}};const components_ThumbnailControls=components_ThumbnailControls_ThumbnailControls;var thumbnailSelectionModes=__webpack_require__("./src/constants/thumbnailSelectionModes.js"),Choice=(__webpack_require__("./src/components/Thumbnail/Thumbnail.scss"),__webpack_require__("./node_modules/@pdftron/webviewer-react-toolkit/dist/esm/components/Choice/Choice.js")),getRootNode=__webpack_require__("./src/helpers/getRootNode.js");const Thumbnail_Thumbnail=react.forwardRef(((props,ref)=>{const{index,isSelected,updateAnnotations,shiftKeyThumbnailPivotIndex,onFinishLoading,onLoad,onRemove=()=>{},onDragStart,onDragOver,isDraggable,shouldShowControls,thumbnailSize,currentPage,pageLabels=[],selectedPageIndexes,isThumbnailMultiselectEnabled,isReaderModeOrReadOnly,dispatch,actions,isMobile,canLoad,onCancel,isThumbnailSelectingPages,thumbnailSelectionMode,activeDocumentViewerKey,panelSelector,parentKeyListener,isRightToLeft}=props,thumbSize=thumbnailSize?Number(thumbnailSize):150,[currentFocusIndex,setCurrentFocusIndex]=(0,react.useState)(-1),thumbContainerRef=(0,react.useRef)(null),buttonRefs=(0,react.useRef)([]),buttonMultiSelectRefs=(0,react.useRef)([]),[dimensions,setDimensions]=(0,react.useState)({width:thumbSize,height:thumbSize}),{t}=(0,useTranslation.B)(),[loaded,setLoaded]=(0,react.useState)(!1),isContentEditingEnabled=(0,es.d4)(selectors.A.isContentEditingEnabled);let loadTimeout=null;(0,react.useEffect)((()=>{const handleClickOutside=event=>{thumbContainerRef.current&&!thumbContainerRef.current.contains(event.target)&&preventDefaultTab()};return document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}}),[]);const loadThumbnailAsync=()=>{loadTimeout=setTimeout((()=>{const thumbnailContainer=(0,getRootNode.Ay)().querySelector(`.ThumbnailsPanel.${panelSelector} #pageThumb${index}`),pageNum=index+1,viewerRotation=core.A.getRotation(pageNum),doc=core.A.getDocument(activeDocumentViewerKey);if(doc&&doc.getPageInfo(pageNum)){const id=doc.loadCanvas({pageNumber:pageNum,width:thumbSize,height:thumbSize,drawComplete:async thumb=>{const thumbnailContainer=(0,getRootNode.Ay)().querySelector(`.ThumbnailsPanel.${panelSelector} #pageThumb${index}`);if(thumbnailContainer){const childElement=thumbnailContainer.querySelector(".page-image");childElement&&thumbnailContainer.removeChild(childElement),thumb.className="page-image "+(isRightToLeft?"right-to-left":"");const ratio=Math.min(thumbSize/thumb.width,thumbSize/thumb.height);if(thumb.style.width=thumb.width*ratio+"px",thumb.style.height=thumb.height*ratio+"px",setDimensions({width:Number(thumb.width),height:Number(thumb.height)}),Math.abs(viewerRotation)){const cssTransform=`rotate(${90*viewerRotation}deg) translate(-50%,-50%)`,cssTransformOrigin="top left";thumb.style.transform=cssTransform,thumb.style["transform-origin"]=cssTransformOrigin,thumb.style["ms-transform"]=cssTransform,thumb.style["ms-transform-origin"]=cssTransformOrigin,thumb.style["-moz-transform"]=cssTransform,thumb.style["-moz-transform-origin"]=cssTransformOrigin,thumb.style["-webkit-transform-origin"]=cssTransformOrigin,thumb.style["-webkit-transform"]=cssTransform,thumb.style["-o-transform"]=cssTransform,thumb.style["-o-transform-origin"]=cssTransformOrigin}thumbnailContainer.appendChild(thumb)}updateAnnotations&&updateAnnotations(index),onFinishLoading(index),setLoaded(!0)},allowUseOfOptimizedThumbnail:!0});onLoad(index,thumbnailContainer,id)}}),50)};(0,react.useEffect)((()=>{const onPagesUpdated=changes=>{const{contentChanged,moved,added,removed}=changes,currentPage=index+1,isPageAdded=added.includes(currentPage),didPageChange=contentChanged.some((changedPage=>currentPage===changedPage)),didPageMove=Object.keys(moved).some((movedPage=>currentPage===parseInt(movedPage))),isPageRemoved=removed.includes(currentPage),newPageCount=core.A.getTotalPages();removed.length>0&&index+1>newPageCount||(isPageAdded||didPageChange||didPageMove||isPageRemoved)&&loadThumbnailAsync()},onRotationUpdated=()=>{setLoaded(!1),loadThumbnailAsync()};return core.A.addEventListener("pagesUpdated",onPagesUpdated),core.A.addEventListener("rotationUpdated",onRotationUpdated),canLoad&&loadThumbnailAsync(),()=>{core.A.removeEventListener("pagesUpdated",onPagesUpdated),core.A.removeEventListener("rotationUpdated",onRotationUpdated),clearTimeout(loadTimeout),onRemove(index)}}),[]),(0,useDidUpdate.A)((()=>{canLoad?(loadThumbnailAsync(),updateAnnotations(index)):onCancel(index)}),[canLoad,activeDocumentViewerKey]);const isActive=currentPage===index+1,pageLabel=pageLabels[index];let checkboxRotateClass="default";const rotation=core.A.getRotation(index+1);((!rotation||2===rotation)&&dimensions.width>dimensions.height||(1===rotation||3===rotation)&&dimensions.width<dimensions.height)&&(checkboxRotateClass="rotated"),(0,react.useImperativeHandle)(ref,(()=>({focusInput:()=>{isThumbnailSelectingPages&&loaded?(selectElement(buttonMultiSelectRefs.current[0]),setCurrentFocusIndex(0)):buttonRefs.current&&setTimeout((()=>{selectElement(buttonRefs.current[0]),setCurrentFocusIndex(0)}),0)}})));const selectElement=element=>{element&&(element.ariaCurrent="page",element.focus())},deselectElement=element=>{element&&(element.ariaCurrent=void 0)},handleEnterGrid=e=>{e.preventDefault(),preventDefaultTab()},preventDefaultTab=()=>{buttonRefs.current.forEach((elem=>{deselectElement(elem)}))},handleKeyDown=(0,react.useCallback)((e=>{e.stopPropagation(),parentKeyListener(e);const leaveFocusActions={Tab:()=>handleEnterGrid(e),Escape:()=>handleEnterGrid(e)};leaveFocusActions[e.key]&&leaveFocusActions[e.key]?.();const keyboardActions={ArrowUp:()=>handleArrowKey(e,-1),ArrowDown:()=>handleArrowKey(e,1),ArrowLeft:()=>handleArrowKey(e,-1),ArrowRight:()=>handleArrowKey(e,1)};keyboardActions[e.key]&&!isMultiselectEnabled&&keyboardActions[e.key]()}),[buttonRefs.current,currentFocusIndex]),handleArrowKey=(e,direction)=>{e.preventDefault(),0!==buttonRefs.current.length&&setCurrentFocusIndex((prevIndex=>{let newFocusIndex=prevIndex+direction;return newFocusIndex<0?newFocusIndex=buttonRefs.current.length-1:newFocusIndex>=buttonRefs.current.length&&(newFocusIndex=0),updateTabIndexes(buttonRefs.current[newFocusIndex]),newFocusIndex}))},updateTabIndexes=focusedElement=>{buttonRefs.current.forEach((elem=>{elem===focusedElement?selectElement(elem):deselectElement(elem)}))};(0,react.useEffect)((()=>{thumbContainerRef.current&&(buttonRefs.current=(0,findFocusableElements.A)(thumbContainerRef.current))}),[shouldShowControls,isActive,loaded]),(0,react.useEffect)((()=>{thumbContainerRef.current&&(buttonMultiSelectRefs.current=(0,findFocusableElements.A)(thumbContainerRef.current))}),[isThumbnailSelectingPages,loaded]);const isMultiselectEnabled=isThumbnailSelectingPages&&loaded;return(0,jsx_runtime.jsxs)("button",{className:classnames_default()({Thumbnail:!0,active:isActive,selected:isSelected&&isThumbnailSelectingPages}),onDragOver:e=>onDragOver(e,index),id:`Thumbnail-container-${index}`,ref:thumbContainerRef,onKeyDown:e=>handleKeyDown(e),onClick:e=>{const checkboxToggled=e.target.type&&"checkbox"===e.target.type;if(isThumbnailMultiselectEnabled&&!isReaderModeOrReadOnly){const multiSelectionKeyPressed=e.ctrlKey||e.metaKey,shiftKeyPressed=e.shiftKey;let updatedSelectedPages=[...selectedPageIndexes];if(shiftKeyPressed){dispatch(actions.setThumbnailSelectingPages(!0));let shiftKeyPivot=shiftKeyThumbnailPivotIndex;null===shiftKeyPivot&&(shiftKeyPivot=currentPage-1,dispatch(actions.setShiftKeyThumbnailsPivotIndex(shiftKeyPivot)));const currSelectMinIndex=Math.min(shiftKeyPivot,index),currSelectMaxIndex=Math.max(shiftKeyPivot,index);updatedSelectedPages=[...new Set([...Array.from({length:currSelectMaxIndex-currSelectMinIndex+1},((_,i)=>i+currSelectMinIndex))])]}else multiSelectionKeyPressed||isThumbnailSelectingPages?(dispatch(actions.setThumbnailSelectingPages(!0)),(multiSelectionKeyPressed||checkboxToggled||thumbnailSelectionMode===thumbnailSelectionModes.A.THUMBNAIL)&&(0!==selectedPageIndexes.length||isThumbnailSelectingPages?selectedPageIndexes.includes(index)?updatedSelectedPages=selectedPageIndexes.filter((pageIndex=>index!==pageIndex)):updatedSelectedPages.push(index):updatedSelectedPages.push(currentPage-1)),dispatch(actions.setShiftKeyThumbnailsPivotIndex(index))):updatedSelectedPages=[index];const lastSelectedPageIndex=updatedSelectedPages[updatedSelectedPages.length-1];!isThumbnailSelectingPages&&!shiftKeyPressed&&dispatch(actions.setShiftKeyThumbnailsPivotIndex(lastSelectedPageIndex)),dispatch(actions.setSelectedPageThumbnails(updatedSelectedPages))}else isMobile()&&dispatch(actions.closeElement("leftPanel"));setTimeout((()=>{checkboxToggled&&thumbnailSelectionMode!==thumbnailSelectionModes.A.THUMBNAIL||core.A.setCurrentPage(index+1)}),0)},style:{width:thumbSize,cursor:"pointer",background:"none",border:"none"},tabIndex:-1,children:[(0,jsx_runtime.jsxs)("div",{className:"container",style:{height:thumbSize,width:thumbSize},onDragStart:e=>onDragStart(e,index),draggable:isDraggable,tabIndex:-1,children:[(0,jsx_runtime.jsx)("div",{id:`pageThumb${index}`,className:"thumbnail"}),isThumbnailSelectingPages&&loaded&&(0,jsx_runtime.jsx)(Choice.G,{className:`checkbox ${checkboxRotateClass}`,checked:selectedPageIndexes.includes(index),"aria-label":`${t("action.page")} ${pageLabel} ${t("formField.types.checkbox")}`,tabIndex:-1})]}),(0,jsx_runtime.jsx)("div",{className:"page-label",children:pageLabel}),!isThumbnailSelectingPages&&isActive&&shouldShowControls&&!isContentEditingEnabled&&(0,jsx_runtime.jsx)(components_ThumbnailControls,{index})]})}));Thumbnail_Thumbnail.displayName="Thumbnail",Thumbnail_Thumbnail.propTypes={index:prop_types_default().number,isSelected:prop_types_default().bool,updateAnnotations:prop_types_default().func,shiftKeyThumbnailPivotIndex:prop_types_default().number,onFinishLoading:prop_types_default().func,onLoad:prop_types_default().func,onRemove:prop_types_default().func,onDragStart:prop_types_default().func,onDragOver:prop_types_default().func,isDraggable:prop_types_default().bool,shouldShowControls:prop_types_default().bool,thumbnailSize:prop_types_default().number,currentPage:prop_types_default().number,pageLabels:prop_types_default().array,selectedPageIndexes:prop_types_default().array,isThumbnailMultiselectEnabled:prop_types_default().bool,isReaderModeOrReadOnly:prop_types_default().bool,dispatch:prop_types_default().func,actions:prop_types_default().object,isMobile:prop_types_default().func,canLoad:prop_types_default().bool,onCancel:prop_types_default().func,isThumbnailSelectingPages:prop_types_default().bool,thumbnailSelectionMode:prop_types_default().string,activeDocumentViewerKey:prop_types_default().number,panelSelector:prop_types_default().string,parentKeyListener:prop_types_default().func,isRightToLeft:prop_types_default().bool};const components_Thumbnail_Thumbnail=Thumbnail_Thumbnail;Thumbnail_Thumbnail.__docgenInfo={description:"",methods:[{name:"focusInput",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Thumbnail",props:{index:{description:"",type:{name:"number"},required:!1},isSelected:{description:"",type:{name:"bool"},required:!1},updateAnnotations:{description:"",type:{name:"func"},required:!1},shiftKeyThumbnailPivotIndex:{description:"",type:{name:"number"},required:!1},onFinishLoading:{description:"",type:{name:"func"},required:!1},onLoad:{description:"",type:{name:"func"},required:!1},onRemove:{description:"",type:{name:"func"},required:!1},onDragStart:{description:"",type:{name:"func"},required:!1},onDragOver:{description:"",type:{name:"func"},required:!1},isDraggable:{description:"",type:{name:"bool"},required:!1},shouldShowControls:{description:"",type:{name:"bool"},required:!1},thumbnailSize:{description:"",type:{name:"number"},required:!1},currentPage:{description:"",type:{name:"number"},required:!1},pageLabels:{description:"",type:{name:"array"},required:!1},selectedPageIndexes:{description:"",type:{name:"array"},required:!1},isThumbnailMultiselectEnabled:{description:"",type:{name:"bool"},required:!1},isReaderModeOrReadOnly:{description:"",type:{name:"bool"},required:!1},dispatch:{description:"",type:{name:"func"},required:!1},actions:{description:"",type:{name:"object"},required:!1},isMobile:{description:"",type:{name:"func"},required:!1},canLoad:{description:"",type:{name:"bool"},required:!1},onCancel:{description:"",type:{name:"func"},required:!1},isThumbnailSelectingPages:{description:"",type:{name:"bool"},required:!1},thumbnailSelectionMode:{description:"",type:{name:"string"},required:!1},activeDocumentViewerKey:{description:"",type:{name:"number"},required:!1},panelSelector:{description:"",type:{name:"string"},required:!1},parentKeyListener:{description:"",type:{name:"func"},required:!1},isRightToLeft:{description:"",type:{name:"bool"},required:!1}}};const ThumbnailRedux=react.forwardRef(((props,ref)=>{const[currentPage,pageLabels,selectedPageIndexes,isThumbnailMultiselectEnabled,isReaderMode,isDocumentReadOnly,shiftKeyThumbnailPivotIndex,isThumbnailSelectingPages,thumbnailSelectionMode,activeDocumentViewerKey,selectionModes]=(0,es.d4)((state=>[selectors.A.getCurrentPage(state),selectors.A.getPageLabels(state),selectors.A.getSelectedThumbnailPageIndexes(state),selectors.A.isThumbnailMultiselectEnabled(state),selectors.A.isReaderMode(state),selectors.A.isDocumentReadOnly(state),selectors.A.getShiftKeyThumbnailPivotIndex(state),selectors.A.isThumbnailSelectingPages(state),selectors.A.getThumbnailSelectionMode(state),selectors.A.getActiveDocumentViewerKey(state)]),es.bN),dispatch=(0,es.wA)();return(0,jsx_runtime.jsx)(components_Thumbnail_Thumbnail,{...props,ref,currentPage,pageLabels,selectedPageIndexes,isThumbnailMultiselectEnabled,isReaderModeOrReadOnly:isReaderMode||isDocumentReadOnly,dispatch,actions:actions.A,isMobile:device.Fr,shiftKeyThumbnailPivotIndex,isThumbnailSelectingPages,thumbnailSelectionMode,selectionModes,activeDocumentViewerKey})}));ThumbnailRedux.displayName="ThumbnailRedux";const Thumbnail_ThumbnailRedux=ThumbnailRedux;ThumbnailRedux.__docgenInfo={description:"",methods:[],displayName:"ThumbnailRedux"};const components_Thumbnail=Thumbnail_ThumbnailRedux;var getPageArrayFromString=__webpack_require__("./src/helpers/getPageArrayFromString.js");var panel=__webpack_require__("./src/constants/panel.js");__webpack_require__("./src/components/ThumbnailControlsMulti/ThumbnailControlsMulti.scss");function MoveOperations({moveToTop,moveToBottom}){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.A,{className:"button-hover",dataElement:"moveToTop",img:"icon-page-move-up",onClick:moveToTop,title:"action.moveToTop"}),(0,jsx_runtime.jsx)(Button.A,{className:"button-hover",dataElement:"moveToBottom",img:"icon-page-move-down",onClick:moveToBottom,title:"action.moveToBottom"})]})}MoveOperations.propTypes={moveToTop:prop_types_default().func,moveToBottom:prop_types_default().func};const MoveOperations_MoveOperations=MoveOperations;function ManipulateOperations({onInsert,onReplace,onExtractPages,onDeletePages}){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.A,{className:"button-hover",dataElement:"thumbnailsControlInsert",img:"icon-page-insertion-insert",onClick:onInsert,title:"action.insert"}),(0,jsx_runtime.jsx)(Button.A,{className:"button-hover",dataElement:"thumbnailsControlReplace",img:"icon-page-replacement",onClick:onReplace,title:"action.replace"}),(0,jsx_runtime.jsx)(Button.A,{className:"button-hover",dataElement:"thumbnailsControlExtract",img:"icon-page-manipulation-extract",onClick:onExtractPages,title:"action.extract"}),(0,jsx_runtime.jsx)(Button.A,{className:"button-hover",dataElement:"thumbnailsControlDelete",img:"icon-delete-line",onClick:onDeletePages,title:"action.delete"})]})}MoveOperations.__docgenInfo={description:"",methods:[],displayName:"MoveOperations",props:{moveToTop:{description:"",type:{name:"func"},required:!1},moveToBottom:{description:"",type:{name:"func"},required:!1}}},ManipulateOperations.propTypes={onInsert:prop_types_default().func,onReplace:prop_types_default().func,onExtractPages:prop_types_default().func,onDeletePages:prop_types_default().func};const ManipulateOperations_ManipulateOperations=ManipulateOperations;function RotateOperations({onRotateClockwise,onRotateCounterClockwise}){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.A,{className:"button-hover",dataElement:"thumbnailsControlRotateCounterClockwise",img:"icon-header-page-manipulation-page-rotation-counterclockwise-line",onClick:onRotateCounterClockwise,title:"action.rotateCounterClockwise"}),(0,jsx_runtime.jsx)(Button.A,{className:"button-hover",dataElement:"thumbnailsControlRotateClockwise",img:"icon-header-page-manipulation-page-rotation-clockwise-line",onClick:onRotateClockwise,title:"action.rotateClockwise"})]})}ManipulateOperations.__docgenInfo={description:"",methods:[],displayName:"ManipulateOperations",props:{onInsert:{description:"",type:{name:"func"},required:!1},onReplace:{description:"",type:{name:"func"},required:!1},onExtractPages:{description:"",type:{name:"func"},required:!1},onDeletePages:{description:"",type:{name:"func"},required:!1}}},RotateOperations.propTypes={onRotateClockwise:prop_types_default().func,onRotateCounterClockwise:prop_types_default().func};const RotateOperations_RotateOperations=RotateOperations;RotateOperations.__docgenInfo={description:"",methods:[],displayName:"RotateOperations",props:{onRotateClockwise:{description:"",type:{name:"func"},required:!1},onRotateCounterClockwise:{description:"",type:{name:"func"},required:!1}}};var pageManipulationFlyoutHelper=__webpack_require__("./src/helpers/pageManipulationFlyoutHelper.js");function ThumbnailControlsMultiContainer({parentElement}){const store=(0,es.Pj)(),dispatch=(0,es.wA)(),isMobile=(0,device.Fr)(),selectedPageIndexes=(0,es.d4)(selectors.A.getSelectedThumbnailPageIndexes),panelWidth=(0,es.d4)((state=>parentElement&&"leftPanel"!==parentElement?selectors.A.getPanelWidth(state,parentElement):selectors.A.getLeftPanelWidth(state))),deleteModalEnabled=(0,es.d4)(selectors.A.pageDeletionConfirmationModalEnabled),isDesktopOnlyMode=(0,es.d4)(selectors.A.isInDesktopOnlyMode),items=(0,es.d4)(selectors.A.getMultiPageManipulationControlsItems,es.bN),[displayFlyout,setDisplayFlyout]=(0,react.useState)(!1),pageNumbers=(0,react.useMemo)((()=>selectedPageIndexes.map((index=>index+1))),[selectedPageIndexes]),childProps=(0,react.useMemo)((()=>({onReplace:()=>!(0,pageManipulationFunctions.zd)(pageNumbers,dispatch)&&(0,pageManipulationFunctions.HC)(dispatch),onExtractPages:()=>!(0,pageManipulationFunctions.zd)(pageNumbers,dispatch)&&(0,pageManipulationFunctions.ut)(pageNumbers,dispatch),onDeletePages:()=>!(0,pageManipulationFunctions.zd)(pageNumbers,dispatch)&&(0,pageManipulationFunctions.Gt)(pageNumbers,dispatch,deleteModalEnabled),onRotateCounterClockwise:()=>!(0,pageManipulationFunctions.zd)(pageNumbers,dispatch)&&(0,pageManipulationFunctions.cV)(pageNumbers),onRotateClockwise:()=>!(0,pageManipulationFunctions.zd)(pageNumbers,dispatch)&&(0,pageManipulationFunctions.gH)(pageNumbers),onInsert:()=>!(0,pageManipulationFunctions.zd)(pageNumbers,dispatch)&&(dispatch(actions.A.closeElement(dataElement.A.PAGE_MANIPULATION_OVERLAY)),void dispatch(actions.A.openElement("insertPageModal"))),moveToTop:()=>!(0,pageManipulationFunctions.zd)(pageNumbers,dispatch)&&(0,pageManipulationFunctions.gP)(pageNumbers),moveToBottom:()=>!(0,pageManipulationFunctions.zd)(pageNumbers,dispatch)&&(0,pageManipulationFunctions.Iw)(pageNumbers),pageNumbers})),[pageNumbers,deleteModalEnabled]),{onRotateClockwise,onRotateCounterClockwise}=childProps,document=core.A.getDocument(),documentType=document?.type,isXod=documentType===types._.XOD,isOffice=documentType===types._.OFFICE||documentType===types._.LEGACY_OFFICE;let widthMinusMargins;if(!isDesktopOnlyMode&&isMobile)try{widthMinusMargins=(0,getRootNode.Ay)().querySelector(".App").getBoundingClientRect().width-88}catch(e){widthMinusMargins=(panelWidth||panel.fz)-88}else widthMinusMargins=(panelWidth||panel.fz)-88;const isPanelSmall=widthMinusMargins<190,isPanelLarge=widthMinusMargins>290;(0,react.useEffect)((()=>{const flyoutItems=[];let startIndex;startIndex=isPanelSmall?1:isPanelLarge?3:2;let index=0;items.forEach((item=>{let skip=!1;(index<startIndex||0===flyoutItems.length&&"divider"===item?.type)&&(skip=!0),item&&"divider"!==item.type&&index++,!skip&&flyoutItems.push(...(item=>"leftPanelPageTabsRotate"===item.dataElement?(0,pageManipulationFlyoutHelper.MH)(store,!0):"leftPanelPageTabsMove"===item.dataElement?(0,pageManipulationFlyoutHelper.Zz)(store,!0):"leftPanelPageTabsMore"===item.dataElement?(0,pageManipulationFlyoutHelper.bU)(store,!0):"customPageOperation"===item.type?(0,pageManipulationFlyoutHelper.Qg)(store,item):"divider"===item.type?["divider"]:void 0)(item))}));const flyout={dataElement:dataElement.A.PAGE_MANIPULATION_FLYOUT_MULTI_SELECT,className:dataElement.A.PAGE_MANIPULATION_FLYOUT_MULTI_SELECT,items:flyoutItems};isPanelLarge&&dispatch(actions.A.closeElement(flyout.dataElement)),flyout.items.length?(dispatch(actions.A.updateFlyout(flyout.dataElement,flyout)),setDisplayFlyout(!0)):(dispatch(actions.A.removeFlyout(flyout.dataElement)),setDisplayFlyout(!1))}),[store,isPanelLarge,isPanelSmall,items]);const renderedItems=(0,react.useMemo)((()=>{let lastDividerAdded=!1,index=0;return items.map(((item,actualIndex)=>{let lastIndexToRender;return lastIndexToRender=isPanelSmall?0:isPanelLarge?2:1,"divider"!==item?.type||lastDividerAdded?index>lastIndexToRender?null:(item&&"divider"!==item.type&&index++,"leftPanelPageTabsRotate"===item.dataElement?(0,react.createElement)(RotateOperations_RotateOperations,{...childProps,key:"leftPanelPageTabsRotate"}):"leftPanelPageTabsMove"===item.dataElement?(0,react.createElement)(MoveOperations_MoveOperations,{...childProps,key:"leftPanelPageTabsMove"}):"leftPanelPageTabsMore"===item.dataElement?(0,react.createElement)(ManipulateOperations_ManipulateOperations,{...childProps,key:"leftPanelPageTabsMore"}):"customPageOperation"===item.type?item.operations?item.operations.map((operation=>(0,jsx_runtime.jsx)(Button.A,{className:"button-hover",dataElement:operation.dataElement,img:operation.img,onClick:()=>operation.onClick(pageNumbers),title:operation.title},operation.dataElement))):(index--,null):null):(index>lastIndexToRender&&(lastDividerAdded=!0),(0,jsx_runtime.jsx)("div",{className:"divider"},`divider${actualIndex}`))}))}),[items,childProps,isPanelSmall,isPanelLarge]);return isXod||isOffice||document?.isWebViewerServerDocument()?(0,jsx_runtime.jsx)("div",{className:"PageControlContainer root small",children:(0,jsx_runtime.jsx)(RotateOperations_RotateOperations,{onRotateClockwise,onRotateCounterClockwise})}):(0,jsx_runtime.jsxs)("div",{className:"PageControlContainer root",children:[renderedItems,displayFlyout&&(0,jsx_runtime.jsxs)("div",{className:"dropdown-menu",children:[(0,jsx_runtime.jsx)(ToggleElementButton.A,{dataElement:`${dataElement.A.PAGE_MANIPULATION_FLYOUT_MULTI_SELECT}Button`,toggleElement:dataElement.A.PAGE_MANIPULATION_FLYOUT_MULTI_SELECT,title:"action.more",img:"icon-tool-more"}),(0,jsx_runtime.jsx)("div",{className:"indicator"})]})]})}ThumbnailControlsMultiContainer.propTypes={parentElement:prop_types_default().string};const ThumbnailControlsMulti_ThumbnailControlsMultiContainer=ThumbnailControlsMultiContainer;ThumbnailControlsMultiContainer.__docgenInfo={description:"",methods:[],displayName:"ThumbnailControlsMultiContainer",props:{parentElement:{description:"",type:{name:"string"},required:!1}}};const components_ThumbnailControlsMulti=ThumbnailControlsMulti_ThumbnailControlsMultiContainer;__webpack_require__("./src/components/DocumentControls/DocumentControls.scss");function getPageString(selectedPageArray,pageLabels){let pagesToPrint="";const sortedPages=selectedPageArray.sort(((a,b)=>a-b));let prevIndex=null;for(let i=0;sortedPages.length>i;i++)sortedPages[i+1]===sortedPages[i]+1?prevIndex=null!==prevIndex?prevIndex:sortedPages[i]:null!==prevIndex?(pagesToPrint=`${pagesToPrint}${pageLabels[prevIndex]}-${pageLabels[sortedPages[i]]}, `,prevIndex=null):pagesToPrint=`${pagesToPrint}${pageLabels[sortedPages[i]]}, `;return pagesToPrint.slice(0,-2)}const DocumentControls_DocumentControls=({shouldShowControls,parentElement})=>{const[t]=(0,useTranslation.B)(),dispatch=(0,es.wA)(),[selectedPageIndexes,isDisabled,pageLabels,isThumbnailSelectingPages,featureFlags]=(0,es.d4)((state=>[selectors.A.getSelectedThumbnailPageIndexes(state),selectors.A.isElementDisabled(state,"documentControl"),selectors.A.getPageLabels(state),selectors.A.isThumbnailSelectingPages(state),selectors.A.getFeatureFlags(state)])),initialPagesString=getPageString(selectedPageIndexes,pageLabels),[pageString,setPageString]=(0,react.useState)(initialPagesString),[previousPageString,setPreviousPageString]=(0,react.useState)(initialPagesString),customizableUI=featureFlags.customizableUI;(0,react.useEffect)((()=>{setPageString(getPageString(selectedPageIndexes,pageLabels))}),[setPageString,selectedPageIndexes,shouldShowControls,pageLabels]);const enableThumbnailSelectingPages=()=>{dispatch(actions.A.setThumbnailSelectingPages(!0))};return isDisabled?null:(0,jsx_runtime.jsx)("div",{className:"documentControlsContainer","data-element":"documentControl",children:shouldShowControls?(0,jsx_runtime.jsxs)("div",{className:"documentControls",children:[(0,jsx_runtime.jsx)("div",{className:"divider"}),isThumbnailSelectingPages&&(0,jsx_runtime.jsx)(components_ThumbnailControlsMulti,{parentElement}),customizableUI&&(0,jsx_runtime.jsxs)("label",{className:"documentControlsLabel",htmlFor:"pageNumbersInput",children:[(0,jsx_runtime.jsxs)("span",{children:[t("option.thumbnailPanel.multiSelectPages")," -"]}),(0,jsx_runtime.jsx)("span",{className:"multiSelectExampleLabel",children:t("option.thumbnailPanel.multiSelectPagesExample")})]}),(0,jsx_runtime.jsxs)("div",{className:"documentControlsInput",children:[(0,jsx_runtime.jsx)("input",{name:"pageNumbersInput",onBlur:e=>{const selectedPagesString=e.target.value.replace(/ /g,""),pages=selectedPagesString?(0,getPageArrayFromString.A)(selectedPagesString,pageLabels):[],pageIndexes=pages.map((page=>page-1));if(pages.length||!selectedPagesString){dispatch(actions.A.setSelectedPageThumbnails(pageIndexes));const updatedString=getPageString(selectedPageIndexes,pageLabels);setPageString(updatedString),setPreviousPageString(updatedString)}else setPageString(previousPageString);selectedPageIndexes.length>0&&!isThumbnailSelectingPages&&setTimeout((()=>{pageString!==previousPageString&&enableThumbnailSelectingPages()}),100)},onChange:e=>{setPageString(e.target.value)},value:pageString,placeholder:customizableUI?"":"1, 3, 5-10","aria-label":t("option.thumbnailPanel.enterPageNumbers"),className:"pagesInput",type:"text"}),(0,jsx_runtime.jsx)("div",{className:"documentControlsButton",children:isThumbnailSelectingPages?(0,jsx_runtime.jsx)(Button.A,{img:"icon-close",title:"option.documentControls.closeTooltip",onClick:()=>{dispatch(actions.A.setSelectedPageThumbnails([core.A.getCurrentPage()-1])),dispatch(actions.A.setThumbnailSelectingPages(!1))},dataElement:"thumbCloseMultiSelect"}):(0,jsx_runtime.jsx)(Button.A,{img:"icon-tool-select-pages",title:"option.documentControls.selectTooltip",onClick:enableThumbnailSelectingPages,dataElement:"thumbMultiSelect"})})]})]}):null})};DocumentControls_DocumentControls.propTypes={isDisabled:prop_types_default().bool,pageLabels:prop_types_default().arrayOf(prop_types_default().string),toggleDocumentControl:prop_types_default().func,shouldShowControls:prop_types_default().bool};const components_DocumentControls_DocumentControls=DocumentControls_DocumentControls;DocumentControls_DocumentControls.__docgenInfo={description:"",methods:[],displayName:"DocumentControls",props:{isDisabled:{description:"",type:{name:"bool"},required:!1},pageLabels:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},toggleDocumentControl:{description:"",type:{name:"func"},required:!1},shouldShowControls:{description:"",type:{name:"bool"},required:!1}}};const components_DocumentControls=components_DocumentControls_DocumentControls;var Slider=__webpack_require__("./src/components/Slider/index.js"),extractPagesWithAnnotations=__webpack_require__("./src/helpers/extractPagesWithAnnotations.js"),fireEvent=__webpack_require__("./src/helpers/fireEvent.js"),events=__webpack_require__("./src/constants/events.js");const mergeDocument=(srcToMerge,mergeToPage,shouldFireEvent=!0)=>dispatch=>(dispatch(actions.A.openElement(dataElement.A.LOADING_MODAL)),new Promise(((resolve,reject)=>{core.A.mergeDocument(srcToMerge,mergeToPage).then((mergeResults=>{dispatch(actions.A.closeElement(dataElement.A.LOADING_MODAL)),core.A.setCurrentPage(mergeToPage),shouldFireEvent&&(0,fireEvent.A)(events.A.DOCUMENT_MERGED,mergeResults),resolve(mergeResults)})).catch((err=>{reject(err),dispatch(actions.A.closeElement(dataElement.A.LOADING_MODAL))}))})));__webpack_require__("./src/components/ThumbnailsPanel/ThumbnailsPanel.scss");var i18next=__webpack_require__("./node_modules/i18next/dist/esm/i18next.js");const ThumbnailsPanel_ThumbnailsPanel=({panelSelector,parentDataElement})=>{const isLeftPanelOpen=(0,es.d4)((state=>selectors.A.isElementOpen(state,"leftPanel"))),isDisabled=(0,es.d4)((state=>selectors.A.isElementDisabled(state,"thumbnailsPanel"))),totalPages=(0,es.d4)(selectors.A.getTotalPages),currentPage=(0,es.d4)(selectors.A.getCurrentPage),selectedPageIndexes=(0,es.d4)((state=>selectors.A.getSelectedThumbnailPageIndexes(state)),es.bN),isThumbnailMergingEnabled=(0,es.d4)(selectors.A.getIsThumbnailMergingEnabled),isThumbnailReorderingEnabled=(0,es.d4)(selectors.A.getIsThumbnailReorderingEnabled),isMultipleViewerMerging=(0,es.d4)(selectors.A.getIsMultipleViewerMerging),isThumbnailControlDisabled=(0,es.d4)((state=>selectors.A.isElementDisabled(state,"thumbnailControl"))),isThumbnailSliderDisabled=(0,es.d4)((state=>selectors.A.isElementDisabled(state,"thumbnailsSizeSlider"))),isReaderMode=(0,es.d4)(selectors.A.isReaderMode),isDocumentReadOnly=(0,es.d4)(selectors.A.isDocumentReadOnly),totalPagesFromSecondaryDocumentViewer=(0,es.d4)((state=>selectors.A.getTotalPages(state,2))),activeDocumentViewerKey=(0,es.d4)(selectors.A.getActiveDocumentViewerKey),isRightClickEnabled=(0,es.d4)(selectors.A.openingPageManipulationOverlayByRightClickEnabled),featureFlags=(0,es.d4)(selectors.A.getFeatureFlags,es.bN),isContentEditingEnabled=(0,es.d4)(selectors.A.isContentEditingEnabled),[t]=(0,useTranslation.B)(),isRightToLeft="rtl"===i18next.A.dir(),listRef=(0,react.useRef)(),pendingThumbs=(0,react.useRef)([]),thumbs=(0,react.useRef)([]),afterMovePageNumber=(0,react.useRef)(null),[isOfficeEditor,setIsOfficeEditor]=(0,react.useState)(!1),[canLoad,setCanLoad]=(0,react.useState)(!0),[height,setHeight]=(0,react.useState)(0),[width,setWidth]=(0,react.useState)(0),[draggingOverPageIndex,setDraggingOverPageIndex]=(0,react.useState)(null),[isDraggingToPreviousPage,setDraggingToPreviousPage]=(0,react.useState)(!1),[numberOfColumns,setNumberOfColumns]=(0,react.useState)(1),[isDragging,setIsDragging]=(0,react.useState)(!1),[focusedIndex,setFocusedIndex]=(0,react.useState)(0),thumbnailContainerRefs=(0,react.useRef)([]),thumbnailRefs=(0,react.useRef)([]),focusedThumbnailRef=(0,react.useRef)(null),[thumbnailSize,setThumbnailSize]=(0,react.useState)(150),[lastTimeTriggered,setLastTimeTriggered]=(0,react.useState)(0),[globalIndex,setGlobalIndex]=(0,react.useState)(0),pageCount=2===activeDocumentViewerKey?totalPagesFromSecondaryDocumentViewer:totalPages,customizableUI=featureFlags?.customizableUI,dispatch=(0,es.wA)();let activeThumbRenders={};(0,react.useEffect)((()=>{const handleClickOutside=event=>{focusedThumbnailRef.current&&!focusedThumbnailRef.current.contains(event.target)&&removeOutline(focusedThumbnailRef.current)};return document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}}),[]);const handleKeyDown=(0,react.useCallback)(((e,currentIndex,columnCount)=>{let newIndex;e.stopPropagation();const arrowActions={ArrowLeft:()=>handleArrowKey(e,currentIndex,-1),ArrowRight:()=>handleArrowKey(e,currentIndex,1),ArrowUp:()=>handleArrowKey(e,currentIndex,-columnCount),ArrowDown:()=>handleArrowKey(e,currentIndex,columnCount)},keyActions={Enter:()=>handleEnterKey(e,currentIndex),Tab:()=>handleTabOutKey(currentIndex)};arrowActions[e.key]&&(newIndex=arrowActions[e.key]()),keyActions[e.key]&&keyActions[e.key](),void 0!==newIndex&&newIndex!==currentIndex&&(setFocusedIndex(newIndex),selectElement(thumbnailContainerRefs.current[newIndex]),deselectElement(thumbnailContainerRefs.current[currentIndex]))}),[thumbnailRefs,thumbnailContainerRefs]),selectElement=element=>{element.tabIndex=0,element.ariaCurrent="page",element.style.outline="var(--focus-visible-outline)",element.focus(),focusedThumbnailRef.current=element},deselectElement=element=>{element.tabIndex=-1,element.ariaCurrent=void 0,removeOutline(element)},removeOutline=element=>{element.style.outline="none"},handleTabOutKey=index=>{removeOutline(thumbnailContainerRefs.current[index])},handleArrowKey=(e,currentIndex,direction)=>{let newIndex=currentIndex+direction;return newIndex<0||newIndex>=pageCount?currentIndex:newIndex},handleEnterKey=(e,index)=>{e.preventDefault(),selectElement(thumbnailContainerRefs.current[index]),core.A.setCurrentPage(index+1),thumbnailRefs.current[index].focusInput()},handleThumbnailKeyDown=(0,react.useCallback)(((e,index)=>{e.stopPropagation();const keyActions={Tab:()=>handleTabKey(e,index),Escape:()=>handleEscapeKey(e,index)};keyActions[e.key]&&keyActions[e.key]?.()}),[thumbnailContainerRefs]),handleEscapeKey=(e,index)=>{e.preventDefault(),selectElement(thumbnailContainerRefs.current[index])},handleTabKey=(e,index)=>{let newIndex=index+(e.shiftKey?-1:1);(newIndex<0||newIndex>=pageCount)&&(newIndex=index),setFocusedIndex(newIndex),selectElement(thumbnailContainerRefs.current[newIndex]),newIndex!==index&&deselectElement(thumbnailContainerRefs.current[index])},updateAnnotations=pageIndex=>{const thumbContainer=thumbs.current&&thumbs.current[pageIndex]&&thumbs.current[pageIndex].element;if(!thumbContainer)return;const pageNumber=pageIndex+1,pageWidth=core.A.getPageWidth(pageNumber),pageHeight=core.A.getPageHeight(pageNumber),{width,height}=((pageWidth,pageHeight)=>{let width,height,ratio;return pageWidth>pageHeight?(ratio=pageWidth/thumbnailSize,width=thumbnailSize,height=Math.round(pageHeight/ratio)):(ratio=pageHeight/thumbnailSize,width=Math.round(pageWidth/ratio),height=thumbnailSize),{width,height}})(pageWidth,pageHeight),annotCanvas=thumbContainer.querySelector(".annotation-image")||document.createElement("canvas");annotCanvas.className="annotation-image "+(isRightToLeft?"right-to-left":""),annotCanvas.role="img",annotCanvas.ariaLabel=`${t("action.page")} ${pageNumber}`,annotCanvas.style.maxWidth=`${thumbnailSize}px`,annotCanvas.style.maxHeight=`${thumbnailSize}px`;const ctx=annotCanvas.getContext("2d");let zoom=1,rotation=core.A.getCompleteRotation(pageNumber);rotation<0&&(rotation+=4);const multiplier=window.Core.getCanvasMultiplier();rotation%2==0?(annotCanvas.width=width,annotCanvas.height=height,zoom=annotCanvas.width/pageWidth,zoom/=multiplier):(annotCanvas.width=height,annotCanvas.height=width,zoom=annotCanvas.height/pageWidth,zoom/=multiplier),thumbContainer.appendChild(annotCanvas),core.A.setAnnotationCanvasTransform(ctx,zoom,rotation);let options={pageNumber,overrideCanvas:annotCanvas};const thumb=thumbContainer.querySelector(".page-image");if(!thumb)return;options={...options,overridePageRotation:rotation,overridePageCanvas:thumb},activeThumbRenders[pageNumber]||(activeThumbRenders[pageNumber]=debounce_default()(core.A.drawAnnotations,112));(0,activeThumbRenders[pageNumber])(options)};if((0,react.useEffect)((()=>{const onBeginRendering=()=>{setCanLoad(!1)},onFinishedRendering=needsMoreRendering=>{needsMoreRendering||setCanLoad(!0)},onDocumentLoaded=()=>{"officeEditor"===core.A.getDocument()?.getType()?setIsOfficeEditor(!0):setIsOfficeEditor(!1),activeThumbRenders={},dispatch(actions.A.setSelectedPageThumbnails([]))},onPageComplete=()=>{afterMovePageNumber.current&&(core.A.setCurrentPage(afterMovePageNumber.current),afterMovePageNumber.current=null)};return core.A.addEventListener("beginRendering",onBeginRendering),core.A.addEventListener("finishedRendering",onFinishedRendering),core.A.addEventListener("documentLoaded",onDocumentLoaded),core.A.addEventListener("pageComplete",onPageComplete),core.A.getDocument()&&onDocumentLoaded(),()=>{core.A.removeEventListener("beginRendering",onBeginRendering),core.A.removeEventListener("finishedRendering",onFinishedRendering),core.A.removeEventListener("documentLoaded",onDocumentLoaded),core.A.removeEventListener("pageComplete",onPageComplete)}}),[]),(0,react.useEffect)((()=>{const onPagesUpdated=changes=>{if(!changes)return;let updatedPagesIndexes=Array.from(selectedPageIndexes);changes.removed&&(updatedPagesIndexes=updatedPagesIndexes.filter((pageIndex=>-1===changes.removed.indexOf(pageIndex+1)))),changes.moved&&(updatedPagesIndexes=updatedPagesIndexes.map((pageIndex=>changes.moved[pageIndex+1]?changes.moved[pageIndex+1]-1:pageIndex)));const isPageAddedBefore=changes.added&&changes.added[0]-1<=updatedPagesIndexes[0];1===updatedPagesIndexes.length&&isPageAddedBefore&&(updatedPagesIndexes=changes.added.map((pageNumber=>pageNumber-1))),dispatch(actions.A.setSelectedPageThumbnails(updatedPagesIndexes))};return core.A.addEventListener("pagesUpdated",onPagesUpdated),()=>core.A.removeEventListener("pagesUpdated",onPagesUpdated)}),[selectedPageIndexes]),(0,react.useEffect)((()=>{listRef.current?.scrollToRow(Math.floor((currentPage-1)/numberOfColumns));const onAnnotationChanged=annots=>{const indices=[];annots.forEach((annot=>{const pageIndex=annot.PageNumber-1;!annot.Listable||indices.indexOf(pageIndex)>-1||(indices.push(pageIndex),updateAnnotations(pageIndex))}))},onPageNumberUpdated=pageNumber=>{const pageIndex=pageNumber-1;listRef.current?.scrollToRow(Math.floor(pageIndex/numberOfColumns))};return core.A.addEventListener("pageNumberUpdated",onPageNumberUpdated),core.A.addEventListener("annotationChanged",onAnnotationChanged),core.A.addEventListener("annotationHidden",onAnnotationChanged),()=>{core.A.removeEventListener("pageNumberUpdated",onPageNumberUpdated),core.A.removeEventListener("annotationChanged",onAnnotationChanged),core.A.removeEventListener("annotationHidden",onAnnotationChanged)}}),[thumbnailSize,numberOfColumns]),(0,react.useEffect)((()=>{(isReaderMode||isDocumentReadOnly)&&(dispatch(actions.A.setSelectedPageThumbnails([])),dispatch(actions.A.setThumbnailSelectingPages(!1)))}),[isReaderMode,isDocumentReadOnly]),isDisabled||isOfficeEditor||!isLeftPanelOpen&&!panelSelector&&!customizableUI)return null;const onDragEnd=()=>{setIsDragging(!1),setDraggingOverPageIndex(null)},scrollToRowHelper=(index,change,time)=>{const now=(new Date).getTime();return index<pageCount-1&&index>0&&now-lastTimeTriggered>=time?(listRef.current?.scrollToRow(Math.floor((index+change)/numberOfColumns)),setLastTimeTriggered(now),index+change):index},onDragOver=(e,index)=>{if(e.preventDefault(),e.stopPropagation(),!isThumbnailReorderingEnabled&&!isThumbnailMergingEnabled)return;const thumbnail=e.target.getBoundingClientRect();setDraggingToPreviousPage(numberOfColumns>1?!(e.pageX>thumbnail.x+thumbnail.width/2):!(e.pageY>thumbnail.y+thumbnail.height/2)),setDraggingOverPageIndex(index);const virtualizedThumbnailContainerElement=(0,getRootNode.Ay)().querySelector("#virtualized-thumbnails-container"),{y,bottom}=virtualizedThumbnailContainerElement.getBoundingClientRect();e.pageY<y+100?setGlobalIndex(scrollToRowHelper(index,-1,400)):e.pageY>bottom-100&&setGlobalIndex(scrollToRowHelper(index,1,400))},scrollDown=()=>{setGlobalIndex(scrollToRowHelper(globalIndex,1,200))},scrollUp=()=>{setGlobalIndex(scrollToRowHelper(globalIndex,-1,200))},getContextElementId=()=>window.isApryseWebViewerWebComponent?(0,getRootNode.Ay)().host.id:window.frameElement.id,onDragStart=(e,index)=>{setGlobalIndex(index),setIsDragging(!0);const draggingSelectedPage=selectedPageIndexes.some((i=>i===index)),pagesToMove=draggingSelectedPage?selectedPageIndexes.map((index=>index+1)):[index+1];var pageNumbers;(0,fireEvent.A)(events.A.THUMBNAIL_DRAGGED),e.dataTransfer.setData("text",""),pagesToMove.length>1&&e.dataTransfer.setDragImage(new Image,0,0),isThumbnailMergingEnabled&&isMultipleViewerMerging&&(e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="all",e.dataTransfer.setData("dataTransferWebViewerFrame",getContextElementId()),pageNumbers=pagesToMove,window.extractedDataPromise=(0,extractPagesWithAnnotations.A)(pageNumbers),window.pagesExtracted=pageNumbers),draggingSelectedPage||dispatch(actions.A.setSelectedPageThumbnails([index])),core.A.setCurrentPage(index+1)},onDrop=e=>{e.preventDefault();const{files}=e.dataTransfer,insertTo=isDraggingToPreviousPage?draggingOverPageIndex+1:draggingOverPageIndex+2;let externalPageWebViewerFrameId;device.lw||(externalPageWebViewerFrameId=e.dataTransfer.getData("dataTransferWebViewerFrame"));const mergingDocument=externalPageWebViewerFrameId&&getContextElementId()!==externalPageWebViewerFrameId||files.length,currentPageIndex=currentPage-1;if(isThumbnailMergingEnabled&&mergingDocument)externalPageWebViewerFrameId&&getContextElementId()!==externalPageWebViewerFrameId?dispatch((viewerID=externalPageWebViewerFrameId,mergeToPage=insertTo,dispatch=>new Promise(((resolve,reject)=>{const otherWebViewerIframe=window.parent.document.querySelector(`#${viewerID}`);otherWebViewerIframe||(console.warn("Could not find other instance of WebViewer"),reject());let contentWindow=otherWebViewerIframe.contentWindow;window.isApryseWebViewerWebComponent&&(contentWindow=window);const extractedDataPromise=contentWindow.extractedDataPromise;extractedDataPromise||(console.warn("Could not retrieve data from other instance of WebViewer"),reject()),dispatch(actions.A.openElement(dataElement.A.LOADING_MODAL)),extractedDataPromise.then((docToMerge=>{dispatch(mergeDocument(docToMerge,mergeToPage,!1)).then((({filename,pages})=>{(0,fireEvent.A)(events.A.DOCUMENT_MERGED,{filename,pages:contentWindow.pagesExtracted}),dispatch(actions.A.closeElement(dataElement.A.LOADING_MODAL)),resolve({filename,pages})}))})).catch((err=>{dispatch(actions.A.closeElement(dataElement.A.LOADING_MODAL)),reject(err)}))})))):files.length&&Array.from(files).forEach((file=>{dispatch(mergeDocument(file,insertTo))}));else if(isThumbnailReorderingEnabled&&!mergingDocument&&null!==draggingOverPageIndex){const targetPageNumber=isDraggingToPreviousPage?draggingOverPageIndex+1:draggingOverPageIndex+2,pageNumbersToMove=selectedPageIndexes.some((i=>i===currentPageIndex))?selectedPageIndexes.map((i=>i+1)):[currentPage];afterMovePageNumber.current=targetPageNumber-pageNumbersToMove.filter((p=>p<targetPageNumber)).length,core.A.movePages(pageNumbersToMove,targetPageNumber);const updatedPagesNumbers=[];for(let offset=0;offset<pageNumbersToMove.length;offset++)updatedPagesNumbers.push(afterMovePageNumber.current+offset);(0,fireEvent.A)(events.A.THUMBNAIL_DROPPED,{pageNumbersBeforeMove:pageNumbersToMove,pagesNumbersAfterMove:updatedPagesNumbers,numberOfPagesMoved:updatedPagesNumbers.length})}var viewerID,mergeToPage;setDraggingOverPageIndex(null),setIsDragging(!1)},onLoad=(pageIndex,element,id)=>{thumbIsLoaded(pageIndex)||thumbIsPending(pageIndex)||(thumbs.current[pageIndex]={element,loaded:!1},pendingThumbs.current.push({pageIndex,id}))},removeFromPendingThumbs=pageIndex=>{const index=getPendingThumbIndex(pageIndex);-1!==index&&pendingThumbs.current.splice(index,1)},thumbIsLoaded=pageIndex=>thumbs.current[pageIndex]?.loaded,thumbIsPending=pageIndex=>-1!==getPendingThumbIndex(pageIndex),onCancel=pageIndex=>{const index=getPendingThumbIndex(pageIndex);-1!==index&&(core.A.cancelLoadThumbnail(pendingThumbs.current[index].id),pendingThumbs.current.splice(index,1))},getPendingThumbIndex=pageIndex=>pendingThumbs.current.findIndex((thumbStatus=>thumbStatus.pageIndex===pageIndex)),onRemove=pageIndex=>{onCancel(pageIndex);const canvases=thumbs.current[pageIndex]?.element?.querySelectorAll("canvas");canvases?.length&&canvases.forEach((c=>{c.height=0,c.width=0})),activeThumbRenders[pageIndex]&&activeThumbRenders[pageIndex].cancel(),thumbs.current[pageIndex]=null},renderThumbnails=({index,key,style})=>{const className=classnames_default()({columnsOfThumbnails:numberOfColumns>1,row:!0}),allowPageOperationsUI=!(isReaderMode||isDocumentReadOnly);return(0,jsx_runtime.jsx)("div",{role:"row","aria-label":"row",className,style,children:new Array(numberOfColumns).fill().map(((_,columnIndex)=>{const thumbIndex=index*numberOfColumns+columnIndex,allowDragAndDrop=allowPageOperationsUI&&(isThumbnailMergingEnabled||isThumbnailReorderingEnabled),showPlaceHolder=allowDragAndDrop&&draggingOverPageIndex===thumbIndex;return thumbIndex<pageCount?(0,jsx_runtime.jsxs)(react.Fragment,{children:[(numberOfColumns>1||0===thumbIndex)&&showPlaceHolder&&isDraggingToPreviousPage&&(0,jsx_runtime.jsx)("div",{className:"thumbnailPlaceholder"},`placeholder1-${thumbIndex}`),(0,jsx_runtime.jsx)("td",{ref:el=>thumbnailContainerRefs.current[thumbIndex]=el,role:"gridcell",tabIndex:focusedIndex===thumbIndex?0:-1,"aria-current":focusedIndex===thumbIndex?"page":void 0,onDragEnd,className:"cellThumbContainer",onKeyDown:e=>handleKeyDown(e,thumbIndex,numberOfColumns),onContextMenu:e=>{return isRightClickEnabled&&(pageIndex=thumbIndex,(event=e).preventDefault(),core.A.setCurrentPage(pageIndex+1),selectedPageIndexes.includes(pageIndex)||dispatch(actions.A.setSelectedPageThumbnails([pageIndex])),void(isReaderMode||isDocumentReadOnly||isContentEditingEnabled||(dispatch(actions.A.setFlyoutPosition({x:event.pageX,y:event.pageY})),dispatch(actions.A.openElements([dataElement.A.PAGE_MANIPULATION])))));var event,pageIndex},onFocus:e=>((e,index)=>{thumbnailContainerRefs.current&&thumbnailContainerRefs.current.includes(e.target)&&selectElement(thumbnailContainerRefs.current[index])})(e,thumbIndex),children:(0,jsx_runtime.jsx)(components_Thumbnail,{ref:el=>thumbnailRefs.current[thumbIndex]=el,isDraggable:allowDragAndDrop,isSelected:selectedPageIndexes.includes(thumbIndex),index:thumbIndex,canLoad,onLoad,onCancel,onRemove,onDragStart,onDragOver,onFinishLoading:removeFromPendingThumbs,updateAnnotations,shouldShowControls:allowPageOperationsUI,thumbnailSize,panelSelector,parentKeyListener:e=>handleThumbnailKeyDown(e,thumbIndex),isRightToLeft})},thumbIndex),showPlaceHolder&&!isDraggingToPreviousPage&&(0,jsx_runtime.jsx)("div",{className:"thumbnailPlaceholder"},`placeholder2-${thumbIndex}`)]},thumbIndex):null}))},key)},updateNumberOfColumns=()=>{setNumberOfColumns(Math.min(16,Math.max(1,Math.floor(width/thumbnailSize))))},thumbnailHeight=isThumbnailControlDisabled?Number(thumbnailSize)+50:Number(thumbnailSize)+80,shouldShowControls=!(isReaderMode||isDocumentReadOnly||isContentEditingEnabled),thumbnailAutoScrollAreaStyle={height:"25px"},onSliderChange=(property,value)=>{let zoomValue="1000"*Number(value);zoomValue<100&&(zoomValue=100),setThumbnailSize(zoomValue),updateNumberOfColumns()};return(0,jsx_runtime.jsxs)(react.Fragment,{children:[!isThumbnailSliderDisabled&&(0,jsx_runtime.jsxs)("div",{"data-element":"thumbnailsSizeSlider",className:"thumbnail-slider-container",children:[(0,jsx_runtime.jsx)(Button.A,{img:"icon-zoom-thumb-out",title:"action.zoomOut",hideTooltipShortcut:!0,onClick:()=>{thumbnailSize-"50">"50"&&(setThumbnailSize(thumbnailSize-"50"),updateNumberOfColumns())},dataElement:"zoomThumbOutButton"}),customizableUI&&(0,jsx_runtime.jsx)(Slider.A,{dataElement:"thumbnailsSizeSlider",property:"zoom",displayProperty:"zoom",min:0,max:1,step:.01,value:thumbnailSize/1e3,getDisplayValue:()=>thumbnailSize,onSliderChange,onStyleChange:onSliderChange,shouldHideSliderTitle:!0,shouldHideSliderValue:!0}),!customizableUI&&(0,jsx_runtime.jsx)("input",{role:"slider",type:"range","aria-label":"thumbnail size slider",min:"100",max:"1000",value:thumbnailSize,"aria-valuemin":"100","aria-valuemax":"1000","aria-valuenow":thumbnailSize,onChange:e=>{setThumbnailSize(Number(e.target.value)),updateNumberOfColumns()},step:"50",className:"thumbnail-slider",id:"thumbnailSize"}),(0,jsx_runtime.jsx)(Button.A,{img:"icon-zoom-thumb-in",title:"action.zoomIn",hideTooltipShortcut:!0,onClick:()=>{thumbnailSize+Number("50")<1001&&(setThumbnailSize(thumbnailSize+Number("50")),updateNumberOfColumns())},dataElement:"zoomThumbInButton"})]}),(0,jsx_runtime.jsx)(index_esm.A,{bounds:!0,onResize:({bounds})=>{setHeight(bounds.height),setWidth(bounds.width),setNumberOfColumns(Math.min(16,Math.max(1,Math.floor(bounds.width/thumbnailSize))))},children:({measureRef})=>(0,jsx_runtime.jsx)("div",{className:`Panel ThumbnailsPanel ${panelSelector}`,id:"virtualized-thumbnails-container","data-element":"thumbnailsPanel",onDrop,ref:measureRef,children:(0,jsx_runtime.jsxs)("div",{className:"virtualized-thumbnails-container",children:[isDragging?(0,jsx_runtime.jsx)("div",{className:"thumbnailAutoScrollArea",onDragOver:scrollUp,style:thumbnailAutoScrollAreaStyle}):"",(0,jsx_runtime.jsx)(dist_es.B8,{ref:listRef,height,width,rowHeight:thumbnailHeight,rowCount:Math.ceil(pageCount/numberOfColumns),rowRenderer:renderThumbnails,overscanRowCount:3,className:classnames_default()({thumbnailsList:!0,"right-to-left":isRightToLeft}),scrollToIndex:Math.floor((currentPage-1)/numberOfColumns),role:"grid","aria-label":t("component.thumbnailsPanel"),tabIndex:-1}),isDragging?(0,jsx_runtime.jsx)("div",{className:"thumbnailAutoScrollArea",onDragOver:scrollDown,style:{...thumbnailAutoScrollAreaStyle,bottom:"70px"}}):""]})})},thumbnailSize),(0,jsx_runtime.jsx)(components_DocumentControls,{shouldShowControls,parentElement:parentDataElement||panelSelector})]})},components_ThumbnailsPanel_ThumbnailsPanel=ThumbnailsPanel_ThumbnailsPanel;ThumbnailsPanel_ThumbnailsPanel.__docgenInfo={description:"",methods:[],displayName:"ThumbnailsPanel"}},"./src/components/ThumbnailsPanel/ThumbnailsPanel.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/ThumbnailsPanel/ThumbnailsPanel.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}}}]);