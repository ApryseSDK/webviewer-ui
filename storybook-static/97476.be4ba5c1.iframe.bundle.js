(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[97476],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/SignatureListPanel/SignatureListPanel.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.SignatureAddButton{width:auto;padding:8px;color:var(--blue-5);border:1px solid var(--blue-5);border-radius:4px;margin:16px 0}.SignatureAddButton:not(.disabled):hover{color:var(--primary-button-hover);border-color:var(--primary-button-hover)}.SignatureAddButton.disabled{color:var(--blue-5);opacity:.5;cursor:not-allowed}.SignatureAddButton.disabled span{color:var(--blue-5)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignatureAddButton{margin:16px}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignatureAddButton:not(.disabled):hover{color:var(--blue-5);border:1px solid var(--blue-5)}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .SignatureAddButton{margin:16px}.App.is-web-component:not(.is-in-desktop-only-mode) .SignatureAddButton:not(.disabled):hover{color:var(--blue-5);border:1px solid var(--blue-5)}}.SignatureListPanel{height:100%;display:flex;flex-direction:column}.SignatureListPanel .signature-list-panel-header{margin-top:0;font-size:16px;font-weight:700}.SignatureListPanel .signature-header{margin:16px 0;font-size:14px;font-weight:700}.SignatureListPanel .signature-list{padding:16px 2px 0;overflow:auto}.SignatureListPanel .signature-row{display:flex;flex-direction:row;height:48px;justify-content:space-between;align-items:center;margin-top:8px}.SignatureListPanel .signature-row .icon-button{padding:0;border:none;background-color:transparent;display:flex;align-items:center;justify-content:center;width:34px;height:34px;border-radius:4px;cursor:pointer}:host(:not([data-tabbing=true])) .SignatureListPanel .signature-row .icon-button,html:not([data-tabbing=true]) .SignatureListPanel .signature-row .icon-button{outline:none}.SignatureListPanel .signature-row .icon-button:hover{border:1px solid var(--blue-6);background:var(--gray-2)}.SignatureListPanel .signature-list-header{display:flex;flex-direction:row;align-items:center}.SignatureListPanel .signature-list-header .signature-title{flex-grow:2;margin-inline-end:8px;min-width:160px;font-weight:var(--font-weight-bold)}.SignatureListPanel .signature-list-header .initials-title{flex-grow:1;max-width:65px;font-weight:var(--font-weight-bold)}.SignatureListPanel .signature-list-header .delete-spacer{width:40px}.SignatureListPanel .signature-row-container{display:flex;flex-direction:row;align-items:center;flex-grow:1}.SignatureListPanel .signature-row-container .signature-row-content{border:none;background-color:transparent;height:40px;padding:4px 8px;border:1px solid var(--lighter-border);border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer;margin-inline-end:8px;background-color:var(--panel-list-item);flex-grow:2}:host(:not([data-tabbing=true])) .SignatureListPanel .signature-row-container .signature-row-content,html:not([data-tabbing=true]) .SignatureListPanel .signature-row-container .signature-row-content{outline:none}.SignatureListPanel .signature-row-container .signature-row-content img{max-width:100%;max-height:100%}.SignatureListPanel .signature-row-container .signature-row-content.interactable:hover{border-color:var(--blue-6)}.SignatureListPanel .signature-row-container .signature-row-content.interactable.active{background:var(--gray-2);border-color:var(--blue-5)}.SignatureListPanel .signature-row-container .signature-row-content.active{background:var(--tools-overlay-button-active)}.SignatureListPanel .signature-row-container .signature-row-content.focus-visible,.SignatureListPanel .signature-row-container .signature-row-content:focus-visible{outline:var(--focus-visible-outline)!important}.SignatureListPanel .signature-row-container .signature-row-content .signature-button-icon{width:20px;height:20px;margin-top:2px}.SignatureListPanel .signature-row-container .initials{max-width:65px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignatureListPanel{width:100%;position:relative}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignatureListPanel.hideAddButton .SignatureAddButton,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignatureListPanel .initials-title,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignatureListPanel .signature-title,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignatureListPanel.small-size .Divider{display:none}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignatureListPanel .signature-list-panel-header,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignatureListPanel .signature-row{padding:0 16px}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignatureListPanel .signature-list{padding-bottom:16px;position:relative}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignatureListPanel .signature-list .signature-row{justify-content:center;margin-top:0;margin-bottom:8px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .SignatureListPanel{width:100%;position:relative}.App.is-web-component:not(.is-in-desktop-only-mode) .SignatureListPanel.hideAddButton .SignatureAddButton,.App.is-web-component:not(.is-in-desktop-only-mode) .SignatureListPanel .initials-title,.App.is-web-component:not(.is-in-desktop-only-mode) .SignatureListPanel .signature-title,.App.is-web-component:not(.is-in-desktop-only-mode) .SignatureListPanel.small-size .Divider{display:none}.App.is-web-component:not(.is-in-desktop-only-mode) .SignatureListPanel .signature-list-panel-header,.App.is-web-component:not(.is-in-desktop-only-mode) .SignatureListPanel .signature-row{padding:0 16px}.App.is-web-component:not(.is-in-desktop-only-mode) .SignatureListPanel .signature-list{padding-bottom:16px;position:relative}.App.is-web-component:not(.is-in-desktop-only-mode) .SignatureListPanel .signature-list .signature-row{justify-content:center;margin-top:0;margin-bottom:8px}}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./src/components/SignatureListPanel/SignatureListPanel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>components_SignatureListPanel_SignatureListPanel});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),DataElementWrapper=__webpack_require__("./src/components/DataElementWrapper/index.js"),defaultTool=__webpack_require__("./src/constants/defaultTool.js"),dataElement=__webpack_require__("./src/constants/dataElement.js"),signatureModes=__webpack_require__("./src/constants/signatureModes.js"),panel=__webpack_require__("./src/constants/panel.js"),getDeviceSize=__webpack_require__("./src/helpers/getDeviceSize.js"),setToolModeAndGroup=__webpack_require__("./src/helpers/setToolModeAndGroup.js"),selectors=__webpack_require__("./src/redux/selectors/index.js"),actions=__webpack_require__("./src/redux/actions/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),Divider=(__webpack_require__("./src/components/SignatureListPanel/SignatureListPanel.scss"),__webpack_require__("./src/components/ModularComponents/Divider/index.js")),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),Button=__webpack_require__("./src/components/Button/index.js");const SignatureRowContent=react.memo((({index,onFullSignatureSetHandler,onInitialsSetHandler,isActive,altText,fullSignature,initials,isHoveredForDeletion,signatureMode})=>{const creatSignatureButton=(handler,imgSrc,signatureType)=>(0,jsx_runtime.jsx)("button",{className:classnames_default()("signature-row-content",{interactable:handler,active:isActive&&signatureType===signatureMode,"removal-hovered":isHoveredForDeletion},""+(signatureType===signatureModes.A.FULL_SIGNATURE?"full-signature":"initials")),onClick:()=>handler(index),children:(0,jsx_runtime.jsx)("img",{alt:altText,src:imgSrc})});return(0,jsx_runtime.jsxs)("div",{className:"signature-row-container",children:[creatSignatureButton(onFullSignatureSetHandler,fullSignature?.imgSrc,signatureModes.A.FULL_SIGNATURE),initials&&creatSignatureButton(onInitialsSetHandler,initials.imgSrc,signatureModes.A.INITIALS)]})}));SignatureRowContent.displayName="SignatureRowContent";const SavedSignatures=props=>{const{savedSignatures,onFullSignatureSetHandler,onInitialsSetHandler,deleteHandler,currentlySelectedSignature,isDeleteDisabled,signatureMode,panelSize}=props,{t}=(0,useTranslation.B)(),[hoveredIndexToDelete,setHoveredIndexToDelete]=react.useState(null),renderSignatureListHeader=()=>{const renderInitialsHeader=savedSignatures.some((({initials})=>initials));return(0,jsx_runtime.jsxs)("div",{className:"signature-list-header",children:[(0,jsx_runtime.jsx)("div",{className:"signature-title",children:t("signatureListPanel.signatureList.signature")}),renderInitialsHeader&&(0,jsx_runtime.jsx)("div",{className:"initials-title",children:t("signatureListPanel.signatureList.initials")}),(0,jsx_runtime.jsx)("div",{className:"delete-spacer"})]})},isMobile=(0,getDeviceSize.IS)();return savedSignatures.length>0?(0,jsx_runtime.jsxs)("div",{className:"signature-list",children:[renderSignatureListHeader(),savedSignatures.map(((signatureObject,index)=>[signatureObject,index])).map((([{fullSignature,initials},savedSignatureIndex])=>{const isPanelSizeLarge=!panelSize||panelSize!==panel.WA.SMALL_SIZE,isMobileSizeWithSmallPanel=isMobile&&panelSize===panel.WA.SMALL_SIZE;return isPanelSizeLarge||isMobileSizeWithSmallPanel&&currentlySelectedSignature===savedSignatureIndex?(0,jsx_runtime.jsxs)("div",{className:"signature-row",children:[(0,jsx_runtime.jsx)(SignatureRowContent,{index:savedSignatureIndex,fullSignature,initials,onFullSignatureSetHandler,onInitialsSetHandler,isActive:currentlySelectedSignature===savedSignatureIndex,altText:`${t("option.toolsOverlay.signatureAltText")} ${savedSignatureIndex+1}`,isHoveredForDeletion:hoveredIndexToDelete===savedSignatureIndex,signatureMode}),!isDeleteDisabled&&(0,jsx_runtime.jsx)(Button.A,{className:"icon-button",img:"icon-delete-line",ariaLabel:t("action.delete"),dataElement:"defaultSignatureDeleteButton",onMouseOver:()=>setHoveredIndexToDelete(savedSignatureIndex),onMouseLeave:()=>setHoveredIndexToDelete(null),onClick:()=>{deleteHandler(savedSignatureIndex),setHoveredIndexToDelete(null)}})]},savedSignatureIndex):null}))]}):null};SavedSignatures.displayName="SavedSignatures",SavedSignatures.propTypes={panelSize:prop_types_default().oneOf(Object.values(panel.WA))};const SignatureListPanel_SavedSignatures=react.memo(SavedSignatures);SavedSignatures.__docgenInfo={description:"",methods:[],displayName:"SavedSignatures",props:{panelSize:{description:"",type:{name:"enum",computed:!0,value:"Object.values(PANEL_SIZES)"},required:!1}}};var useFocusHandler=__webpack_require__("./src/hooks/useFocusHandler/index.js");const SignatureAddButton=({isDisabled})=>{const dispatch=(0,es.wA)(),[t]=(0,useTranslation.B)(),openSignatureModalWithFocus=(0,useFocusHandler.A)((()=>{isDisabled||(dispatch(actions.A.setSignatureMode(signatureModes.A.FULL_SIGNATURE)),dispatch(actions.A.openElement(dataElement.A.SIGNATURE_MODAL)))})),buttonLabel=(0,es.d4)((state=>selectors.A.getIsInitialsModeEnabled(state)))?"signatureListPanel.newSignatureAndInitial":"signatureListPanel.newSignature";return(0,jsx_runtime.jsx)(Button.A,{className:classnames_default()("SignatureAddButton",{disabled:isDisabled}),label:t(buttonLabel),dataElement:dataElement.A.SIGNATURE_ADD_BUTTON,onClick:openSignatureModalWithFocus})},SignatureListPanel_SignatureAddButton=react.memo(SignatureAddButton);SignatureAddButton.__docgenInfo={description:"",methods:[],displayName:"SignatureAddButton"};var core=__webpack_require__("./src/core/index.js"),events=__webpack_require__("./src/constants/events.js");const SignatureListPanel_SignatureListPanel=({panelSize})=>{const[t]=(0,useTranslation.B)(),isMobile=(0,getDeviceSize.IS)(),savedSignatures=(0,es.d4)(selectors.A.getSavedSignatures,es.bN),maxSignaturesCount=(0,es.d4)(selectors.A.getMaxSignaturesCount),displayedSignaturesFilterFunction=(0,es.d4)(selectors.A.getDisplayedSignaturesFilterFunction),isSignatureDeleteButtonDisabled=(0,es.d4)((state=>selectors.A.isElementDisabled(state,"defaultSignatureDeleteButton"))),savedInitials=(0,es.d4)(selectors.A.getSavedInitials,es.bN),selectedSignatureIndex=(0,es.d4)(selectors.A.getSelectedDisplayedSignatureIndex),signatureMode=(0,es.d4)(selectors.A.getSignatureMode),mobilePanelSize=(0,es.d4)(selectors.A.getMobilePanelSize),store=(0,es.Pj)(),TOOL_NAME="AnnotationCreateSignature",signatureToolArray=core.A.getToolsFromAllDocumentViewers(TOOL_NAME);(0,react.useEffect)((()=>()=>{for(const signatureTool of signatureToolArray)signatureTool.clearLocation(),signatureTool.setSignature(null),signatureTool.setInitials(null)}),[]);const[savedSignaturesAndInitials,setSavedSignaturesAndInitials]=react.useState([]);(0,react.useEffect)((()=>{const mergedSignaturesAndInitals=savedSignatures.filter(((signature,index)=>displayedSignaturesFilterFunction(signature,index))).map(((signature,index)=>({fullSignature:signature,initials:savedInitials[index]||null})));setSavedSignaturesAndInitials(mergedSignaturesAndInitals)}),[savedSignatures,savedInitials,displayedSignaturesFilterFunction]),(0,react.useEffect)((()=>{mobilePanelSize!==panel.WA.SMALL_SIZE&&isMobile&&dispatch(actions.A.setMobilePanelSize(panel.WA.SMALL_SIZE))}),[selectedSignatureIndex]),(0,react.useEffect)((()=>{const onVisibilityChanged=e=>{const activeTool=core.A.getToolMode(),activeToolName=activeTool?.name,{element,isVisible}=e.detail;element!==panel.BB.SIGNATURE_LIST||isVisible||activeToolName!==TOOL_NAME&&activeToolName!==defaultTool.A||(0,setToolModeAndGroup.A)(store,defaultTool.A)};return window.addEventListener(events.A.VISIBILITY_CHANGED,onVisibilityChanged),()=>{window.removeEventListener(events.A.VISIBILITY_CHANGED,onVisibilityChanged)}}),[]);const dispatch=(0,es.wA)(),setSignature=(0,react.useCallback)((async index=>{const{fullSignature}=savedSignaturesAndInitials[index],{annotation}=fullSignature;dispatch(actions.A.setSelectedDisplayedSignatureIndex(index)),core.A.setToolMode(TOOL_NAME);for(const signatureTool of signatureToolArray)await signatureTool.setSignature(annotation),signatureTool.hasLocation()?await signatureTool.addSignature():(await signatureTool.showPreview(),dispatch(actions.A.setSignatureMode(signatureModes.A.FULL_SIGNATURE)))}),[savedSignaturesAndInitials]),setInitials=(0,react.useCallback)((async index=>{const{initials}=savedSignaturesAndInitials[index],{annotation}=initials;dispatch(actions.A.setSelectedDisplayedSignatureIndex(index)),core.A.setToolMode(TOOL_NAME);for(const signatureTool of signatureToolArray)await signatureTool.setInitials(annotation),signatureTool.hasLocation()?(await signatureTool.addInitials(),dispatch(actions.A.setSignatureMode(signatureModes.A.FULL_SIGNATURE))):(await signatureTool.showInitialsPreview(),dispatch(actions.A.setSignatureMode(signatureModes.A.INITIALS)))}),[savedSignaturesAndInitials]),deleteSignatureAndInitials=(0,react.useCallback)((async index=>{signatureToolArray[0].deleteSavedInitials(index),signatureToolArray[0].deleteSavedSignature(index);const remainingSignatures=signatureToolArray[0].getSavedSignatures(),isDeletingSelectedSignature=selectedSignatureIndex===index;if(isDeletingSelectedSignature&&(signatureToolArray.forEach((signatureTool=>{signatureTool.hidePreview(),signatureTool.setSignature(null),signatureTool.setInitials(null)})),core.A.setToolMode(defaultTool.A)),0===remainingSignatures.length)dispatch(actions.A.setSelectedDisplayedSignatureIndex(null));else{let newIndex=selectedSignatureIndex;(isDeletingSelectedSignature||index<selectedSignatureIndex)&&(newIndex=Math.max(0,selectedSignatureIndex-1)),dispatch(actions.A.setSelectedDisplayedSignatureIndex(newIndex))}}),[selectedSignatureIndex]);return(0,jsx_runtime.jsxs)(DataElementWrapper.A,{dataElement:dataElement.A.SIGNATURE_LIST_PANEL,className:classnames_default()({Panel:!0,SignatureListPanel:!0,hideAddButton:savedSignatures.length&&panelSize===panel.WA.SMALL_SIZE,[panelSize]:!0}),children:[(0,jsx_runtime.jsx)("h2",{className:"signature-list-panel-header",children:t("signatureListPanel.header")}),(0,jsx_runtime.jsx)(SignatureListPanel_SignatureAddButton,{isDisabled:savedSignaturesAndInitials.length>=maxSignaturesCount}),(0,jsx_runtime.jsx)(Divider.A,{}),(0,jsx_runtime.jsx)(SignatureListPanel_SavedSignatures,{savedSignatures:savedSignaturesAndInitials,onFullSignatureSetHandler:setSignature,onInitialsSetHandler:setInitials,deleteHandler:deleteSignatureAndInitials,currentlySelectedSignature:selectedSignatureIndex,isDeleteDisabled:isSignatureDeleteButtonDisabled,signatureMode,panelSize})]})};SignatureListPanel_SignatureListPanel.propTypes={panelSize:prop_types_default().oneOf(Object.values(panel.WA))};const components_SignatureListPanel_SignatureListPanel=SignatureListPanel_SignatureListPanel;SignatureListPanel_SignatureListPanel.__docgenInfo={description:"",methods:[],displayName:"SignatureListPanel",props:{panelSize:{description:"",type:{name:"enum",computed:!0,value:"Object.values(PANEL_SIZES)"},required:!1}}}},"./src/components/SignatureListPanel/SignatureListPanel.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/SignatureListPanel/SignatureListPanel.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/SignatureListPanel/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("./src/components/SignatureListPanel/SignatureListPanel.js").A}}]);