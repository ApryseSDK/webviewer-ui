"use strict";(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[2130],{"./node_modules/react-select/creatable/dist/react-select.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__});var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/createClass.js"),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/inherits.js"),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_dist_index_75b02bac_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__=(__webpack_require__("./node_modules/@emotion/core/dist/core.browser.esm.js"),__webpack_require__("./node_modules/react-dom/index.js"),__webpack_require__("./node_modules/react-select/dist/index-75b02bac.browser.esm.js")),_dist_Select_e1cf49ae_browser_esm_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/react-select/dist/Select-e1cf49ae.browser.esm.js"),_dist_stateManager_2f2b6f5b_browser_esm_js__WEBPACK_IMPORTED_MODULE_15__=(__webpack_require__("./node_modules/@emotion/css/dist/css.browser.esm.js"),__webpack_require__("./node_modules/react-input-autosize/lib/AutosizeInput.js"),__webpack_require__("./node_modules/react-select/dist/stateManager-2f2b6f5b.browser.esm.js"));function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=(0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__.A)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__.A)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__.A)(this,result)}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var compareOption=function compareOption(){var option=arguments.length>1?arguments[1]:void 0,candidate=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),optionValue=String(option.value).toLowerCase(),optionLabel=String(option.label).toLowerCase();return optionValue===candidate||optionLabel===candidate},defaultProps=function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__.A)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({allowCreateWhileLoading:!1,createOptionPosition:"last"},{formatCreateLabel:function formatCreateLabel(inputValue){return'Create "'.concat(inputValue,'"')},isValidNewOption:function isValidNewOption(inputValue,selectValue,selectOptions){return!(!inputValue||selectValue.some((function(option){return compareOption(inputValue,option)}))||selectOptions.some((function(option){return compareOption(inputValue,option)})))},getNewOptionData:function getNewOptionData(inputValue,optionLabel){return{label:optionLabel,value:inputValue,__isNew__:!0}}}),SelectCreatable=function makeCreatableSelect(SelectComponent){var _class,_temp;return _temp=_class=function(_Component){(0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_8__.A)(Creatable,_Component);var _super=_createSuper(Creatable);function Creatable(props){var _this;(0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_9__.A)(this,Creatable),(_this=_super.call(this,props)).select=void 0,_this.onChange=function(newValue,actionMeta){var _this$props=_this.props,getNewOptionData=_this$props.getNewOptionData,inputValue=_this$props.inputValue,isMulti=_this$props.isMulti,onChange=_this$props.onChange,onCreateOption=_this$props.onCreateOption,value=_this$props.value,name=_this$props.name;if("select-option"!==actionMeta.action)return onChange(newValue,actionMeta);var newOption=_this.state.newOption,valueArray=Array.isArray(newValue)?newValue:[newValue];if(valueArray[valueArray.length-1]!==newOption)onChange(newValue,actionMeta);else if(onCreateOption)onCreateOption(inputValue);else{var newOptionData=getNewOptionData(inputValue,inputValue),newActionMeta={action:"create-option",name};onChange(isMulti?[].concat((0,_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_10__.A)((0,_dist_index_75b02bac_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__.C)(value)),[newOptionData]):newOptionData,newActionMeta)}};var options=props.options||[];return _this.state={newOption:void 0,options},_this}return(0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_12__.A)(Creatable,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(nextProps){var allowCreateWhileLoading=nextProps.allowCreateWhileLoading,createOptionPosition=nextProps.createOptionPosition,formatCreateLabel=nextProps.formatCreateLabel,getNewOptionData=nextProps.getNewOptionData,inputValue=nextProps.inputValue,isLoading=nextProps.isLoading,isValidNewOption=nextProps.isValidNewOption,value=nextProps.value,options=nextProps.options||[],newOption=this.state.newOption;newOption=isValidNewOption(inputValue,(0,_dist_index_75b02bac_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__.C)(value),options)?getNewOptionData(inputValue,formatCreateLabel(inputValue)):void 0,this.setState({newOption,options:!allowCreateWhileLoading&&isLoading||!newOption?options:"first"===createOptionPosition?[newOption].concat((0,_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_10__.A)(options)):[].concat((0,_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_10__.A)(options),[newOption])})}},{key:"focus",value:function focus(){this.select.focus()}},{key:"blur",value:function blur(){this.select.blur()}},{key:"render",value:function render(){var _this2=this,options=this.state.options;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(SelectComponent,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_13__.A)({},this.props,{ref:function ref(_ref){_this2.select=_ref},options,onChange:this.onChange}))}}]),Creatable}(react__WEBPACK_IMPORTED_MODULE_0__.Component),_class.defaultProps=defaultProps,_temp}(_dist_Select_e1cf49ae_browser_esm_js__WEBPACK_IMPORTED_MODULE_14__.S);const __WEBPACK_DEFAULT_EXPORT__=(0,_dist_stateManager_2f2b6f5b_browser_esm_js__WEBPACK_IMPORTED_MODULE_15__.m)(SelectCreatable)},"./node_modules/react-virtuoso/dist/index.m.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aY:()=>Sn});var react=__webpack_require__("./node_modules/react/index.js"),PUBLISH=0,SUBSCRIBE=1,RESET=2,VALUE=4;function compose(a,b){return function(arg){return a(b(arg))}}function thrush(arg,proc){return proc(arg)}function curry2to1(proc,arg1){return function(arg2){return proc(arg1,arg2)}}function curry1to0(proc,arg){return function(){return proc(arg)}}function prop(property){return function(object){return object[property]}}function tap(arg,proc){return proc(arg),arg}function tup(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return args}function call(proc){proc()}function always(value){return function(){return value}}function joinProc(){for(var _len2=arguments.length,procs=new Array(_len2),_key2=0;_key2<_len2;_key2++)procs[_key2]=arguments[_key2];return function(){procs.map(call)}}function noop(){}function subscribe(emitter,subscription){return emitter(SUBSCRIBE,subscription)}function publish(publisher,value){publisher(PUBLISH,value)}function urx_esm_reset(emitter){emitter(RESET)}function getValue(depot){return depot(VALUE)}function connect(emitter,publisher){return subscribe(emitter,curry2to1(publisher,PUBLISH))}function handleNext(emitter,subscription){var unsub=emitter(SUBSCRIBE,(function(value){unsub(),subscription(value)}));return unsub}function stream(){var subscriptions=[];return function(action,arg){switch(action){case RESET:return void subscriptions.splice(0,subscriptions.length);case SUBSCRIBE:return subscriptions.push(arg),function(){var indexOf=subscriptions.indexOf(arg);indexOf>-1&&subscriptions.splice(indexOf,1)};case PUBLISH:return void subscriptions.slice().forEach((function(subscription){subscription(arg)}));default:throw new Error("unrecognized action "+action)}}}function statefulStream(initial){var value=initial,innerSubject=stream();return function(action,arg){switch(action){case SUBSCRIBE:arg(value);break;case PUBLISH:value=arg;break;case VALUE:return value}return innerSubject(action,arg)}}function streamFromEmitter(emitter){return tap(stream(),(function(stream){return connect(emitter,stream)}))}function statefulStreamFromEmitter(emitter,initial){return tap(statefulStream(initial),(function(stream){return connect(emitter,stream)}))}function combineOperators(){for(var _len=arguments.length,operators=new Array(_len),_key=0;_key<_len;_key++)operators[_key]=arguments[_key];return function(subscriber){return operators.reduceRight(thrush,subscriber)}}function pipe(source){for(var _len2=arguments.length,operators=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)operators[_key2-1]=arguments[_key2];var project=combineOperators.apply(void 0,operators);return function(action,subscription){switch(action){case SUBSCRIBE:return subscribe(source,project(subscription));case RESET:return void urx_esm_reset(source);default:throw new Error("unrecognized action "+action)}}}function defaultComparator(previous,next){return previous===next}function distinctUntilChanged(comparator){var current;return void 0===comparator&&(comparator=defaultComparator),function(done){return function(next){comparator(current,next)||(current=next,done(next))}}}function filter(predicate){return function(done){return function(value){predicate(value)&&done(value)}}}function map(project){return function(done){return compose(done,project)}}function mapTo(value){return function(done){return function(){return done(value)}}}function scan(scanner,initial){return function(done){return function(value){return done(initial=scanner(initial,value))}}}function skip(times){return function(done){return function(value){times>0?times--:done(value)}}}function throttleTime(interval){var currentValue,timeout;return function(done){return function(value){currentValue=value,timeout||(timeout=setTimeout((function(){timeout=void 0,done(currentValue)}),interval))}}}function debounceTime(interval){var currentValue,timeout;return function(done){return function(value){currentValue=value,timeout&&clearTimeout(timeout),timeout=setTimeout((function(){done(currentValue)}),interval)}}}function withLatestFrom(){for(var _len3=arguments.length,sources=new Array(_len3),_key3=0;_key3<_len3;_key3++)sources[_key3]=arguments[_key3];var values=new Array(sources.length),called=0,pendingCall=null,allCalled=Math.pow(2,sources.length)-1;return sources.forEach((function(source,index){var bit=Math.pow(2,index);subscribe(source,(function(value){var prevCalled=called;called|=bit,values[index]=value,prevCalled!==allCalled&&called===allCalled&&pendingCall&&(pendingCall(),pendingCall=null)}))})),function(done){return function(value){var call=function call(){return done([value].concat(values))};called===allCalled?call():pendingCall=call}}}function merge(){for(var _len=arguments.length,sources=new Array(_len),_key=0;_key<_len;_key++)sources[_key]=arguments[_key];return function(action,subscription){switch(action){case SUBSCRIBE:return joinProc.apply(void 0,sources.map((function(source){return subscribe(source,subscription)})));case RESET:return;default:throw new Error("unrecognized action "+action)}}}function duc(source,comparator){return void 0===comparator&&(comparator=defaultComparator),pipe(source,distinctUntilChanged(comparator))}function combineLatest(){for(var innerSubject=stream(),_len2=arguments.length,emitters=new Array(_len2),_key2=0;_key2<_len2;_key2++)emitters[_key2]=arguments[_key2];var values=new Array(emitters.length),called=0,allCalled=Math.pow(2,emitters.length)-1;return emitters.forEach((function(source,index){var bit=Math.pow(2,index);subscribe(source,(function(value){values[index]=value,(called|=bit)===allCalled&&publish(innerSubject,values)}))})),function(action,subscription){switch(action){case SUBSCRIBE:return called===allCalled&&subscription(values),subscribe(innerSubject,subscription);case RESET:return urx_esm_reset(innerSubject);default:throw new Error("unrecognized action "+action)}}}function system(constructor,dependencies,_temp){void 0===dependencies&&(dependencies=[]);var singleton=(void 0===_temp?{singleton:!0}:_temp).singleton;return{id:id(),constructor,dependencies,singleton}}var id=function id(){return Symbol()};function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _createForOfIteratorHelperLoose(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(it)return(it=it.call(o)).next.bind(it);if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0;return function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var _excluded=["children"];var useIsomorphicLayoutEffect="undefined"!=typeof document?react.useLayoutEffect:react.useEffect;function systemToComponent(systemSpec,map,Root){var requiredPropNames=Object.keys(map.required||{}),optionalPropNames=Object.keys(map.optional||{}),methodNames=Object.keys(map.methods||{}),eventNames=Object.keys(map.events||{}),Context=(0,react.createContext)({});function applyPropsToSystem(system,props){system.propsReady&&publish(system.propsReady,!1);for(var _step,_iterator=_createForOfIteratorHelperLoose(requiredPropNames);!(_step=_iterator()).done;){var requiredPropName=_step.value;publish(system[map.required[requiredPropName]],props[requiredPropName])}for(var _step2,_iterator2=_createForOfIteratorHelperLoose(optionalPropNames);!(_step2=_iterator2()).done;){var optionalPropName=_step2.value;if(optionalPropName in props)publish(system[map.optional[optionalPropName]],props[optionalPropName])}system.propsReady&&publish(system.propsReady,!0)}function buildEventHandlers(system){return eventNames.reduce((function(handlers,eventName){return handlers[eventName]=function eventHandler(emitter){var unsub,currentSubscription,cleanup=function cleanup(){return unsub&&unsub()};return function(action,subscription){switch(action){case SUBSCRIBE:if(subscription){if(currentSubscription===subscription)return;return cleanup(),currentSubscription=subscription,unsub=subscribe(emitter,subscription)}return cleanup(),noop;case RESET:return cleanup(),void(currentSubscription=null);default:throw new Error("unrecognized action "+action)}}}(system[map.events[eventName]]),handlers}),{})}var Component=(0,react.forwardRef)((function(propsWithChildren,ref){var children=propsWithChildren.children,props=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(propsWithChildren,_excluded),_useState=(0,react.useState)((function(){return tap(function init(systemSpec){var singletons=new Map;return function _init(_ref2){var id=_ref2.id,constructor=_ref2.constructor,dependencies=_ref2.dependencies,singleton=_ref2.singleton;if(singleton&&singletons.has(id))return singletons.get(id);var system=constructor(dependencies.map((function(e){return _init(e)})));return singleton&&singletons.set(id,system),system}(systemSpec)}(systemSpec),(function(system){return applyPropsToSystem(system,props)}))})),system=_useState[0],handlers=(0,react.useState)(curry1to0(buildEventHandlers,system))[0];return useIsomorphicLayoutEffect((function(){for(var _step3,_iterator3=_createForOfIteratorHelperLoose(eventNames);!(_step3=_iterator3()).done;){var eventName=_step3.value;eventName in props&&subscribe(handlers[eventName],props[eventName])}return function(){Object.values(handlers).map(urx_esm_reset)}}),[props,handlers,system]),useIsomorphicLayoutEffect((function(){applyPropsToSystem(system,props)})),(0,react.useImperativeHandle)(ref,always(function buildMethods(system){return methodNames.reduce((function(acc,methodName){return acc[methodName]=function(value){publish(system[map.methods[methodName]],value)},acc}),{})}(system))),(0,react.createElement)(Context.Provider,{value:system},Root?(0,react.createElement)(Root,function omit(keys,obj){for(var result={},index={},idx=0,len=keys.length;idx<len;)index[keys[idx]]=1,idx+=1;for(var prop in obj)index.hasOwnProperty(prop)||(result[prop]=obj[prop]);return result}([].concat(requiredPropNames,optionalPropNames,eventNames),props),children):children)}));return{Component,usePublisher:function usePublisher(key){return(0,react.useCallback)(curry2to1(publish,(0,react.useContext)(Context)[key]),[key])},useEmitterValue:function useEmitterValue(key){var source=(0,react.useContext)(Context)[key],_useState3=(0,react.useState)(curry1to0(getValue,source)),value=_useState3[0],setValue=_useState3[1];return useIsomorphicLayoutEffect((function(){return subscribe(source,(function(next){next!==value&&setValue(always(next))}))}),[source,value]),value},useEmitter:function useEmitter(key,callback){var source=(0,react.useContext)(Context)[key];useIsomorphicLayoutEffect((function(){return subscribe(source,callback)}),[callback,source])}}}function H(){return H=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},H.apply(this,arguments)}function R(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)e.indexOf(n=i[o])>=0||(r[n]=t[n]);return r}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function k(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var z,B,t,F="undefined"!=typeof document?react.useLayoutEffect:react.useEffect;(t=B||(B={}))[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR";var P=((z={})[B.DEBUG]="debug",z[B.INFO]="log",z[B.WARN]="warn",z[B.ERROR]="error",z),O=system((function(){var t=statefulStream(B.ERROR);return{log:statefulStream((function(n,o,r){var i;void 0===r&&(r=B.INFO),r>=(null!=(i=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?i:getValue(t))&&console[P[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",n,o)})),logLevel:t}}),[],{singleton:!0});function M(t,e){void 0===e&&(e=!0);var n=(0,react.useRef)(null),o=function(t){};if("undefined"!=typeof ResizeObserver){var r=new ResizeObserver((function(e){var n=e[0].target;null!==n.offsetParent&&t(n)}));o=function(t){t&&e?(r.observe(t),n.current=t):(n.current&&r.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:o}}function V(t,e){return void 0===e&&(e=!0),M(t,e).callbackRef}function U(t,e,n,o,r,i){return M((function(n){for(var a=function(t,e,n,o){var r=t.length;if(0===r)return null;for(var i=[],a=0;a<r;a++){var l=t.item(a);if(l&&void 0!==l.dataset.index){var s=parseInt(l.dataset.index),u=parseFloat(l.dataset.knownSize),c=e(l,"offsetHeight");if(0===c&&o("Zero-sized element, this should not happen",{child:l},B.ERROR),c!==u){var m=i[i.length-1];0===i.length||m.size!==c||m.endIndex!==s-1?i.push({startIndex:s,endIndex:s,size:c}):i[i.length-1].endIndex++}}}return i}(n.children,e,0,r),l=n.parentElement;!l.dataset.virtuosoScroller;)l=l.parentElement;var s=i?i.scrollTop:"window"===l.firstElementChild.dataset.viewportType?window.pageYOffset||document.documentElement.scrollTop:l.scrollTop;o({scrollTop:Math.max(s,0),scrollHeight:(null!=i?i:l).scrollHeight,viewportHeight:(null!=i?i:l).offsetHeight}),null!==a&&t(a)}),n)}function A(t,e){return Math.round(t.getBoundingClientRect()[e])}function W(t,n,o,r,i){void 0===r&&(r=noop);var a=(0,react.useRef)(null),l=(0,react.useRef)(null),s=(0,react.useRef)(null),u=(0,react.useCallback)((function(e){var o=e.target,r=o===window||o===document?window.pageYOffset||document.documentElement.scrollTop:o.scrollTop,i=o===window?document.documentElement.scrollHeight:o.scrollHeight,a=o===window?window.innerHeight:o.offsetHeight;t({scrollTop:Math.max(r,0),scrollHeight:i,viewportHeight:a}),null!==l.current&&(r===l.current||r<=0||r===o.scrollHeight-A(o,"height"))&&(l.current=null,n(!0),s.current&&(clearTimeout(s.current),s.current=null))}),[t,n]);return(0,react.useEffect)((function(){var t=i||a.current;return r(i||a.current),u({target:t}),t.addEventListener("scroll",u,{passive:!0}),function(){r(null),t.removeEventListener("scroll",u)}}),[a,u,o,r,i]),{scrollerRef:a,scrollByCallback:function(t){a.current.scrollBy(t)},scrollToCallback:function(e){var o=a.current;if(o&&(!("offsetHeight"in o)||0!==o.offsetHeight)){var r,i,u,c="smooth"===e.behavior;if(o===window?(i=Math.max(A(document.documentElement,"height"),document.documentElement.scrollHeight),r=window.innerHeight,u=document.documentElement.scrollTop):(i=o.scrollHeight,r=A(o,"height"),u=o.scrollTop),e.top=Math.ceil(Math.max(Math.min(i-r,e.top),0)),Math.abs(r-i)<1.01||e.top===u)return t({scrollTop:u,scrollHeight:i,viewportHeight:r}),void(c&&n(!0));c?(l.current=e.top,s.current&&clearTimeout(s.current),s.current=setTimeout((function(){s.current=null,l.current=null,n(!0)}),1e3)):l.current=null,o.scrollTo(e)}}}}var N=system((function(){var t=stream(),n=stream(),o=statefulStream(0),r=stream(),i=statefulStream(0),a=stream(),l=stream(),s=statefulStream(0),u=statefulStream(0),c=stream(),m=stream(),d=statefulStream(!1),f=statefulStream(!1);return connect(pipe(t,map((function(t){return t.scrollTop}))),n),connect(pipe(t,map((function(t){return t.scrollHeight}))),l),connect(n,i),{scrollContainerState:t,scrollTop:n,viewportHeight:a,headerHeight:s,footerHeight:u,scrollHeight:l,smoothScrollTargetReached:r,react18ConcurrentRendering:f,scrollTo:c,scrollBy:m,statefulScrollTop:i,deviation:o,scrollingInProgress:d}}),[],{singleton:!0}),D={lvl:0};function G(t,e,n,o,r){return void 0===o&&(o=D),void 0===r&&(r=D),{k:t,v:e,lvl:n,l:o,r}}function _(t){return t===D}function j(){return D}function K(t,e){if(_(t))return D;var n=t.k,o=t.l,r=t.r;if(e===n){if(_(o))return r;if(_(r))return o;var i=$(o);return et(X(t,{k:i[0],v:i[1],l:Q(o)}))}return et(X(t,e<n?{l:K(o,e)}:{r:K(r,e)}))}function Y(t,e,n){if(void 0===n&&(n="k"),_(t))return[-1/0,void 0];if(t[n]===e)return[t.k,t.v];if(t[n]<e){var o=Y(t.r,e,n);return-1/0===o[0]?[t.k,t.v]:o}return Y(t.l,e,n)}function Z(t,e,n){return _(t)?G(e,n,1):e===t.k?X(t,{k:e,v:n}):function(t){return rt(it(t))}(X(t,e<t.k?{l:Z(t.l,e,n)}:{r:Z(t.r,e,n)}))}function q(t,e,n){if(_(t))return[];var o=t.k,r=t.v,i=t.r,a=[];return o>e&&(a=a.concat(q(t.l,e,n))),o>=e&&o<=n&&a.push({k:o,v:r}),o<=n&&(a=a.concat(q(i,e,n))),a}function J(t){return _(t)?[]:[].concat(J(t.l),[{k:t.k,v:t.v}],J(t.r))}function $(t){return _(t.r)?[t.k,t.v]:$(t.r)}function Q(t){return _(t.r)?t.l:et(X(t,{r:Q(t.r)}))}function X(t,e){return G(void 0!==e.k?e.k:t.k,void 0!==e.v?e.v:t.v,void 0!==e.lvl?e.lvl:t.lvl,void 0!==e.l?e.l:t.l,void 0!==e.r?e.r:t.r)}function tt(t){return _(t)||t.lvl>t.r.lvl}function et(t){var e=t.l,n=t.r,o=t.lvl;if(n.lvl>=o-1&&e.lvl>=o-1)return t;if(o>n.lvl+1){if(tt(e))return it(X(t,{lvl:o-1}));if(_(e)||_(e.r))throw new Error("Unexpected empty nodes");return X(e.r,{l:X(e,{r:e.r.l}),r:X(t,{l:e.r.r,lvl:o-1}),lvl:o})}if(tt(t))return rt(X(t,{lvl:o-1}));if(_(n)||_(n.l))throw new Error("Unexpected empty nodes");var r=n.l,i=tt(r)?n.lvl-1:n.lvl;return X(r,{l:X(t,{r:r.l,lvl:o-1}),r:rt(X(n,{l:r.r,lvl:i})),lvl:r.lvl+1})}function nt(t,e,n){return _(t)?[]:ot(q(t,Y(t,e)[0],n),(function(t){return{index:t.k,value:t.v}}))}function ot(t,e){var n=t.length;if(0===n)return[];for(var o=e(t[0]),r=o.index,i=o.value,a=[],l=1;l<n;l++){var s=e(t[l]),u=s.index,c=s.value;a.push({start:r,end:u-1,value:i}),r=u,i=c}return a.push({start:r,end:1/0,value:i}),a}function rt(t){var e=t.r,n=t.lvl;return _(e)||_(e.r)||e.lvl!==n||e.r.lvl!==n?t:X(e,{l:X(t,{r:e.l}),lvl:n+1})}function it(t){var e=t.l;return _(e)||e.lvl!==t.lvl?t:X(e,{r:X(t,{l:e.r})})}function at(t,e,n,o){void 0===o&&(o=0);for(var r=t.length-1;o<=r;){var i=Math.floor((o+r)/2),a=n(t[i],e);if(0===a)return i;if(-1===a){if(r-o<2)return i-1;r=i-1}else{if(r===o)return i;o=i+1}}throw new Error("Failed binary finding record in array - "+t.join(",")+", searched for "+e)}function lt(t,e,n){return t[at(t,e,n)]}function st(t){var e=t.size,n=t.startIndex,o=t.endIndex;return function(t){return t.start===n&&(t.end===o||1/0===t.end)&&t.value===e}}function ut(t,e){var n=t.index;return e===n?0:e<n?-1:1}function ct(t,e){var n=t.offset;return e===n?0:e<n?-1:1}function mt(t){return{index:t.index,value:t}}function dt(t,e,n){var o=t,r=0,i=0,a=0,l=0;if(0!==e){a=o[l=at(o,e-1,ut)].offset;var s=Y(n,e-1);r=s[0],i=s[1],o.length&&o[l].size===Y(n,e)[1]&&(l-=1),o=o.slice(0,l+1)}else o=[];for(var u,c=k(nt(n,e,1/0));!(u=c()).done;){var m=u.value,d=m.start,f=m.value,p=(d-r)*i+a;o.push({offset:p,size:f,index:d}),r=d,a=p,i=f}return{offsetTree:o,lastIndex:r,lastOffset:a,lastSize:i}}function ft(t,e){var n=e[0],o=e[1];n.length>0&&(0,e[2])("received item sizes",n,B.DEBUG);var r=t.sizeTree,i=r,a=0;if(o.length>0&&_(r)&&2===n.length){var l=n[0].size,s=n[1].size;i=o.reduce((function(t,e){return Z(Z(t,e,l),e+1,s)}),i)}else{var u=function(t,e){for(var n,o=_(t)?0:1/0,r=k(e);!(n=r()).done;){var i=n.value,a=i.size,l=i.startIndex,s=i.endIndex;if(o=Math.min(o,l),_(t))t=Z(t,0,a);else{var u=nt(t,l-1,s+1);if(!u.some(st(i))){for(var c,m=!1,d=!1,f=k(u);!(c=f()).done;){var p=c.value,h=p.start,g=p.end,v=p.value;m?(s>=h||a===v)&&(t=K(t,h)):(d=v!==a,m=!0),g>s&&s>=h&&v!==a&&(t=Z(t,s+1,v))}d&&(t=Z(t,l,a))}}}return[t,o]}(i,n);i=u[0],a=u[1]}if(i===r)return t;var c=dt(t.offsetTree,a,i),m=c.offsetTree;return{sizeTree:i,offsetTree:m,lastIndex:c.lastIndex,lastOffset:c.lastOffset,lastSize:c.lastSize,groupOffsetTree:o.reduce((function(t,e){return Z(t,e,pt(e,m))}),j()),groupIndices:o}}function pt(t,e){if(0===e.length)return 0;var n=lt(e,t,ut);return n.size*(t-n.index)+n.offset}function ht(t,e){if(!gt(e))return t;for(var n=0;e.groupIndices[n]<=t+n;)n++;return t+n}function gt(t){return!_(t.groupOffsetTree)}var vt={offsetHeight:"height",offsetWidth:"width"},St=system((function(t){var n=t[0].log,o=stream(),r=stream(),i=statefulStreamFromEmitter(r,0),a=stream(),l=stream(),s=statefulStream(0),u=statefulStream([]),c=statefulStream(void 0),m=statefulStream(void 0),d=statefulStream((function(t,e){return A(t,vt[e])})),f=statefulStream(void 0),p={offsetTree:[],sizeTree:j(),groupOffsetTree:j(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},h=statefulStreamFromEmitter(pipe(o,withLatestFrom(u,n),scan(ft,p),distinctUntilChanged()),p);connect(pipe(u,filter((function(t){return t.length>0})),withLatestFrom(h),map((function(t){var e=t[0],n=t[1],o=e.reduce((function(t,e,o){return Z(t,e,pt(e,n.offsetTree)||o)}),j());return H({},n,{groupIndices:e,groupOffsetTree:o})}))),h),connect(pipe(r,withLatestFrom(h),filter((function(t){return t[0]<t[1].lastIndex})),map((function(t){var e=t[1];return[{startIndex:t[0],endIndex:e.lastIndex,size:e.lastSize}]}))),o),connect(c,m);var g=statefulStreamFromEmitter(pipe(c,map((function(t){return void 0===t}))),!0);connect(pipe(m,filter((function(t){return void 0!==t&&_(getValue(h).sizeTree)})),map((function(t){return[{startIndex:0,endIndex:0,size:t}]}))),o);var v=streamFromEmitter(pipe(o,withLatestFrom(h),scan((function(t,e){var n=e[1];return{changed:n!==t.sizes,sizes:n}}),{changed:!1,sizes:p}),map((function(t){return t.changed}))));subscribe(pipe(s,scan((function(t,e){return{diff:t.prev-e,prev:e}}),{diff:0,prev:0}),map((function(t){return t.diff}))),(function(t){t>0?publish(a,t):t<0&&publish(l,t)})),subscribe(pipe(s,withLatestFrom(n)),(function(t){t[0]<0&&(0,t[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:s},B.ERROR)}));var S=streamFromEmitter(a);connect(pipe(a,withLatestFrom(h),map((function(t){var e=t[0],n=t[1];if(n.groupIndices.length>0)throw new Error("Virtuoso: prepending items does not work with groups");return J(n.sizeTree).reduce((function(t,n){var o=n.k,r=n.v;return{ranges:[].concat(t.ranges,[{startIndex:t.prevIndex,endIndex:o+e-1,size:t.prevSize}]),prevIndex:o+e,prevSize:r}}),{ranges:[],prevIndex:0,prevSize:n.lastSize}).ranges}))),o);var I=streamFromEmitter(pipe(l,withLatestFrom(h),map((function(t){return pt(-t[0],t[1].offsetTree)}))));return connect(pipe(l,withLatestFrom(h),map((function(t){var e=t[0],n=t[1];if(n.groupIndices.length>0)throw new Error("Virtuoso: shifting items does not work with groups");var o=J(n.sizeTree).reduce((function(t,n){var o=n.v;return Z(t,Math.max(0,n.k+e),o)}),j());return H({},n,{sizeTree:o},dt(n.offsetTree,0,o))}))),h),{data:f,totalCount:r,sizeRanges:o,groupIndices:u,defaultItemSize:m,fixedItemSize:c,unshiftWith:a,shiftWith:l,shiftWithOffset:I,beforeUnshiftWith:S,firstItemIndex:s,sizes:h,listRefresh:v,statefulTotalCount:i,trackItemSizes:g,itemSize:d}}),tup(O),{singleton:!0}),It="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style;function Ct(t){var e="number"==typeof t?{index:t}:t;return e.align||(e.align="start"),e.behavior&&It||(e.behavior="auto"),e.offset||(e.offset=0),e}var Tt=system((function(t){var n=t[0],o=n.sizes,r=n.totalCount,i=n.listRefresh,a=t[1],l=a.scrollingInProgress,s=a.viewportHeight,u=a.scrollTo,c=a.smoothScrollTargetReached,m=a.headerHeight,d=a.footerHeight,f=t[2].log,p=stream(),h=statefulStream(0),g=null,v=null,S=null;function I(){g&&(g(),g=null),S&&(S(),S=null),v&&(clearTimeout(v),v=null),publish(l,!1)}return connect(pipe(p,withLatestFrom(o,s,r,h,m,d,f),map((function(t){var n=t[0],o=t[1],r=t[2],a=t[3],s=t[4],u=t[5],m=t[6],d=t[7],f=Ct(n),h=f.align,C=f.behavior,T=f.offset,w=a-1,x=f.index;"LAST"===x&&(x=w),x=ht(x,o);var y=pt(x=Math.max(0,x,Math.min(w,x)),o.offsetTree)+u;"end"===h?(y=y-r+Y(o.sizeTree,x)[1],x===w&&(y+=m)):"center"===h?y=y-r/2+Y(o.sizeTree,x)[1]/2:y-=s,T&&(y+=T);var b=function(t){I(),t?(d("retrying to scroll to",{location:n},B.DEBUG),publish(p,n)):d("list did not change, scroll successful",{},B.DEBUG)};if(I(),"smooth"===C){var E=!1;S=subscribe(i,(function(t){E=E||t})),g=handleNext(c,(function(){b(E)}))}else g=handleNext(pipe(i,(function(t){var e=setTimeout((function(){t(!1)}),50);return function(n){n&&(t(!0),clearTimeout(e))}})),b);return v=setTimeout((function(){I()}),1200),publish(l,!0),d("scrolling from index to",{index:x,top:y,behavior:C},B.DEBUG),{top:y,behavior:C}}))),u),{scrollToIndex:p,topListHeight:h}}),tup(St,N,O),{singleton:!0}),wt="up",xt={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},yt=system((function(t){var n=t[0],o=n.scrollContainerState,r=n.scrollTop,i=n.viewportHeight,a=n.headerHeight,l=n.footerHeight,s=n.scrollBy,u=statefulStream(!1),c=statefulStream(!0),m=stream(),d=stream(),f=statefulStream(4),p=statefulStream(0),h=streamFromEmitter(pipe(merge(pipe(duc(r),skip(1),mapTo(!0)),pipe(duc(r),skip(1),mapTo(!1),debounceTime(100))),distinctUntilChanged())),g=statefulStreamFromEmitter(pipe(merge(pipe(s,mapTo(!0)),pipe(s,mapTo(!1),debounceTime(200))),distinctUntilChanged()),!1);connect(pipe(combineLatest(duc(r),duc(p)),map((function(t){return t[0]<=t[1]})),distinctUntilChanged()),c),connect(pipe(c,throttleTime(50)),d);var v=streamFromEmitter(pipe(combineLatest(o,duc(i),duc(a),duc(l),duc(f)),scan((function(t,e){var n,o,r=e[0],i=r.scrollTop,a=r.scrollHeight,l=e[1],s={viewportHeight:l,scrollTop:i,scrollHeight:a};return i+l-a>-e[4]?(i>t.state.scrollTop?(n="SCROLLED_DOWN",o=t.state.scrollTop-i):(n="SIZE_DECREASED",o=t.state.scrollTop-i||t.scrollTopDelta),{atBottom:!0,state:s,atBottomBecause:n,scrollTopDelta:o}):{atBottom:!1,notAtBottomBecause:s.scrollHeight>t.state.scrollHeight?"SIZE_INCREASED":l<t.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":i<t.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:s}}),xt),distinctUntilChanged((function(t,e){return t&&t.atBottom===e.atBottom})))),S=statefulStreamFromEmitter(pipe(o,scan((function(t,e){var n=e.scrollTop,o=e.scrollHeight;return t.scrollHeight!==o?t.scrollTop!==n&&n===o-e.viewportHeight?{scrollHeight:o,scrollTop:n,jump:t.scrollTop-n,changed:!0}:{scrollHeight:o,scrollTop:n,jump:0,changed:!0}:{scrollTop:n,scrollHeight:o,jump:0,changed:!1}}),{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),filter((function(t){return t.changed})),map((function(t){return t.jump}))),0);connect(pipe(v,map((function(t){return t.atBottom}))),u),connect(pipe(u,throttleTime(50)),m);var I=statefulStream("down");connect(pipe(o,map((function(t){return t.scrollTop})),distinctUntilChanged(),scan((function(t,n){return getValue(g)?{direction:t.direction,prevScrollTop:n}:{direction:n<t.prevScrollTop?wt:"down",prevScrollTop:n}}),{direction:"down",prevScrollTop:0}),map((function(t){return t.direction}))),I),connect(pipe(o,throttleTime(50),mapTo("none")),I);var C=statefulStream(0);return connect(pipe(h,filter((function(t){return!t})),mapTo(0)),C),connect(pipe(r,throttleTime(100),withLatestFrom(h),filter((function(t){return!!t[1]})),scan((function(t,e){return[t[1],e[0]]}),[0,0]),map((function(t){return t[1]-t[0]}))),C),{isScrolling:h,isAtTop:c,isAtBottom:u,atBottomState:v,atTopStateChange:d,atBottomStateChange:m,scrollDirection:I,atBottomThreshold:f,atTopThreshold:p,scrollVelocity:C,lastJumpDueToItemResize:S}}),tup(N)),bt=system((function(t){var o=t[0].log,r=statefulStream(!1),i=streamFromEmitter(pipe(r,filter((function(t){return t})),distinctUntilChanged()));return subscribe(r,(function(t){t&&getValue(o)("props updated",{},B.DEBUG)})),{propsReady:r,didMount:i}}),tup(O),{singleton:!0}),Et=system((function(t){var n=t[0],o=n.sizes,r=n.listRefresh,i=n.defaultItemSize,a=t[1].scrollTop,l=t[2].scrollToIndex,s=t[3].didMount,u=statefulStream(!0),c=statefulStream(0);return connect(pipe(s,withLatestFrom(c),filter((function(t){return!!t[1]})),mapTo(!1)),u),subscribe(pipe(combineLatest(r,s),withLatestFrom(u,o,i),filter((function(t){var e=t[1],n=t[3];return t[0][1]&&(!_(t[2].sizeTree)||void 0!==n)&&!e})),withLatestFrom(c)),(function(t){var n=t[1];setTimeout((function(){handleNext(a,(function(){publish(u,!0)})),publish(l,n)}))})),{scrolledToInitialItem:u,initialTopMostItemIndex:c}}),tup(St,N,Tt,bt),{singleton:!0});function Ht(t){return!!t&&("smooth"===t?"smooth":"auto")}var Rt=system((function(t){var n=t[0],o=n.totalCount,r=n.listRefresh,i=t[1],a=i.isAtBottom,l=i.atBottomState,s=t[2].scrollToIndex,u=t[3].scrolledToInitialItem,c=t[4],m=c.propsReady,d=c.didMount,f=t[5].log,p=t[6].scrollingInProgress,h=statefulStream(!1),g=null;function v(t){publish(s,{index:"LAST",align:"end",behavior:t})}return subscribe(pipe(combineLatest(pipe(duc(o),skip(1)),d),withLatestFrom(duc(h),a,u,p),map((function(t){var e=t[0],n=e[0],o=e[1]&&t[3],r="auto";return o&&(r=function(t,e){return"function"==typeof t?Ht(t(e)):e&&Ht(t)}(t[1],t[2]||t[4]),o=o&&!!r),{totalCount:n,shouldFollow:o,followOutputBehavior:r}})),filter((function(t){return t.shouldFollow}))),(function(t){var n=t.totalCount,o=t.followOutputBehavior;g&&(g(),g=null),g=handleNext(r,(function(){getValue(f)("following output to ",{totalCount:n},B.DEBUG),v(o),g=null}))})),subscribe(pipe(combineLatest(duc(h),o,m),filter((function(t){return t[0]&&t[2]})),scan((function(t,e){var n=e[1];return{refreshed:t.value===n,value:n}}),{refreshed:!1,value:0}),filter((function(t){return t.refreshed})),withLatestFrom(h,o)),(function(t){var n=t[1],o=handleNext(l,(function(t){!n||t.atBottom||"SIZE_INCREASED"!==t.notAtBottomBecause||g||(getValue(f)("scrolling to bottom due to increased size",{},B.DEBUG),v("auto"))}));setTimeout(o,100)})),subscribe(combineLatest(duc(h),l),(function(t){var e=t[1];t[0]&&!e.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===e.notAtBottomBecause&&v("auto")})),{followOutput:h}}),tup(St,yt,Tt,Et,bt,O,N));function Lt(t){return t.reduce((function(t,e){return t.groupIndices.push(t.totalCount),t.totalCount+=e+1,t}),{totalCount:0,groupIndices:[]})}var kt=system((function(t){var e=t[0],n=e.totalCount,o=e.groupIndices,r=e.sizes,p=t[1],h=p.scrollTop,g=p.headerHeight,v=stream(),S=stream(),I=streamFromEmitter(pipe(v,map(Lt)));return connect(pipe(I,map(prop("totalCount"))),n),connect(pipe(I,map(prop("groupIndices"))),o),connect(pipe(combineLatest(h,r,g),filter((function(t){return gt(t[1])})),map((function(t){return Y(t[1].groupOffsetTree,Math.max(t[0]-t[2],0),"v")[0]})),distinctUntilChanged(),map((function(t){return[t]}))),S),{groupCounts:v,topItemsIndexes:S}}),tup(St,N));function zt(t,e){return!(!t||t[0]!==e[0]||t[1]!==e[1])}function Bt(t,e){return!(!t||t.startIndex!==e.startIndex||t.endIndex!==e.endIndex)}function Ft(t,e,n){return"number"==typeof t?n===wt&&"top"===e||"down"===n&&"bottom"===e?t:0:n===wt?"top"===e?t.main:t.reverse:"bottom"===e?t.main:t.reverse}function Pt(t,e){return"number"==typeof t?t:t[e]||0}var Ot=system((function(t){var n=t[0],o=n.scrollTop,r=n.viewportHeight,i=n.deviation,a=n.headerHeight,l=stream(),s=statefulStream(0),u=statefulStream(0),c=statefulStream(0),m=statefulStream(0),d=statefulStreamFromEmitter(pipe(combineLatest(duc(o),duc(r),duc(a),duc(l,zt),duc(m),duc(s),duc(u),duc(i),duc(c)),map((function(t){var e=t[0],n=t[1],o=t[2],r=t[3],i=r[0],a=r[1],l=t[4],s=t[6],u=t[7],c=t[8],m=e-u,d=t[5]+s,f=Math.max(o-m,0),p="none",h=Pt(c,"top"),g=Pt(c,"bottom");return i-=u,a+=o+s,(i+=o+s)>e+d-h&&(p=wt),(a-=u)<e-f+n+g&&(p="down"),"none"!==p?[Math.max(m-o-Ft(l,"top",p)-h,0),m-f-s+n+Ft(l,"bottom",p)+g]:null})),filter((function(t){return null!=t})),distinctUntilChanged(zt)),[0,0]);return{listBoundary:l,overscan:m,topListHeight:s,fixedHeaderHeight:u,increaseViewportBy:c,visibleRange:d}}),tup(N),{singleton:!0}),Mt={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0};function Vt(t,e,n){if(0===t.length)return[];if(!gt(e))return t.map((function(t){return H({},t,{index:t.index+n,originalIndex:t.index})}));for(var o,r=[],i=nt(e.groupOffsetTree,t[0].index,t[t.length-1].index),a=void 0,l=0,s=k(t);!(o=s()).done;){var u=o.value;(!a||a.end<u.index)&&(a=i.shift(),l=e.groupIndices.indexOf(a.start)),r.push(H({},u.index===a.start?{type:"group",index:l}:{index:u.index-(l+1)+n,groupIndex:l},{size:u.size,offset:u.offset,originalIndex:u.index,data:u.data}))}return r}function Ut(t,e,n,o,r){var i=0,a=0;if(t.length>0){i=t[0].offset;var l=t[t.length-1];a=l.offset+l.size}var s=i,u=o.lastOffset+(n-o.lastIndex)*o.lastSize-a;return{items:Vt(t,o,r),topItems:Vt(e,o,r),topListHeight:e.reduce((function(t,e){return e.size+t}),0),offsetTop:i,offsetBottom:u,top:s,bottom:a,totalCount:n}}var At,Wt,Nt,Dt=system((function(t){var n=t[0],o=n.sizes,r=n.totalCount,i=n.data,a=n.firstItemIndex,l=t[1],s=t[2],u=s.visibleRange,c=s.listBoundary,m=s.topListHeight,d=t[3],f=d.scrolledToInitialItem,p=d.initialTopMostItemIndex,h=t[4].topListHeight,g=t[5],v=t[6].didMount,S=statefulStream([]),I=stream();connect(l.topItemsIndexes,S);var C=statefulStreamFromEmitter(pipe(combineLatest(v,duc(u),duc(r),duc(o),duc(p),f,duc(S),duc(a),i),filter((function(t){return t[0]})),map((function(t){var n=t[1],o=n[0],r=n[1],i=t[2],a=t[4],l=t[5],s=t[6],u=t[7],c=t[8],m=t[3],d=m.sizeTree,f=m.offsetTree;if(0===i||0===o&&0===r)return Mt;if(_(d))return Ut(function(t,e,n){if(gt(e)){var o=ht(t,e);return[{index:Y(e.groupOffsetTree,o)[0],size:0,offset:0},{index:o,size:0,offset:0,data:n&&n[0]}]}return[{index:t,size:0,offset:0,data:n&&n[0]}]}(function(t,e){return"number"==typeof t?t:"LAST"===t.index?e-1:t.index}(a,i),m,c),[],i,m,u);var p=[];if(s.length>0)for(var h,g=s[0],v=s[s.length-1],S=0,I=k(nt(d,g,v));!(h=I()).done;)for(var C=h.value,T=C.value,w=Math.max(C.start,g),x=Math.min(C.end,v),y=w;y<=x;y++)p.push({index:y,size:T,offset:S,data:c&&c[y]}),S+=T;if(!l)return Ut([],p,i,m,u);var b=s.length>0?s[s.length-1]+1:0,E=function(t,e,n,o){return void 0===o&&(o=0),o>0&&(e=Math.max(e,lt(t,o,ut).offset)),ot((i=n,l=at(r=t,e,a=ct),s=at(r,i,a,l),r.slice(l,s+1)),mt);var r,i,a,l,s}(f,o,r,b);if(0===E.length)return null;var H=i-1;return Ut(tap([],(function(t){for(var e,n=k(E);!(e=n()).done;){var i=e.value,a=i.value,l=a.offset,s=i.start,u=a.size;a.offset<o&&(l+=((s+=Math.floor((o-a.offset)/u))-i.start)*u),s<b&&(l+=(b-s)*u,s=b);for(var m=Math.min(i.end,H),d=s;d<=m&&!(l>=r);d++)t.push({index:d,size:u,offset:l,data:c&&c[d]}),l+=u}})),p,i,m,u)})),filter((function(t){return null!==t})),distinctUntilChanged()),Mt);return connect(pipe(i,filter((function(t){return void 0!==t})),map((function(t){return t.length}))),r),connect(pipe(C,map(prop("topListHeight"))),h),connect(h,m),connect(pipe(C,map((function(t){return[t.top,t.bottom]}))),c),connect(pipe(C,map((function(t){return t.items}))),I),H({listState:C,topItemsIndexes:S,endReached:streamFromEmitter(pipe(C,filter((function(t){return t.items.length>0})),withLatestFrom(r,i),filter((function(t){var e=t[0].items;return e[e.length-1].originalIndex===t[1]-1})),map((function(t){return[t[1]-1,t[2]]})),distinctUntilChanged(zt),map((function(t){return t[0]})))),startReached:streamFromEmitter(pipe(C,throttleTime(200),filter((function(t){var e=t.items;return e.length>0&&e[0].originalIndex===t.topItems.length})),map((function(t){return t.items[0].index})),distinctUntilChanged())),rangeChanged:streamFromEmitter(pipe(C,filter((function(t){return t.items.length>0})),map((function(t){var e=t.items;return{startIndex:e[0].index,endIndex:e[e.length-1].index}})),distinctUntilChanged(Bt))),itemsRendered:I},g)}),tup(St,kt,Ot,Et,Tt,yt,bt),{singleton:!0}),Gt=system((function(t){var n=t[0],o=n.sizes,r=n.firstItemIndex,i=n.data,a=t[1].listState,l=t[2].didMount,s=statefulStream(0);return connect(pipe(l,withLatestFrom(s),filter((function(t){return 0!==t[1]})),withLatestFrom(o,r,i),map((function(t){var e=t[0][1],n=t[1],o=t[2],r=t[3],i=void 0===r?[]:r,a=0;if(n.groupIndices.length>0)for(var l,s=k(n.groupIndices);!((l=s()).done||l.value-a>=e);)a++;var u=e+a;return Ut(Array.from({length:u}).map((function(t,e){return{index:e,size:0,offset:0,data:i[e]}})),[],u,n,o)}))),a),{initialItemCount:s}}),tup(St,Dt,bt),{singleton:!0}),_t=system((function(t){var n=t[0].scrollVelocity,o=statefulStream(!1),r=stream(),i=statefulStream(!1);return connect(pipe(n,withLatestFrom(i,o,r),filter((function(t){return!!t[1]})),map((function(t){var e=t[0],n=t[1],o=t[2],r=t[3],i=n.enter;if(o){if((0,n.exit)(e,r))return!1}else if(i(e,r))return!0;return o})),distinctUntilChanged()),o),subscribe(pipe(combineLatest(o,n,r),withLatestFrom(i)),(function(t){var e=t[0],n=t[1];return e[0]&&n&&n.change&&n.change(e[1],e[2])})),{isSeeking:o,scrollSeekConfiguration:i,scrollVelocity:n,scrollSeekRangeChanged:r}}),tup(yt),{singleton:!0}),jt=system((function(t){var e=t[0].topItemsIndexes,n=statefulStream(0);return connect(pipe(n,filter((function(t){return t>0})),map((function(t){return Array.from({length:t}).map((function(t,e){return e}))}))),e),{topItemCount:n}}),tup(Dt)),Kt=system((function(t){var n=t[0],o=n.footerHeight,r=n.headerHeight,i=t[1].listState,a=stream(),l=statefulStreamFromEmitter(pipe(combineLatest(o,r,i),map((function(t){var e=t[2];return t[0]+t[1]+e.offsetBottom+e.bottom}))),0);return connect(duc(l),a),{totalListHeight:l,totalListHeightChanged:a}}),tup(N,Dt),{singleton:!0}),Yt=system((function(t){var n=t[0],o=n.scrollBy,r=n.scrollTop,i=n.deviation,a=n.scrollingInProgress,l=t[1],s=l.isScrolling,u=l.isAtBottom,c=l.atBottomState,m=l.scrollDirection,d=t[3],f=d.beforeUnshiftWith,p=d.shiftWithOffset,h=d.sizes,g=t[4].log,v=streamFromEmitter(pipe(t[2].listState,withLatestFrom(l.lastJumpDueToItemResize),scan((function(t,e){var n=t[1],o=e[0],r=o.items,i=o.totalCount,a=o.bottom+o.offsetBottom,l=0;return t[2]===i&&n.length>0&&r.length>0&&(0===r[0].originalIndex&&0===n[0].originalIndex||0!=(l=a-t[3])&&(l+=e[1])),[l,r,i,a]}),[0,[],0,0]),filter((function(t){return 0!==t[0]})),withLatestFrom(r,m,a,g,u,c),filter((function(t){return!t[3]&&0!==t[1]&&t[2]===wt})),map((function(t){var e=t[0][0];return(0,t[4])("Upward scrolling compensation",{amount:e},B.DEBUG),e}))));return connect(pipe(v,withLatestFrom(i),map((function(t){return t[1]-t[0]}))),i),subscribe(pipe(combineLatest(statefulStreamFromEmitter(s,!1),i),filter((function(t){return!t[0]&&0!==t[1]})),map((function(t){return t[1]})),throttleTime(1)),(function(t){t>0?(publish(o,{top:-t,behavior:"auto"}),publish(i,0)):(publish(i,0),publish(o,{top:-t,behavior:"auto"}))})),connect(pipe(p,map((function(t){return{top:-t}}))),o),connect(pipe(f,withLatestFrom(h),map((function(t){return t[0]*t[1].lastSize}))),v),{deviation:i}}),tup(N,yt,Dt,St,O)),Zt=system((function(t){var n=t[0].totalListHeight,o=t[1].didMount,r=t[2].scrollTo,i=statefulStream(0);return subscribe(pipe(o,withLatestFrom(i),filter((function(t){return 0!==t[1]})),map((function(t){return{top:t[1]}}))),(function(t){handleNext(pipe(n,filter((function(t){return 0!==t}))),(function(){setTimeout((function(){publish(r,t)}))}))})),{initialScrollTop:i}}),tup(Kt,bt,N),{singleton:!0}),qt=system((function(t){var n=t[0].viewportHeight,o=t[1].totalListHeight,r=statefulStream(!1);return{alignToBottom:r,paddingTopAddition:statefulStreamFromEmitter(pipe(combineLatest(r,n,o),filter((function(t){return t[0]})),map((function(t){return Math.max(0,t[1]-t[2])})),distinctUntilChanged()),0)}}),tup(N,Kt),{singleton:!0}),Jt=system((function(t){var n=t[0],o=n.scrollTo,r=n.scrollContainerState,i=stream(),a=stream(),l=stream(),s=statefulStream(!1),u=statefulStream(void 0);return connect(pipe(combineLatest(i,a),map((function(t){var e=t[0],n=e.viewportHeight,o=e.scrollHeight;return{scrollTop:Math.max(0,e.scrollTop-t[1].offsetTop),scrollHeight:o,viewportHeight:n}}))),r),connect(pipe(o,withLatestFrom(a),map((function(t){var e=t[0];return H({},e,{top:e.top+t[1].offsetTop})}))),l),{useWindowScroll:s,customScrollParent:u,windowScrollContainerState:i,windowViewportRect:a,windowScrollTo:l}}),tup(N)),$t=system((function(t){var n=t[0],o=n.sizes,r=n.totalCount,i=t[1],a=i.scrollTop,l=i.viewportHeight,s=i.headerHeight,u=i.scrollingInProgress,c=t[2].scrollToIndex,m=stream();return connect(pipe(m,withLatestFrom(o,l,r,s,a),map((function(t){var n=t[0],o=n.index,r=n.behavior,i=void 0===r?"auto":r,a=n.done,l=t[1],s=t[2],c=t[4],m=t[5],d=t[3]-1,f=null;o=ht(o,l);var p=pt(o=Math.max(0,o,Math.min(d,o)),l.offsetTree)+c;return p<m?f={index:o,behavior:i,align:"start"}:p+Y(l.sizeTree,o)[1]>m+s&&(f={index:o,behavior:i,align:"end"}),f?a&&handleNext(pipe(u,skip(1),filter((function(t){return!1===t}))),a):a&&a(),f})),filter((function(t){return null!==t}))),c),{scrollIntoView:m}}),tup(St,N,Tt,Dt,O),{singleton:!0}),Qt=["listState","topItemsIndexes"],Xt=system((function(t){return H({},t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}),tup(Ot,Gt,bt,_t,Kt,Zt,qt,Jt,$t)),te=system((function(t){var n=t[0],o=n.totalCount,r=n.sizeRanges,i=n.fixedItemSize,a=n.defaultItemSize,l=n.trackItemSizes,s=n.itemSize,u=n.data,c=n.firstItemIndex,m=n.groupIndices,d=n.statefulTotalCount,f=t[1],p=f.initialTopMostItemIndex,h=f.scrolledToInitialItem,g=t[2],v=t[3],S=t[4],I=S.listState,C=S.topItemsIndexes,T=R(S,Qt),w=t[5].scrollToIndex,x=t[7].topItemCount,y=t[8].groupCounts,b=t[9],E=t[10];return connect(T.rangeChanged,b.scrollSeekRangeChanged),connect(pipe(b.windowViewportRect,map(prop("visibleHeight"))),g.viewportHeight),H({totalCount:o,data:u,firstItemIndex:c,sizeRanges:r,initialTopMostItemIndex:p,scrolledToInitialItem:h,topItemsIndexes:C,topItemCount:x,groupCounts:y,fixedItemHeight:i,defaultItemHeight:a},v,{statefulTotalCount:d,listState:I,scrollToIndex:w,trackItemSizes:l,itemSize:s,groupIndices:m},T,b,g,E)}),tup(St,Et,N,Rt,Dt,Tt,Yt,jt,kt,Xt,O)),ee=(At=function(){if("undefined"==typeof document)return"sticky";var t=document.createElement("div");return t.style.position="-webkit-sticky","-webkit-sticky"===t.style.position?"-webkit-sticky":"sticky"},Nt=!1,function(){return Nt||(Nt=!0,Wt=At()),Wt});function ne(t,e){var n=(0,react.useRef)(null),o=(0,react.useCallback)((function(o){if(null!==o){var r,i,a=o.getBoundingClientRect(),l=a.width;if(e){var s=e.getBoundingClientRect(),u=a.top-s.top;r=s.height-Math.max(0,u),i=u+e.scrollTop}else r=window.innerHeight-Math.max(0,a.top),i=a.top+window.pageYOffset;n.current={offsetTop:i,visibleHeight:r,visibleWidth:l},t(n.current)}}),[t,e]),r=M(o),i=r.callbackRef,a=r.ref,l=(0,react.useCallback)((function(){o(a.current)}),[o,a]);return(0,react.useEffect)((function(){if(e){e.addEventListener("scroll",l);var t=new ResizeObserver(l);return t.observe(e),function(){e.removeEventListener("scroll",l),t.unobserve(e)}}return window.addEventListener("scroll",l),window.addEventListener("resize",l),function(){window.removeEventListener("scroll",l),window.removeEventListener("resize",l)}}),[l,e]),i}var oe=["placeholder"],re=["style","children"],ie=["style","children"];function ae(t){return t}var le=system((function(){var t=statefulStream((function(t){return"Item "+t})),e=statefulStream(null),n=statefulStream((function(t){return"Group "+t})),o=statefulStream({}),r=statefulStream(ae),i=statefulStream("div"),a=statefulStream(noop),u=function(t,e){return void 0===e&&(e=null),statefulStreamFromEmitter(pipe(o,map((function(e){return e[t]})),distinctUntilChanged()),e)};return{context:e,itemContent:t,groupContent:n,components:o,computeItemKey:r,headerFooterTag:i,scrollerRef:a,FooterComponent:u("Footer"),HeaderComponent:u("Header"),TopItemListComponent:u("TopItemList"),ListComponent:u("List","div"),ItemComponent:u("Item","div"),GroupComponent:u("Group","div"),ScrollerComponent:u("Scroller","div"),EmptyPlaceholder:u("EmptyPlaceholder"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder")}}));function se(t,e){var n=stream();return subscribe(n,(function(){return console.warn("react-virtuoso: You are using a deprecated property. "+e,"color: red;","color: inherit;","color: blue;")})),connect(n,t),n}var ue=system((function(t){var e=t[0],o=t[1],r={item:se(o.itemContent,"Rename the %citem%c prop to %citemContent."),group:se(o.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:se(e.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:se(e.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:se(e.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:stream(),maxHeightCacheSize:stream(),footer:stream(),header:stream(),HeaderContainer:stream(),FooterContainer:stream(),ItemContainer:stream(),ScrollContainer:stream(),GroupContainer:stream(),ListContainer:stream(),emptyComponent:stream(),scrollSeek:stream()};function a(t,e,n){connect(pipe(t,withLatestFrom(o.components),map((function(t){var o,r=t[0],i=t[1];return console.warn("react-virtuoso: "+n+" property is deprecated. Pass components."+e+" instead."),H({},i,((o={})[e]=r,o))}))),o.components)}return subscribe(r.adjustForPrependedItems,(function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")})),subscribe(r.maxHeightCacheSize,(function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")})),subscribe(r.HeaderContainer,(function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")})),subscribe(r.FooterContainer,(function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")})),subscribe(r.scrollSeek,(function(t){var r=t.placeholder,i=R(t,oe);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),publish(o.components,H({},getValue(o.components),{ScrollSeekPlaceholder:r})),publish(e.scrollSeekConfiguration,i)})),a(r.footer,"Footer","footer"),a(r.header,"Header","header"),a(r.ItemContainer,"Item","ItemContainer"),a(r.ListContainer,"List","ListContainer"),a(r.ScrollContainer,"Scroller","ScrollContainer"),a(r.emptyComponent,"EmptyPlaceholder","emptyComponent"),a(r.GroupContainer,"Group","GroupContainer"),H({},e,o,r)}),tup(te,le)),ce=function(t){return react.createElement("div",{style:{height:t.height}})},me={position:ee(),zIndex:1,overflowAnchor:"none"},de={overflowAnchor:"none"},fe=react.memo((function(t){var e=t.showTopList,n=void 0!==e&&e,o=Re("listState"),r=He("sizeRanges"),i=Re("useWindowScroll"),a=Re("customScrollParent"),l=He("windowScrollContainerState"),s=He("scrollContainerState"),u=a||i?l:s,c=Re("itemContent"),m=Re("context"),d=Re("groupContent"),f=Re("trackItemSizes"),v=U(r,Re("itemSize"),f,n?noop:u,Re("log"),a),S=v.callbackRef,I=v.ref,C=react.useState(0),w=C[0],x=C[1];Le("deviation",(function(t){w!==t&&(I.current.style.marginTop=t+"px",x(t))}));var y=Re("EmptyPlaceholder"),b=Re("ScrollSeekPlaceholder")||ce,R=Re("ListComponent"),L=Re("ItemComponent"),k=Re("GroupComponent"),z=Re("computeItemKey"),B=Re("isSeeking"),F=Re("groupIndices").length>0,P=Re("paddingTopAddition"),O=Re("firstItemIndex"),M=Re("statefulTotalCount"),V=n?{}:{boxSizing:"border-box",paddingTop:o.offsetTop+P,paddingBottom:o.offsetBottom,marginTop:w};return!n&&0===M&&y?(0,react.createElement)(y,ve(y,m)):(0,react.createElement)(R,H({},ve(R,m),{ref:S,style:V,"data-test-id":n?"virtuoso-top-item-list":"virtuoso-item-list"}),(n?o.topItems:o.items).map((function(t){var e=t.originalIndex,n=z(e+O,t.data,m);return B?(0,react.createElement)(b,H({},ve(b,m),{key:n,index:t.index,height:t.size,type:t.type||"item"},"group"===t.type?{}:{groupIndex:t.groupIndex})):"group"===t.type?(0,react.createElement)(k,H({},ve(k,m),{key:n,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,style:me}),d(t.index)):(0,react.createElement)(L,H({},ve(L,m),{key:n,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,"data-item-group-index":t.groupIndex,style:de}),F?c(t.index,t.groupIndex,t.data,m):c(t.index,t.data,m))})))})),pe={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},he={width:"100%",height:"100%",position:"absolute",top:0},ge={width:"100%",position:ee(),top:0};function ve(t,e){if("string"!=typeof t)return{context:e}}var Se=react.memo((function(){var t=Re("HeaderComponent"),e=He("headerHeight"),n=Re("headerFooterTag"),o=V((function(t){return e(A(t,"height"))})),r=Re("context");return t?(0,react.createElement)(n,{ref:o},(0,react.createElement)(t,ve(t,r))):null})),Ie=react.memo((function(){var t=Re("FooterComponent"),e=He("footerHeight"),n=Re("headerFooterTag"),o=V((function(t){return e(A(t,"height"))})),r=Re("context");return t?(0,react.createElement)(n,{ref:o},(0,react.createElement)(t,ve(t,r))):null}));function Ce(t){var e=t.usePublisher,n=t.useEmitter,o=t.useEmitterValue;return react.memo((function(t){var r=t.style,i=t.children,a=R(t,re),l=e("scrollContainerState"),s=o("ScrollerComponent"),u=e("smoothScrollTargetReached"),c=o("scrollerRef"),m=o("context"),d=W(l,u,s,c),f=d.scrollerRef,p=d.scrollByCallback;return n("scrollTo",d.scrollToCallback),n("scrollBy",p),(0,react.createElement)(s,H({ref:f,style:H({},pe,r),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},a,ve(s,m)),i)}))}function Te(t){var e=t.usePublisher,n=t.useEmitter,o=t.useEmitterValue;return react.memo((function(t){var r=t.style,i=t.children,a=R(t,ie),l=e("windowScrollContainerState"),s=o("ScrollerComponent"),u=e("smoothScrollTargetReached"),c=o("totalListHeight"),m=o("deviation"),d=o("customScrollParent"),f=o("context"),p=W(l,u,s,noop,d),g=p.scrollerRef,v=p.scrollByCallback,S=p.scrollToCallback;return F((function(){return g.current=d||window,function(){g.current=null}}),[g,d]),n("windowScrollTo",S),n("scrollBy",v),(0,react.createElement)(s,H({style:H({position:"relative"},r,0!==c?{height:c+m}:{}),"data-virtuoso-scroller":!0},a,ve(s,f)),i)}))}var we=function(t){var e=t.children,o=V(compose(He("viewportHeight"),(function(t){return A(t,"height")})));return react.createElement("div",{style:he,ref:o,"data-viewport-type":"element"},e)},xe=function(t){var e=t.children,n=ne(He("windowViewportRect"),Re("customScrollParent"));return react.createElement("div",{ref:n,style:he,"data-viewport-type":"window"},e)},ye=function(t){var e=t.children,n=Re("TopItemListComponent"),o=Re("headerHeight"),r=H({},ge,{marginTop:o+"px"}),i=Re("context");return(0,react.createElement)(n||"div",{style:r,context:i},e)},be=systemToComponent(ue,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},react.memo((function(t){var e=Re("useWindowScroll"),n=Re("topItemsIndexes").length>0,o=Re("customScrollParent"),r=o||e?xe:we;return react.createElement(o||e?ze:ke,H({},t),react.createElement(r,null,react.createElement(Se,null),react.createElement(fe,null),react.createElement(Ie,null)),n&&react.createElement(ye,null,react.createElement(fe,{showTopList:!0})))}))),Ee=be.Component,He=be.usePublisher,Re=be.useEmitterValue,Le=be.useEmitter,ke=Ce({usePublisher:He,useEmitterValue:Re,useEmitter:Le}),ze=Te({usePublisher:He,useEmitterValue:Re,useEmitter:Le}),Be={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Fe={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Pe=Math.round,Oe=Math.ceil,Me=Math.floor,Ve=Math.min,Ue=Math.max;function Ae(t,e){return Array.from({length:e-t+1}).map((function(e,n){return{index:n+t}}))}var We=system((function(t){var n=t[0],o=n.overscan,r=n.visibleRange,i=n.listBoundary,a=t[1],l=a.scrollTop,s=a.viewportHeight,u=a.scrollBy,c=a.scrollTo,m=a.smoothScrollTargetReached,d=a.scrollContainerState,f=t[2],p=t[3],h=t[4],g=h.propsReady,v=h.didMount,S=t[5],I=S.windowViewportRect,C=S.windowScrollTo,T=S.useWindowScroll,w=S.customScrollParent,x=S.windowScrollContainerState,y=statefulStream(0),b=statefulStream(0),E=statefulStream(Be),R=statefulStream({height:0,width:0}),L=statefulStream({height:0,width:0}),k=stream(),z=stream(),B=statefulStream(0);connect(pipe(v,withLatestFrom(b),filter((function(t){return 0!==t[1]})),map((function(t){return{items:Ae(0,t[1]-1),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}}))),E),connect(pipe(combineLatest(duc(y),r,duc(L,(function(t,e){return t&&t.width===e.width&&t.height===e.height}))),withLatestFrom(R),map((function(t){var e=t[0],n=e[0],o=e[1],r=o[0],i=o[1],a=e[2],l=t[1],s=a.height,u=a.width,c=l.width;if(0===n||0===c)return Be;if(0===u)return Fe;var m=Ge(c,u),d=m*Me(r/s),f=m*Oe(i/s)-1;f=Ve(n-1,f);var p=Ae(d=Ve(f,Ue(0,d)),f),h=Ne(l,a,p),g=h.top,v=h.bottom;return{items:p,offsetTop:g,offsetBottom:Oe(n/m)*s-v,top:g,bottom:v,itemHeight:s,itemWidth:u}}))),E),connect(pipe(R,map((function(t){return t.height}))),s),connect(pipe(combineLatest(R,L,E),map((function(t){var e=Ne(t[0],t[1],t[2].items);return[e.top,e.bottom]})),distinctUntilChanged(zt)),i);var F=streamFromEmitter(pipe(duc(E),filter((function(t){return t.items.length>0})),withLatestFrom(y),filter((function(t){var e=t[0].items;return e[e.length-1].index===t[1]-1})),map((function(t){return t[1]-1})),distinctUntilChanged())),P=streamFromEmitter(pipe(duc(E),filter((function(t){var e=t.items;return e.length>0&&0===e[0].index})),mapTo(0),distinctUntilChanged())),O=streamFromEmitter(pipe(duc(E),filter((function(t){return t.items.length>0})),map((function(t){var e=t.items;return{startIndex:e[0].index,endIndex:e[e.length-1].index}})),distinctUntilChanged(Bt)));connect(O,p.scrollSeekRangeChanged),connect(pipe(k,withLatestFrom(R,L,y),map((function(t){var e=t[1],n=t[2],o=t[3],r=Ct(t[0]),i=r.align,a=r.behavior,l=r.offset,s=r.index;"LAST"===s&&(s=o-1);var u=De(e,n,s=Ue(0,s,Ve(o-1,s)));return"end"===i?u=Pe(u-e.height+n.height):"center"===i&&(u=Pe(u-e.height/2+n.height/2)),l&&(u+=l),{top:u,behavior:a}}))),c);var M=statefulStreamFromEmitter(pipe(E,map((function(t){return t.offsetBottom+t.bottom}))),0);return connect(pipe(I,map((function(t){return{width:t.visibleWidth,height:t.visibleHeight}}))),R),H({totalCount:y,viewportDimensions:R,itemDimensions:L,scrollTop:l,scrollHeight:z,overscan:o,scrollBy:u,scrollTo:c,scrollToIndex:k,smoothScrollTargetReached:m,windowViewportRect:I,windowScrollTo:C,useWindowScroll:T,customScrollParent:w,windowScrollContainerState:x,deviation:B,scrollContainerState:d,initialItemCount:b},p,{gridState:E,totalListHeight:M},f,{startReached:P,endReached:F,rangeChanged:O,propsReady:g})}),tup(Ot,N,yt,_t,bt,Jt));function Ne(t,e,n){var o=e.height;return void 0===o||0===n.length?{top:0,bottom:0}:{top:De(t,e,n[0].index),bottom:De(t,e,n[n.length-1].index)+o}}function De(t,e,n){var o=Ge(t.width,e.width);return Me(n/o)*e.height}function Ge(t,e){return Ue(1,Me(t/e))}var _e=["placeholder"],je=system((function(){var t=statefulStream((function(t){return"Item "+t})),n=statefulStream({}),o=statefulStream(null),r=statefulStream("virtuoso-grid-item"),i=statefulStream("virtuoso-grid-list"),a=statefulStream(ae),l=statefulStream(noop),s=function(t,o){return void 0===o&&(o=null),statefulStreamFromEmitter(pipe(n,map((function(e){return e[t]})),distinctUntilChanged()),o)};return{context:o,itemContent:t,components:n,computeItemKey:a,itemClassName:r,listClassName:i,scrollerRef:l,ListComponent:s("List","div"),ItemComponent:s("Item","div"),ScrollerComponent:s("Scroller","div"),ScrollSeekPlaceholder:s("ScrollSeekPlaceholder","div")}})),Ke=system((function(t){var n=t[0],o=t[1],r={item:se(o.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:stream(),ScrollContainer:stream(),ListContainer:stream(),emptyComponent:stream(),scrollSeek:stream()};function i(t,n,r){connect(pipe(t,withLatestFrom(o.components),map((function(t){var e,o=t[0],i=t[1];return console.warn("react-virtuoso: "+r+" property is deprecated. Pass components."+n+" instead."),H({},i,((e={})[n]=o,e))}))),o.components)}return subscribe(r.scrollSeek,(function(t){var r=t.placeholder,i=R(t,_e);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),publish(o.components,H({},getValue(o.components),{ScrollSeekPlaceholder:r})),publish(n.scrollSeekConfiguration,i)})),i(r.ItemContainer,"Item","ItemContainer"),i(r.ListContainer,"List","ListContainer"),i(r.ScrollContainer,"Scroller","ScrollContainer"),H({},n,o,r)}),tup(We,je)),Ye=react.memo((function(){var t=Xe("gridState"),e=Xe("listClassName"),n=Xe("itemClassName"),o=Xe("itemContent"),r=Xe("computeItemKey"),i=Xe("isSeeking"),a=Qe("scrollHeight"),l=Xe("ItemComponent"),s=Xe("ListComponent"),u=Xe("ScrollSeekPlaceholder"),c=Xe("context"),m=Qe("itemDimensions"),d=V((function(t){a(t.parentElement.parentElement.scrollHeight);var e=t.firstChild;e&&m(e.getBoundingClientRect())}));return(0,react.createElement)(s,H({ref:d,className:e},ve(s,c),{style:{paddingTop:t.offsetTop,paddingBottom:t.offsetBottom}}),t.items.map((function(e){var a=r(e.index);return i?(0,react.createElement)(u,H({key:a},ve(u,c),{index:e.index,height:t.itemHeight,width:t.itemWidth})):(0,react.createElement)(l,H({},ve(l,c),{className:n,"data-index":e.index,key:a}),o(e.index,c))})))})),Ze=function(t){var e=t.children,n=Qe("viewportDimensions"),o=V((function(t){n(t.getBoundingClientRect())}));return react.createElement("div",{style:he,ref:o},e)},qe=function(t){var e=t.children,n=ne(Qe("windowViewportRect"),Xe("customScrollParent"));return react.createElement("div",{ref:n,style:he},e)},Je=systemToComponent(Ke,{optional:{totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},react.memo((function(t){var e=H({},t),n=Xe("useWindowScroll"),o=Xe("customScrollParent"),r=o||n?qe:Ze;return react.createElement(o||n?nn:en,H({},e),react.createElement(r,null,react.createElement(Ye,null)))}))),Qe=(Je.Component,Je.usePublisher),Xe=Je.useEmitterValue,tn=Je.useEmitter,en=Ce({usePublisher:Qe,useEmitterValue:Xe,useEmitter:tn}),nn=Te({usePublisher:Qe,useEmitterValue:Xe,useEmitter:tn}),on=system((function(){var t=statefulStream((function(t){return react.createElement("td",null,"Item $",t)})),e=statefulStream(null),n=statefulStream(null),o=statefulStream({}),r=statefulStream(ae),i=statefulStream(noop),a=function(t,e){return void 0===e&&(e=null),statefulStreamFromEmitter(pipe(o,map((function(e){return e[t]})),distinctUntilChanged()),e)};return{context:e,itemContent:t,fixedHeaderContent:n,components:o,computeItemKey:r,scrollerRef:i,TableComponent:a("Table","table"),TableHeadComponent:a("TableHead","thead"),TableBodyComponent:a("TableBody","tbody"),TableRowComponent:a("TableRow","tr"),ScrollerComponent:a("Scroller","div"),EmptyPlaceholder:a("EmptyPlaceholder"),ScrollSeekPlaceholder:a("ScrollSeekPlaceholder"),FillerRow:a("FillerRow")}})),rn=system((function(t){return H({},t[0],t[1])}),tup(te,on)),an=function(t){return react.createElement("tr",null,react.createElement("td",{style:{height:t.height}}))},ln=function(t){return react.createElement("tr",null,react.createElement("td",{style:{height:t.height,padding:0,border:0}}))},sn=react.memo((function(){var t=pn("listState"),e=fn("sizeRanges"),n=pn("useWindowScroll"),o=pn("customScrollParent"),r=fn("windowScrollContainerState"),i=fn("scrollContainerState"),a=o||n?r:i,l=pn("itemContent"),s=pn("trackItemSizes"),u=U(e,pn("itemSize"),s,a,pn("log"),o),c=u.callbackRef,m=u.ref,d=react.useState(0),f=d[0],p=d[1];hn("deviation",(function(t){f!==t&&(m.current.style.marginTop=t+"px",p(t))}));var h=pn("EmptyPlaceholder"),g=pn("ScrollSeekPlaceholder")||an,v=pn("FillerRow")||ln,S=pn("TableBodyComponent"),I=pn("TableRowComponent"),C=pn("computeItemKey"),w=pn("isSeeking"),x=pn("paddingTopAddition"),y=pn("firstItemIndex"),b=pn("statefulTotalCount"),R=pn("context");if(0===b&&h)return(0,react.createElement)(h,ve(h,R));var L=t.offsetTop+x+f,k=t.offsetBottom,z=L>0?react.createElement(v,{height:L,key:"padding-top"}):null,B=k>0?react.createElement(v,{height:k,key:"padding-bottom"}):null,F=t.items.map((function(t){var e=t.originalIndex,n=C(e+y,t.data,R);return w?(0,react.createElement)(g,H({},ve(g,R),{key:n,index:t.index,height:t.size,type:t.type||"item"})):(0,react.createElement)(I,H({},ve(I,R),{key:n,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,style:{overflowAnchor:"none"}}),l(t.index,t.data,R))}));return(0,react.createElement)(S,H({ref:c,"data-test-id":"virtuoso-item-list"},ve(S,R)),[z].concat(F,[B]))})),un=function(t){var e=t.children,o=V(compose(fn("viewportHeight"),(function(t){return A(t,"height")})));return react.createElement("div",{style:he,ref:o,"data-viewport-type":"element"},e)},cn=function(t){var e=t.children,n=ne(fn("windowViewportRect"),pn("customScrollParent"));return react.createElement("div",{ref:n,style:he,"data-viewport-type":"window"},e)},mn=systemToComponent(rn,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},react.memo((function(t){var e=pn("useWindowScroll"),n=pn("customScrollParent"),o=fn("fixedHeaderHeight"),r=pn("fixedHeaderContent"),i=pn("context"),a=V(compose(o,(function(t){return A(t,"height")}))),l=n||e?vn:gn,s=n||e?cn:un,u=pn("TableComponent"),c=pn("TableHeadComponent"),m=r?react.createElement(c,H({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:a},ve(c,i)),r()):null;return react.createElement(l,H({},t),react.createElement(s,null,react.createElement(u,H({style:{borderSpacing:0}},ve(u,i)),[m,react.createElement(sn,{key:"TableBody"})])))}))),fn=(mn.Component,mn.usePublisher),pn=mn.useEmitterValue,hn=mn.useEmitter,gn=Ce({usePublisher:fn,useEmitterValue:pn,useEmitter:hn}),vn=Te({usePublisher:fn,useEmitterValue:pn,useEmitter:hn}),Sn=Ee}}]);