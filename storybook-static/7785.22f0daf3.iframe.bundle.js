(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[7785],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/RichTextStyleEditor/RichTextStyleEditor.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}.RichTextStyleEditor{margin-bottom:16px}.RichTextStyleEditor .menu-items{margin-bottom:8px!important}.RichTextStyleEditor .menu-items .icon-grid{padding-top:12px;grid-row-gap:12px;row-gap:12px}.RichTextStyleEditor .menu-items .icon-grid .row{padding-top:0}.RichTextStyleEditor .menu-items .icon-grid .row.isRedaction{padding-bottom:8px}.RichTextStyleEditor .menu-items .icon-grid .auto-size-checkbox{padding-top:4px;padding-bottom:8px}.RichTextStyleEditor .menu-items .icon-grid .auto-size-checkbox .ui__choice__input__check--focus{outline:var(--focus-visible-outline)}.RichTextStyleEditor .Dropdown__wrapper{width:100%}.RichTextStyleEditor .Dropdown__wrapper .Dropdown{width:100%!important}.RichTextStyleEditor .Dropdown__wrapper .Dropdown__items{right:unset;width:100%!important}.RichTextStyleEditor .FontSizeDropdown{width:100%!important}.RichTextStyleEditor .ColorPalette{padding-bottom:8px}.RichTextStyleEditor .text-size-slider{margin-top:16px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RichTextStyleEditor .icon-grid{display:flex;flex-direction:column}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .RichTextStyleEditor .icon-grid{display:flex;flex-direction:column}}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/StylePicker/ColorPicker/ColorPicker.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.StylePicker .ColorPalette{display:flex;flex-wrap:wrap;display:grid;grid-template-columns:repeat(7,1fr);grid-row-gap:8px;row-gap:8px;justify-items:center}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.StylePicker .ColorPalette{width:196px}}.StylePicker .ColorPalette.padding{padding:4px 12px 8px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .StylePicker .ColorPalette{max-width:450px;width:auto}}@media(max-width:640px)and (-ms-high-contrast:active),(max-width:640px)and (-ms-high-contrast:none){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .StylePicker .ColorPalette{width:308px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .StylePicker .ColorPalette{max-width:450px;width:auto}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.App.is-web-component:not(.is-in-desktop-only-mode) .StylePicker .ColorPalette{width:308px}}}.StylePicker .ColorPalette .cell-container{padding:0;border:none;background-color:transparent;flex:1 0 14%;cursor:pointer;width:var(--cell-border-size);height:var(--cell-border-size);display:flex;align-items:center;justify-content:center}:host(:not([data-tabbing=true])) .StylePicker .ColorPalette .cell-container,html:not([data-tabbing=true]) .StylePicker .ColorPalette .cell-container{outline:none}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .StylePicker .ColorPalette .cell-container{width:44px;height:44px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .StylePicker .ColorPalette .cell-container{width:44px;height:44px}}.StylePicker .ColorPalette .cell-container .cell-outer.active{border:1px solid var(--color-palette-border);width:var(--cell-outer-border-size);height:var(--cell-outer-border-size);border-radius:10000000px;display:flex;align-items:center;justify-content:center}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .StylePicker .ColorPalette .cell-container .cell-outer.active{width:36px;height:36px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .StylePicker .ColorPalette .cell-container .cell-outer.active{width:36px;height:36px}}.StylePicker .ColorPalette .cell-container .cell-outer .cell{width:18px;height:18px;border-radius:10000000px}.StylePicker .ColorPalette .cell-container .cell-outer .cell .transparent{border:2px solid var(--faded-text);border-radius:10000000px}.StylePicker .ColorPalette .cell-container .cell-outer .cell.border{border:1px solid var(--white-color-palette-border)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .StylePicker .ColorPalette .cell-container .cell-outer .cell{width:24px;height:24px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .StylePicker .ColorPalette .cell-container .cell-outer .cell{width:24px;height:24px}}.StylePicker .palette-controls{padding-right:12px;padding-left:2px;display:flex;justify-content:space-between}.StylePicker .palette-controls .button-container{display:flex;grid-gap:8px;gap:8px}.StylePicker .palette-controls .control-button{display:flex;align-items:center;justify-content:center;text-align:center;min-width:32px;min-height:32px;padding:0;border:none;background-color:transparent;cursor:pointer;border-radius:4px}:host(:not([data-tabbing=true])) .StylePicker .palette-controls .control-button,html:not([data-tabbing=true]) .StylePicker .palette-controls .control-button{outline:none}.StylePicker .palette-controls .control-button.show-more-button{color:var(--ribbon-active-color)}.StylePicker .palette-controls .control-button.show-more-button:hover{background:none;color:var(--primary-button-hover)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .StylePicker .palette-controls .control-button.show-more-button{color:var(--ribbon-active-color)}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .StylePicker .palette-controls .control-button.show-more-button{color:var(--ribbon-active-color)}}.StylePicker .palette-controls .control-button:disabled{cursor:no-drop}.StylePicker .palette-controls .control-button:disabled .Icon{color:var(--disabled-icon)}.StylePicker .palette-controls .control-button.hidden{display:none}.StylePicker .palette-controls .control-button.focus-visible,.StylePicker .palette-controls .control-button:focus-visible{outline:var(--focus-visible-outline)}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./src/components/RichTextStyleEditor/RichTextStyleEditor.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/RichTextStyleEditor/RichTextStyleEditor.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/StylePicker/ColorPicker/ColorPicker.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/StylePicker/ColorPicker/ColorPicker.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/RichTextStyleEditor/RichTextStyleEditor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__),components_StylePicker_ColorPicker__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/StylePicker/ColorPicker/index.js"),core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/core/index.js"),actions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/redux/actions/index.js"),selectors__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/redux/selectors/index.js"),constants_dataElement__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./src/components/RichTextStyleEditor/RichTextStyleEditor.scss"),__webpack_require__("./src/constants/dataElement.js")),components_TextStylePicker__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/TextStylePicker/index.js"),helpers_adjustFreeTextBoundingBox__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/helpers/adjustFreeTextBoundingBox.js"),react_i18next__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))),ownKeys.forEach((function(key){_define_property(target,key,source[key])}))}return target}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})),target}function _sliced_to_array(arr,i){return function _array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function _iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}(arr,i)||function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var propTypes={annotation:prop_types__WEBPACK_IMPORTED_MODULE_10___default().object,editor:prop_types__WEBPACK_IMPORTED_MODULE_10___default().object,style:prop_types__WEBPACK_IMPORTED_MODULE_10___default().shape({TextColor:prop_types__WEBPACK_IMPORTED_MODULE_10___default().string,RichTextStyle:prop_types__WEBPACK_IMPORTED_MODULE_10___default().any}),isFreeTextAutoSize:prop_types__WEBPACK_IMPORTED_MODULE_10___default().bool,onFreeTextSizeToggle:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func,onPropertyChange:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func,onRichTextStyleChange:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func,isRedaction:prop_types__WEBPACK_IMPORTED_MODULE_10___default().bool,isRichTextEditMode:prop_types__WEBPACK_IMPORTED_MODULE_10___default().bool,setIsRichTextEditMode:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func,isWidget:prop_types__WEBPACK_IMPORTED_MODULE_10___default().bool},RichTextStyleEditor=function(param){var _RichTextStyle_,_RichTextStyle_1,_RichTextStyle__textdecoration,_RichTextStyle_2,_RichTextStyle__textdecoration1,_RichTextStyle_3,_RichTextStyle__textdecoration2,_RichTextStyle_4,_RichTextStyle_5,_RichTextStyle_6,annotation=param.annotation,editor=param.editor,style=param.style,isFreeTextAutoSize=param.isFreeTextAutoSize,onFreeTextSizeToggle=param.onFreeTextSizeToggle,onPropertyChange=param.onPropertyChange,onRichTextStyleChange=param.onRichTextStyleChange,isRichTextEditMode=param.isRichTextEditMode,setIsRichTextEditMode=param.setIsRichTextEditMode,isRedaction=param.isRedaction,isWidget=param.isWidget,activeTool=param.activeTool,fonts=_sliced_to_array((0,react_redux__WEBPACK_IMPORTED_MODULE_1__.d4)((function(state){return[selectors__WEBPACK_IMPORTED_MODULE_5__.A.getFonts(state)]}),react_redux__WEBPACK_IMPORTED_MODULE_1__.bN),1)[0],_useState=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({}),2),format=_useState[0],setFormat=_useState[1],editorRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),annotationRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),propertiesRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({}),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.wA)(),oldSelectionRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),richTextEditModeRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();richTextEditModeRef.current=isRichTextEditMode;var t=_sliced_to_array((0,react_i18next__WEBPACK_IMPORTED_MODULE_11__.B)(),1)[0];(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var handleSelectionChange=function(range,oldRange){!range&&oldRange&&editorRef.current&&editorRef.current.setSelection(oldRange.index,oldRange.length),range&&editorRef.current&&setFormat(getFormat(range))},handleTextChange=function(){var _editorRef_current;setFormat(getFormat(null===(_editorRef_current=editorRef.current)||void 0===_editorRef_current?void 0:_editorRef_current.getSelection()))};return core__WEBPACK_IMPORTED_MODULE_3__.A.addEventListener("editorSelectionChanged",handleSelectionChange),core__WEBPACK_IMPORTED_MODULE_3__.A.addEventListener("editorTextChanged",handleTextChange),dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.disableElements([constants_dataElement__WEBPACK_IMPORTED_MODULE_7__.A.ANNOTATION_STYLE_POPUP])),function(){core__WEBPACK_IMPORTED_MODULE_3__.A.removeEventListener("editorSelectionChanged",handleSelectionChange),core__WEBPACK_IMPORTED_MODULE_3__.A.removeEventListener("editorTextChanged",handleTextChange),dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.enableElements([constants_dataElement__WEBPACK_IMPORTED_MODULE_7__.A.ANNOTATION_STYLE_POPUP]))}}),[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var _editorRef_current;if(editorRef.current=editor,annotationRef.current=annotation,isRichTextEditMode&&annotation){var _stylesTemp_textdecoration,_stylesTemp_textdecoration1,_stylesTemp_textdecoration2,StrokeStyle="solid";try{StrokeStyle="dash"===annotation.Style?"".concat(annotation.Style,",").concat(annotation.Dashes):annotation.Style}catch(err){console.error(err)}var _ref,_ref1,_stylesTemp_textdecoration_includes,stylesTemp=annotation.getRichTextStyle()[0];propertiesRef.current={Font:annotation.Font,FontSize:annotation.FontSize,TextAlign:annotation.TextAlign,TextVerticalAlign:annotation.TextVerticalAlign,bold:null!==(_ref="bold"===(null==stylesTemp?void 0:stylesTemp["font-weight"]))&&void 0!==_ref&&_ref,italic:null!==(_ref1="italic"===(null==stylesTemp?void 0:stylesTemp["font-style"]))&&void 0!==_ref1&&_ref1,underline:(null==stylesTemp||null===(_stylesTemp_textdecoration=stylesTemp["text-decoration"])||void 0===_stylesTemp_textdecoration?void 0:_stylesTemp_textdecoration.includes("underline"))||(null==stylesTemp||null===(_stylesTemp_textdecoration1=stylesTemp["text-decoration"])||void 0===_stylesTemp_textdecoration1?void 0:_stylesTemp_textdecoration1.includes("word")),strikeout:null!==(_stylesTemp_textdecoration_includes=null==stylesTemp||null===(_stylesTemp_textdecoration2=stylesTemp["text-decoration"])||void 0===_stylesTemp_textdecoration2?void 0:_stylesTemp_textdecoration2.includes("line-through"))&&void 0!==_stylesTemp_textdecoration_includes&&_stylesTemp_textdecoration_includes,size:null==stylesTemp?void 0:stylesTemp["font-size"],font:null==stylesTemp?void 0:stylesTemp["font-family"],StrokeStyle,calculatedFontSize:annotation.getCalculatedFontSize()}}setFormat(getFormat(null===(_editorRef_current=editorRef.current)||void 0===_editorRef_current?void 0:_editorRef_current.getSelection())),oldSelectionRef.current&&(editorRef.current.setSelection(oldSelectionRef.current),oldSelectionRef.current=null)}),[annotation,editor,isRichTextEditMode]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var handleEditorBlur=function(){editorRef.current=null,annotationRef.current=null,setIsRichTextEditMode(!1)},handleEditorFocus=function(){setIsRichTextEditMode(!0)};return core__WEBPACK_IMPORTED_MODULE_3__.A.addEventListener("editorBlur",handleEditorBlur),core__WEBPACK_IMPORTED_MODULE_3__.A.addEventListener("editorFocus",handleEditorFocus),function(){core__WEBPACK_IMPORTED_MODULE_3__.A.removeEventListener("editorBlur",handleEditorBlur),core__WEBPACK_IMPORTED_MODULE_3__.A.removeEventListener("editorFocus",handleEditorFocus)}}),[dispatch]);var properties,_ref,_ref1,_RichTextStyle__textdecoration_includes,getFormat=function(range){if(!range)return{};var format=editorRef.current.getFormat(range.index,range.length);if("string"==typeof format.color)format.color=new window.Core.Annotations.Color(format.color);else if(Array.isArray(format.color)){var lastSelectedColor=new window.Core.Annotations.Color(format.color[format.color.length-1]);format.color=lastSelectedColor}else format.color||(format.color=annotationRef.current.TextColor);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=["font","size","originalSize"][Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var prop=_step.value;format[prop]&&Array.isArray(format[prop])&&(format[prop]=void 0)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return format},applyFormat=function(formatKey,value){var _editorRef_current,_editorRef_current1;"size"===formatKey?null===(_editorRef_current=editorRef.current)||void 0===_editorRef_current||_editorRef_current.format("applyCustomFontSize",value):null===(_editorRef_current1=editorRef.current)||void 0===_editorRef_current1||_editorRef_current1.format(formatKey,value);"color"===formatKey&&(value=new window.Core.Annotations.Color(value)),setFormat(_object_spread_props(_object_spread({},format),_define_property({},formatKey,value)))},handlePropertyChange=function(property,value){if(richTextEditModeRef.current){var _editorRef_current_getSelection=editorRef.current.getSelection(),index=_editorRef_current_getSelection.index,length=_editorRef_current_getSelection.length,annotation=annotationRef.current;annotation[property]=value,editorRef.current.blur(),"FontSize"!==property&&"Font"!==property||(0,helpers_adjustFreeTextBoundingBox__WEBPACK_IMPORTED_MODULE_9__.A)(annotation),setTimeout((function(){oldSelectionRef.current={index,length},core__WEBPACK_IMPORTED_MODULE_3__.A.getAnnotationManager().getEditBoxManager().focusBox(annotation)}),0)}else onPropertyChange(property,value)},RichTextStyle=style.RichTextStyle;properties=_object_spread({},style,{bold:null!==(_ref="bold"===(null==RichTextStyle||null===(_RichTextStyle_=RichTextStyle[0])||void 0===_RichTextStyle_?void 0:_RichTextStyle_["font-weight"]))&&void 0!==_ref&&_ref,italic:null!==(_ref1="italic"===(null==RichTextStyle||null===(_RichTextStyle_1=RichTextStyle[0])||void 0===_RichTextStyle_1?void 0:_RichTextStyle_1["font-style"]))&&void 0!==_ref1&&_ref1,underline:(null==RichTextStyle||null===(_RichTextStyle_2=RichTextStyle[0])||void 0===_RichTextStyle_2||null===(_RichTextStyle__textdecoration=_RichTextStyle_2["text-decoration"])||void 0===_RichTextStyle__textdecoration?void 0:_RichTextStyle__textdecoration.includes("underline"))||(null==RichTextStyle||null===(_RichTextStyle_3=RichTextStyle[0])||void 0===_RichTextStyle_3||null===(_RichTextStyle__textdecoration1=_RichTextStyle_3["text-decoration"])||void 0===_RichTextStyle__textdecoration1?void 0:_RichTextStyle__textdecoration1.includes("word")),strikeout:null!==(_RichTextStyle__textdecoration_includes=null==RichTextStyle||null===(_RichTextStyle_4=RichTextStyle[0])||void 0===_RichTextStyle_4||null===(_RichTextStyle__textdecoration2=_RichTextStyle_4["text-decoration"])||void 0===_RichTextStyle__textdecoration2?void 0:_RichTextStyle__textdecoration2.includes("line-through"))&&void 0!==_RichTextStyle__textdecoration_includes&&_RichTextStyle__textdecoration_includes,font:null==RichTextStyle||null===(_RichTextStyle_5=RichTextStyle[0])||void 0===_RichTextStyle_5?void 0:_RichTextStyle_5["font-family"],size:null==RichTextStyle||null===(_RichTextStyle_6=RichTextStyle[0])||void 0===_RichTextStyle_6?void 0:_RichTextStyle_6["font-size"],StrokeStyle:"solid"}),isRichTextEditMode&&annotation&&(propertiesRef.current.bold=format.bold,propertiesRef.current.italic=format.italic,propertiesRef.current.underline=format.underline,propertiesRef.current.strikeout=format.strike,propertiesRef.current.quillFont=format.font||propertiesRef.current.Font,propertiesRef.current.quillFontSize=format.originalSize||propertiesRef.current.FontSize);var commonProps={fonts,onPropertyChange:handlePropertyChange,properties,stateless:!0,isFreeText:!isRedaction},nonWidgetProps={onRichTextStyleChange:function(property,value){if(richTextEditModeRef.current){var propertyTranslation={"font-weight":"bold","font-style":"italic",underline:"underline","line-through":"strike","font-family":"font","font-size":"size"};if("font-family"===property||"font-size"===property){applyFormat(propertyTranslation[property],value);var freeText=annotationRef.current;if(freeText.isAutoSized())core__WEBPACK_IMPORTED_MODULE_3__.A.getAnnotationManager().getEditBoxManager().resizeAnnotation(freeText)}else!function(format){return function(){var _editorRef_current_getSelection=editorRef.current.getSelection(),index=_editorRef_current_getSelection.index,length=_editorRef_current_getSelection.length;if(0===length){oldSelectionRef.current={index,length};var newSelection=editorRef.current.getSelection();index=newSelection.index,length=newSelection.length}var currentFormat=editorRef.current.getFormat(index,length);applyFormat(format,!currentFormat[format])}}(propertyTranslation[property])()}else onRichTextStyleChange(property,value)},properties:isRichTextEditMode?propertiesRef.current:properties,isFreeTextAutoSize,isRichTextEditMode,isRedaction,onFreeTextSizeToggle},widgetProps={onRichTextStyleChange:handlePropertyChange,isFreeTextAutoSize:!1,isRichTextEditMode:!1,isRedaction:!1,isWidget};return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"RichTextStyleEditor",onMouseDown:function(e){"touchstart"!==e.type&&isRichTextEditMode&&e.preventDefault()}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"menu-items"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_TextStylePicker__WEBPACK_IMPORTED_MODULE_8__.A,_object_spread({},commonProps,isWidget?widgetProps:nonWidgetProps))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_StylePicker_ColorPicker__WEBPACK_IMPORTED_MODULE_2__.A,{onColorChange:function(color){!function(name,color){richTextEditModeRef.current?applyFormat("color",color.toHexString()):onPropertyChange(name,color)}("TextColor",new window.Core.Annotations.Color(color))},color:isRichTextEditMode?format.color:style.TextColor,activeTool,type:"Text",ariaTypeLabel:t("option.stylePopup.textStyle")}))};RichTextStyleEditor.propTypes=propTypes;const __WEBPACK_DEFAULT_EXPORT__=react__WEBPACK_IMPORTED_MODULE_0__.memo(RichTextStyleEditor);RichTextStyleEditor.__docgenInfo={description:"",methods:[],displayName:"RichTextStyleEditor",props:{annotation:{description:"",type:{name:"object"},required:!1},editor:{description:"",type:{name:"object"},required:!1},style:{description:"",type:{name:"shape",value:{TextColor:{name:"string",required:!1},RichTextStyle:{name:"any",required:!1}}},required:!1},isFreeTextAutoSize:{description:"",type:{name:"bool"},required:!1},onFreeTextSizeToggle:{description:"",type:{name:"func"},required:!1},onPropertyChange:{description:"",type:{name:"func"},required:!1},onRichTextStyleChange:{description:"",type:{name:"func"},required:!1},isRedaction:{description:"",type:{name:"bool"},required:!1},isRichTextEditMode:{description:"",type:{name:"bool"},required:!1},setIsRichTextEditMode:{description:"",type:{name:"func"},required:!1},isWidget:{description:"",type:{name:"bool"},required:!1}}}},"./src/components/RichTextStyleEditor/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _RichTextStyleEditor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/RichTextStyleEditor/RichTextStyleEditor.js");const __WEBPACK_DEFAULT_EXPORT__=_RichTextStyleEditor__WEBPACK_IMPORTED_MODULE_0__.A;_RichTextStyleEditor__WEBPACK_IMPORTED_MODULE_0__.A.__docgenInfo={description:"",methods:[],displayName:"RichTextStyleEditor",props:{annotation:{description:"",type:{name:"object"},required:!1},editor:{description:"",type:{name:"object"},required:!1},style:{description:"",type:{name:"shape",value:{TextColor:{name:"string",required:!1},RichTextStyle:{name:"any",required:!1}}},required:!1},isFreeTextAutoSize:{description:"",type:{name:"bool"},required:!1},onFreeTextSizeToggle:{description:"",type:{name:"func"},required:!1},onPropertyChange:{description:"",type:{name:"func"},required:!1},onRichTextStyleChange:{description:"",type:{name:"func"},required:!1},isRedaction:{description:"",type:{name:"bool"},required:!1},isRichTextEditMode:{description:"",type:{name:"bool"},required:!1},setIsRichTextEditMode:{description:"",type:{name:"func"},required:!1},isWidget:{description:"",type:{name:"bool"},required:!1}}}},"./src/components/StylePicker/ColorPicker/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>StylePicker_ColorPicker});var react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),useTranslation=(__webpack_require__("./src/components/StylePicker/ColorPicker/ColorPicker.scss"),__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js")),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),actions=__webpack_require__("./src/redux/actions/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),events=__webpack_require__("./src/constants/events.js"),getRootNode=__webpack_require__("./src/helpers/getRootNode.js"),selectors=__webpack_require__("./src/redux/selectors/index.js"),Button=__webpack_require__("./src/components/Button/index.js"),useFocusHandler=__webpack_require__("./src/hooks/useFocusHandler/index.js"),Tooltip=__webpack_require__("./src/components/Tooltip/index.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _sliced_to_array(arr,i){return function _array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function _iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||_unsupported_iterable_to_array(arr,i)||function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _to_consumable_array(arr){return function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}(arr)||function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupported_iterable_to_array(arr)||function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_array_like_to_array(o,minLen):void 0}}var parseColor=function(color){if(!color)return color;var parsedColor=color;return(null==parsedColor?void 0:parsedColor.toHexString)&&(parsedColor=parsedColor.toHexString()),(null==parsedColor?void 0:parsedColor.toLowerCase)&&(parsedColor=parsedColor.toLowerCase()),parsedColor},transparentIcon=react.createElement("svg",{width:"100%",height:"100%",className:classnames_default()("transparent")},react.createElement("line",{stroke:"#d82e28",x1:"0",y1:"100%",x2:"100%",y2:"0",strokeWidth:"2",strokeLinecap:"round"})),propTypes={color:prop_types_default().any,ariaTypeLabel:prop_types_default().string},ColorPicker_ColorPicker=function(param){var onColorChange=param.onColorChange,_param_hasTransparentColor=param.hasTransparentColor,hasTransparentColor=void 0!==_param_hasTransparentColor&&_param_hasTransparentColor,color=param.color,activeTool=param.activeTool,type=param.type,ariaTypeLabel=param.ariaTypeLabel,activeToolName=Object.values(window.Core.Tools.ToolNames).includes(activeTool)?activeTool:window.Core.Tools.ToolNames.EDIT,store=(0,es.Pj)(),t=(0,useTranslation.B)().t,dispatch=(0,es.wA)(),colors=_sliced_to_array((0,es.d4)((function(state){return[selectors.A.getColors(state,activeToolName,type)]})),1)[0],_useState=_sliced_to_array((0,react.useState)(),2),selectedColor=_useState[0],setSelectedColor=_useState[1],_useState1=_sliced_to_array((0,react.useState)(!1),2),isExpanded=_useState1[0],setIsExpanded=_useState1[1],forceExpandRef=(0,react.useRef)(!0);(0,react.useEffect)((function(){forceExpandRef.current=!0}),[activeToolName,color]),(0,react.useEffect)((function(){color&&setSelectedColor(parseColor(color))}),[color]);var getCustomColorAndRemove=function(){var customColor=selectors.A.getCustomColor(store.getState());return dispatch(actions.A.setCustomColor(null)),customColor},handleAddColor=(0,react.useCallback)((function(){dispatch(actions.A.openElement("ColorPickerModal"));var onVisibilityChanged=function(e){var _e_detail=e.detail,element=_e_detail.element,isVisible=_e_detail.isVisible;if("ColorPickerModal"===element&&!isVisible){var color=parseColor(getCustomColorAndRemove());if(color)if(colors.includes(color))setSelectedColor(color),onColorChange(color);else{var newColors=_to_consumable_array(colors).concat([color]);dispatch(actions.A.setColors(newColors,activeToolName,type,!0)),setSelectedColor(color),onColorChange(color)}}(0,getRootNode.Iv)().removeEventListener(events.A.VISIBILITY_CHANGED,onVisibilityChanged)};(0,getRootNode.Iv)().addEventListener(events.A.VISIBILITY_CHANGED,onVisibilityChanged)}),[null==colors?void 0:colors.length,dispatch,setSelectedColor,onColorChange,getCustomColorAndRemove,type,activeToolName]),openColorPickerModalWithFocus=(0,useFocusHandler.A)(handleAddColor),palette=colors.map((function(color){return color.toLowerCase()}));hasTransparentColor&&palette.push("transparent"),selectedColor||setSelectedColor("transparent"),palette.indexOf(selectedColor)>6&&!isExpanded&&forceExpandRef.current&&(setIsExpanded(!0),forceExpandRef.current=!1);var shouldHideShowMoreButton=palette.length<=7,showCopyButtonDisabled=!(selectedColor&&!palette.includes(selectedColor)),isDeleteDisabled=palette.length<=1||!showCopyButtonDisabled;return isExpanded||(palette=palette.slice(0,7)),react.createElement(react.Fragment,null,react.createElement("div",{className:classnames_default()("ColorPalette")},palette.map((function(color){return parseColor(color)})).map((function(color,i){var _color_toUpperCase,_color_toUpperCase1,_color_toUpperCase2;return color?react.createElement(Tooltip.A,{content:"".concat(t("option.colorPalette.colorLabel")," ").concat(null==color||null===(_color_toUpperCase=color.toUpperCase)||void 0===_color_toUpperCase?void 0:_color_toUpperCase.call(color)),key:null==color||null===(_color_toUpperCase1=color.toUpperCase)||void 0===_color_toUpperCase1?void 0:_color_toUpperCase1.call(color)},react.createElement("button",{className:"cell-container",onClick:function(){setSelectedColor(color),onColorChange(color)},"aria-label":"".concat(ariaTypeLabel," ").concat(t("option.colorPalette.colorLabel")," ").concat(null==color||null===(_color_toUpperCase2=color.toUpperCase)||void 0===_color_toUpperCase2?void 0:_color_toUpperCase2.call(color)),"aria-current":parseColor(selectedColor)===color||!parseColor(selectedColor)&&"transparent"===color},react.createElement("div",{className:classnames_default()({"cell-outer":!0,active:parseColor(selectedColor)===color||!parseColor(selectedColor)&&"transparent"===color})},react.createElement("div",{className:classnames_default()({cell:!0,border:!0}),style:{backgroundColor:color}},"transparent"===color&&transparentIcon)))):react.createElement("div",{key:i,className:"dummy-cell"})}))),react.createElement("div",{className:"palette-controls"},react.createElement("div",{className:"button-container"},react.createElement(Button.A,{img:"icon-header-zoom-in-line",title:t("action.addNewColor"),onClick:openColorPickerModalWithFocus,className:"control-button",dataElement:"addCustomColor",ariaLabel:"".concat(ariaTypeLabel," ").concat(t("action.addNewColor")," ").concat(t("action.fromCustomColorPicker"))}),react.createElement(Button.A,{img:"icon-delete-line",title:t("action.deleteColor"),onClick:function(){var color=parseColor(selectedColor),newColors=_to_consumable_array(colors),indexToDelete=newColors.indexOf(color);if(indexToDelete>-1){var nextIndex=indexToDelete===newColors.length-1?0:indexToDelete+1;setSelectedColor(colors[nextIndex]),onColorChange(colors[nextIndex]),newColors.splice(indexToDelete,1),dispatch(actions.A.setColors(newColors,activeToolName,type,!0))}},disabled:isDeleteDisabled,className:"control-button",dataElement:"deleteSelectedColor",ariaLabel:"".concat(ariaTypeLabel," ").concat(t("action.deleteColor")," ").concat(selectedColor)}),react.createElement(Button.A,{img:"icon-copy2",title:t("action.copySelectedColor"),onClick:function(){var color=parseColor(selectedColor),newColors=_to_consumable_array(colors).concat([color]);dispatch(actions.A.setColors(newColors,activeToolName,type,!0))},disabled:showCopyButtonDisabled,className:"control-button",dataElement:"copySelectedColor",ariaLabel:"".concat(ariaTypeLabel," ").concat(t("action.copySelectedColor")," ").concat(selectedColor)})),react.createElement("button",{className:classnames_default()("show-more-button control-button",{hidden:shouldHideShowMoreButton}),onClick:function(){setIsExpanded(!isExpanded)},"aria-label":"".concat(ariaTypeLabel," ").concat(t(t(isExpanded?"action.showLessColors":"action.showMoreColors")))},t(isExpanded?"message.showLess":"message.showMore"))))};ColorPicker_ColorPicker.propTypes=propTypes;const StylePicker_ColorPicker_ColorPicker=ColorPicker_ColorPicker;ColorPicker_ColorPicker.__docgenInfo={description:"",methods:[],displayName:"ColorPicker",props:{hasTransparentColor:{defaultValue:{value:"false",computed:!1},required:!1},color:{description:"",type:{name:"any"},required:!1},ariaTypeLabel:{description:"",type:{name:"string"},required:!1}}};const StylePicker_ColorPicker=StylePicker_ColorPicker_ColorPicker;StylePicker_ColorPicker_ColorPicker.__docgenInfo={description:"",methods:[],displayName:"ColorPicker",props:{hasTransparentColor:{defaultValue:{value:"false",computed:!1},required:!1},color:{description:"",type:{name:"any"},required:!1},ariaTypeLabel:{description:"",type:{name:"string"},required:!1}}}},"./src/helpers/adjustFreeTextBoundingBox.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/core/index.js");function __WEBPACK_DEFAULT_EXPORT__(annotation){var FreeTextAnnotation=window.Core.Annotations.FreeTextAnnotation;if(function _instanceof(left,right){return null!=right&&"undefined"!=typeof Symbol&&right[Symbol.hasInstance]?!!right[Symbol.hasInstance](left):left instanceof right}(annotation,FreeTextAnnotation)&&annotation.getAutoSizeType()!==FreeTextAnnotation.AutoSizeTypes.NONE){var doc=core__WEBPACK_IMPORTED_MODULE_0__.A.getDocument(),pageNumber=annotation.PageNumber,pageInfo=doc.getPageInfo(pageNumber),pageMatrix=doc.getPageMatrix(pageNumber),pageRotation=doc.getPageRotation(pageNumber);annotation.fitText(pageInfo,pageMatrix,pageRotation)}}}}]);