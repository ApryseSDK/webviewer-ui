(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[57848],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/AnnotationPopup/AnnotationPopup.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".open.AnnotationPopup{visibility:visible}.closed.AnnotationPopup{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.AnnotationPopup{position:absolute;z-index:70;display:flex;justify-content:center;align-items:center}.AnnotationPopup:empty{padding:0}.AnnotationPopup .buttons{display:flex}.AnnotationPopup .Button{margin:4px;width:32px;height:32px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationPopup .Button{width:42px;height:42px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationPopup .Button{width:42px;height:42px}}.AnnotationPopup .Button:hover{background:var(--popup-button-hover)}.AnnotationPopup .Button:hover:disabled{background:none}.AnnotationPopup .Button .Icon{width:18px;height:18px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationPopup .Button .Icon{width:24px;height:24px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationPopup .Button .Icon{width:24px;height:24px}}.is-vertical.AnnotationPopup .Button.main-menu-button{width:100%;border-radius:0;justify-content:flex-start;padding-inline-start:var(--padding-small);padding-inline-end:var(--padding-small);margin:0 0 var(--padding-tiny) 0}.is-vertical.AnnotationPopup .Button.main-menu-button:first-child{margin-top:var(--padding-tiny)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .is-vertical.AnnotationPopup .Button.main-menu-button{width:100%;height:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .is-vertical.AnnotationPopup .Button.main-menu-button{width:100%;height:32px}}.is-vertical.AnnotationPopup .Button.main-menu-button .Icon{margin-inline-end:10px}.is-vertical.AnnotationPopup .Button.main-menu-button span{white-space:nowrap}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}.AnnotationPopup{position:fixed;border-radius:4px;box-shadow:0 0 3px 0 var(--document-box-shadow);background:var(--component-background)}.AnnotationPopup.is-horizontal .container{display:inherit}.AnnotationPopup.is-vertical{flex-direction:column;align-items:flex-start}.shortCuts3D{position:relative}.shortCuts3D .closeButton{position:absolute;inset-inline-end:4px;padding:2px;cursor:pointer;width:20px;text-align:center}.shortCuts3D .row{padding:4px 0;margin:8px 26px 8px 16px}.shortCuts3D .row span{background:#e7ebee;padding:4px 8px;border-radius:4px}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/AnnotationStylePopup/AnnotationStylePopup.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationStylePopup{width:100%;margin:0;position:relative;max-width:none;border-radius:4px 4px 0 0;border:0;padding-bottom:24px;box-shadow:none}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationStylePopup{width:100%;margin:0;position:relative;max-width:none;border-radius:4px 4px 0 0;border:0;padding-bottom:24px;box-shadow:none}}.AnnotationStylePopup .back-to-menu-container{margin-top:var(--padding-medium);margin-inline-end:var(--padding-medium);margin-inline-start:var(--padding-medium);padding-bottom:var(--padding-small);border-bottom:1px solid var(--border)}.AnnotationStylePopup .Button.back-to-menu-button{margin:0;width:100%;height:32px;border-radius:0;justify-content:flex-start}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationStylePopup .Button.back-to-menu-button{width:100%;height:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationStylePopup .Button.back-to-menu-button{width:100%;height:32px}}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/CalibrationPopup/CalibrationPopup.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}.CalibrationPopup{display:flex;flex-direction:column;align-items:flex-start;padding:var(--padding-medium);width:220px;background:var(--gray-0);box-shadow:0 0 3px var(--gray-7);border-radius:4px}.CalibrationPopup .calibration-popup-label{font-weight:700;margin-bottom:var(--padding-medium)}.CalibrationPopup .pop-switch{margin-top:var(--padding-medium)}.CalibrationPopup .pop-switch.ui__choice--disabled .ui__choice__label{color:var(--gray-5)}.CalibrationPopup .input-container{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;grid-gap:var(--padding-small);gap:var(--padding-small);height:32px}.CalibrationPopup .input-container .input-field{width:94px;height:32px}.CalibrationPopup .input-container .input-field.invalid-value{border-color:red}.CalibrationPopup .input-container .input-field:focus{border:1px solid var(--blue-5)}.CalibrationPopup .input-container .input-field .Dropdown__wrapper{width:100%;height:100%}.CalibrationPopup .input-container .input-field .Dropdown__wrapper .Dropdown{height:100%;width:100%!important;text-align:start}.CalibrationPopup .input-container .input-field .Dropdown__wrapper .Dropdown__items{width:100%}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./src/components/AnnotationPopup/AnnotationPopup.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>components_AnnotationPopup_AnnotationPopup});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),cjs=__webpack_require__("./node_modules/react-draggable/build/cjs/cjs.js"),cjs_default=__webpack_require__.n(cjs),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),FocusTrap=__webpack_require__("./src/components/FocusTrap/index.js"),ActionButton=__webpack_require__("./src/components/ActionButton/index.js"),AnnotationStylePopup=__webpack_require__("./src/components/AnnotationStylePopup/index.js");const DatePicker=({onClick,annotation,onDatePickerShow})=>{const dateRef=(0,react.useRef)(null),dateContainerRef=(0,react.useRef)(null);return(0,react.useEffect)((()=>{let datePicker;return(async()=>{datePicker=await window.Core.createDatePicker({field:dateRef.current,onClick,container:dateContainerRef.current,format:annotation.getDateFormat()}),onDatePickerShow(!0)})(),()=>{datePicker.destroy(),datePicker=null,onDatePickerShow(!1)}}),[]),(0,jsx_runtime.jsxs)("div",{"data-element":"datePickerContainer",children:[(0,jsx_runtime.jsx)("div",{ref:dateRef}),(0,jsx_runtime.jsx)("div",{ref:dateContainerRef})]})};DatePicker.propTypes={onClick:prop_types_default().func.isRequired,annotation:prop_types_default().object.isRequired,onDatePickerShow:prop_types_default().func.isRequired};const DatePicker_DatePicker=DatePicker;DatePicker.__docgenInfo={description:"",methods:[],displayName:"DatePicker",props:{onClick:{description:"",type:{name:"func"},required:!0},annotation:{description:"",type:{name:"object"},required:!0},onDatePickerShow:{description:"",type:{name:"func"},required:!0}}};const components_DatePicker=DatePicker_DatePicker;var CustomizablePopup=__webpack_require__("./src/components/CustomizablePopup/index.js");const components_CalibrationPopup=__webpack_require__("./src/components/CalibrationPopup/CalibrationPopup.js").A;var map=__webpack_require__("./src/constants/map.js"),dataElement=__webpack_require__("./src/constants/dataElement.js"),getRootNode=(__webpack_require__("./src/components/AnnotationPopup/AnnotationPopup.scss"),__webpack_require__("./src/helpers/getRootNode.js"));const propTypes={isMobile:prop_types_default().bool,isIE:prop_types_default().bool,isOpen:prop_types_default().bool,isRightClickMenu:prop_types_default().bool,isNotesPanelOpenOrActive:prop_types_default().bool,isRichTextPopupOpen:prop_types_default().bool,isLinkModalOpen:prop_types_default().bool,isWarningModalOpen:prop_types_default().bool,isContextMenuPopupOpen:prop_types_default().bool,isVisible:prop_types_default().bool,focusedAnnotation:prop_types_default().object,multipleAnnotationsSelected:prop_types_default().bool,popupRef:prop_types_default().any,position:prop_types_default().object,showViewFileButton:prop_types_default().bool,onViewFile:prop_types_default().func,showCommentButton:prop_types_default().bool,onCommentAnnotation:prop_types_default().func,isDateFreeTextCanEdit:prop_types_default().bool,isDatePickerOpen:prop_types_default().bool,handleDateChange:prop_types_default().func,onDatePickerShow:prop_types_default().func,isCalibrationPopupOpen:prop_types_default().bool,showEditStyleButton:prop_types_default().bool,isStylePopupOpen:prop_types_default().bool,hideSnapModeCheckbox:prop_types_default().bool,openEditStylePopup:prop_types_default().func,closeEditStylePopup:prop_types_default().func,annotationStyle:prop_types_default().object,onResize:prop_types_default().func,showContentEditButton:prop_types_default().bool,onEditContent:prop_types_default().func,openContentEditDeleteWarningModal:prop_types_default().func,isAppearanceSignature:prop_types_default().bool,onClearAppearanceSignature:prop_types_default().func,showRedactionButton:prop_types_default().bool,onApplyRedaction:prop_types_default().func,showGroupButton:prop_types_default().bool,onGroupAnnotations:prop_types_default().func,showUngroupButton:prop_types_default().bool,onUngroupAnnotations:prop_types_default().func,showFormFieldButton:prop_types_default().bool,onOpenFormField:prop_types_default().func,showDeleteButton:prop_types_default().bool,onDeleteAnnotation:prop_types_default().func,showLinkButton:prop_types_default().bool,hasAssociatedLink:prop_types_default().bool,linkAnnotationToURL:prop_types_default().func,showFileDownloadButton:prop_types_default().bool,downloadFileAttachment:prop_types_default().func,showAudioPlayButton:prop_types_default().bool,handlePlaySound:prop_types_default().func,showCalibrateButton:prop_types_default().bool,onOpenCalibration:prop_types_default().func,customizableUI:prop_types_default().bool,openStylePanel:prop_types_default().func,isInReadOnlyMode:prop_types_default().bool,onOpenAlignmentModal:prop_types_default().func},AnnotationPopup_AnnotationPopup=({isMobile,isIE,isOpen,isRightClickMenu,isNotesPanelOpenOrActive,isRichTextPopupOpen,isLinkModalOpen,isWarningModalOpen,isContextMenuPopupOpen,isVisible,focusedAnnotation,popupRef,position,multipleAnnotationsSelected,showViewFileButton,onViewFile,showCommentButton,onCommentAnnotation,isDateFreeTextCanEdit,isDatePickerOpen,handleDateChange,onDatePickerShow,isCalibrationPopupOpen,showEditStyleButton,isStylePopupOpen,hideSnapModeCheckbox,openEditStylePopup,closeEditStylePopup,annotationStyle,onResize,showContentEditButton,onEditContent,openContentEditDeleteWarningModal,isAppearanceSignature,onClearAppearanceSignature,showRedactionButton,onApplyRedaction,showGroupButton,onGroupAnnotations,showUngroupButton,onUngroupAnnotations,showFormFieldButton,onOpenFormField,showDeleteButton,onDeleteAnnotation,showLinkButton,hasAssociatedLink,linkAnnotationToURL,showFileDownloadButton,downloadFileAttachment,showAudioPlayButton,handlePlaySound,showCalibrateButton,onOpenCalibration,customizableUI,openStylePanel,isInReadOnlyMode,onOpenAlignmentModal})=>{const[t]=(0,useTranslation.B)(),[shortCutKeysFor3DVisible,setShortCutKeysFor3DVisible]=(0,react.useState)(!1),commentButtonLabel=isDateFreeTextCanEdit?"action.changeDate":"action.comment",commentButtonImg=isDateFreeTextCanEdit?"icon-tool-fill-and-sign-calendar":"icon-header-chat-line",show3DShortCutButton=!isInReadOnlyMode&&focusedAnnotation instanceof window.Core.Annotations.Model3DAnnotation&&!isMobile,isRectangle=focusedAnnotation instanceof window.Core.Annotations.RectangleAnnotation,isEllipse=focusedAnnotation instanceof window.Core.Annotations.EllipseAnnotation,isPolygon=focusedAnnotation instanceof window.Core.Annotations.PolygonAnnotation,isFreeText=focusedAnnotation instanceof window.Core.Annotations.FreeTextAnnotation&&(focusedAnnotation.getIntent()===window.Core.Annotations.FreeTextAnnotation.Intent.FreeText||focusedAnnotation.getIntent()===window.Core.Annotations.FreeTextAnnotation.Intent.FreeTextCallout),isRedaction=focusedAnnotation instanceof window.Core.Annotations.RedactionAnnotation,colorMapKey=(0,map.c7)(focusedAnnotation),isMeasure=!!focusedAnnotation.Measure,showLineStyleOptions=(0,map.ap)((0,map.YP)(focusedAnnotation.ToolName)).hasLineEndings,isInstanceActive=!window.isApryseWebViewerWebComponent||document.activeElement?.shadowRoot===(0,getRootNode.Ay)();let StrokeStyle="solid";const isContentEdit=focusedAnnotation.isContentEditPlaceholder?.(),isReadOnlySignature=focusedAnnotation instanceof window.Core.Annotations.SignatureWidgetAnnotation&&focusedAnnotation.fieldFlags.get(window.Core.Annotations.WidgetFlags.READ_ONLY),showClearSignatureButton=isAppearanceSignature&&!showFormFieldButton;try{StrokeStyle="dash"===focusedAnnotation.Style?`${focusedAnnotation.Style},${focusedAnnotation.Dashes}`:focusedAnnotation.Style}catch(err){console.error(err)}let properties={};if(showLineStyleOptions&&(properties={StartLineStyle:focusedAnnotation.getStartStyle(),EndLineStyle:focusedAnnotation.getEndStyle(),StrokeStyle}),(isRectangle||isEllipse||isPolygon)&&(properties={StrokeStyle}),isFreeText){const richTextStyles=focusedAnnotation.getRichTextStyle(),isAutoSizeFont=focusedAnnotation.isAutoSizeFont(),calculatedFontSize=focusedAnnotation.getCalculatedFontSize();properties={Font:focusedAnnotation.Font,FontSize:focusedAnnotation.FontSize,TextAlign:focusedAnnotation.TextAlign,TextVerticalAlign:focusedAnnotation.TextVerticalAlign,bold:"bold"===richTextStyles?.[0]?.["font-weight"]??!1,italic:"italic"===richTextStyles?.[0]?.["font-style"]??!1,underline:richTextStyles?.[0]?.["text-decoration"]?.includes("underline")||richTextStyles?.[0]?.["text-decoration"]?.includes("word"),strikeout:richTextStyles?.[0]?.["text-decoration"]?.includes("line-through")??!1,StrokeStyle,isAutoSizeFont,calculatedFontSize}}isRedaction&&(properties={OverlayText:focusedAnnotation.OverlayText,Font:focusedAnnotation.Font,FontSize:focusedAnnotation.FontSize,TextAlign:focusedAnnotation.TextAlign});const annotationPopup=(0,jsx_runtime.jsx)("div",{className:classnames_default()({Popup:!0,AnnotationPopup:!0,open:isOpen,closed:!isOpen,stylePopupOpen:isStylePopupOpen,"is-vertical":isRightClickMenu,"is-horizontal":!isRightClickMenu}),ref:popupRef,"data-element":dataElement.A.ANNOTATION_POPUP,style:{...position,visibility:isVisible||void 0===isVisible?"visible":"hidden"},children:(()=>{switch(!0){case isStylePopupOpen:return(0,jsx_runtime.jsx)(AnnotationStylePopup.A,{annotations:[focusedAnnotation],style:annotationStyle,isOpen,onResize,isFreeText,isEllipse,isRedaction,isMeasure,colorMapKey,showLineStyleOptions,properties,hideSnapModeCheckbox,hasBackToMenu:isRightClickMenu,onBackToMenu:closeEditStylePopup});case isDatePickerOpen:return(0,jsx_runtime.jsx)(components_DatePicker,{onClick:handleDateChange,annotation:focusedAnnotation,onDatePickerShow});case isCalibrationPopupOpen:return(0,jsx_runtime.jsx)(components_CalibrationPopup,{annotation:focusedAnnotation});case shortCutKeysFor3DVisible&&focusedAnnotation instanceof window.Core.Annotations.Model3DAnnotation:return(0,jsx_runtime.jsxs)("div",{className:"shortCuts3D",children:[(0,jsx_runtime.jsx)("div",{className:"closeButton",onClick:()=>setShortCutKeysFor3DVisible(!1),children:"x"}),(0,jsx_runtime.jsxs)("div",{className:"row",children:[t("action.rotate3D")," ",(0,jsx_runtime.jsx)("span",{children:t("shortcut.rotate3D")})]}),(0,jsx_runtime.jsxs)("div",{className:"row",children:[t("action.zoom")," ",(0,jsx_runtime.jsx)("span",{children:t("shortcut.zoom3D")})]})]});default:return(0,jsx_runtime.jsx)(FocusTrap.A,{locked:isOpen&&isInstanceActive&&!isRichTextPopupOpen&&!isNotesPanelOpenOrActive&&!isLinkModalOpen&&!isWarningModalOpen&&!isFreeText&&!isContextMenuPopupOpen,children:(0,jsx_runtime.jsx)("div",{className:"container",children:(0,jsx_runtime.jsxs)(CustomizablePopup.A,{dataElement:dataElement.A.ANNOTATION_POPUP,childrenClassName:"main-menu-button",children:[showViewFileButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"viewFileButton",label:isRightClickMenu?"action.viewFile":"",title:isRightClickMenu?"":"action.viewFile",img:"icon-view",onClick:onViewFile}),showCommentButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"annotationCommentButton",label:isRightClickMenu?commentButtonLabel:"",title:isRightClickMenu?"":commentButtonLabel,img:commentButtonImg,onClick:onCommentAnnotation}),showEditStyleButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"annotationStyleEditButton",label:isRightClickMenu?"action.style":"",title:isRightClickMenu?"":"action.style",img:"icon-menu-style-line",onClick:customizableUI?openStylePanel:openEditStylePopup}),showContentEditButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"annotationContentEditButton",label:isRightClickMenu?"action.edit":"",title:isRightClickMenu?"":"action.edit",img:"ic_edit_page_24px",onClick:onEditContent}),showClearSignatureButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"annotationClearSignatureButton",label:!isReadOnlySignature&&isRightClickMenu?"action.clearSignature":"",title:isReadOnlySignature?"action.readOnlySignature":isRightClickMenu?"":"action.clearSignature",img:"icon-delete-line",onClick:onClearAppearanceSignature,isNotClickableSelector:()=>isReadOnlySignature}),showRedactionButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"annotationRedactButton",label:isRightClickMenu?"action.apply":"",title:isRightClickMenu?"":"action.apply",img:"ic_check_black_24px",onClick:onApplyRedaction}),showGroupButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"annotationGroupButton",label:isRightClickMenu?"action.group":"",title:isRightClickMenu?"":"action.group",img:"group-annotations-icon",onClick:onGroupAnnotations}),showUngroupButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"annotationUngroupButton",label:isRightClickMenu?"action.ungroup":"",title:isRightClickMenu?"":"action.ungroup",img:"ungroup-annotations-icon",onClick:onUngroupAnnotations}),multipleAnnotationsSelected&&!isMobile&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"openAlignmentButton",label:isRightClickMenu?"alignment":"",title:isRightClickMenu?"":"Align",img:"ic-alignment-main",onClick:onOpenAlignmentModal}),showFormFieldButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"formFieldEditButton",label:isRightClickMenu?"action.formFieldEdit":"",title:isRightClickMenu?"":"action.formFieldEdit",img:"icon-edit-form-field",onClick:onOpenFormField}),showDeleteButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"annotationDeleteButton",label:isRightClickMenu?"action.delete":"",title:isRightClickMenu?"":"action.delete",img:"icon-delete-line",onClick:isContentEdit?openContentEditDeleteWarningModal:onDeleteAnnotation}),showCalibrateButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:dataElement.A.CALIBRATION_POPUP_BUTTON,label:isRightClickMenu?"action.calibrate":"",title:isRightClickMenu?"":"action.calibrate",img:"calibrate",onClick:onOpenCalibration}),showLinkButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"linkButton",label:isRightClickMenu?"tool.Link":"",title:isRightClickMenu?"":"tool.Link",img:hasAssociatedLink?"icon-tool-unlink":"icon-tool-link",onClick:linkAnnotationToURL}),showFileDownloadButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"fileAttachmentDownload",label:isRightClickMenu?"action.fileAttachmentDownload":"",title:isRightClickMenu?"":"action.fileAttachmentDownload",img:"icon-download",onClick:()=>downloadFileAttachment(focusedAnnotation)}),show3DShortCutButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"shortCutKeysFor3D",label:isRightClickMenu?"action.viewShortCutKeysFor3D":"",title:isRightClickMenu?"":"action.viewShortCutKeysFor3D",img:"icon-keyboard",onClick:()=>setShortCutKeysFor3DVisible(!0)}),showAudioPlayButton&&(0,jsx_runtime.jsx)(ActionButton.A,{className:"main-menu-button",dataElement:"playSoundButton",label:isRightClickMenu?"action.playAudio":"",title:isRightClickMenu?"":"action.playAudio",img:"ic_play_24px",onClick:()=>handlePlaySound(focusedAnnotation)})]})})})}})()});return isIE||isMobile?annotationPopup:(0,jsx_runtime.jsx)(cjs_default(),{cancel:".Button, .cell, .sliders-container svg, select, button, input",children:annotationPopup})};AnnotationPopup_AnnotationPopup.propTypes=propTypes;const components_AnnotationPopup_AnnotationPopup=AnnotationPopup_AnnotationPopup;AnnotationPopup_AnnotationPopup.__docgenInfo={description:"",methods:[],displayName:"AnnotationPopup",props:{isMobile:{description:"",type:{name:"bool"},required:!1},isIE:{description:"",type:{name:"bool"},required:!1},isOpen:{description:"",type:{name:"bool"},required:!1},isRightClickMenu:{description:"",type:{name:"bool"},required:!1},isNotesPanelOpenOrActive:{description:"",type:{name:"bool"},required:!1},isRichTextPopupOpen:{description:"",type:{name:"bool"},required:!1},isLinkModalOpen:{description:"",type:{name:"bool"},required:!1},isWarningModalOpen:{description:"",type:{name:"bool"},required:!1},isContextMenuPopupOpen:{description:"",type:{name:"bool"},required:!1},isVisible:{description:"",type:{name:"bool"},required:!1},focusedAnnotation:{description:"",type:{name:"object"},required:!1},multipleAnnotationsSelected:{description:"",type:{name:"bool"},required:!1},popupRef:{description:"",type:{name:"any"},required:!1},position:{description:"",type:{name:"object"},required:!1},showViewFileButton:{description:"",type:{name:"bool"},required:!1},onViewFile:{description:"",type:{name:"func"},required:!1},showCommentButton:{description:"",type:{name:"bool"},required:!1},onCommentAnnotation:{description:"",type:{name:"func"},required:!1},isDateFreeTextCanEdit:{description:"",type:{name:"bool"},required:!1},isDatePickerOpen:{description:"",type:{name:"bool"},required:!1},handleDateChange:{description:"",type:{name:"func"},required:!1},onDatePickerShow:{description:"",type:{name:"func"},required:!1},isCalibrationPopupOpen:{description:"",type:{name:"bool"},required:!1},showEditStyleButton:{description:"",type:{name:"bool"},required:!1},isStylePopupOpen:{description:"",type:{name:"bool"},required:!1},hideSnapModeCheckbox:{description:"",type:{name:"bool"},required:!1},openEditStylePopup:{description:"",type:{name:"func"},required:!1},closeEditStylePopup:{description:"",type:{name:"func"},required:!1},annotationStyle:{description:"",type:{name:"object"},required:!1},onResize:{description:"",type:{name:"func"},required:!1},showContentEditButton:{description:"",type:{name:"bool"},required:!1},onEditContent:{description:"",type:{name:"func"},required:!1},openContentEditDeleteWarningModal:{description:"",type:{name:"func"},required:!1},isAppearanceSignature:{description:"",type:{name:"bool"},required:!1},onClearAppearanceSignature:{description:"",type:{name:"func"},required:!1},showRedactionButton:{description:"",type:{name:"bool"},required:!1},onApplyRedaction:{description:"",type:{name:"func"},required:!1},showGroupButton:{description:"",type:{name:"bool"},required:!1},onGroupAnnotations:{description:"",type:{name:"func"},required:!1},showUngroupButton:{description:"",type:{name:"bool"},required:!1},onUngroupAnnotations:{description:"",type:{name:"func"},required:!1},showFormFieldButton:{description:"",type:{name:"bool"},required:!1},onOpenFormField:{description:"",type:{name:"func"},required:!1},showDeleteButton:{description:"",type:{name:"bool"},required:!1},onDeleteAnnotation:{description:"",type:{name:"func"},required:!1},showLinkButton:{description:"",type:{name:"bool"},required:!1},hasAssociatedLink:{description:"",type:{name:"bool"},required:!1},linkAnnotationToURL:{description:"",type:{name:"func"},required:!1},showFileDownloadButton:{description:"",type:{name:"bool"},required:!1},downloadFileAttachment:{description:"",type:{name:"func"},required:!1},showAudioPlayButton:{description:"",type:{name:"bool"},required:!1},handlePlaySound:{description:"",type:{name:"func"},required:!1},showCalibrateButton:{description:"",type:{name:"bool"},required:!1},onOpenCalibration:{description:"",type:{name:"func"},required:!1},customizableUI:{description:"",type:{name:"bool"},required:!1},openStylePanel:{description:"",type:{name:"func"},required:!1},isInReadOnlyMode:{description:"",type:{name:"bool"},required:!1},onOpenAlignmentModal:{description:"",type:{name:"func"},required:!1}}}},"./src/components/AnnotationPopup/AnnotationPopup.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/AnnotationPopup/AnnotationPopup.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/AnnotationStylePopup/AnnotationStylePopup.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_15__),react_redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-redux/es/index.js"),react_measure__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-measure/dist/index.esm.js"),react_i18next__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),components_StylePopup__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/StylePopup/index.js"),components_ActionButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/ActionButton/index.js"),core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/core/index.js"),helpers_getClassName__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./src/helpers/getClassName.js"),helpers_setToolStyles__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/helpers/setToolStyles.js"),helpers_device__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/helpers/device.js"),helpers_adjustFreeTextBoundingBox__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/helpers/adjustFreeTextBoundingBox.js"),actions__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/redux/actions/index.js"),selectors__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/redux/selectors/index.js"),constants_dataElement__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/constants/dataElement.js"),src_helpers_handleFreeTextAutoSizeToggle__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/helpers/handleFreeTextAutoSizeToggle.js");__webpack_require__("./src/components/AnnotationStylePopup/AnnotationStylePopup.scss");const propTypes={annotations:prop_types__WEBPACK_IMPORTED_MODULE_15___default().array.isRequired,style:prop_types__WEBPACK_IMPORTED_MODULE_15___default().object.isRequired,properties:prop_types__WEBPACK_IMPORTED_MODULE_15___default().object.isRequired,isRedaction:prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool,isFreeText:prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool,isEllipse:prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool,hasBackToMenu:prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool,onBackToMenu:prop_types__WEBPACK_IMPORTED_MODULE_15___default().func},AnnotationStylePopup=props=>{const{annotations,style,isRedaction,isFreeText,isEllipse,isMeasure,colorMapKey,showLineStyleOptions,properties,hideSnapModeCheckbox,onResize,hasBackToMenu,onBackToMenu}=props,[isDisabled,isToolDefaultStyleUpdateFromAnnotationPopupEnabled,activeDocumentViewerKey]=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.d4)((state=>[selectors__WEBPACK_IMPORTED_MODULE_11__.A.isElementDisabled(state,constants_dataElement__WEBPACK_IMPORTED_MODULE_12__.A.ANNOTATION_STYLE_POPUP),selectors__WEBPACK_IMPORTED_MODULE_11__.A.isToolDefaultStyleUpdateFromAnnotationPopupEnabled(state),selectors__WEBPACK_IMPORTED_MODULE_11__.A.getActiveDocumentViewerKey(state)])),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.wA)(),[t]=(0,react_i18next__WEBPACK_IMPORTED_MODULE_16__.B)(),[isAutoSizeFont,setAutoSizeFont]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(properties.isAutoSizeFont),handleSliderChange=(property,value)=>{const annotationManager=core__WEBPACK_IMPORTED_MODULE_6__.A.getAnnotationManager(activeDocumentViewerKey);annotations.forEach((annotation=>{annotation[property]=value,"StrokeThickness"===property&&(0,helpers_adjustFreeTextBoundingBox__WEBPACK_IMPORTED_MODULE_9__.A)(annotation),annotationManager.redrawAnnotation(annotation),annotation instanceof window.Core.Annotations.WidgetAnnotation&&annotation.refresh()}))},handlePropertyChange=(property,value)=>{annotations.forEach((annotation=>{core__WEBPACK_IMPORTED_MODULE_6__.A.setAnnotationStyles(annotation,{[property]:value},activeDocumentViewerKey),isToolDefaultStyleUpdateFromAnnotationPopupEnabled&&(0,helpers_setToolStyles__WEBPACK_IMPORTED_MODULE_7__.A)(annotation.ToolName,property,value),"FontSize"!==property&&"Font"!==property||(0,helpers_adjustFreeTextBoundingBox__WEBPACK_IMPORTED_MODULE_9__.A)(annotation)}))},handleStyleChange=(property,value)=>{annotations.forEach((annotation=>{core__WEBPACK_IMPORTED_MODULE_6__.A.setAnnotationStyles(annotation,{[property]:value},activeDocumentViewerKey),isToolDefaultStyleUpdateFromAnnotationPopupEnabled&&(0,helpers_setToolStyles__WEBPACK_IMPORTED_MODULE_7__.A)(annotation.ToolName,property,value)}))},handleRichTextStyleChange=(property,value)=>{annotations.forEach((annotation=>{core__WEBPACK_IMPORTED_MODULE_6__.A.updateAnnotationRichTextStyle(annotation,{[property]:value},activeDocumentViewerKey)}))},handleLineStyleChange=(section,value)=>{annotations.forEach((annotation=>{let lineStyle="";if("start"===section)annotation.setStartStyle(value),lineStyle="StartLineStyle";else if("end"===section)annotation.setEndStyle(value),lineStyle="EndLineStyle";else if("middle"===section){const dashes=value.split(","),style=dashes.shift();annotation.Style=style,annotation.Dashes=dashes,lineStyle="StrokeStyle"}isToolDefaultStyleUpdateFromAnnotationPopupEnabled&&(0,helpers_setToolStyles__WEBPACK_IMPORTED_MODULE_7__.A)(annotation.ToolName,lineStyle,value),core__WEBPACK_IMPORTED_MODULE_6__.A.getAnnotationManager(activeDocumentViewerKey).redrawAnnotation(annotation)})),core__WEBPACK_IMPORTED_MODULE_6__.A.getAnnotationManager(activeDocumentViewerKey).trigger("annotationChanged",[annotations,"modify",{}])},handleClick=e=>{(0,helpers_device__WEBPACK_IMPORTED_MODULE_8__.Fr)()&&e.target===e.currentTarget&&dispatch(actions__WEBPACK_IMPORTED_MODULE_10__.A.closeElement(constants_dataElement__WEBPACK_IMPORTED_MODULE_12__.A.ANNOTATION_POPUP))},className=(0,helpers_getClassName__WEBPACK_IMPORTED_MODULE_17__.A)("Popup AnnotationStylePopup",props);return isDisabled?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_measure__WEBPACK_IMPORTED_MODULE_3__.A,{onResize:()=>{onResize&&onResize()},children:({measureRef})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className,"data-element":constants_dataElement__WEBPACK_IMPORTED_MODULE_12__.A.ANNOTATION_STYLE_POPUP,onClick:handleClick,ref:measureRef,children:[hasBackToMenu&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"back-to-menu-container","data-element":constants_dataElement__WEBPACK_IMPORTED_MODULE_12__.A.ANNOTATION_STYLE_POPUP_BACK_BUTTON_CONTAINER,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_ActionButton__WEBPACK_IMPORTED_MODULE_5__.A,{className:"back-to-menu-button",dataElement:constants_dataElement__WEBPACK_IMPORTED_MODULE_12__.A.ANNOTATION_STYLE_POPUP_BACK_BUTTON,label:t("action.backToMenu"),img:"icon-chevron-left",onClick:onBackToMenu})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_StylePopup__WEBPACK_IMPORTED_MODULE_4__.A,{hideSnapModeCheckbox,colorMapKey,style,isFreeText,isFreeTextAutoSize:isAutoSizeFont,onFreeTextSizeToggle:()=>(0,src_helpers_handleFreeTextAutoSizeToggle__WEBPACK_IMPORTED_MODULE_13__.A)(annotations[0],setAutoSizeFont,isAutoSizeFont),isEllipse,isMeasure,onStyleChange:handleStyleChange,onSliderChange:handleSliderChange,onPropertyChange:handlePropertyChange,disableSeparator:!0,properties,onRichTextStyleChange:handleRichTextStyleChange,isRedaction,showLineStyleOptions,onLineStyleChange:handleLineStyleChange})]})})};AnnotationStylePopup.propTypes=propTypes;const __WEBPACK_DEFAULT_EXPORT__=AnnotationStylePopup;AnnotationStylePopup.__docgenInfo={description:"",methods:[],displayName:"AnnotationStylePopup",props:{annotations:{description:"",type:{name:"array"},required:!0},style:{description:"",type:{name:"object"},required:!0},properties:{description:"",type:{name:"object"},required:!0},isRedaction:{description:"",type:{name:"bool"},required:!1},isFreeText:{description:"",type:{name:"bool"},required:!1},isEllipse:{description:"",type:{name:"bool"},required:!1},hasBackToMenu:{description:"",type:{name:"bool"},required:!1},onBackToMenu:{description:"",type:{name:"func"},required:!1}}}},"./src/components/AnnotationStylePopup/AnnotationStylePopup.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/AnnotationStylePopup/AnnotationStylePopup.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/AnnotationStylePopup/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("./src/components/AnnotationStylePopup/AnnotationStylePopup.js").A},"./src/components/CalibrationPopup/CalibrationPopup.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),selectors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/redux/selectors/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-redux/es/index.js"),core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/core/index.js"),actions__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/redux/actions/index.js"),_pdftron_webviewer_react_toolkit__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@pdftron/webviewer-react-toolkit/dist/esm/components/Choice/Choice.js"),_Dropdown__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Dropdown/index.js"),_Tooltip__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Tooltip/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_11__),react_i18next__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/constants/measurementScale.js"),classnames__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_9__);__webpack_require__("./src/components/CalibrationPopup/CalibrationPopup.scss");const Scale=window.Core.Scale,parseMeasurementContentsByAnnotation=annotation=>{const factor=annotation.Measure.axis[0].factor;return"ft-in"===annotation.Scale[1][1]?annotation.getLineLength()*factor/12:annotation.getLineLength()*factor},CalibrationPropType={annotation:prop_types__WEBPACK_IMPORTED_MODULE_11___default().shape({Scale:prop_types__WEBPACK_IMPORTED_MODULE_11___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_11___default().array)})},CalibrationPopup=({annotation})=>{const[t]=(0,react_i18next__WEBPACK_IMPORTED_MODULE_12__.B)(),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.wA)(),[measurementUnits,{tempScale,isFractionalUnit,defaultUnit}]=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.d4)((state=>[selectors__WEBPACK_IMPORTED_MODULE_2__.A.getMeasurementUnits(state),selectors__WEBPACK_IMPORTED_MODULE_2__.A.getCalibrationInfo(state)]),react_redux__WEBPACK_IMPORTED_MODULE_3__.bN),[valueDisplay,setValueDisplay]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),inputRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),unitTo=new Scale(tempScale).worldScale?.unit||"mm",unitToOptions=isFractionalUnit?measurementUnits.to.filter((unit=>constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.Ph.includes(unit))):measurementUnits.to,isFractionalUnitsToggleDisabled=!constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.Ph.includes(unitTo),valueInputType=isFractionalUnit||"ft-in"===unitTo?"text":"number",inputValueClass=classnames__WEBPACK_IMPORTED_MODULE_9___default()("input-field",{"invalid-value":!(tempScale&&new Scale(tempScale).worldScale?.value>0)}),updateTempScale=(scaleValue,scaleUnit)=>{const currentDistance=parseMeasurementContentsByAnnotation(annotation),currentScale=annotation.Scale,newRatio=currentDistance/currentScale[1][0],pageScale=[currentScale[0][0]*newRatio,currentScale[0][1]],defaultPageUnit="pt"===(pageUnit=scaleUnit)?"pt":constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.EN.includes(pageUnit)?"mm":"in";var pageUnit;const defaultPageValue=(0,constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.oU)(pageScale[0],pageScale[1],defaultPageUnit);dispatch(actions__WEBPACK_IMPORTED_MODULE_5__.A.updateCalibrationInfo({tempScale:`${defaultPageValue} ${defaultPageUnit} = ${scaleValue} ${scaleUnit}`,isFractionalUnit}))},setValue=scaleValue=>{updateTempScale(scaleValue,new Scale(tempScale).worldScale?.unit)},updateValueDisplay=()=>{const scaleValue=new Scale(tempScale).worldScale?.value;let newValueDisplay;newValueDisplay=isFractionalUnit||"ft-in"===unitTo?Scale.getFormattedValue(scaleValue,unitTo,isFractionalUnit?1/64:1e-4,!1,!0):`${scaleValue}`,setValueDisplay(newValueDisplay||"")},tempScaleRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(tempScale);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{tempScaleRef.current=tempScale}),[tempScale]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{if(annotation){const value=parseMeasurementContentsByAnnotation(annotation),unit=annotation.Scale[1][1];defaultUnit?updateTempScale((0,constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.oU)(value,unit,defaultUnit),defaultUnit):updateTempScale(value,unit)}const onAnnotationChanged=(annotations,action)=>{if("modify"===action&&1===annotations.length&&annotations[0]===annotation){const value=parseMeasurementContentsByAnnotation(annotation),unit=annotation.Scale[1][1],currentUnit=new Scale(tempScaleRef.current).worldScale?.unit;currentUnit?updateTempScale((0,constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.oU)(value,unit,currentUnit),currentUnit):updateTempScale(value,unit)}};return core__WEBPACK_IMPORTED_MODULE_4__.A.addEventListener("annotationChanged",onAnnotationChanged),()=>{core__WEBPACK_IMPORTED_MODULE_4__.A.removeEventListener("annotationChanged",onAnnotationChanged),core__WEBPACK_IMPORTED_MODULE_4__.A.deleteAnnotations([annotation])}}),[annotation]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{inputRef?.current!==document.activeElement&&updateValueDisplay()}),[tempScale,isFractionalUnit]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"CalibrationPopup","data-element":"calibrationPopup",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"calibration-popup-label",id:"calibration-popup-label",htmlFor:"calibration-popup-value",children:t("option.measurement.scaleModal.units")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"input-container",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{id:"calibration-popup-value",className:inputValueClass,ref:inputRef,type:valueInputType,value:valueDisplay,min:"0",onChange:e=>{setValueDisplay(e.target.value);const inputValue=e.target.value.trim();if(isFractionalUnit){if("in"===unitTo){if(constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.yQ.test(inputValue)){const result=(0,constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.cX)(inputValue);if(result>0)return void setValue(result)}}else if("ft-in"===unitTo&&constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.CR.test(inputValue)){const result=(0,constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.QQ)(inputValue);if(result>0)return void setValue(result)}}else if("ft-in"===unitTo&&constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.oi.test(inputValue)){const result=(0,constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.Cg)(inputValue);if(result>0)return void setValue(result)}else if(constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.SY.test(inputValue)){const result=parseFloat(inputValue)||0;return void setValue(result)}setValue(0)},onBlur:()=>{updateValueDisplay()},placeholder:isFractionalUnit?constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.OR[unitTo]:"ft-in"===unitTo?constants_measurementScale__WEBPACK_IMPORTED_MODULE_8__.OR["ft-in decimal"]:""}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Tooltip__WEBPACK_IMPORTED_MODULE_7__.A,{content:"option.measurement.scaleModal.displayUnits",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"input-field",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Dropdown__WEBPACK_IMPORTED_MODULE_6__.A,{id:"calibration-popup-units",dataElement:"calibrationUnits",items:unitToOptions,currentSelectionKey:unitTo,onClickItem:scaleUnit=>{updateTempScale(new Scale(tempScale).worldScale?.value,scaleUnit)},labelledById:"calibration-popup-label"})})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Tooltip__WEBPACK_IMPORTED_MODULE_7__.A,{content:t("option.measurement.scaleModal.fractionUnitsTooltip"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_pdftron_webviewer_react_toolkit__WEBPACK_IMPORTED_MODULE_13__.G,{isSwitch:!0,leftLabel:!0,label:t("option.measurement.scaleModal.fractionalUnits"),disabled:isFractionalUnitsToggleDisabled,checked:isFractionalUnit,id:"calibration-popup-fractional-units",className:"pop-switch",onChange:()=>{dispatch(actions__WEBPACK_IMPORTED_MODULE_5__.A.updateCalibrationInfo({tempScale,isFractionalUnit:!isFractionalUnit}))}})})})]})};CalibrationPopup.propTypes=CalibrationPropType;const __WEBPACK_DEFAULT_EXPORT__=CalibrationPopup;CalibrationPopup.__docgenInfo={description:"",methods:[],displayName:"CalibrationPopup",props:{annotation:{description:"",type:{name:"shape",value:{Scale:{name:"arrayOf",value:{name:"array"},required:!1}}},required:!1}}}},"./src/components/CalibrationPopup/CalibrationPopup.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/CalibrationPopup/CalibrationPopup.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/CustomizablePopup/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>components_CustomizablePopup});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-redux/es/index.js"),ToolButton=__webpack_require__("./src/components/ToolButton/index.js"),ToolGroupButton=__webpack_require__("./src/components/ToolGroupButton/index.js"),ToggleElementButton=__webpack_require__("./src/components/ToggleElementButton/index.js"),ActionButton=__webpack_require__("./src/components/ActionButton/index.js"),StatefulButton=__webpack_require__("./src/components/StatefulButton/index.js"),CustomElement=__webpack_require__("./src/components/CustomElement/index.js"),selectors=__webpack_require__("./src/redux/selectors/index.js");const propTypes={dataElement:prop_types_default().string.isRequired,children:prop_types_default().arrayOf(prop_types_default().any).isRequired},CustomizablePopup=({dataElement,children,childrenClassName})=>{const items=(0,es.d4)((state=>selectors.A.getPopupItems(state,dataElement)),es.bN),childrenArray=react.Children.toArray(children);return items.map(((item,i)=>{const{dataElement,type,hidden}=item,key=`${type}-${dataElement||i}`,mediaQueryClassName=hidden?.map((screen=>`hide-in-${screen}`)).join(" ");let component=childrenArray.find((child=>child.props.dataElement===dataElement));if(!component){const props={...item,mediaQueryClassName,className:childrenClassName};"toolButton"===type&&(component=(0,jsx_runtime.jsx)(ToolButton.A,{...props})),"toolGroupButton"===type&&(component=(0,jsx_runtime.jsx)(ToolGroupButton.A,{...props})),"toggleElementButton"===type&&(component=(0,jsx_runtime.jsx)(ToggleElementButton.A,{...props})),"actionButton"===type&&(component=(0,jsx_runtime.jsx)(ActionButton.A,{...props})),"statefulButton"===type&&(component=(0,jsx_runtime.jsx)(StatefulButton.A,{...props})),"customElement"===type&&(component=(0,jsx_runtime.jsx)(CustomElement.A,{...props})),"spacer"!==type&&"divider"!==type||(component=(0,jsx_runtime.jsx)("div",{className:`${type} ${mediaQueryClassName}`,...props}))}return component?react.cloneElement(component,{key}):null}))};CustomizablePopup.propTypes=propTypes;const components_CustomizablePopup=CustomizablePopup},"./src/helpers/getClassName.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(className,{isOpen})=>[className,isOpen?"open":"closed"].join(" ").trim()}}]);