(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[4078],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/SignaturePanel/SignaturePanel.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.SignaturePanel{z-index:65;transition:transform .3s ease,visibility 0s ease .3s}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignaturePanel{top:0;width:100%;height:100%}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .SignaturePanel{top:0;width:100%;height:100%}}.open.SignaturePanel{transform:none;visibility:visible;transition:transform .3s ease,visibility 0s ease 0s}.SignaturePanel .empty-panel-container{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%;padding:36px;grid-gap:8px;gap:8px}.SignaturePanel .empty-panel-container .empty-icon{width:60px;height:60px;color:var(--gray-6);fill:var(--gray-6)}.SignaturePanel .empty-panel-container .empty-icon svg{width:60px;height:60px}.SignaturePanel .empty-panel-container .empty-message{text-align:center;max-width:131px;font-size:13px}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignaturePanel .empty-panel-container .empty-message{line-height:15px}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .SignaturePanel .empty-panel-container .empty-message{line-height:15px}}.SignaturePanel{margin:0 8px 8px;display:flex;flex-direction:column}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignaturePanel{width:auto;margin:16px;flex-grow:1;overflow-y:auto}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .SignaturePanel{width:auto;margin:16px;flex-grow:1;overflow-y:auto}}.SignaturePanel .center{display:flex;justify-content:center;align-items:center}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SignaturePanel .signature-widget-info .title .arrow{min-width:auto;padding:3px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .SignaturePanel .signature-widget-info .title .arrow{min-width:auto;padding:3px}}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/SignaturePanel/Spinner/Spinner.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".SignaturePanel .spinner{margin:10px;border:5px solid #ddd;border-top-color:#aaa;border-radius:50%;width:40px;height:40px;animation:spin 1.2s ease infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""]),module.exports=exports},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/SignaturePanel/WidgetInfo/WidgetInfo.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".signature-widget-info{--widget-header-indent:49px;--widget-body-indent:22px;--arrow-width:12px;padding:4px;display:flex;flex-direction:column;font-size:13px;margin-bottom:10px;margin-left:5px;box-sizing:border-box;border:1px solid transparent;cursor:pointer;--border-radius-amount:4px;-moz-border-radius-topleft:var(--border-radius-amount);-moz-border-radius-topright:var(--border-radius-amount);-moz-border-radius-bottomright:var(--border-radius-amount);-moz-border-radius-bottomleft:var(--border-radius-amount);border-radius:var(--border-radius-amount)}.signature-widget-info p+p{margin:1em 0 0}.signature-widget-info p.result-for-header{margin-top:0}.signature-widget-info p.bold{font-weight:700;margin-bottom:4px}.signature-widget-info p.underline{text-decoration:underline}.signature-widget-info .signatureProperties{padding:0;margin:0}.signature-widget-info .signatureProperties:focus,.signature-widget-info .signatureProperties:hover{color:var(--blue-5)}.signature-widget-info .link{cursor:pointer;outline:none;border:0;background-color:transparent;white-space:nowrap}.signature-widget-info .link.focus-visible,.signature-widget-info .link:focus-visible{outline:var(--focus-visible-outline)}.signature-widget-info .link p{margin:0;padding:0}.signature-widget-info .panel-list-text-container{height:100%}.signature-widget-info .panel-list-text-container .panel-list-label-header .Button span{text-align:left;overflow:visible;white-space:normal;text-overflow:inherit}.signature-widget-info .panel-list-icon-container .Icon{width:20px;height:20px}.signature-widget-info .title{padding-left:4px;font-weight:700;display:flex;align-items:center;min-height:32px;margin-top:-5px;margin-bottom:-5px;overflow:hidden;border:0;background-color:transparent}.signature-widget-info .title button+*,.signature-widget-info .title div+*{margin-left:2px}.signature-widget-info .title .arrow{min-width:var(--arrow-width);transition:transform .1s ease;margin-top:0;background-color:transparent;border:none;padding:0;display:flex;justify-content:center;align-items:center}.signature-widget-info .title .arrow.expanded{transform:rotate(90deg)}.signature-widget-info .title .arrow .Icon{width:var(--arrow-width);height:var(--arrow-width)}.signature-widget-info .title .arrow.hidden{visibility:hidden;padding:23px}.signature-widget-info .title .arrow:hover .Icon{color:var(--blue-6)}.signature-widget-info .title .arrow.focus-visible,.signature-widget-info .title .arrow:focus-visible{outline:var(--focus-visible-outline)}.signature-widget-info .title .signature-icon{margin-right:5px}.signature-widget-info .title.focus-visible,.signature-widget-info .title:focus-visible{outline:var(--focus-visible-outline)}.signature-widget-info .header{margin-left:32px}.signature-widget-info .header ul{padding-left:24px}.signature-widget-info .header .body>div:first-child>p:first-child,.signature-widget-info .header .body>p:first-child{margin-top:.5em}.signature-widget-info .header .body>div:last-child{margin-bottom:.5em}.signature-widget-info .header-with-arrow{margin-left:0}.signature-widget-info .header-with-arrow ul{margin-left:var(--arrow-width)}.signature-widget-info .header-with-arrow ul li{margin-left:18px}.signature-widget-info .panel-list-label-header Button{font-weight:700;font-size:13px}.signature-widget-info .signatureDetails,.signature-widget-info .verificationDetails{cursor:default;padding:0;background-color:transparent;border:none;text-align:left}",""]),module.exports=exports},"./src/components/SignaturePanel/SignaturePanel.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/SignaturePanel/SignaturePanel.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/SignaturePanel/Spinner/Spinner.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/SignaturePanel/Spinner/Spinner.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/SignaturePanel/WidgetInfo/WidgetInfo.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/SignaturePanel/WidgetInfo/WidgetInfo.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/PanelListItem/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _PanelListItem__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/PanelListItem/PanelListItem.js");const __WEBPACK_DEFAULT_EXPORT__=_PanelListItem__WEBPACK_IMPORTED_MODULE_0__.A;_PanelListItem__WEBPACK_IMPORTED_MODULE_0__.A.__docgenInfo={description:"",methods:[],displayName:"PanelListItem",props:{contentMenuFlyoutOptions:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"shape",value:{shouldHideDeleteButton:{name:"bool",required:!1},currentFlyout:{name:"object",required:!1},flyoutSelector:{name:"string",required:!1},type:{name:"string",required:!1},handleOnClick:{name:"func",required:!1}}},required:!1},contextMenuMoreButtonOptions:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"shape",value:{flyoutToggleElement:{name:"string",required:!1},moreOptionsDataElement:{name:"string",required:!1}}},required:!1},useI18String:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},onDoubleClick:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},onClick:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},checkboxOptions:{description:"",type:{name:"shape",value:{id:{name:"string",required:!1},checked:{name:"bool",required:!1},onChange:{name:"func",required:!1},ariaLabel:{name:"string",required:!1},disabled:{name:"bool",required:!1}}},required:!1},iconGlyph:{description:"",type:{name:"string"},required:!1},labelHeader:{description:"",type:{name:"string"},required:!0},description:{description:"",type:{name:"string"},required:!1},enableMoreOptionsContextMenuFlyout:{description:"",type:{name:"bool"},required:!1},children:{description:"",type:{name:"node"},required:!1},expanded:{description:"",type:{name:"bool"},required:!1},textColor:{description:"",type:{name:"string"},required:!1},setIsExpandedHandler:{description:"",type:{name:"func"},required:!1},isActive:{description:"",type:{name:"bool"},required:!1}}}},"./src/components/SignaturePanel/SignaturePanel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>components_SignaturePanel_SignaturePanel});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),actions=__webpack_require__("./src/redux/actions/index.js"),core=__webpack_require__("./src/core/index.js"),selectors=__webpack_require__("./src/redux/selectors/index.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _instanceof(left,right){return null!=right&&"undefined"!=typeof Symbol&&right[Symbol.hasInstance]?!!right[Symbol.hasInstance](left):left instanceof right}function _to_consumable_array(arr){return function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}(arr)||function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}(arr)||function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function _ts_values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}const setVerificationResult=(_ref=_async_to_generator((function(doc,certificates,trustLists,currentLanguage,revocationChecking,revocationProxyPrefix,dispatch){var verificationResult;return _ts_generator(this,(function(_state){switch(_state.label){case 0:return[4,getVerificationResult(doc,certificates,trustLists,currentLanguage,revocationChecking,revocationProxyPrefix)];case 1:return verificationResult=_state.sent(),dispatch(actions.A.setVerificationResult(verificationResult)),[2,verificationResult]}}))})),function(doc,certificates,trustLists,currentLanguage,revocationChecking,revocationProxyPrefix,dispatch){return _ref.apply(this,arguments)});var _ref,getVerificationResult=function(){var _ref=_async_to_generator((function(doc,certificates,trustLists,currentLanguage,revocationChecking,revocationProxyPrefix){var PDFNet,VerificationResult,TrustStatus,DigestStatus,ModificationPermissionsStatus,DocumentStatus,verificationResults;return _ts_generator(this,(function(_state){switch(_state.label){case 0:return PDFNet=window.Core.PDFNet,VerificationResult=PDFNet.VerificationResult,TrustStatus=VerificationResult.TrustStatus,DigestStatus=VerificationResult.DigestStatus,ModificationPermissionsStatus=VerificationResult.ModificationPermissionsStatus,DocumentStatus=VerificationResult.DocumentStatus,verificationResults={},[4,PDFNet.runWithCleanup(_async_to_generator((function(){var opts,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_loop,_iterator,_step,_iteratorNormalCompletion1,_didIteratorError1,_iteratorError1,_iterator1,_step1,trustList,trustListDataStructure,supportedDataStructures,fdfDocBuffer,fdf,error,err,fieldIterator,field,_tmp,digitalSigField,result,id,signer,signTime,documentPermission,isCertification,contactInfo,location,reason,validAtTimeOfSigning,signerName,issuerField,subjectField,signed,subFilter,retrievedSubjectField,processedSubjectField,_tmp1,verificationStatus,documentStatus,digestStatus,trustStatus,permissionStatus,digestAlgorithm,disallowedChanges,_,validSignerIdentity,trustVerificationResultString,trustVerificationResultBoolean,timeOfTrustVerificationEnum,trustVerificationTime,trustVerificationResult,epochTrustVerificationTime,certPath,firstX509Cert,retrievedIssuerField,processedIssuerField,retrievedSubjectField1,processedSubjectField1,lastX509Cert,notBeforeEpochTime,notAfterEpochTime,dateBugError,badgeIcon,fieldName,e;return _ts_generator(this,(function(_state){switch(_state.label){case 0:return[4,doc.getPDFDoc()];case 1:return doc=_state.sent(),[4,PDFNet.VerificationOptions.create(PDFNet.VerificationOptions.SecurityLevel.e_compatibility_and_archiving)];case 2:return opts=_state.sent(),revocationChecking?[4,opts.enableOnlineCRLRevocationChecking(!0)]:[3,4];case 3:_state.sent(),_state.label=4;case 4:return null!==revocationProxyPrefix?[3,6]:[4,opts.setRevocationProxyPrefix("https://proxy.pdftron.com")];case 5:return _state.sent(),[3,8];case 6:return void 0===revocationProxyPrefix?[3,8]:[4,opts.setRevocationProxyPrefix(revocationProxyPrefix)];case 7:_state.sent(),_state.label=8;case 8:_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_state.label=9;case 9:_state.trys.push([9,14,15,16]),_loop=function(){var certificate,fileReader,arrayBufferPromise,_,error,error1;return _ts_generator(this,(function(_state){switch(_state.label){case 0:if("string"!=typeof(certificate=_step.value))return[3,5];_state.label=1;case 1:return _state.trys.push([1,3,,4]),[4,opts.addTrustedCertificateFromURL(certificate)];case 2:return _state.sent(),[3,4];case 3:return _state.sent(),console.error("Error encountered when trying to load certificate from URL: ".concat(certificate,"\n")+"Certificate will not be used as part of verification process."),[2,"continue"];case 4:return[3,15];case 5:if(!_instanceof(certificate,File)&&"[object File]"!==Object.prototype.toString.call(certificate))return[3,11];fileReader=new FileReader,arrayBufferPromise=new Promise((function(resolve,reject){fileReader.addEventListener("load",function(){var _ref=_async_to_generator((function(e){return _ts_generator(this,(function(_state){return resolve(new Uint8Array(e.target.result)),[2]}))}));return function(e){return _ref.apply(this,arguments)}}()),fileReader.addEventListener("error",(function(){reject("Error reading the local certificate")})),fileReader.readAsArrayBuffer(certificate)})),_state.label=6;case 6:return _state.trys.push([6,9,,10]),_=opts.addTrustedCertificate,[4,arrayBufferPromise];case 7:return[4,_.apply(opts,[_state.sent()])];case 8:return _state.sent(),[3,10];case 9:return error=_state.sent(),console.error("Error encountered when trying to load certificate: ".concat(error)+"Certificate will not be used as part of the verification process."),[2,"continue"];case 10:return[3,15];case 11:if(!(_instanceof(certificate,ArrayBuffer)||_instanceof(certificate,Int8Array)||_instanceof(certificate,Uint8Array)||_instanceof(certificate,Uint8ClampedArray)))return[3,15];_state.label=12;case 12:return _state.trys.push([12,14,,15]),[4,opts.addTrustedCertificate(certificate)];case 13:return _state.sent(),[3,15];case 14:return error1=_state.sent(),console.error("Error encountered when trying to load certificate: ".concat(error1)+"Certificate will not be used as part of the verification process."),[2,"continue"];case 15:return[2]}}))},_iterator=certificates[Symbol.iterator](),_state.label=10;case 10:return(_iteratorNormalCompletion=(_step=_iterator.next()).done)?[3,13]:[5,_ts_values(_loop())];case 11:_state.sent(),_state.label=12;case 12:return _iteratorNormalCompletion=!0,[3,10];case 13:return[3,16];case 14:return err=_state.sent(),_didIteratorError=!0,_iteratorError=err,[3,16];case 15:try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}return[7];case 16:_iteratorNormalCompletion1=!0,_didIteratorError1=!1,_iteratorError1=void 0,_state.label=17;case 17:_state.trys.push([17,27,28,29]),_iterator1=trustLists[Symbol.iterator](),_state.label=18;case 18:return(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done)?[3,26]:(trustList=_step1.value,trustListDataStructure=trustList.constructor.name,supportedDataStructures=["ArrayBuffer","Int8Array","Uint8Array","Uint8ClampedArray"],fdfDocBuffer=void 0,"Blob"!==trustListDataStructure?[3,20]:[4,trustList.arrayBuffer()]);case 19:return fdfDocBuffer=_state.sent(),[3,21];case 20:if(!supportedDataStructures.includes(trustListDataStructure))return console.error("The provided TrustList is an unsupported data-structure. Please ensure the TrustList is formatted as one of the following "+"data-structures: ".concat(_to_consumable_array(supportedDataStructures).concat(["Blob"]).join("|"))),[3,25];fdfDocBuffer=trustList,_state.label=21;case 21:return _state.trys.push([21,24,,25]),[4,PDFNet.FDFDoc.createFromMemoryBuffer(fdfDocBuffer)];case 22:return fdf=_state.sent(),[4,opts.loadTrustList(fdf)];case 23:return _state.sent(),[3,25];case 24:return error=_state.sent(),console.error("Error encountered when trying to load certificate: ".concat(error,". ")+"Certificate will not be used as part of the verification process."),[3,25];case 25:return _iteratorNormalCompletion1=!0,[3,18];case 26:return[3,29];case 27:return err=_state.sent(),_didIteratorError1=!0,_iteratorError1=err,[3,29];case 28:try{_iteratorNormalCompletion1||null==_iterator1.return||_iterator1.return()}finally{if(_didIteratorError1)throw _iteratorError1}return[7];case 29:return[4,doc.getFieldIteratorBegin()];case 30:fieldIterator=_state.sent(),_state.label=31;case 31:return[4,fieldIterator.hasNext()];case 32:return _state.sent()?[4,fieldIterator.current()]:[3,88];case 33:return[4,(field=_state.sent()).isValid()];case 34:return(_tmp=!_state.sent())?[3,36]:[4,field.getType()];case 35:_tmp=_state.sent()!==PDFNet.Field.Type.e_signature,_state.label=36;case 36:return _tmp?[3,87]:[4,PDFNet.DigitalSignatureField.createFromField(field)];case 37:digitalSigField=_state.sent(),_state.label=38;case 38:return _state.trys.push([38,86,,87]),[4,digitalSigField.verify(opts)];case 39:return result=_state.sent(),[4,digitalSigField.getSDFObj()];case 40:return[4,_state.sent().getObjNum()];case 41:return id=_state.sent(),signer=void 0,signTime=void 0,documentPermission=void 0,isCertification=void 0,contactInfo=void 0,location=void 0,reason=void 0,validAtTimeOfSigning=void 0,signerName=void 0,issuerField={},subjectField={},[4,digitalSigField.hasCryptographicSignature()];case 42:return(signed=_state.sent())?[4,digitalSigField.getSubFilter()]:[3,60];case 43:return(subFilter=_state.sent())!==PDFNet.DigitalSignatureField.SubFilterType.e_adbe_pkcs7_detached?[3,47]:[4,digitalSigField.getSignerCertFromCMS()];case 44:return[4,_state.sent().getSubjectField()];case 45:return retrievedSubjectField=_state.sent(),[4,processX501DistinguishedName(retrievedSubjectField)];case 46:processedSubjectField=_state.sent()||{},signer=processedSubjectField.e_commonName,_state.label=47;case 47:return subFilter===PDFNet.DigitalSignatureField.SubFilterType.e_ETSI_RFC3161?[3,57]:signer?[3,51]:[4,digitalSigField.getSignatureName()];case 48:return(_tmp1=_state.sent())?[3,50]:[4,digitalSigField.getContactInfo()];case 49:_tmp1=_state.sent(),_state.label=50;case 50:signer=_tmp1,_state.label=51;case 51:return[4,digitalSigField.getSigningTime()];case 52:return[4,(signTime=_state.sent()).isValid()];case 53:return signTime=_state.sent()?formatPDFNetDate(signTime,currentLanguage):null,[4,digitalSigField.getContactInfo()];case 54:return contactInfo=_state.sent(),[4,digitalSigField.getLocation()];case 55:return location=_state.sent(),[4,digitalSigField.getReason()];case 56:reason=_state.sent(),_state.label=57;case 57:return[4,digitalSigField.getDocumentPermissions()];case 58:return documentPermission=_state.sent(),[4,digitalSigField.isCertification()];case 59:isCertification=_state.sent(),_state.label=60;case 60:return[4,result.getVerificationStatus()];case 61:return verificationStatus=_state.sent(),[4,result.getDocumentStatus()];case 62:return documentStatus=_state.sent(),[4,result.getDigestStatus()];case 63:return digestStatus=_state.sent(),[4,result.getTrustStatus()];case 64:return trustStatus=_state.sent(),[4,result.getPermissionsStatus()];case 65:return permissionStatus=_state.sent(),[4,result.getDigestAlgorithm()];case 66:return digestAlgorithm=_state.sent(),_=Promise.all,[4,result.getDisallowedChanges()];case 67:return[4,_.apply(Promise,[_state.sent().map(function(){var _ref=_async_to_generator((function(change){var _tmp;return _ts_generator(this,(function(_state){switch(_state.label){case 0:return _tmp={},[4,change.getObjNum()];case 1:return _tmp.objnum=_state.sent(),[4,change.getTypeAsString()];case 2:return[2,(_tmp.type=_state.sent(),_tmp)]}}))}));return function(change){return _ref.apply(this,arguments)}}())])];case 68:return disallowedChanges=_state.sent(),validSignerIdentity=trustStatus===TrustStatus.e_trust_verified,trustVerificationResultString=void 0,trustVerificationResultBoolean=void 0,timeOfTrustVerificationEnum=void 0,trustVerificationTime=void 0,[4,result.hasTrustVerificationResult()];case 69:return _state.sent()?[4,result.getTrustVerificationResult()]:[3,84];case 70:return[4,(trustVerificationResult=_state.sent()).wasSuccessful()];case 71:return trustVerificationResultBoolean=_state.sent(),[4,trustVerificationResult.getResultString()];case 72:return trustVerificationResultString=_state.sent(),[4,trustVerificationResult.getTimeOfTrustVerificationEnum()];case 73:return timeOfTrustVerificationEnum=_state.sent(),[4,trustVerificationResult.getTimeOfTrustVerification()];case 74:return(epochTrustVerificationTime=_state.sent())&&(trustVerificationTime=formatDate(epochTrustVerificationTime,currentLanguage)),[4,trustVerificationResult.getCertPath()];case 75:return(certPath=_state.sent()).length?[4,(firstX509Cert=certPath[0]).getIssuerField()]:[3,84];case 76:return retrievedIssuerField=_state.sent(),[4,processX501DistinguishedName(retrievedIssuerField)];case 77:return processedIssuerField=_state.sent(),Object.assign(issuerField,processedIssuerField),[4,firstX509Cert.getSubjectField()];case 78:return retrievedSubjectField1=_state.sent(),[4,processX501DistinguishedName(retrievedSubjectField1)];case 79:processedSubjectField1=_state.sent(),Object.assign(subjectField,processedSubjectField1),lastX509Cert=certPath[certPath.length-1],_state.label=80;case 80:return _state.trys.push([80,83,,84]),[4,lastX509Cert.getNotBeforeEpochTime()];case 81:return notBeforeEpochTime=_state.sent(),[4,lastX509Cert.getNotAfterEpochTime()];case 82:return notAfterEpochTime=_state.sent(),validAtTimeOfSigning=notAfterEpochTime>=epochTrustVerificationTime&&epochTrustVerificationTime>=notBeforeEpochTime,[3,84];case 83:return(dateBugError=_state.sent()).includes("calendar_point::to_std_timepoint() does not support years after")&&(console.warn("The following error is a known issue with Botan, and aims to be addressed in a future release of PDFNet. This currently does not impact PDFTron's Digital Signature Verification capabilities."),console.warn(dateBugError)),[3,84];case 84:return badgeIcon=void 0,badgeIcon=verificationStatus?"digital_signature_valid":documentStatus!==DocumentStatus.e_no_error||digestStatus!==DigestStatus.e_digest_verified&&digestStatus!==DigestStatus.e_digest_verification_disabled||trustStatus===TrustStatus.e_no_trust_status||permissionStatus!==ModificationPermissionsStatus.e_unmodified&&permissionStatus!==ModificationPermissionsStatus.e_has_allowed_changes&&permissionStatus!==ModificationPermissionsStatus.e_permissions_verification_disabled?"digital_signature_error":"digital_signature_warning",signer?signerName=signer:!signer&&subjectField.e_commonName&&(signerName=subjectField.e_commonName),[4,field.getName()];case 85:return fieldName=_state.sent(),verificationResults[fieldName]={signed,signer,signerName,signTime,verificationStatus,documentStatus,digestStatus,trustStatus,permissionStatus,disallowedChanges,trustVerificationResultBoolean,trustVerificationResultString,timeOfTrustVerificationEnum,trustVerificationTime,id,badgeIcon,validSignerIdentity,digestAlgorithm,documentPermission,isCertification,contactInfo,location,reason,issuerField,subjectField,validAtTimeOfSigning},[3,87];case 86:return e=_state.sent(),console.error(e),[3,87];case 87:return fieldIterator.next(),[3,31];case 88:return[2]}}))})))];case 1:return _state.sent(),[2,verificationResults]}}))}));return function getVerificationResult(doc,certificates,trustLists,currentLanguage,revocationChecking,revocationProxyPrefix){return _ref.apply(this,arguments)}}(),formatPDFNetDate=function(date,currentLanguage){var year=date.year,month=date.month,day=date.day,hour=date.hour,minute=date.minute,second=date.second;return new Date(Date.UTC(year,month-1,day,hour,minute,second)).toLocaleDateString(currentLanguage.replace("_","-"),{year:"numeric",month:"long",weekday:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"})},formatDate=function(epochTime,currentLanguage){var date=new Date(0);return date.setUTCSeconds(epochTime),date.toLocaleDateString(currentLanguage.replace("_","-"),{year:"numeric",month:"long",weekday:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"})},processX501DistinguishedName=function(){var _ref=_async_to_generator((function(x501DistinguishedNameObject){var processedObject,allAttributeAndValues,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,x501AttributeTypeAndValue,key,value,err;return _ts_generator(this,(function(_state){switch(_state.label){case 0:return processedObject={},[4,x501DistinguishedNameObject.getAllAttributesAndValues()];case 1:allAttributeAndValues=_state.sent(),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_state.label=2;case 2:_state.trys.push([2,9,10,11]),_iterator=allAttributeAndValues[Symbol.iterator](),_state.label=3;case 3:return(_iteratorNormalCompletion=(_step=_iterator.next()).done)?[3,8]:[4,(x501AttributeTypeAndValue=_step.value).getAttributeTypeOID()];case 4:return[4,_state.sent().getRawValue()];case 5:return key=_state.sent(),[4,x501AttributeTypeAndValue.getStringValue()];case 6:value=_state.sent(),processedObject[translateObjectIdentifierBotanOID(key)]=value,_state.label=7;case 7:return _iteratorNormalCompletion=!0,[3,3];case 8:return[3,11];case 9:return err=_state.sent(),_didIteratorError=!0,_iteratorError=err,[3,11];case 10:try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}return[7];case 11:return[2,processedObject]}}))}));return function processX501DistinguishedName(x501DistinguishedNameObject){return _ref.apply(this,arguments)}}(),translateObjectIdentifierBotanOID=function(objectIdentifierOIDenum){return{"[2,5,4,3]":"e_commonName","[2,5,4,4]":"e_surname","[2,5,4,6]":"e_countryName","[2,5,4,7]":"e_localityName","[2,5,4,8]":"e_stateOrProvinceName","[2,5,4,9]":"e_streetAddress","[2,5,4,10]":"e_organizationName","[2,5,4,11]":"e_organizationalUnitName","[1,2,840,113549,1,9,1]":"e_emailAddress"}["string"==typeof objectIdentifierOIDenum?objectIdentifierOIDenum:JSON.stringify(objectIdentifierOIDenum)]},Spinner=__webpack_require__("./src/components/SignaturePanel/Spinner/index.js"),WidgetInfo=__webpack_require__("./src/components/SignaturePanel/WidgetInfo/index.js"),Icon=(__webpack_require__("./src/components/SignaturePanel/SignaturePanel.scss"),__webpack_require__("./src/components/Icon/index.js")),panel=__webpack_require__("./src/constants/panel.js");function SignaturePanel_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function SignaturePanel_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function SignaturePanel_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){SignaturePanel_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){SignaturePanel_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function SignaturePanel_instanceof(left,right){return null!=right&&"undefined"!=typeof Symbol&&right[Symbol.hasInstance]?!!right[Symbol.hasInstance](left):left instanceof right}function _sliced_to_array(arr,i){return function _array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function _iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||SignaturePanel_unsupported_iterable_to_array(arr,i)||function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SignaturePanel_to_consumable_array(arr){return function SignaturePanel_array_without_holes(arr){if(Array.isArray(arr))return SignaturePanel_array_like_to_array(arr)}(arr)||function SignaturePanel_iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||SignaturePanel_unsupported_iterable_to_array(arr)||function SignaturePanel_non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SignaturePanel_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return SignaturePanel_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SignaturePanel_array_like_to_array(o,minLen):void 0}}function SignaturePanel_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}var SignaturePanel_SignaturePanel=function(){var dispatch=(0,es.wA)(),_useState=_sliced_to_array((0,react.useState)([]),2),fields=_useState[0],setFields=_useState[1],_useState1=_sliced_to_array((0,react.useState)(!1),2),showSpinner=_useState1[0],setShowSpinner=_useState1[1],_useState2=_sliced_to_array((0,react.useState)(""),2),certificateErrorMessage=_useState2[0],setCertificateErrorMessage=_useState2[1],_useState3=_sliced_to_array((0,react.useState)(core.A.getDocument()),2),document=_useState3[0],setDocument=_useState3[1],_useSelector=_sliced_to_array((0,es.d4)((function(state){return[selectors.A.isElementDisabled(state,"signaturePanel"),selectors.A.getCertificates(state),selectors.A.getTrustLists(state),selectors.A.getCurrentLanguage(state),selectors.A.getIsRevocationCheckingEnabled(state),selectors.A.getRevocationProxyPrefix(state)]})),6),isDisabled=_useSelector[0],certificate=_useSelector[1],trustLists=_useSelector[2],currentLanguage=_useSelector[3],revocationChecking=_useSelector[4],revocationProxyPrefix=_useSelector[5],translate=_sliced_to_array((0,useTranslation.B)(),1)[0],onDocumentLoaded=function(){var _ref=SignaturePanel_async_to_generator((function(){return SignaturePanel_ts_generator(this,(function(_state){return setDocument(core.A.getDocument()),[2]}))}));return function onDocumentLoaded(){return _ref.apply(this,arguments)}}(),onDocumentUnloaded=(0,react.useCallback)((function(){setShowSpinner(!0),dispatch(actions.A.setVerificationResult({}))}),[setShowSpinner,dispatch]),onAnnotationChanged=function(annotations,action){var isInFormCreationMode=core.A.getAnnotationManager().getFormFieldCreationManager().isInFormFieldCreationMode();"add"===action?addSignatureWidgetAnnotations(core.A.getAnnotationManager().getAnnotationsList()):"delete"===action&&isInFormCreationMode&&removeAnnotations(annotations)},addNonSignedFields=function(){var currentAnnotations=core.A.getAnnotationManager().getAnnotationsList();addSignatureWidgetAnnotations(currentAnnotations)},addSignatureWidgetAnnotations=function(annotations){var currentFields=[];annotations.forEach((function(annotation){SignaturePanel_instanceof(annotation,window.Core.Annotations.SignatureWidgetAnnotation)&&currentFields.push(annotation.getField())}));var newSet=new Set(currentFields);setFields(SignaturePanel_to_consumable_array(newSet))},removeAnnotations=function(annotations){annotations.forEach((function(annotation){removeMatchingWidget(annotation)})),addNonSignedFields()},removeMatchingWidget=function(annotation){if(SignaturePanel_instanceof(annotation,window.Core.Annotations.WidgetAnnotation)){var annotationManager=core.A.getAnnotationManager(),widgetToDelete=annotationManager.getAnnotationsList().filter((function(annotationToFilter){return annotationToFilter.getCustomData("trn-editing-rectangle-id")===annotation.Id}));annotationManager.deleteAnnotations(widgetToDelete)}},resetFields=function(){setFields([]),addNonSignedFields()};if((0,react.useEffect)((function(){return core.A.addEventListener("documentLoaded",onDocumentLoaded),core.A.addEventListener("documentUnloaded",onDocumentUnloaded),core.A.addEventListener("annotationChanged",onAnnotationChanged),core.A.addEventListener("formFieldCreationModeStarted",resetFields),core.A.addEventListener("formFieldCreationModeEnded",resetFields),function(){core.A.removeEventListener("documentLoaded",onDocumentLoaded),core.A.removeEventListener("documentUnloaded",onDocumentUnloaded),core.A.removeEventListener("annotationChanged",onAnnotationChanged),core.A.removeEventListener("formFieldCreationModeStarted",resetFields),core.A.removeEventListener("formFieldCreationModeEnded",resetFields)}}),[onDocumentUnloaded]),(0,react.useEffect)((function(){document?core.A.getAnnotationsLoadedPromise().then((function(){setShowSpinner(!0),setVerificationResult(document,certificate,trustLists,currentLanguage,revocationChecking,revocationProxyPrefix,dispatch).then(function(){var _ref=SignaturePanel_async_to_generator((function(verificationResult){var fieldManager;return SignaturePanel_ts_generator(this,(function(_state){return fieldManager=core.A.getAnnotationManager().getFieldManager(),setFields(Object.keys(verificationResult).map((function(fieldName){return fieldManager.getField(fieldName)}))),setCertificateErrorMessage(""),[2]}))}));return function(verificationResult){return _ref.apply(this,arguments)}}()).catch((function(e){e&&e.message?setCertificateErrorMessage(e.message):console.error(e)})).then((function(){addNonSignedFields()})).finally((function(){setShowSpinner(!1)}))})):setShowSpinner(!0)}),[certificate,document,dispatch,currentLanguage]),isDisabled)return null;return react.createElement("div",{className:"Panel SignaturePanel","data-element":"signaturePanel"},function(){var result;if(showSpinner)result=react.createElement(Spinner.A,null);else if("Error reading the local certificate"===certificateErrorMessage)result=translate("digitalSignatureVerification.panelMessages.localCertificateError");else if("Download Failed"===certificateErrorMessage)result=translate("digitalSignatureVerification.panelMessages.certificateDownloadError");else{if(fields.length)return null;result=translate("digitalSignatureVerification.panelMessages.noSignatureFields")}return react.createElement("div",{className:"empty-panel-container"},react.createElement(Icon.A,{className:"empty-icon",glyph:panel.P5[panel.BB.SIGNATURE].icon}),react.createElement("div",{className:"empty-message"},result))}(),!showSpinner&&fields.length>0&&fields.map((function(field,index){return react.createElement(WidgetInfo.A,{key:index,name:field.name,collapsible:!0,field})})))};const components_SignaturePanel_SignaturePanel=SignaturePanel_SignaturePanel;SignaturePanel_SignaturePanel.__docgenInfo={description:"",methods:[],displayName:"SignaturePanel"}},"./src/components/SignaturePanel/Spinner/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),Spinner=(__webpack_require__("./src/components/SignaturePanel/Spinner/Spinner.scss"),function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"spinner"})});const __WEBPACK_DEFAULT_EXPORT__=Spinner;Spinner.__docgenInfo={description:"",methods:[],displayName:"Spinner"}},"./src/components/SignaturePanel/WidgetInfo/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>SignaturePanel_WidgetInfo,s:()=>renderPermissionStatus});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),actions=__webpack_require__("./src/redux/actions/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),core=__webpack_require__("./src/core/index.js"),selectors=__webpack_require__("./src/redux/selectors/index.js"),react_dom=__webpack_require__("./node_modules/react-dom/index.js"),getRootNode=__webpack_require__("./src/helpers/getRootNode.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _sliced_to_array(arr,i){return function _array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function _iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}(arr,i)||function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const SignaturePanel_WidgetLocator=function(param){var rect=param.rect,_useState=_sliced_to_array((0,react.useState)(!1),2),show=_useState[0],setShow=_useState[1];return(0,react.useEffect)((function(){var scrollViewContainer=core.A.getScrollViewElement(),handleScroll=function(){setShow(!1)};return scrollViewContainer.addEventListener("scroll",handleScroll),function(){return scrollViewContainer.removeEventListener("scroll",handleScroll)}})),(0,react.useEffect)((function(){rect&&(setTimeout((function(){setShow(!0)}),50),setTimeout((function(){setShow(!1)}),700))}),[rect]),show&&react_dom.createPortal(react.createElement("div",{style:{position:"absolute",top:rect.y1,left:rect.x1,width:rect.x2-rect.x1,height:rect.y2-rect.y1,border:"1px solid #00a5e4",zIndex:99}}),(0,getRootNode.Ay)().querySelector("#app"))};var useFocusHandler=__webpack_require__("./src/hooks/useFocusHandler/index.js"),PanelListItem=__webpack_require__("./src/components/PanelListItem/index.js"),Button=__webpack_require__("./src/components/Button/index.js");__webpack_require__("./src/components/SignaturePanel/WidgetInfo/WidgetInfo.scss");function WidgetInfo_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function WidgetInfo_sliced_to_array(arr,i){return function WidgetInfo_array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function WidgetInfo_iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function WidgetInfo_unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return WidgetInfo_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WidgetInfo_array_like_to_array(o,minLen)}(arr,i)||function WidgetInfo_non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var renderPermissionStatus=function(param){var content,isCertification=param.isCertification,ModificationPermissionsStatus=param.ModificationPermissionsStatus,permissionStatus=param.permissionStatus,translate=param.translate;switch(permissionStatus){case ModificationPermissionsStatus.e_invalidated_by_disallowed_changes:content=translate("digitalSignatureVerification.permissionStatus.invalidatedByDisallowedChanges");break;case ModificationPermissionsStatus.e_has_allowed_changes:content=translate("digitalSignatureVerification.permissionStatus.hasAllowedChanges");break;case ModificationPermissionsStatus.e_unmodified:content="".concat(translate("digitalSignatureVerification.permissionStatus.unmodified")," ").concat(translate(isCertification?"digitalSignatureVerification.certified":"digitalSignatureVerification.signed"),".");break;case ModificationPermissionsStatus.e_permissions_verification_disabled:content=translate("digitalSignatureVerification.permissionStatus.permissionsVerificationDisabled");break;case ModificationPermissionsStatus.e_no_permissions_status:content=translate("digitalSignatureVerification.permissionStatus.noPermissionsStatus")}return react.createElement("p",null,content)},propTypes={name:prop_types_default().string.isRequired,onClick:prop_types_default().func,field:prop_types_default().instanceOf(window.Core.Annotations.Forms.Field)},WidgetInfo_WidgetInfo=function(param){var verificationType,content,name=param.name,field=param.field,verificationResult=(0,es.d4)((function(state){return selectors.A.getVerificationResult(state,name)})),_useState=WidgetInfo_sliced_to_array((0,react.useState)(null),2),locatorRect=_useState[0],setLocatorRect=_useState[1],_useState1=WidgetInfo_sliced_to_array((0,react.useState)(!1),2),signatureDetailsExpanded=_useState1[0],setSignatureDetailsExpanded=_useState1[1],_window_Core_PDFNet=window.Core.PDFNet,VerificationResult=_window_Core_PDFNet.VerificationResult,TimeMode=_window_Core_PDFNet.VerificationOptions.TimeMode,ModificationPermissionsStatus=VerificationResult.ModificationPermissionsStatus,translate=WidgetInfo_sliced_to_array((0,useTranslation.B)(),1)[0],signed=verificationResult.signed,signTime=verificationResult.signTime,verificationStatus=verificationResult.verificationStatus,permissionStatus=verificationResult.permissionStatus,disallowedChanges=verificationResult.disallowedChanges,trustVerificationResultBoolean=verificationResult.trustVerificationResultBoolean,timeOfTrustVerificationEnum=verificationResult.timeOfTrustVerificationEnum,trustVerificationTime=verificationResult.trustVerificationTime,badgeIcon=verificationResult.badgeIcon,isCertification=verificationResult.isCertification,contactInfo=verificationResult.contactInfo,location=verificationResult.location,reason=verificationResult.reason,signerName=verificationResult.signerName,dispatch=(0,es.wA)(),titleInteraction=function(){!function(field){if(field.widgets.length){var widget=field.widgets[0];core.A.jumpToAnnotation(widget);var _core_getScrollViewElement=core.A.getScrollViewElement(),scrollLeft=_core_getScrollViewElement.scrollLeft,scrollTop=_core_getScrollViewElement.scrollTop,rect=widget.getRect(),windowTopLeft=core.A.getDisplayModeObject().pageToWindow({x:rect.x1,y:rect.y1},widget.PageNumber),windowBottomRight=core.A.getDisplayModeObject().pageToWindow({x:rect.x2,y:rect.y2},widget.PageNumber);setLocatorRect({x1:windowTopLeft.x-scrollLeft,y1:windowTopLeft.y-scrollTop,x2:windowBottomRight.x-scrollLeft,y2:windowBottomRight.y-scrollTop})}}(field)},openSignatureModalWithFocus=(0,useFocusHandler.A)((function(){dispatch(actions.A.setSignatureValidationModalWidgetName(name)),dispatch(actions.A.openElement("signatureValidationModal"))}));return react.createElement("div",{className:"signature-widget-info"},signed?react.createElement(react.Fragment,null,react.createElement(PanelListItem.A,{labelHeader:(content=translate(isCertification?"digitalSignatureVerification.Certified":"digitalSignatureVerification.Signed"),content+=" ".concat(translate("digitalSignatureVerification.by")," ").concat(signerName||translate("digitalSignatureModal.unknown")),signTime&&(content+=" ".concat(translate("digitalSignatureVerification.on")," ").concat(signTime)),content),iconGlyph:badgeIcon,useI18String:!1,onClick:titleInteraction,onKeyDown:titleInteraction},react.createElement("div",{className:"verificationDetails",tabIndex:-1},react.createElement("div",{className:"header"},(verificationType=translate(isCertification?"digitalSignatureVerification.Certification":"digitalSignatureVerification.Signature"),react.createElement("div",{className:"title"},react.createElement("p",null,translate(verificationStatus?"digitalSignatureVerification.verificationStatus.valid":"digitalSignatureVerification.verificationStatus.failed",{verificationType})))),react.createElement("ul",{className:"body"},function(){var content;switch(permissionStatus){case ModificationPermissionsStatus.e_invalidated_by_disallowed_changes:content=translate("digitalSignatureVerification.permissionStatus.invalidatedByDisallowedChanges");break;case ModificationPermissionsStatus.e_has_allowed_changes:content=translate("digitalSignatureVerification.permissionStatus.hasAllowedChanges");break;case ModificationPermissionsStatus.e_unmodified:content="".concat(translate("digitalSignatureVerification.permissionStatus.unmodified")," ").concat(translate(isCertification?"digitalSignatureVerification.certified":"digitalSignatureVerification.signed"),".");break;case ModificationPermissionsStatus.e_permissions_verification_disabled:content=translate("digitalSignatureVerification.permissionStatus.permissionsVerificationDisabled");break;case ModificationPermissionsStatus.e_no_permissions_status:content=translate("digitalSignatureVerification.permissionStatus.noPermissionsStatus")}return react.createElement("li",null,react.createElement("p",null,content))}(),disallowedChanges.map((function(param){var objnum=param.objnum,type=param.type;return react.createElement("li",{key:objnum},react.createElement("p",null,translate("digitalSignatureVerification.disallowedChange",{type,objnum})))})),function(){var verificationTimeMessage;switch(timeOfTrustVerificationEnum){case TimeMode.e_current:verificationTimeMessage=translate("digitalSignatureVerification.trustVerification.current");break;case TimeMode.e_signing:verificationTimeMessage=translate("digitalSignatureVerification.trustVerification.signing");break;case TimeMode.e_timestamp:verificationTimeMessage=translate("digitalSignatureVerification.trustVerification.timestamp");break;default:console.warn("Unexpected pdftron::PDF::VerificationOptions::TimeMode: ".concat(timeOfTrustVerificationEnum))}return react.createElement(react.Fragment,null,react.createElement("li",null,react.createElement("p",null,translate(trustVerificationResultBoolean?"digitalSignatureVerification.trustVerification.verifiedTrust":"digitalSignatureVerification.trustVerification.noTrustVerification"))),react.createElement("li",null,react.createElement("p",null,trustVerificationTime)),react.createElement("li",null,react.createElement("p",null,verificationTimeMessage)))}(),react.createElement("li",null,react.createElement("button",{"data-element":"signatureProperties-".concat(name),onClick:openSignatureModalWithFocus,tabIndex:0,className:"signatureProperties link","aria-label":"Open signature properties modal"},react.createElement("p",{className:"bold underline"},translate("digitalSignatureVerification.signatureProperties"))))))),react.createElement("div",{className:"header header-with-arrow"},contactInfo||location||reason?react.createElement("div",{className:"signatureDetails",tabIndex:-1},react.createElement("div",{className:"title collapsible"},react.createElement(Button.A,{img:"icon-chevron-right",className:classnames_default()({arrow:!0,expanded:signatureDetailsExpanded}),role:"button",ariaLabel:translate("action.expand"),isActive:signatureDetailsExpanded,onClick:function(){return setSignatureDetailsExpanded(!signatureDetailsExpanded)}}),react.createElement("p",null,translate("digitalSignatureVerification.signatureDetails.signatureDetails"))),signatureDetailsExpanded&&react.createElement("ul",{className:"body"},react.createElement("li",null,react.createElement("p",{className:"bold"},"".concat(translate("digitalSignatureVerification.signatureDetails.contactInformation"),":")),react.createElement("p",{className:"result-for-header"},contactInfo||translate("digitalSignatureVerification.signatureDetails.noContactInformation"))),react.createElement("li",null,react.createElement("p",{className:"bold"},"".concat(translate("digitalSignatureVerification.signatureDetails.location"),":")),react.createElement("p",{className:"result-for-header"},location||translate("digitalSignatureVerification.signatureDetails.noLocation"))),react.createElement("li",null,react.createElement("p",{className:"bold"},"".concat(translate("digitalSignatureVerification.signatureDetails.reason"),":")),react.createElement("p",{className:"result-for-header"},reason||translate("digitalSignatureVerification.signatureDetails.noReason"))),signTime&&react.createElement("li",null,react.createElement("p",{className:"bold"},"".concat(translate("digitalSignatureVerification.signatureDetails.signingTime"),":")),react.createElement("p",{className:"result-for-header"},signTime||translate("digitalSignatureVerification.signatureDetails.noSigningTime"))))):null))):react.createElement(PanelListItem.A,{labelHeader:translate("digitalSignatureVerification.unsignedSignatureField",{fieldName:field.name}),iconGlyph:"digital_signature_empty",useI18String:!1,onClick:titleInteraction,onKeyDown:titleInteraction}),react.createElement(SignaturePanel_WidgetLocator,{rect:locatorRect}))};WidgetInfo_WidgetInfo.propTypes=propTypes;const SignaturePanel_WidgetInfo_WidgetInfo=WidgetInfo_WidgetInfo;renderPermissionStatus.__docgenInfo={description:"",methods:[],displayName:"renderPermissionStatus"},WidgetInfo_WidgetInfo.__docgenInfo={description:"",methods:[],displayName:"WidgetInfo",props:{name:{description:"",type:{name:"string"},required:!0},onClick:{description:"",type:{name:"func"},required:!1},field:{description:"",type:{name:"instanceOf",value:"window.Core.Annotations.Forms.Field"},required:!1}}};const SignaturePanel_WidgetInfo=SignaturePanel_WidgetInfo_WidgetInfo;SignaturePanel_WidgetInfo_WidgetInfo.__docgenInfo={description:"",methods:[],displayName:"WidgetInfo",props:{name:{description:"",type:{name:"string"},required:!0},onClick:{description:"",type:{name:"func"},required:!1},field:{description:"",type:{name:"instanceOf",value:"window.Core.Annotations.Forms.Field"},required:!1}}},renderPermissionStatus.__docgenInfo={description:"",methods:[],displayName:"renderPermissionStatus"}}}]);