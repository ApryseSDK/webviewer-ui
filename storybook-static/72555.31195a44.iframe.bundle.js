(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[72555],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/Outline/Outline.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,':host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.outline-drag-container{border-radius:4px}.outline-drag-container.isNesting>.bookmark-outline-single-container{background-color:var(--popup-button-active);border-color:var(--focus-border)}.outline-treeview-toggle{flex-grow:0;flex-shrink:0;margin-inline-end:var(--padding-small);margin-top:2px;margin-bottom:2px;min-width:14px;transition:transform .1s ease}.outline-treeview-toggle.expanded{transform:rotate(90deg)}.outline-treeview-toggle .Button{width:auto;height:auto}.outline-treeview-toggle .Button .Icon{width:16px;height:16px}.outline-drag-line{margin-inline-start:var(--padding);margin-inline-end:var(--padding);border-top:1px solid var(--focus-border);position:relative}.outline-drag-line:before{content:"";display:block;position:absolute;width:5px;height:5px;inset-block-start:-3px;inset-inline-start:0;background-color:var(--focus-border);border-radius:50%}',""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/OutlinesPanel/OutlinesPanel.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .OutlinesPanel{margin:16px;padding:0;overflow-y:auto}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .OutlinesPanel{margin:16px;padding:0;overflow-y:auto}}.OutlinesPanel .bookmark-outline-single-container:not(.editing){height:-moz-fit-content;height:fit-content}.OutlinesPanel .bookmark-outline-row{padding-top:6px}.OutlinesPanel .msg-no-bookmark-outline{margin-top:6px}.OutlinesPanel .spinner{align-self:center}.OutlinesPanel.modular-ui-panel .bookmark-outline-single-container .panel-list-label-header .Button{width:-moz-fit-content;width:fit-content;height:100%;padding:0 8px;justify-content:start}.OutlinesPanel.modular-ui-panel .bookmark-outline-single-container .panel-list-label-header .Button:hover{cursor:pointer;border:none;border-radius:4px;box-shadow:inset 0 0 0 1px var(--blue-6);color:var(--blue-6);background-color:var(--faded-component-background)}.OutlinesPanel.modular-ui-panel .bookmark-outline-single-container .panel-list-label-header .Button:focus{border-radius:4px;box-shadow:inset 0 0 0 1px var(--blue-6);color:var(--blue-6);background-color:var(--faded-component-background)}.OutlinesPanel.modular-ui-panel .bookmark-outline-single-container .bookmark-outline-more-button.active{display:flex}.OutlinesPanel.modular-ui-panel .bookmark-outline-single-container .bookmark-outline-more-button.active .Icon{color:var(--blue-5)}.OutlinesPanel.modular-ui-panel .bookmark-outline-single-container.default.hover:not(.selected),.OutlinesPanel.modular-ui-panel .bookmark-outline-single-container.default:hover:not(.selected){background:none}.OutlinesPanel.modular-ui-panel .bookmark-outline-single-container.focus-visible,.OutlinesPanel.modular-ui-panel .bookmark-outline-single-container:focus-visible{outline:var(--focus-visible-outline)!important}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .OutlinesPanel.modular-ui-panel .bookmark-outline-single-container .bookmark-outline-input{font-size:13px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .OutlinesPanel.modular-ui-panel .bookmark-outline-single-container .bookmark-outline-input{font-size:13px}}.OutlinesPanel.modular-ui-panel .bookmark-outline-single-container .bookmark-outline-input:active{border-color:var(--focus-border)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .OutlinesPanel .bookmark-outline-cancel-button,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .OutlinesPanel .bookmark-outline-control-button,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .OutlinesPanel .bookmark-outline-save-button{font-size:13px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .OutlinesPanel .bookmark-outline-cancel-button,.App.is-web-component:not(.is-in-desktop-only-mode) .OutlinesPanel .bookmark-outline-control-button,.App.is-web-component:not(.is-in-desktop-only-mode) .OutlinesPanel .bookmark-outline-save-button{font-size:13px}}.Panel.OutlinesPanel{overflow:auto;-webkit-overflow-scrolling:touch;flex:1;flex-direction:column}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./src/components/Outline/Outline.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),prop_types__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_17__),react_redux__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-redux/es/index.js"),react_dnd__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/react-dnd/dist/esm/decorators/DropTarget.js"),react_dnd__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./node_modules/react-dnd/dist/esm/decorators/DragSource.js"),react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/react-dnd-html5-backend/dist/esm/getEmptyImage.js"),constants_dnd__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/constants/dnd.js"),core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/core/index.js"),actions__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/redux/actions/index.js"),selectors__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/redux/selectors/index.js"),constants_events__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/constants/events.js"),helpers_fireEvent__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/helpers/fireEvent.js"),helpers_OutlineUtils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/helpers/OutlineUtils.js"),helpers_device__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/helpers/device.js"),_Context__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/components/Outline/Context.js"),src_components_OutlineContent__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/components/OutlineContent/index.js"),_DataElementWrapper__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/components/DataElementWrapper/index.js");__webpack_require__("./src/components/Outline/Outline.scss"),__webpack_require__("./src/constants/bookmarksOutlinesShared.scss");const propTypes={outline:prop_types__WEBPACK_IMPORTED_MODULE_17___default().object.isRequired,setMultiSelected:prop_types__WEBPACK_IMPORTED_MODULE_17___default().func,moveOutlineInward:prop_types__WEBPACK_IMPORTED_MODULE_17___default().func.isRequired,moveOutlineBeforeTarget:prop_types__WEBPACK_IMPORTED_MODULE_17___default().func.isRequired,moveOutlineAfterTarget:prop_types__WEBPACK_IMPORTED_MODULE_17___default().func.isRequired,connectDragSource:prop_types__WEBPACK_IMPORTED_MODULE_17___default().func,connectDragPreview:prop_types__WEBPACK_IMPORTED_MODULE_17___default().func,connectDropTarget:prop_types__WEBPACK_IMPORTED_MODULE_17___default().func,isDragging:prop_types__WEBPACK_IMPORTED_MODULE_17___default().bool,isDraggedUpwards:prop_types__WEBPACK_IMPORTED_MODULE_17___default().bool,isDraggedDownwards:prop_types__WEBPACK_IMPORTED_MODULE_17___default().bool},Outline=(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((function Outline({outline,setMultiSelected,isDragging,isDraggedUpwards,isDraggedDownwards,connectDragSource,connectDragPreview,connectDropTarget,moveOutlineInward,moveOutlineBeforeTarget,moveOutlineAfterTarget},ref){const outlines=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.d4)((state=>selectors__WEBPACK_IMPORTED_MODULE_7__.A.getOutlines(state))),{setActiveOutlinePath,activeOutlinePath,isOutlineActive,setAddingNewOutline,isAddingNewOutline,isMultiSelectMode,shouldAutoExpandOutlines,isOutlineEditable,updateOutlines}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_Context__WEBPACK_IMPORTED_MODULE_12__.A),outlinePath=helpers_OutlineUtils__WEBPACK_IMPORTED_MODULE_10__.A.getPath(outline),[isExpanded,setIsExpanded]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(shouldAutoExpandOutlines),[isRenaming,setIsRenaming]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[isChangingDest,setChangingDest]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[clearSingleClick,setClearSingleClick]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(void 0),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.wA)(),elementRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);connectDragSource(elementRef),connectDragPreview((0,react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_18__.n)(),{captureDraggingState:!0}),connectDropTarget(elementRef);const opacity=isDragging?.5:1;(0,react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle)(ref,(()=>({getNode:()=>elementRef.current}))),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{null!==activeOutlinePath&&activeOutlinePath!==outlinePath&&activeOutlinePath.startsWith(outlinePath)&&setIsExpanded(!0)}),[activeOutlinePath,isAddingNewOutline,outline]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)((()=>{setIsExpanded(shouldAutoExpandOutlines)}),[shouldAutoExpandOutlines]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)((()=>{setIsRenaming(!1),setChangingDest(!1),isAddingNewOutline&&activeOutlinePath===outlinePath&&setIsExpanded(!0)}),[outlines]);const onSingleClick=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((()=>{core__WEBPACK_IMPORTED_MODULE_5__.A.goToOutline(outline),setActiveOutlinePath(outlinePath===activeOutlinePath?null:outlinePath),isAddingNewOutline&&(setAddingNewOutline(!1),updateOutlines()),(0,helpers_device__WEBPACK_IMPORTED_MODULE_11__.Fr)()&&dispatch(actions__WEBPACK_IMPORTED_MODULE_6__.A.closeElement("leftPanel"))}),[dispatch,setActiveOutlinePath,activeOutlinePath,isAddingNewOutline,outline]),isActive=isOutlineActive(outline);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{ref:!isAddingNewOutline&&isMultiSelectMode&&isOutlineEditable?elementRef:null,className:"outline-drag-container",style:{opacity},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"outline-drag-line",style:{opacity:isDraggedUpwards?1:0}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_DataElementWrapper__WEBPACK_IMPORTED_MODULE_14__.A,{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()({"bookmark-outline-single-container":!0,editing:isRenaming||isChangingDest,default:!isRenaming&&!isChangingDest,selected:isActive}),tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&onSingleClick(),e.stopPropagation()},onClick:e=>{e.stopPropagation(),isRenaming||isChangingDest||1!==e.detail||setClearSingleClick(setTimeout(onSingleClick,300))},onDoubleClick:()=>{isRenaming||isChangingDest||clearTimeout(clearSingleClick)},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(src_components_OutlineContent__WEBPACK_IMPORTED_MODULE_13__.A,{text:outline.getName(),outlinePath,isOutlineRenaming:isRenaming,setOutlineRenaming:setIsRenaming,isOutlineChangingDest:isChangingDest,setOutlineChangingDest:setChangingDest,textColor:outline.color?(rgbObject=outline.color,`rgb(${255*rgbObject.r}, ${255*rgbObject.g}, ${255*rgbObject.b})`):null,setMultiSelected,isExpanded,setIsExpanded,moveOutlineInward,moveOutlineBeforeTarget,moveOutlineAfterTarget,children:outline.getChildren()})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"outline-drag-line",style:{opacity:isDraggedDownwards?1:0}}),isAddingNewOutline&&isActive&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_DataElementWrapper__WEBPACK_IMPORTED_MODULE_14__.A,{className:"bookmark-outline-single-container editing",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"outline-treeview-toggle",style:{marginLeft:12*helpers_OutlineUtils__WEBPACK_IMPORTED_MODULE_10__.A.getNestedLevel(outline)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(src_components_OutlineContent__WEBPACK_IMPORTED_MODULE_13__.A,{isAdding:!0,text:"",onCancel:()=>setAddingNewOutline(!1)})]})]});var rgbObject}));Outline.propTypes=propTypes;const OutlineNested=(0,react_dnd__WEBPACK_IMPORTED_MODULE_19__.T)(constants_dnd__WEBPACK_IMPORTED_MODULE_4__.ll.OUTLINE,{hover(props,dropTargetMonitor,dropTargetContainer){if(!dropTargetContainer)return;const dragObject=dropTargetMonitor.getItem();if(!dragObject)return;const{dragOutline,dragSourceNode}=dragObject,{outline:dropOutline}=props,dropTargetNode=dropTargetContainer.getNode();if(!dragSourceNode||!dropTargetNode)return;if(dragSourceNode.contains(dropTargetNode))return dragObject.dropTargetNode=void 0,void(dragObject.dropLocation=constants_dnd__WEBPACK_IMPORTED_MODULE_4__.V7.INITIAL);dragObject.dropTargetNode=dropTargetNode;const dragIndex=dragOutline.index,hoverIndex=dropOutline.index;if(dragOutline.parent===dropOutline.parent&&dragIndex===hoverIndex)return;const dropTargetBoundingRect=dropTargetNode.getBoundingClientRect(),dropTargetVerticalMiddlePoint=(dropTargetBoundingRect.bottom-dropTargetBoundingRect.top)/2,dropTargetClientY=dropTargetMonitor.getClientOffset().y-dropTargetBoundingRect.top;switch(!0){case dropTargetClientY<=dropTargetVerticalMiddlePoint+constants_dnd__WEBPACK_IMPORTED_MODULE_4__.n0&&dropTargetClientY>=dropTargetVerticalMiddlePoint-constants_dnd__WEBPACK_IMPORTED_MODULE_4__.n0:dragObject.dropLocation=constants_dnd__WEBPACK_IMPORTED_MODULE_4__.V7.ON_TARGET_HORIZONTAL_MIDPOINT,dropTargetMonitor.isOver({shallow:!0})&&dropTargetNode.classList.add("isNesting"),setTimeout((()=>{dragObject?.dropTargetNode!==dropTargetNode&&dropTargetNode.classList.remove("isNesting")}),100);break;case dropTargetClientY>dropTargetVerticalMiddlePoint+constants_dnd__WEBPACK_IMPORTED_MODULE_4__.n0:dragObject.dropLocation=constants_dnd__WEBPACK_IMPORTED_MODULE_4__.V7.BELOW_TARGET,dropTargetNode.classList.remove("isNesting");break;case dropTargetClientY<dropTargetVerticalMiddlePoint-constants_dnd__WEBPACK_IMPORTED_MODULE_4__.n0:dragObject.dropLocation=constants_dnd__WEBPACK_IMPORTED_MODULE_4__.V7.ABOVE_TARGET,dropTargetNode.classList.remove("isNesting");break;default:dragObject.dropLocation=constants_dnd__WEBPACK_IMPORTED_MODULE_4__.V7.INITIAL,dropTargetNode.classList.remove("isNesting")}(0,helpers_fireEvent__WEBPACK_IMPORTED_MODULE_9__.A)(constants_events__WEBPACK_IMPORTED_MODULE_8__.A.DRAG_OUTLINE,{targetOutline:dropOutline,draggedOutline:dragObject.dragOutline,dropLocation:dragObject.dropLocation})},drop(props,dropTargetMonitor,dropTargetContainer){if(!dropTargetContainer)return;const dragObject=dropTargetMonitor.getItem(),{dragOutline,dropTargetNode}=dragObject,{outline:dropOutline,moveOutlineInward,moveOutlineBeforeTarget,moveOutlineAfterTarget}=props;if(dropTargetNode){switch(dragObject.dropLocation){case constants_dnd__WEBPACK_IMPORTED_MODULE_4__.V7.ON_TARGET_HORIZONTAL_MIDPOINT:moveOutlineInward(dragOutline,dropOutline);break;case constants_dnd__WEBPACK_IMPORTED_MODULE_4__.V7.ABOVE_TARGET:moveOutlineBeforeTarget(dragOutline,dropOutline);break;case constants_dnd__WEBPACK_IMPORTED_MODULE_4__.V7.BELOW_TARGET:moveOutlineAfterTarget(dragOutline,dropOutline)}dropTargetNode.classList.remove("isNesting"),(0,helpers_fireEvent__WEBPACK_IMPORTED_MODULE_9__.A)(constants_events__WEBPACK_IMPORTED_MODULE_8__.A.DROP_OUTLINE,{targetOutline:dropOutline,draggedOutline:dragOutline,dropLocation:dragObject.dropLocation}),dragObject.dropLocation=constants_dnd__WEBPACK_IMPORTED_MODULE_4__.V7.INITIAL}}},((connect,dropTargetState)=>({connectDropTarget:connect.dropTarget(),isDraggedUpwards:dropTargetState.isOver({shallow:!0})&&dropTargetState.getItem()?.dropLocation===constants_dnd__WEBPACK_IMPORTED_MODULE_4__.V7.ABOVE_TARGET,isDraggedDownwards:dropTargetState.isOver({shallow:!0})&&dropTargetState.getItem()?.dropLocation===constants_dnd__WEBPACK_IMPORTED_MODULE_4__.V7.BELOW_TARGET})))((0,react_dnd__WEBPACK_IMPORTED_MODULE_20__.I)(constants_dnd__WEBPACK_IMPORTED_MODULE_4__.ll.OUTLINE,{beginDrag:(props,dragSourceMonitor,dragSourceContainer)=>({sourceId:dragSourceMonitor.sourceId,dragOutline:props.outline,dragSourceNode:dragSourceContainer.getNode(),dropLocation:constants_dnd__WEBPACK_IMPORTED_MODULE_4__.V7.INITIAL}),canDrag:()=>helpers_device__WEBPACK_IMPORTED_MODULE_11__.lT?(console.warn("Drag and drop outlines for IE11 is not supported"),!1):!!core__WEBPACK_IMPORTED_MODULE_5__.A.isFullPDFEnabled()||(console.warn("Full API must be enabled to drag and drop outlines"),!1)},((connect,dragSourceState)=>({connectDragSource:connect.dragSource(),connectDragPreview:connect.dragPreview(),isDragging:dragSourceState.isDragging()})))(Outline));OutlineNested.propTypes=propTypes;const __WEBPACK_DEFAULT_EXPORT__=OutlineNested;Outline.__docgenInfo={description:"",methods:[{name:"getNode",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Outline",props:{outline:{description:"",type:{name:"object"},required:!0},setMultiSelected:{description:"",type:{name:"func"},required:!1},moveOutlineInward:{description:"",type:{name:"func"},required:!0},moveOutlineBeforeTarget:{description:"",type:{name:"func"},required:!0},moveOutlineAfterTarget:{description:"",type:{name:"func"},required:!0},connectDragSource:{description:"",type:{name:"func"},required:!1},connectDragPreview:{description:"",type:{name:"func"},required:!1},connectDropTarget:{description:"",type:{name:"func"},required:!1},isDragging:{description:"",type:{name:"bool"},required:!1},isDraggedUpwards:{description:"",type:{name:"bool"},required:!1},isDraggedDownwards:{description:"",type:{name:"bool"},required:!1}}}},"./src/components/Outline/Outline.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/Outline/Outline.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/Outline/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("./src/components/Outline/Outline.js").A},"./src/components/OutlineContent/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("./src/components/OutlineContent/OutlineContent.js").A},"./src/components/OutlinesPanel/OutlinesPanel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>components_OutlinesPanel_OutlinesPanel});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),DndProvider=__webpack_require__("./node_modules/react-dnd/dist/esm/core/DndProvider.js"),device=__webpack_require__("./src/helpers/device.js"),esm=__webpack_require__("./node_modules/react-dnd-html5-backend/dist/esm/index.js"),dist_esm=__webpack_require__("./node_modules/react-dnd-touch-backend/dist/esm/index.js"),Outline=__webpack_require__("./src/components/Outline/index.js"),Context=__webpack_require__("./src/components/Outline/Context.js"),Button=__webpack_require__("./src/components/Button/index.js"),TextButton=__webpack_require__("./src/components/TextButton/index.js"),OutlineContent=__webpack_require__("./src/components/OutlineContent/index.js"),DataElementWrapper=__webpack_require__("./src/components/DataElementWrapper/index.js"),core=__webpack_require__("./src/core/index.js"),OutlineUtils=__webpack_require__("./src/helpers/OutlineUtils.js"),accessibility=__webpack_require__("./src/helpers/accessibility.js"),dataElement=__webpack_require__("./src/constants/dataElement.js"),defaultTool=__webpack_require__("./src/constants/defaultTool.js"),types=__webpack_require__("./src/constants/types.js"),getType=__webpack_require__("./src/core/getType.js"),actions=__webpack_require__("./src/redux/actions/index.js"),selectors=__webpack_require__("./src/redux/selectors/index.js"),useDragLayer=(__webpack_require__("./src/constants/bookmarksOutlinesShared.scss"),__webpack_require__("./src/components/OutlinesPanel/OutlinesPanel.scss"),__webpack_require__("./node_modules/react-dnd/dist/esm/hooks/useDragLayer.js")),dnd=__webpack_require__("./src/constants/dnd.js");const layerStyles={position:"fixed",pointerEvents:"none",zIndex:99999,left:0,top:0,width:"100%",height:"100%"},getItemStyles=(initialOffset,currentOffset)=>{if(!initialOffset||!currentOffset)return{display:"none"};const{x,y}=currentOffset,transform=`translate(calc(${x}px - 50%), calc(${y}px - 100%))`;return{transform,WebkitTransform:transform}},OutlinesDragLayer=()=>{const{itemType,item,isDragging,initialOffset,currentOffset}=(0,useDragLayer.V)((dragLayerState=>({itemType:dragLayerState.getItemType(),item:dragLayerState.getItem(),isDragging:dragLayerState.isDragging(),initialOffset:dragLayerState.getInitialSourceClientOffset(),currentOffset:dragLayerState.getClientOffset()})));return isDragging?(0,jsx_runtime.jsx)("div",{style:layerStyles,children:(0,jsx_runtime.jsx)("div",{className:"bookmark-outline-single-container preview",style:getItemStyles(initialOffset,currentOffset),children:(()=>{if(!item)return null;const{dragOutline}=item;return itemType===dnd.ll.OUTLINE?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:dragOutline.getName()}):null})()})}):null};OutlinesDragLayer.__docgenInfo={description:"",methods:[],displayName:"OutlinesDragLayer"};var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),index_m=__webpack_require__("./node_modules/react-virtuoso/dist/index.m.js"),Spinner=__webpack_require__("./src/components/Spinner/index.js"),useDocumentLoadState=__webpack_require__("./src/hooks/useDocumentLoadState.js");const OutlinesPanel_OutlinesPanel=({isTest=!1})=>{const[isDisabled,outlines,outlineEditingEnabled,shouldAutoExpandOutlines,currentPage,pageLabels,featureFlags]=(0,es.d4)((state=>[selectors.A.isElementDisabled(state,dataElement.A.OUTLINE_PANEL),selectors.A.getOutlines(state),selectors.A.getOutlineEditingEnabled(state),selectors.A.shouldAutoExpandOutlines(state),selectors.A.getCurrentPage(state),selectors.A.getPageLabels(state),selectors.A.getFeatureFlags(state)]),es.bN),defaultDestText="Full Page",areaDestinationText="Area Selection",defaultDestCoord={x:0,y:0},outlinesNotLoaded=null===outlines,documentLoaded=(0,useDocumentLoadState.A)(),[currentDestText,setCurrentDestText]=(0,react.useState)(defaultDestText),[currentDestCoord,setCurrentDestCoord]=(0,react.useState)(defaultDestCoord),[currentDestPage,setCurrentDestPage]=(0,react.useState)(currentPage),[isOutlineEditable,setOutlineEditable]=(0,react.useState)(!1),[activeOutlinePath,setActiveOutlinePath]=(0,react.useState)(null),[isAddingNewOutline,setAddingNewOutline]=(0,react.useState)(!1),[editingOutlines,setEditingOutlines]=(0,react.useState)({}),[isAnyOutlineRenaming,setAnyOutlineRenaming]=(0,react.useState)(!1),[isMultiSelectMode,setMultiSelectMode]=(0,react.useState)(!1),[selectedOutlines,setSelectedOutlines]=(0,react.useState)([]),customizableUI=featureFlags.customizableUI,[t]=(0,useTranslation.B)(),dispatch=(0,es.wA)(),nextPathRef=(0,react.useRef)(null),TOOL_NAME="OutlineDestinationCreateTool",tool=core.A.getTool(TOOL_NAME),panelRef=(0,react.useRef)();(0,react.useEffect)((()=>{outlinesNotLoaded&&documentLoaded&&core.A.getOutlines((outlines=>{dispatch(actions.A.setOutlines(outlines))}))}),[outlinesNotLoaded,documentLoaded]),(0,react.useLayoutEffect)((()=>{setAddingNewOutline(!1),null!==nextPathRef.current&&(setActiveOutlinePath(nextPathRef.current),nextPathRef.current=null);(!outlines||0===outlines.length)&&setMultiSelectMode(!1)}),[outlines]),(0,react.useEffect)((()=>{const workerType=(0,getType.A)(),isSupportedType=workerType===types._.PDF||workerType===types._.IMAGE,evaluateOutlineEditable=()=>core.A.isFullPDFEnabled()&&isSupportedType&&outlineEditingEnabled;setOutlineEditable(evaluateOutlineEditable());const onDocumentLoaded=()=>{setOutlineEditable(evaluateOutlineEditable())};return core.A.addEventListener("documentLoaded",onDocumentLoaded),()=>core.A.removeEventListener("documentLoaded",onDocumentLoaded)}),[outlineEditingEnabled]),(0,react.useEffect)((()=>{const isAnyEditing=Object.values(editingOutlines).some((value=>value));setAnyOutlineRenaming(isAnyEditing)}),[editingOutlines,outlines]),(0,react.useEffect)((()=>{const onSetDestination=annotation=>{setCurrentDestText(annotation.IsText?annotation.getCustomData("trn-annot-preview"):areaDestinationText),setCurrentDestCoord({x:annotation.X,y:annotation.Y}),setCurrentDestPage(annotation.PageNumber)},onOutlinesBookmarksChanged=()=>{core.A.getOutlines((outlines=>{dispatch(actions.A.setOutlines(outlines))}))},onDocumentLoaded=()=>{setActiveOutlinePath(null)};return core.A.addEventListener("outlineSetDestination",onSetDestination),window.addEventListener("outlineBookmarksChanged",onOutlinesBookmarksChanged),core.A.addEventListener("documentLoaded",onDocumentLoaded),()=>{core.A.removeEventListener("outlineSetDestination",onSetDestination),window.removeEventListener("outlineBookmarksChanged",onOutlinesBookmarksChanged),core.A.removeEventListener("documentLoaded",onDocumentLoaded)}}),[]),(0,react.useEffect)((()=>{const handlePanelClick=event=>{event.target.classList.contains("bookmark-outline-row")&&(setActiveOutlinePath(null),setSelectedOutlines([]))};return panelRef.current&&panelRef.current.addEventListener("click",handlePanelClick),()=>{panelRef.current&&panelRef.current.removeEventListener("click",handlePanelClick)}}),[]);const getCurrentDestViewerCoord=(pageNum,{x,y})=>core.A.getDocumentViewer().getDocument().getViewerCoordinates(pageNum,x,y),updateOutlines=()=>{(0,accessibility.CN)(),core.A.getOutlines((outlines=>{dispatch(actions.A.setOutlines(outlines))})),clearOutlineDestination(),setEditingOutlines({})},getPath=outline=>OutlineUtils.A.getPath(outline),clearOutlineDestination=()=>{core.A.setToolMode(defaultTool.A),setCurrentDestText(defaultDestText),setCurrentDestCoord(defaultDestCoord),setCurrentDestPage(currentPage),tool.clearOutlineDestination()};(0,react.useEffect)((()=>{currentDestText===defaultDestText&&setCurrentDestPage(currentPage)}),[currentDestText,currentPage]),(0,react.useEffect)((()=>{isAddingNewOutline?core.A.setToolMode(TOOL_NAME):clearOutlineDestination()}),[isAddingNewOutline]);const generalMoveOutlineAction=(dragOutline,dropOutline,moveDirection)=>{const dragPath=getPath(dragOutline),dropPath=getPath(dropOutline);setSelectedOutlines([]),moveDirection.call(OutlineUtils.A,dragPath,dropPath).then((path=>{updateOutlines(),nextPathRef.current=path})),core.A.goToOutline(dragOutline)},moveOutlineAfterTarget=(dragOutline,dropOutline)=>{generalMoveOutlineAction(dragOutline,dropOutline,OutlineUtils.A.moveOutlineAfterTarget)},moveOutlineBeforeTarget=(dragOutline,dropOutline)=>{generalMoveOutlineAction(dragOutline,dropOutline,OutlineUtils.A.moveOutlineBeforeTarget)},moveOutlineInward=(dragOutline,dropOutline)=>{generalMoveOutlineAction(dragOutline,dropOutline,OutlineUtils.A.moveOutlineInTarget)},removeOutlines=async outlinesToRemove=>{outlinesToRemove.sort().reverse();const confirmationWarning={message:t("warning.deleteOutline.message"),title:t("warning.deleteOutline.title"),confirmBtnText:t("action.delete"),onConfirm:async()=>{for(let i=0;i<outlinesToRemove.length;i++){const fullIndex=outlinesToRemove[i];await OutlineUtils.A.deleteOutline(fullIndex)}updateOutlines(),setActiveOutlinePath(null),setSelectedOutlines([])}};dispatch(actions.A.showWarningMessage(confirmationWarning))};return isDisabled?null:(0,jsx_runtime.jsxs)("div",{className:classnames_default()("Panel OutlinesPanel bookmark-outline-panel",{"modular-ui-panel":customizableUI}),"data-element":dataElement.A.OUTLINE_PANEL,ref:panelRef,children:[(0,jsx_runtime.jsxs)("div",{className:"bookmark-outline-panel-header",children:[(0,jsx_runtime.jsx)("h2",{className:"header-title",children:t("component.outlinesPanel")}),isOutlineEditable&&(isMultiSelectMode?(0,jsx_runtime.jsx)(TextButton.A,{className:"bookmark-outline-control-button",dataElement:dataElement.A.OUTLINE_MULTI_SELECT,label:t("option.bookmarkOutlineControls.done"),disabled:isAddingNewOutline,onClick:()=>setMultiSelectMode(!1),ariaLabel:`${t("option.bookmarkOutlineControls.done")} ${t("action.edit")}`}):(0,jsx_runtime.jsx)(TextButton.A,{className:"bookmark-outline-control-button",dataElement:dataElement.A.OUTLINE_MULTI_SELECT,label:t("option.bookmarkOutlineControls.edit"),disabled:isAddingNewOutline||outlinesNotLoaded||0===outlines.length,onClick:()=>{setMultiSelectMode(!0),setSelectedOutlines([])},ariaLabel:`${t("action.edit")} ${t("component.outlinesPanel")}`}))]}),outlinesNotLoaded&&documentLoaded?(0,jsx_runtime.jsx)(Spinner.A,{inPanel:!0,width:"40px",height:"40px"}):(0,jsx_runtime.jsxs)(Context.A.Provider,{value:{currentDestPage:pageLabels[currentDestPage-1],currentDestText,setActiveOutlinePath,activeOutlinePath,isOutlineActive:outline=>getPath(outline)===activeOutlinePath,setAddingNewOutline,isAddingNewOutline,setEditingOutlines,editingOutlines,selectedOutlines,isAnyOutlineRenaming,isMultiSelectMode,shouldAutoExpandOutlines,isOutlineEditable,addNewOutline:async name=>{let{x,y}=getCurrentDestViewerCoord(currentDestPage,currentDestCoord),outlineName=name;[defaultDestText,areaDestinationText].includes(currentDestText)||name?name||(outlineName=t("message.untitled")):outlineName=currentDestText.slice(0,40);const pageRotation=core.A.getDocumentViewer().getDocument().getPageRotation(currentDestPage)/90;if(pageRotation===window.Core.PageRotation.E_90||pageRotation===window.Core.PageRotation.E_270){const tmp=x;x=y,y=tmp}0===outlines.length?await OutlineUtils.A.addRootOutline(outlineName,currentDestPage,x,y,0):await OutlineUtils.A.addNewOutline(outlineName,activeOutlinePath,currentDestPage,x,y,0),updateOutlines()},updateOutlines,renameOutline:async(outlinePath,newName)=>{await OutlineUtils.A.setOutlineName(outlinePath,newName),updateOutlines()},updateOutlineDest:async outlinePath=>{let{x,y}=getCurrentDestViewerCoord(currentDestPage,currentDestCoord);const pageRotation=core.A.getDocumentViewer().getDocument().getPageRotation(currentDestPage)/90;if(pageRotation===window.Core.PageRotation.E_90||pageRotation===window.Core.PageRotation.E_270){const tmp=x;x=y,y=tmp}await OutlineUtils.A.setOutlineDestination(outlinePath,currentDestPage,x,y,0),nextPathRef.current=outlinePath,updateOutlines()},removeOutlines},children:[(0,jsx_runtime.jsxs)(DndProvider.Q,{backend:device.Xb?dist_esm.A:esm.t2,children:[(0,jsx_runtime.jsx)(OutlinesDragLayer,{}),(0,jsx_runtime.jsxs)("div",{className:"bookmark-outline-row",children:[!isAddingNewOutline&&(outlinesNotLoaded||0===outlines.length)&&(0,jsx_runtime.jsx)("div",{className:"msg msg-no-bookmark-outline",children:t("message.noOutlines")}),(0,jsx_runtime.jsx)(index_m.aY,{data:outlines||[],itemContent:(index,outline)=>(0,jsx_runtime.jsx)(Outline.default,{outline,setMultiSelected:(path,value)=>{selectedOutlines.find((outline=>outline===path))?value||setSelectedOutlines(selectedOutlines.filter((outline=>outline!==path))):value&&setSelectedOutlines([...selectedOutlines,path])},moveOutlineInward,moveOutlineBeforeTarget,moveOutlineAfterTarget},OutlineUtils.A.getOutlineId(outline)),initialItemCount:isTest?outlines?.length:void 0}),isAddingNewOutline&&null===activeOutlinePath&&(0,jsx_runtime.jsx)(DataElementWrapper.A,{className:"bookmark-outline-single-container editing",children:(0,jsx_runtime.jsx)(OutlineContent.A,{isAdding:!0,text:"",onCancel:()=>setAddingNewOutline(!1)})})]})]}),isOutlineEditable&&(0,jsx_runtime.jsx)(DataElementWrapper.A,{className:"bookmark-outline-footer",dataElement:dataElement.A.OUTLINE_ADD_NEW_BUTTON_CONTAINER,children:isMultiSelectMode?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.A,{className:"multi-selection-button",img:"icon-menu-add",ariaLabel:`${t("action.add")} ${t("component.outlinesPanel")}`,disabled:selectedOutlines.length>0||isAddingNewOutline||isAnyOutlineRenaming,onClick:()=>setAddingNewOutline(!0)}),(0,jsx_runtime.jsx)(Button.A,{className:"multi-selection-button",img:"icon-delete-line",disabled:0===selectedOutlines.length||isAnyOutlineRenaming,onClick:()=>removeOutlines(selectedOutlines)})]}):(0,jsx_runtime.jsx)(TextButton.A,{className:"bookmark-outline-control-button add-new-button",img:"icon-menu-add",dataElement:dataElement.A.OUTLINE_ADD_NEW_BUTTON,disabled:isAddingNewOutline||isAnyOutlineRenaming,label:`${t("action.add")} ${t("component.outlinePanel")}`,onClick:()=>setAddingNewOutline(!0),ariaLabel:`${t("action.add")} ${t("component.outlinesPanel")}`})})]})]})},components_OutlinesPanel_OutlinesPanel=react.memo(OutlinesPanel_OutlinesPanel);OutlinesPanel_OutlinesPanel.__docgenInfo={description:"",methods:[],displayName:"OutlinesPanel",props:{isTest:{defaultValue:{value:"false",computed:!1},required:!1}}}},"./src/components/OutlinesPanel/OutlinesPanel.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/OutlinesPanel/OutlinesPanel.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/OutlinesPanel/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("./src/components/OutlinesPanel/OutlinesPanel.js").A}}]);