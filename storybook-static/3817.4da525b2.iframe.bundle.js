(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[3817],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/RubberStampPanel/RubberStampPanel.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.RubberStampPanel{height:100%;display:flex;flex-direction:column}.RubberStampPanel .rubber-stamp-panel-header{font-size:16px;font-weight:700}.RubberStampPanel .CreateRubberStampButton{width:100%;padding:8px;color:var(--blue-5);border:1px solid var(--blue-5);border-radius:4px;margin:16px 0}.RubberStampPanel .CreateRubberStampButton:hover{color:var(--primary-button-hover);border-color:var(--primary-button-hover)}.RubberStampPanel .rubber-stamps-container{overflow:auto;padding:0 4px}.RubberStampPanel .rubber-stamps-container .collapsible-page-group-header button{font-size:14px;font-weight:700;margin:16px 0}.RubberStampPanel .rubber-stamps-container .rubber-stamps-list{display:flex;flex-direction:column;grid-gap:4px;gap:4px;padding-top:2px;padding-bottom:16px}.RubberStampPanel .rubber-stamps-container .rubber-stamps-list .rubber-stamp{border:none;background-color:transparent;height:48px;padding:0 8px;border:1px solid var(--border);border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer;background-color:var(--panel-list-item);flex-grow:1}:host(:not([data-tabbing=true])) .RubberStampPanel .rubber-stamps-container .rubber-stamps-list .rubber-stamp,html:not([data-tabbing=true]) .RubberStampPanel .rubber-stamps-container .rubber-stamps-list .rubber-stamp{outline:none}.RubberStampPanel .rubber-stamps-container .rubber-stamps-list .rubber-stamp img{max-width:100%;max-height:100%}.RubberStampPanel .rubber-stamps-container .rubber-stamps-list .rubber-stamp:hover{border:1px solid var(--blue-6)}.RubberStampPanel .rubber-stamps-container .rubber-stamps-list .rubber-stamp.active{border:1px solid var(--blue-5);background:var(--gray-2)}.RubberStampPanel .custom-rubber-stamp-row{display:flex;align-items:center;grid-gap:8px;gap:8px}.RubberStampPanel .custom-rubber-stamp-row .icon-button{padding:0;border:none;background-color:transparent;display:flex;align-items:center;justify-content:center;width:34px;height:34px;border-radius:4px;cursor:pointer}:host(:not([data-tabbing=true])) .RubberStampPanel .custom-rubber-stamp-row .icon-button,html:not([data-tabbing=true]) .RubberStampPanel .custom-rubber-stamp-row .icon-button{outline:none}.RubberStampPanel .custom-rubber-stamp-row .icon-button:hover{border:1px solid var(--blue-6);background:var(--gray-2)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel{width:100%}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel .rubber-stamp-panel-header{margin:0 16px 16px}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel [data-element=createRubberStampButtonWrap]{padding:0 16px}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel [data-element=createRubberStampButtonWrap] .CreateRubberStampButton{margin-top:0}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel.small-size .collapsible-page-group-header,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel.small-size .CreateRubberStampButton,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel.small-size .Divider,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel.small-size .rubber-stamps-list-header{display:none}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel .rubber-stamps-container{position:relative;padding:0 14px 16px;overflow-y:scroll}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel .rubber-stamps-container.small-size{overflow:hidden}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel .rubber-stamps-container .rubber-stamps-list .icon-button:hover,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel .rubber-stamps-container .rubber-stamps-list .rubber-stamp:hover{background-color:var(--gray-0)}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel .rubber-stamps-container .rubber-stamps-list .icon-button.active,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel .rubber-stamps-container .rubber-stamps-list .rubber-stamp.active{background:var(--tools-overlay-button-active)}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .RubberStampPanel .rubber-stamps-container .Divider{margin:0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel{width:100%}.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel .rubber-stamp-panel-header{margin:0 16px 16px}.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel [data-element=createRubberStampButtonWrap]{padding:0 16px}.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel [data-element=createRubberStampButtonWrap] .CreateRubberStampButton{margin-top:0}.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel.small-size .collapsible-page-group-header,.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel.small-size .CreateRubberStampButton,.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel.small-size .Divider,.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel.small-size .rubber-stamps-list-header{display:none}.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel .rubber-stamps-container{position:relative;padding:0 14px 16px;overflow-y:scroll}.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel .rubber-stamps-container.small-size{overflow:hidden}.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel .rubber-stamps-container .rubber-stamps-list .icon-button:hover,.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel .rubber-stamps-container .rubber-stamps-list .rubber-stamp:hover{background-color:var(--gray-0)}.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel .rubber-stamps-container .rubber-stamps-list .icon-button.active,.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel .rubber-stamps-container .rubber-stamps-list .rubber-stamp.active{background:var(--tools-overlay-button-active)}.App.is-web-component:not(.is-in-desktop-only-mode) .RubberStampPanel .rubber-stamps-container .Divider{margin:0}}.RubberStampPanel.modular-ui-panel .rubber-stamps-list .rubber-stamp{border-color:var(--lighter-border)}.RubberStampPanel.modular-ui-panel .rubber-stamps-list .rubber-stamp.focus-visible,.RubberStampPanel.modular-ui-panel .rubber-stamps-list .rubber-stamp:focus-visible{outline:var(--focus-visible-outline)!important}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./src/components/RubberStampPanel/RubberStampPanel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>components_RubberStampPanel_RubberStampPanel});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),selectors=__webpack_require__("./src/redux/selectors/index.js"),actions=__webpack_require__("./src/redux/actions/index.js"),core=__webpack_require__("./src/core/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),dataElement=__webpack_require__("./src/constants/dataElement.js"),panel=__webpack_require__("./src/constants/panel.js"),defaultTool=__webpack_require__("./src/constants/defaultTool.js"),events=__webpack_require__("./src/constants/events.js"),DataElementWrapper=__webpack_require__("./src/components/DataElementWrapper/index.js"),Button=__webpack_require__("./src/components/Button/index.js"),useFocusHandler=__webpack_require__("./src/hooks/useFocusHandler/index.js");const CreateRubberStampButton=()=>{const dispatch=(0,es.wA)(),[t]=(0,useTranslation.B)(),openRubberStampModalWithFocus=(0,useFocusHandler.A)((()=>{dispatch(actions.A.openElement(dataElement.A.CUSTOM_STAMP_MODAL))}));return(0,jsx_runtime.jsx)(DataElementWrapper.A,{dataElement:dataElement.A.CREATE_RUBBER_STAMP_BUTTON_WRAP,children:(0,jsx_runtime.jsx)(Button.A,{className:"CreateRubberStampButton",dataElement:dataElement.A.CREATE_RUBBER_STAMP_BUTTON,label:t("component.createStampButton"),onClick:openRubberStampModalWithFocus})})},RubberStampPanel_CreateRubberStampButton=CreateRubberStampButton;CreateRubberStampButton.__docgenInfo={description:"",methods:[],displayName:"CreateRubberStampButton"};var Divider=__webpack_require__("./src/components/ModularComponents/Divider/index.js"),CollapsibleSection=(__webpack_require__("./src/components/RubberStampPanel/RubberStampPanel.scss"),__webpack_require__("./src/components/CollapsibleSection/index.js")),getDeviceSize=__webpack_require__("./src/helpers/getDeviceSize.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types);const RubberStamp=react.memo((({imgSrc,annotation,index,onClick,isActive})=>{const[t]=(0,useTranslation.B)(),ariaLabel=`rubberStamp.${annotation.Icon}`;return(0,jsx_runtime.jsx)("button",{tabIndex:0,className:classnames_default()("rubber-stamp",{active:isActive}),"aria-label":t(ariaLabel),onClick:()=>onClick(annotation,index),"aria-current":isActive,children:(0,jsx_runtime.jsx)("img",{src:imgSrc,alt:""})},index)}));RubberStamp.displayName="RubberStamp",RubberStamp.propTypes={imgSrc:prop_types_default().string,annotation:prop_types_default().object,index:prop_types_default().number,onClick:prop_types_default().func,isActive:prop_types_default().bool};const StandardRubberStamps=({standardStamps,selectedStampIndex,setSelectedRubberStamp})=>{const[t]=(0,useTranslation.B)(),isMobile=(0,getDeviceSize.IS)(),[mobilePanelSize,lastSelectedStampIndex]=(0,es.d4)((state=>[selectors.A.getMobilePanelSize(state),selectors.A.getLastSelectedStampIndex(state)])),rubberStamps=standardStamps.map((({imgSrc,annotation},index)=>{const isStampActive=selectedStampIndex===index,shouldShowOnlyFirstStamp=index===(lastSelectedStampIndex||0)&&(0,lodash.isNull)(selectedStampIndex);return!isMobile||isMobile&&mobilePanelSize!==panel.WA.SMALL_SIZE||isMobile&&mobilePanelSize===panel.WA.SMALL_SIZE&&(isStampActive||shouldShowOnlyFirstStamp)?(0,jsx_runtime.jsx)(RubberStamp,{index,imgSrc,annotation,onClick:setSelectedRubberStamp,isActive:isStampActive},index):null})),header=(0,react.useCallback)((()=>t("rubberStampPanel.standard")),[t]);return(0,jsx_runtime.jsx)(CollapsibleSection.A,{header,headingLevel:2,ariaControls:"rubber-stamps-list",expansionDescription:t("rubberStampPanel.standard"),children:(0,jsx_runtime.jsx)("div",{className:"rubber-stamps-list",id:"rubber-stamps-list",children:rubberStamps})})};StandardRubberStamps.displayName="StandardRubberStamps";const RubberStampPanel_StandardRubberStamps=react.memo(StandardRubberStamps);StandardRubberStamps.__docgenInfo={description:"",methods:[],displayName:"StandardRubberStamps"};const CustomRubberStamp=react.memo((({imgSrc,annotation,index,onClick,deleteHandler,standardStampsOffset,isActive})=>{const[t]=(0,useTranslation.B)(),customStampData=annotation.getCustomData("trn-custom-stamp");let stampInfo;try{stampInfo=JSON.parse(customStampData)}catch(e){stampInfo={title:`${t("annotation.defaultCustomStampTitle")}`}}return(0,jsx_runtime.jsxs)("div",{className:"custom-rubber-stamp-row",tabIndex:"-1",children:[(0,jsx_runtime.jsx)("button",{className:classnames_default()("rubber-stamp",{active:isActive}),"aria-label":`${t("annotation.stamp")} ${stampInfo.title} ${stampInfo.author} ${annotation.DateCreated}`,onClick:()=>onClick(annotation,index+standardStampsOffset),"aria-current":isActive,children:(0,jsx_runtime.jsx)("img",{src:imgSrc,alt:""})},index),(0,jsx_runtime.jsx)(Button.A,{"data-element":"defaultSignatureDeleteButton",onClick:()=>{deleteHandler(index)},img:"icon-delete-line",ariaLabel:`${t("action.delete")} ${t("annotation.stamp")} ${index+1}`})]})}));CustomRubberStamp.displayName="CustomRubberStamp",CustomRubberStamp.propTypes={imgSrc:prop_types_default().string,annotation:prop_types_default().object,index:prop_types_default().number,onClick:prop_types_default().func,deleteHandler:prop_types_default().func,standardStampsOffset:prop_types_default().number,isActive:prop_types_default().bool};const CustomRubberStamps=({customStamps,selectedStampIndex,setSelectedRubberStamp,standardStampsOffset})=>{const stampToolArray=core.A.getToolsFromAllDocumentViewers("AnnotationCreateRubberStamp"),isMobile=(0,getDeviceSize.IS)(),dispatch=(0,es.wA)(),[mobilePanelSize,lastSelectedStampIndex]=(0,es.d4)((state=>[selectors.A.getMobilePanelSize(state),selectors.A.getLastSelectedStampIndex(state)])),deleteCustomStamp=(0,react.useCallback)((index=>{for(const tool of stampToolArray){const stamps=tool.getCustomStamps();tool.deleteCustomStamps([stamps[index]]);const indexToShow=(deletedIndex=index,0===tool.getCustomStamps().length?null:0===deletedIndex?standardStampsOffset:deletedIndex-1>=0?deletedIndex-1+standardStampsOffset:deletedIndex+standardStampsOffset);dispatch(actions.A.setSelectedStampIndex(null)),dispatch(actions.A.setLastSelectedStampIndex(indexToShow))}var deletedIndex}),[]),isMobileModeWithLargerSize=isMobile&&mobilePanelSize!==panel.WA.SMALL_SIZE,isMobileModeSmallSize=isMobile&&mobilePanelSize===panel.WA.SMALL_SIZE,rubberStamps=customStamps.map((({imgSrc,annotation},index)=>{const customStampIndex=index+standardStampsOffset,isStampActive=selectedStampIndex===customStampIndex,shouldShowOnlyFirstStamp=isMobileModeSmallSize&&((0,lodash.isNull)(selectedStampIndex)&&customStamps.length&&customStampIndex===lastSelectedStampIndex||isStampActive);return!isMobile||isMobileModeWithLargerSize||shouldShowOnlyFirstStamp||isMobileModeSmallSize&&isStampActive?(0,jsx_runtime.jsx)(CustomRubberStamp,{index,imgSrc,annotation,onClick:setSelectedRubberStamp,standardStampsOffset,deleteHandler:deleteCustomStamp,isActive:isStampActive},index):null}));return 0===customStamps.length?null:(0,jsx_runtime.jsx)("div",{className:"rubber-stamps-list",children:rubberStamps})};CustomRubberStamps.displayName="CustomRubberStamps",CustomRubberStamps.propTypes={customStamps:prop_types_default().array,selectedStampIndex:prop_types_default().number,setSelectedRubberStamp:prop_types_default().func,standardStampsOffset:prop_types_default().number};const RubberStampPanel_CustomRubberStamps=react.memo(CustomRubberStamps);CustomRubberStamps.__docgenInfo={description:"",methods:[],displayName:"CustomRubberStamps",props:{customStamps:{description:"",type:{name:"array"},required:!1},selectedStampIndex:{description:"",type:{name:"number"},required:!1},setSelectedRubberStamp:{description:"",type:{name:"func"},required:!1},standardStampsOffset:{description:"",type:{name:"number"},required:!1}}};var setToolModeAndGroup=__webpack_require__("./src/helpers/setToolModeAndGroup.js");const RubberStampPanel_RubberStampPanel=()=>{const[t]=(0,useTranslation.B)(),dispatch=(0,es.wA)(),stampToolArray=core.A.getToolsFromAllDocumentViewers("AnnotationCreateRubberStamp"),isMobile=(0,getDeviceSize.IS)(),standardStamps=(0,es.d4)(selectors.A.getStandardStamps,es.bN),customStamps=(0,es.d4)(selectors.A.getCustomStamps,es.bN),selectedStampIndex=(0,es.d4)(selectors.A.getSelectedStampIndex),mobilePanelSize=(0,es.d4)(selectors.A.getMobilePanelSize),featureFlags=(0,es.d4)(selectors.A.getFeatureFlags,es.bN),store=(0,es.Pj)(),customizableUI=featureFlags.customizableUI,setSelectedRubberStamp=(0,react.useCallback)((async(annotation,index)=>{core.A.setToolMode("AnnotationCreateRubberStamp");for(const tool of stampToolArray){const text=t(`rubberStamp.${annotation.Icon}`);await tool.setRubberStamp(annotation,text),tool.showPreview()}dispatch(actions.A.setSelectedStampIndex(index)),isMobile&&mobilePanelSize!==panel.WA.SMALL_SIZE&&dispatch(actions.A.setMobilePanelSize(panel.WA.SMALL_SIZE))}),[]);return(0,react.useEffect)((()=>{dispatch(actions.A.setSelectedStampIndex(null))}),[]),(0,react.useEffect)((()=>{const onVisibilityChanged=e=>{const activeTool=core.A.getToolMode(),activeToolName=activeTool?.name,{element,isVisible}=e.detail;element!==panel.BB.RUBBER_STAMP||isVisible||"AnnotationCreateRubberStamp"!==activeToolName&&activeToolName!==defaultTool.A||(0,setToolModeAndGroup.A)(store,defaultTool.A)};return window.addEventListener(events.A.VISIBILITY_CHANGED,onVisibilityChanged),()=>{window.removeEventListener(events.A.VISIBILITY_CHANGED,onVisibilityChanged)}}),[]),(0,jsx_runtime.jsxs)(DataElementWrapper.A,{dataElement:dataElement.A.RUBBER_STAMP_PANEL,className:classnames_default()({Panel:!0,RubberStampPanel:!0,[mobilePanelSize]:isMobile,"modular-ui-panel":customizableUI}),children:[(0,jsx_runtime.jsx)("h1",{className:"rubber-stamp-panel-header",children:t("rubberStampPanel.header")}),(0,jsx_runtime.jsx)(RubberStampPanel_CreateRubberStampButton,{}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()({"rubber-stamps-container":!0,[mobilePanelSize]:isMobile}),children:[(0,jsx_runtime.jsx)(RubberStampPanel_CustomRubberStamps,{selectedStampIndex,standardStampsOffset:standardStamps.length,setSelectedRubberStamp,customStamps}),(0,jsx_runtime.jsx)(Divider.A,{}),(0,jsx_runtime.jsx)(RubberStampPanel_StandardRubberStamps,{setSelectedRubberStamp,standardStamps,selectedStampIndex})]})]})},components_RubberStampPanel_RubberStampPanel=RubberStampPanel_RubberStampPanel;RubberStampPanel_RubberStampPanel.__docgenInfo={description:"",methods:[],displayName:"RubberStampPanel"}},"./src/components/RubberStampPanel/RubberStampPanel.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/RubberStampPanel/RubberStampPanel.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/RubberStampPanel/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("./src/components/RubberStampPanel/RubberStampPanel.js").A}}]);