(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[7107],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/ScaleModal/ScaleModal.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".open.ScaleModal{visibility:visible}.closed.ScaleModal{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.ScaleModal{position:fixed;left:0;bottom:0;z-index:100;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:var(--modal-negative-space)}.ScaleModal .modal-container .wrapper .modal-content{padding:10px}.ScaleModal .footer{display:flex;flex-direction:row;justify-content:flex-end;width:100%;margin-top:13px}.ScaleModal .footer.modal-footer{padding:16px;margin:0;border-top:1px solid var(--divider)}.ScaleModal .footer .modal-button{display:flex;justify-content:center;align-items:center;padding:6px 18px;margin:8px 0 0;width:auto;width:-moz-fit-content;width:fit-content;border-radius:4px;height:30px;cursor:pointer}.ScaleModal .footer .modal-button.cancel{color:var(--secondary-button-text);border:1px solid var(--secondary-button-text)}.ScaleModal .footer .modal-button.cancel:hover{background-color:var(--document-background-color);color:var(--secondary-button-hover);border:1px solid var(--secondary-button-hover)}.ScaleModal .footer .modal-button.confirm{margin-left:4px;color:var(--primary-button-text);font-weight:600;background:var(--primary-button)}.ScaleModal .footer .modal-button.confirm:hover{background:var(--primary-button-hover)}.ScaleModal .footer .modal-button.confirm.disabled{background:var(--primary-button)!important;opacity:.5}.ScaleModal .footer .modal-button.secondary-btn-custom{border-radius:4px;border:1px solid var(--primary-button);color:var(--primary-button);padding:2px 20px 4px;cursor:pointer;background-color:#fff}.ScaleModal .footer .modal-button.secondary-btn-custom:hover{color:var(--secondary-button-hover)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .ScaleModal .footer .modal-button{padding:23px 8px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .ScaleModal .footer .modal-button{padding:23px 8px}}.ScaleModal .swipe-indicator{background:var(--divider);border-radius:2px;height:4px;width:38px;position:absolute;top:12px;margin-left:auto;margin-right:auto;left:0;right:0}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .ScaleModal .swipe-indicator{display:none}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .ScaleModal .swipe-indicator{display:none}}.ScaleModal .container{box-shadow:0 0 3px 0 var(--document-box-shadow);background:var(--component-background);overflow-y:auto;max-height:100%}@media(max-height:500px){.App:not(.is-web-component) .ScaleModal .container,.ScaleModal .App:not(.is-web-component) .container{overflow:auto;max-height:100%}}@container (max-height: 500px){.App.is-web-component .ScaleModal .container,.ScaleModal .App.is-web-component .container{overflow:auto;max-height:100%}}.ScaleModal .container{display:flex;flex-direction:column;width:480px;padding:0;border-radius:4px;box-shadow:0 0 3px var(--document-box-shadow);overflow:visible}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .ScaleModal .container{width:100%;position:fixed;border-radius:0;left:0;bottom:0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .ScaleModal .container{width:100%;position:fixed;border-radius:0;left:0;bottom:0}}.ScaleModal .container .header-container{box-shadow:inset 0 -1px 0 var(--modal-stroke-and-border);padding:20px 16px 16px}.ScaleModal .container .header{margin:0;display:flex;align-items:center;width:100%;height:24px}.ScaleModal .container .header p{font-size:16px;font-weight:700;width:89.286%;margin:0 16px 0 0}.ScaleModal .container .header .scaleModalCloseButton{position:static;height:32px;width:32px}.ScaleModal .container .header .scaleModalCloseButton:hover{background:var(--view-header-button-hover);border-radius:4px}.ScaleModal .container .header .scaleModalCloseButton.selected{background:var(--view-header-button-active);cursor:default}.ScaleModal .container .content-container{padding:24px 16px 16px}.ScaleModal .container .content-container .ui__choice__label{font-weight:700;font-size:13px;line-height:16px;display:flex;align-items:center}.ScaleModal .container .content-container .scaleSetting .custom-option-wrapper{display:flex;align-items:center;justify-content:space-between}.ScaleModal .container .content-container .scaleSetting .custom-option-wrapper .calibrate-btn{font-weight:400;line-height:16px;display:flex;align-items:center;text-align:center;color:var(--blue-5);background-color:transparent;border:none;cursor:pointer}.ScaleModal .container .content-container .scaleSetting .selector{margin-top:16px;width:100%;height:32px;margin-bottom:18px}.ScaleModal .container .content-container .scaleSetting .selector .Dropdown__wrapper{width:100%;height:100%}.ScaleModal .container .content-container .scaleSetting .selector .Dropdown__wrapper .Dropdown{height:100%;width:100%!important;text-align:left}.ScaleModal .container .content-container .scaleSetting .selector .Dropdown__wrapper .Dropdown .arrow{flex:0 1 auto}.ScaleModal .container .content-container .scaleSetting .selector .Dropdown__wrapper .Dropdown__items{width:100%}.ScaleModal .container .content-container .scaleSetting .block{height:36px}.ScaleModal .container .content-container .scaleSetting .custom-scale-container{margin-top:16px;margin-bottom:16px}.ScaleModal .container .content-container .scaleSetting .custom-scale-container .scale-ratio-display{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.ScaleModal .container .content-container .scaleSetting .custom-scale-container .input-wrapper{display:flex;flex-direction:row}.ScaleModal .container .content-container .scaleSetting .custom-scale-container .input-wrapper .scale-input{border-radius:4px;border:1px solid var(--border);width:94px;height:32px;margin-right:8px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .ScaleModal .container .content-container .scaleSetting .custom-scale-container .input-wrapper .scale-input{width:79px;height:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .ScaleModal .container .content-container .scaleSetting .custom-scale-container .input-wrapper .scale-input{width:79px;height:32px}}.ScaleModal .container .content-container .scaleSetting .custom-scale-container .input-wrapper .scale-input.invalid-value{border-color:red}.ScaleModal .container .content-container .scaleSetting .custom-scale-container .input-wrapper .unit-input{width:100px;height:32px}.ScaleModal .container .content-container .scaleSetting .custom-scale-container .input-wrapper .unit-input .Dropdown__wrapper{width:100%;height:100%}.ScaleModal .container .content-container .scaleSetting .custom-scale-container .input-wrapper .unit-input .Dropdown__wrapper .Dropdown{height:100%;text-align:left}.ScaleModal .container .content-container .scaleSetting .custom-scale-container .input-wrapper .unit-input .Dropdown__wrapper .Dropdown__items{width:100%}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .ScaleModal .container .content-container .scaleSetting .custom-scale-container .input-wrapper .unit-input{width:4rem;height:2rem}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .ScaleModal .container .content-container .scaleSetting .custom-scale-container .input-wrapper .unit-input{width:4rem;height:2rem}}.ScaleModal .container .content-container .scaleSetting .custom-scale-container .warning-messages{height:16px;font-weight:400;color:red;margin-top:4px;position:relative;display:flex}.ScaleModal .container .content-container .scaleSetting .custom-scale-container .warning-messages .world-value-warning{position:absolute;left:246px}.ScaleModal .container .content-container .precision-container{display:flex;font-size:13px;font-weight:400;margin-top:16px;align-items:center;justify-content:space-between}.ScaleModal .container .content-container .precision-container .precision-selector{display:flex;justify-content:space-between;align-items:center;width:288px;height:32px}.ScaleModal .container .content-container .precision-container .precision-selector .precision-title{height:1rem;font-weight:400;font-size:13px;line-height:16px}.ScaleModal .container .content-container .precision-container .precision-selector .selector{width:223px;height:32px;z-index:0}.ScaleModal .container .content-container .precision-container .precision-selector .selector .Dropdown__wrapper{width:100%;height:100%}.ScaleModal .container .content-container .precision-container .precision-selector .selector .Dropdown__wrapper .Dropdown{height:100%;width:100%!important;text-align:left}.ScaleModal .container .content-container .precision-container .precision-selector .selector .Dropdown__wrapper .Dropdown .arrow{flex:0 1 auto}.ScaleModal .container .content-container .precision-container .precision-selector .selector .Dropdown__wrapper .Dropdown__items{width:100%}.ScaleModal .container .content-container .precision-container .ui__choice__label{font-weight:400}.ScaleModal .container .content-container .precision-container .ui__choice--disabled .ui__choice__label{color:var(--gray-5)}.ScaleModal .container .footer{display:flex;padding:16px;align-items:center;justify-content:flex-end;width:100%;box-shadow:inset 0 1px 0 var(--modal-stroke-and-border);margin:0}.ScaleModal .container .footer .scale-update{height:32px;min-width:72px;display:flex;align-items:center;justify-content:center;color:var(--blue-5);background-color:transparent;border:1px solid var(--blue-5);box-sizing:border-box;border-radius:4px;cursor:pointer;margin-right:8px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .ScaleModal .container .footer .scale-update{font-size:13px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .ScaleModal .container .footer .scale-update{font-size:13px}}.ScaleModal .container .footer .scale-update:enabled:hover{background:var(--outline-hover)}.ScaleModal .container .footer .scale-update:disabled{opacity:.5;cursor:not-allowed}.ScaleModal .container .footer .scale-create{border:none;background-color:transparent;background:var(--primary-button);border-radius:4px;padding:0 8px;height:32px;min-width:72px;display:flex;align-items:center;justify-content:center;position:relative;color:var(--primary-button-text);cursor:pointer}:host(:not([data-tabbing=true])) .ScaleModal .container .footer .scale-create,html:not([data-tabbing=true]) .ScaleModal .container .footer .scale-create{outline:none}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .ScaleModal .container .footer .scale-create{font-size:13px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .ScaleModal .container .footer .scale-create{font-size:13px}}.ScaleModal .container .footer .scale-create:enabled:hover{background:var(--primary-button-hover)}.ScaleModal .container .footer .scale-create:disabled{opacity:.5;cursor:not-allowed}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./src/components/ScaleModal/ScaleModal.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/ScaleModal/ScaleModal.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/ScaleModal/ScaleModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>components_ScaleModal_ScaleModal});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),react_swipeable_es=__webpack_require__("./node_modules/react-swipeable/es/index.js"),FocusTrap=__webpack_require__("./node_modules/@pdftron/webviewer-react-toolkit/dist/esm/components/FocusTrap/FocusTrap.js"),Choice=__webpack_require__("./node_modules/@pdftron/webviewer-react-toolkit/dist/esm/components/Choice/Choice.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),measurementScale=__webpack_require__("./src/constants/measurementScale.js"),core=__webpack_require__("./src/core/index.js"),actions=__webpack_require__("./src/redux/actions/index.js"),selectors=__webpack_require__("./src/redux/selectors/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),Tooltip=__webpack_require__("./src/components/Tooltip/index.js"),Dropdown=__webpack_require__("./src/components/Dropdown/index.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _sliced_to_array(arr,i){return function _array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function _iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}(arr,i)||function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Scale=window.Core.Scale,ScaleCustomProps={scale:prop_types_default().array,onScaleChange:prop_types_default().func,precision:prop_types_default().number};function ScaleCustom(param){var scale=param.scale,onScaleChange=param.onScaleChange,precision=param.precision,measurementUnits=_sliced_to_array((0,es.d4)((function(state){return[selectors.A.getMeasurementUnits(state)]}),es.bN),1)[0],_useState=_sliced_to_array((0,react.useState)(""),2),pageValueDisplay=_useState[0],setPageValueDisplay=_useState[1],_useState1=_sliced_to_array((0,react.useState)(""),2),worldValueDisplay=_useState1[0],setWorldValueDisplay=_useState1[1],_useState2=_sliced_to_array((0,react.useState)(!1),2),isFractionalPrecision=_useState2[0],setIsFractionalPrecision=_useState2[1],_useState3=_sliced_to_array((0,react.useState)(""),2),pageWarningMessage=_useState3[0],setPageWarningMessage=_useState3[1],_useState4=_sliced_to_array((0,react.useState)(""),2),worldWarningMessage=_useState4[0],setWorldWarningMessage=_useState4[1],_useState5=_sliced_to_array((0,react.useState)(!1),2),scaleValueBlurFlag=_useState5[0],setScaleValueBlurFlag=_useState5[1],pageValueInput=(0,react.useRef)(null),worldValueInput=(0,react.useRef)(null),t=_sliced_to_array((0,useTranslation.B)(),1)[0],filterFractionalUnits=function(units){return units.filter((function(unit){return measurementScale.Ph.includes(unit)}))},unitFromOptions=isFractionalPrecision?filterFractionalUnits(measurementUnits.from):measurementUnits.from,unitToOptions=isFractionalPrecision?filterFractionalUnits(measurementUnits.to):measurementUnits.to;(0,react.useEffect)((function(){unitFromOptions.includes(scale[0][1])||onScaleUnitChange(unitFromOptions[0],!0)}),[scale[0][1]]),(0,react.useEffect)((function(){unitFromOptions.includes(scale[0][1])&&!unitToOptions.includes(scale[1][1])&&onScaleUnitChange(unitToOptions[0],!1)}),[scale[0][1],scale[1][1]]),(0,react.useEffect)((function(){var formatDecimal=function(value){return null==value?void 0:value.toFixed((1/precision).toString().length-1)};scale[0][0]&&(null==pageValueInput?void 0:pageValueInput.current)!==document.activeElement&&setPageValueDisplay(isFractionalPrecision?Scale.getFormattedValue(scale[0][0],scale[0][1],precision,!1,!0)||"":formatDecimal(scale[0][0])||""),!scale[1][0]||worldValueInput&&worldValueInput.current===document.activeElement||(isFractionalPrecision||"ft-in"===scale[1][1]?setWorldValueDisplay(Scale.getFormattedValue(scale[1][0],scale[1][1],precision,!1,!0)||""):setWorldValueDisplay(formatDecimal(scale[1][0])||""))}),[scale,precision,worldValueInput,pageValueInput,isFractionalPrecision,scaleValueBlurFlag]),(0,react.useEffect)((function(){setIsFractionalPrecision((0,measurementScale.fM)(precision))}),[precision]),(0,react.useEffect)((function(){isFractionalPrecision?(setPageWarningMessage(measurementScale.OR[scale[0][1]]),setWorldWarningMessage(measurementScale.OR[scale[1][1]])):"ft-in"===scale[1][1]?(setPageWarningMessage(""),setWorldWarningMessage(measurementScale.OR["ft-in decimal"])):(setPageWarningMessage(""),setWorldWarningMessage(""))}),[scale,isFractionalPrecision]),(0,react.useEffect)((function(){!isWorldValueValid&&onInputValueChange(worldValueInput.current.value,!1)}),[scale[1][1]]),(0,react.useEffect)((function(){if(isPageValueValid||isWorldValueValid)!isPageValueValid&&onInputValueChange(pageValueInput.current.value,!0),!isWorldValueValid&&onInputValueChange(worldValueInput.current.value,!1);else{var pageScale={value:scale[0][0],unit:scale[0][1]};onInputValueChange(pageValueInput.current.value,!0,(function(newScale){pageScale=newScale.pageScale}));var worldScale={value:scale[1][0],unit:scale[1][1]};onInputValueChange(worldValueInput.current.value,!1,(function(newScale){worldScale=newScale.worldScale})),_onScaleChange(new Scale({pageScale,worldScale}))}}),[isFractionalPrecision]);var isPageValueValid=!!scale[0][0],isWorldValueValid=!!scale[1][0],pageValueClass=classnames_default()("scale-input",{"invalid-value":!isPageValueValid}),worldValueClass=classnames_default()("scale-input",{"invalid-value":!isWorldValueValid}),_onScaleChange=function(newScale){var getPrecision=function(unit){return"ft-in"===unit?precision/12:precision};newScale.pageScale.value&&newScale.pageScale.value<precision&&(newScale.pageScale.value=getPrecision(newScale.pageScale.unit)),newScale.worldScale.value&&newScale.worldScale.value<precision&&(newScale.worldScale.value=getPrecision(newScale.worldScale.unit)),onScaleChange(newScale)},onInputValueChange=function(value,isPageValue,getNewScale){var updateScaleValue=function(scaleValue){if(isPageValue&&scaleValue!==scale[0][0]||!isPageValue&&scaleValue!==scale[1][0]){var newScale=new Scale({pageScale:{value:isPageValue?scaleValue:scale[0][0],unit:scale[0][1]},worldScale:{value:isPageValue?scale[1][0]:scaleValue,unit:scale[1][1]}});getNewScale?getNewScale(newScale):_onScaleChange(newScale)}};isPageValue?setPageValueDisplay(value):setWorldValueDisplay(value);var inputValue=value.trim();if(isFractionalPrecision){var scaleUnit=isPageValue?scale[0][1]:scale[1][1];if("in"===scaleUnit){if(measurementScale.yQ.test(inputValue)){var result1=(0,measurementScale.cX)(inputValue);if(result1>0)return void updateScaleValue(result1)}}else if("ft-in"===scaleUnit&&measurementScale.CR.test(inputValue)){var result2=(0,measurementScale.QQ)(inputValue);if(result2>0)return void updateScaleValue(result2)}}else if(isPageValue||"ft-in"!==scale[1][1]){if(measurementScale.SY.test(inputValue)){return void updateScaleValue(parseFloat(inputValue)||0)}}else if(measurementScale.oi.test(inputValue)){var result=(0,measurementScale.Cg)(inputValue);if(result>0)return void updateScaleValue(result)}updateScaleValue(void 0)},onScaleUnitChange=function(newUnit,isPageUnit){var newPageScale,newWorldScale;newPageScale=isPageUnit&&newUnit!==scale[0][1]?{value:scale[0][0]?(0,measurementScale.oU)(scale[0][0],scale[0][1],newUnit):scale[0][0],unit:newUnit}:{value:scale[0][0],unit:scale[0][1]},newWorldScale=isPageUnit||newUnit===scale[1][1]?{value:scale[1][0],unit:scale[1][1]}:{value:scale[1][0]?(0,measurementScale.oU)(scale[1][0],scale[1][1],newUnit):scale[1][0],unit:newUnit},_onScaleChange(new Scale({pageScale:newPageScale,worldScale:newWorldScale}))},getInputPlaceholder=function(isPageValue){var unit=isPageValue?scale[0][1]:scale[1][1];return isFractionalPrecision?measurementScale.OR[unit]:"ft-in"===unit?measurementScale.OR["ft-in decimal"]:""},onInputBlur=function(){setScaleValueBlurFlag((function(flag){return!flag}))};return react.createElement("div",{className:"custom-scale-container"},react.createElement("div",{className:"scale-ratio-input-container"},react.createElement("div",{className:"scale-ratio-display"},react.createElement("div",{className:"input-wrapper"},react.createElement("input",{type:isFractionalPrecision?"text":"number",min:"0",className:pageValueClass,value:pageValueDisplay,"data-element":"customPageScaleValue",onChange:function(e){return onInputValueChange(e.target.value,!0)},placeholder:getInputPlaceholder(!0),ref:pageValueInput,onBlur:onInputBlur}),react.createElement(Tooltip.A,{content:"option.measurement.scaleModal.paperUnits"},react.createElement("div",{className:"unit-input"},react.createElement(Dropdown.A,{dataElement:"customPageScaleUnit",items:unitFromOptions,onClickItem:function(value){return onScaleUnitChange(value,!0)},currentSelectionKey:scale[0][1]}))))," = ",react.createElement("div",{className:"input-wrapper"},react.createElement("input",{type:isFractionalPrecision||"ft-in"===scale[1][1]?"text":"number",min:"0",className:worldValueClass,value:worldValueDisplay,"data-element":"customDisplayScaleValue",onChange:function(e){return onInputValueChange(e.target.value,!1)},placeholder:getInputPlaceholder(!1),ref:worldValueInput,onBlur:onInputBlur}),react.createElement(Tooltip.A,{content:"option.measurement.scaleModal.displayUnits"},react.createElement("div",{className:"unit-input"},react.createElement(Dropdown.A,{items:unitToOptions,dataElement:"customDisplayScaleUnit",onClickItem:function(value){return onScaleUnitChange(value,!1)},currentSelectionKey:scale[1][1]})))))),react.createElement("div",{className:"warning-messages"},!isPageValueValid&&react.createElement("div",null,"".concat(t("option.measurement.scaleModal.incorrectSyntax")," ").concat(pageWarningMessage)),!isWorldValueValid&&react.createElement("div",{className:"world-value-warning"},"".concat(t("option.measurement.scaleModal.incorrectSyntax")," ").concat(worldWarningMessage))))}ScaleCustom.propTypes=ScaleCustomProps;const ScaleModal_ScaleCustom=ScaleCustom;ScaleCustom.__docgenInfo={description:"",methods:[],displayName:"ScaleCustom",props:{scale:{description:"",type:{name:"array"},required:!1},onScaleChange:{description:"",type:{name:"func"},required:!1},precision:{description:"",type:{name:"number"},required:!1}}};var dataElement=__webpack_require__("./src/constants/dataElement.js"),useDidUpdate=__webpack_require__("./src/hooks/useDidUpdate.js"),Button=__webpack_require__("./src/components/Button/index.js"),DataElementWrapper=__webpack_require__("./src/components/DataElementWrapper/index.js");__webpack_require__("./src/components/ScaleModal/ScaleModal.scss"),__webpack_require__("./src/components/Choice/Choice.scss");function ScaleModal_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ScaleModal_sliced_to_array(arr,i){return function ScaleModal_array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function ScaleModal_iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||ScaleModal_unsupported_iterable_to_array(arr,i)||function ScaleModal_non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _to_consumable_array(arr){return function _array_without_holes(arr){if(Array.isArray(arr))return ScaleModal_array_like_to_array(arr)}(arr)||function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||ScaleModal_unsupported_iterable_to_array(arr)||function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ScaleModal_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return ScaleModal_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ScaleModal_array_like_to_array(o,minLen):void 0}}var ScaleModal_Scale=window.Core.Scale,scaleOptions_CUSTOM="custom",scaleOptions_PRESET="preset",ScaleModal_ScaleModal=function(param){var _customScale_pageScale,_customScale_worldScale,annotations=param.annotations,selectedTool=param.selectedTool,dispatch=(0,es.wA)(),t=ScaleModal_sliced_to_array((0,useTranslation.B)(),1)[0],_useSelector=ScaleModal_sliced_to_array((0,es.d4)((function(state){return[selectors.A.isElementDisabled(state,dataElement.A.SCALE_MODAL),selectors.A.isElementOpen(state,dataElement.A.SCALE_MODAL),selectors.A.isElementHidden(state,dataElement.A.SCALE_MODAL),selectors.A.getCurrentToolbarGroup(state),selectors.A.getSelectedScale(state),selectors.A.getActiveToolName(state),selectors.A.getIsAddingNewScale(state),selectors.A.getMeasurementScalePreset(state),selectors.A.getCalibrationInfo(state),selectors.A.getIsMultipleScalesMode(state)]})),10),isDisabled=_useSelector[0],isOpen=_useSelector[1],isHidden=_useSelector[2],currentToolbarGroup=_useSelector[3],selectedScale=_useSelector[4],activeToolName=_useSelector[5],isAddingNewScale=_useSelector[6],measurementScalePreset=_useSelector[7],_useSelector_=_useSelector[8],tempScale=_useSelector_.tempScale,isFractionalUnit=_useSelector_.isFractionalUnit,isMultipleScalesMode=_useSelector[9],_useState=ScaleModal_sliced_to_array((0,react.useState)(!1),2),isFractionalPrecision=_useState[0],setIsFractionalPrecision=_useState[1],_useState1=ScaleModal_sliced_to_array((0,react.useState)(measurementScale.dz[measurementScale.D4.DECIMAL][0]),2),precisionOption=_useState1[0],setPrecisionOption=_useState1[1],_useState2=ScaleModal_sliced_to_array((0,react.useState)(scaleOptions_CUSTOM),2),scaleOption=_useState2[0],setScaleOption=_useState2[1],_useState3=ScaleModal_sliced_to_array((0,react.useState)(measurementScalePreset[measurementScale.gJ.METRIC][0]),2),presetScale=_useState3[0],setPresetScale=_useState3[1],_useState4=ScaleModal_sliced_to_array((0,react.useState)(new ScaleModal_Scale("")),2),customScale=_useState4[0],setCustomScale=_useState4[1],_useState5=ScaleModal_sliced_to_array((0,react.useState)(!1),2),hasScaleChanged=_useState5[0],setHasScaleChanged=_useState5[1],totalScalesCount=Object.keys(core.A.getScales()).length;(0,react.useEffect)((function(){measurementScale.dz[precisionType].includes(precisionOption)||setPrecisionOption(measurementScale.dz[precisionType][0]),setPresetScale(measurementScalePreset[presetMeasurementSystem][0])}),[isFractionalPrecision]),(0,react.useEffect)((function(){setScaleOption(scaleOptions_CUSTOM),setCustomScale(new ScaleModal_Scale(selectedScale.getScaleRatioAsArray()));var precision=core.A.getScalePrecision(selectedScale);if(precision){var isFractional=(0,measurementScale.fM)(precision);setIsFractionalPrecision(isFractional);var precisionItem=measurementScale.dz[getPrecisionType(isFractional)].find((function(item){return item[1]===precision}));setPrecisionOption(precisionItem),setTimeout((function(){setHasScaleChanged(!1)}))}}),[selectedScale]),(0,useDidUpdate.A)((function(){if(scaleOption===scaleOptions_CUSTOM)setCustomScale(presetScale[1]);else{var presetPrecisionOption=measurementScale.Oh[presetScale[0]];presetPrecisionOption&&presetPrecisionOption!==precisionOption&&setPrecisionOption(presetPrecisionOption)}}),[scaleOption]),(0,useDidUpdate.A)((function(){"toolbarGroup-Measure"===currentToolbarGroup&&closeModal()}),[currentToolbarGroup]),(0,react.useEffect)((function(){var newPrecisionOption=measurementScale.Oh[presetScale[0]];newPrecisionOption&&scaleOption===scaleOptions_PRESET&&setPrecisionOption(newPrecisionOption)}),[presetScale]),(0,react.useEffect)((function(){!isHidden&&tempScale&&(setCustomScale(new ScaleModal_Scale(tempScale)),dispatch(actions.A.updateCalibrationInfo({isCalibration:!1})),setIsFractionalPrecision(isFractionalUnit))}),[isHidden]),(0,react.useEffect)((function(){setHasScaleChanged(!0)}),[precisionOption,customScale,presetScale,scaleOption]),(0,react.useEffect)((function(){isOpen&&isAddingNewScale&&!tempScale&&(setScaleOption(scaleOptions_CUSTOM),setCustomScale(measurementScale.Br),setIsFractionalPrecision(!1),setPrecisionOption(measurementScale.dz[measurementScale.D4.DECIMAL][0]))}),[isOpen,isAddingNewScale]);var closeModal=function(){dispatch(actions.A.closeElement(dataElement.A.SCALE_MODAL))},getCurrentScale=function(){var getPrecisionsValue=function(value,unit){var temp=value,precisionValue=precisionOption[1];return isFractionalPrecision?("ft-in"===unit&&(precisionValue/=12),temp=Math.round(temp/precisionValue)*precisionValue):"ft-in"!==unit&&(temp=temp.toFixed((1/precisionValue).toString().length-1)),1*temp};if(isCustomOption){var scale=customScale.getScaleRatioAsArray();return scale[0][0]=getPrecisionsValue(scale[0][0],scale[0][1]),scale[1][0]=getPrecisionsValue(scale[1][0],scale[1][1]),scale}return presetScale[1].toString()},modalClass=classnames_default()("Modal","ScaleModal",{open:!isHidden,closed:isHidden}),isCustomOption=scaleOption===scaleOptions_CUSTOM,presetMeasurementSystem=isFractionalPrecision?measurementScale.gJ.IMPERIAL:measurementScale.gJ.METRIC,getPrecisionType=function(isFractional){return isFractional?measurementScale.D4.FRACTIONAL:measurementScale.D4.DECIMAL},precisionType=getPrecisionType(isFractionalPrecision),isCurrentScaleValid=!isCustomOption||customScale.isValid(),isFractionalUnitsToggleDisabled=isCustomOption&&!(measurementScale.Ph.includes(null===(_customScale_pageScale=customScale.pageScale)||void 0===_customScale_pageScale?void 0:_customScale_pageScale.unit)&&measurementScale.Ph.includes(null===(_customScale_worldScale=customScale.worldScale)||void 0===_customScale_worldScale?void 0:_customScale_worldScale.unit));return!isDisabled&&react.createElement(react_swipeable_es.Hx,{onSwipedUp:closeModal,onSwipedDown:closeModal,preventDefaultTouchmoveEvent:!0},react.createElement(FocusTrap.s,{locked:!isHidden},react.createElement("div",{className:modalClass,"data-element":dataElement.A.SCALE_MODAL},react.createElement("div",{className:"container"},react.createElement("div",{className:"header-container"},react.createElement("div",{className:"header"},react.createElement("p",null,t("option.measurementOption.scale")),react.createElement(Button.A,{className:"scaleModalCloseButton",title:"action.close",img:"ic_close_black_24px",onClick:closeModal}))),react.createElement("div",{className:"content-container"},react.createElement("div",{className:"scaleSetting"},react.createElement("div",{className:"custom-option-wrapper"},react.createElement("div",{className:"custom-scale-option"},react.createElement(Choice.G,{"data-element":"customScaleOption",radio:!0,name:"setting",onChange:function(){return setScaleOption(scaleOptions_CUSTOM)},checked:isCustomOption,label:"".concat(t("option.measurement.scaleModal.custom"),":"),center:!0})),isCustomOption&&react.createElement("button",{"data-element":"calibrate",className:"calibrate-btn",onMouseDown:function(){var _customScale_worldScale;core.A.setToolMode("AnnotationCreateCalibrationMeasurement");var unit=isCustomOption?(null===(_customScale_worldScale=customScale.worldScale)||void 0===_customScale_worldScale?void 0:_customScale_worldScale.unit)||"":presetScale[1].worldScale.unit;dispatch(actions.A.updateCalibrationInfo({isCalibration:!0,previousToolName:activeToolName,defaultUnit:unit})),dispatch(actions.A.setIsElementHidden(dataElement.A.SCALE_MODAL,!0))}},t("option.measurement.scaleModal.calibrate"))),isCustomOption?react.createElement(ScaleModal_ScaleCustom,{scale:customScale.getScaleRatioAsArray(),onScaleChange:setCustomScale,precision:precisionOption[1]}):react.createElement("div",{className:"block"}),react.createElement(Choice.G,{"data-element":"presetScaleOption",radio:!0,onChange:function(){return setScaleOption(scaleOptions_PRESET)},name:"setting",checked:!isCustomOption,label:"".concat(t("option.measurement.scaleModal.preset"),":"),center:!0}),!isCustomOption&&react.createElement("div",{className:"scaleModal__preset-container"},react.createElement("div",{className:"selector"},react.createElement(Dropdown.A,{dataElement:"presetScales",items:measurementScalePreset[presetMeasurementSystem].map((function(item){return item[0]})),currentSelectionKey:presetScale[0],onClickItem:function(_item,i){return setPresetScale(measurementScalePreset[presetMeasurementSystem][i])}})))),react.createElement("div",{className:"precision-container"},react.createElement("div",{className:"precision-selector"},react.createElement("div",{className:"precision-title"},t("option.shared.precision"),":"),react.createElement("div",{className:"selector"},react.createElement(Dropdown.A,{dataElement:"scalePrecisions",items:measurementScale.dz[precisionType].map((function(item){return item[0]})),currentSelectionKey:precisionOption[0],onClickItem:function(_item,i){return setPrecisionOption(measurementScale.dz[precisionType][i])}}))),react.createElement(Tooltip.A,{content:t("option.measurement.scaleModal.fractionUnitsTooltip")},react.createElement("div",null,react.createElement(Choice.G,{isSwitch:!0,leftLabel:!0,id:"scale-modal-fractional-units",label:t("option.measurement.scaleModal.fractionalUnits"),checked:isFractionalPrecision,onChange:function(){setIsFractionalPrecision((function(isFractionalPrecision){return!isFractionalPrecision}))},disabled:isFractionalUnitsToggleDisabled}))))),react.createElement("div",{className:"footer"},react.createElement(DataElementWrapper.A,{type:"button",onClick:function(){var originalScales,scale;originalScales=[selectedScale],scale=new ScaleModal_Scale(getCurrentScale(),precisionOption[1]),core.A.replaceScales(originalScales,scale),closeModal()},className:"scale-update",dataElement:"updateScale",disabled:isAddingNewScale||!isCurrentScaleValid||!hasScaleChanged},t("action.update")),react.createElement("button",{onClick:function(){var scale,applyTo;scale=new ScaleModal_Scale(getCurrentScale(),precisionOption[1]),applyTo=_to_consumable_array(annotations).concat([selectedTool]),core.A.createAndApplyScale(scale,applyTo),closeModal()},className:"scale-create","data-element":"createScale",disabled:!isCurrentScaleValid||!isMultipleScalesMode&&totalScalesCount||!isAddingNewScale&&!hasScaleChanged},t("action.create")))))))};const components_ScaleModal_ScaleModal=ScaleModal_ScaleModal;ScaleModal_ScaleModal.__docgenInfo={description:"",methods:[],displayName:"ScaleModal"}}}]);