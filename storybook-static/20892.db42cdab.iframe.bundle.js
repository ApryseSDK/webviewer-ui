(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[20892],{"./node_modules/eventemitter3/index.js":module=>{"use strict";var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function addListener(emitter,event,fn,context,once){if("function"!=typeof fn)throw new TypeError("The listener must be a function");var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;return emitter._events[evt]?emitter._events[evt].fn?emitter._events[evt]=[emitter._events[evt],listener]:emitter._events[evt].push(listener):(emitter._events[evt]=listener,emitter._eventsCount++),emitter}function clearEvent(emitter,evt){0===--emitter._eventsCount?emitter._events=new Events:delete emitter._events[evt]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function eventNames(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function listeners(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++)ee[i]=handlers[i].fn;return ee},EventEmitter.prototype.listenerCount=function listenerCount(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];return listeners?listeners.fn?1:listeners.length:0},EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function on(event,fn,context){return addListener(this,event,fn,context,!1)},EventEmitter.prototype.once=function once(event,fn,context){return addListener(this,event,fn,context,!0)},EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return clearEvent(this,evt),this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||clearEvent(this,evt);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:clearEvent(this,evt)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&clearEvent(this,evt)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter},"./node_modules/fast-diff/diff.js":module=>{function diff_main(text1,text2,cursor_pos,cleanup,_fix_unicode){if(text1===text2)return text1?[[0,text1]]:[];if(null!=cursor_pos){var editdiff=function find_cursor_edit_diff(oldText,newText,cursor_pos){var oldRange="number"==typeof cursor_pos?{index:cursor_pos,length:0}:cursor_pos.oldRange,newRange="number"==typeof cursor_pos?null:cursor_pos.newRange,oldLength=oldText.length,newLength=newText.length;if(0===oldRange.length&&(null===newRange||0===newRange.length)){var oldCursor=oldRange.index,oldBefore=oldText.slice(0,oldCursor),oldAfter=oldText.slice(oldCursor),maybeNewCursor=newRange?newRange.index:null,newCursor=oldCursor+newLength-oldLength;if((null===maybeNewCursor||maybeNewCursor===newCursor)&&!(newCursor<0||newCursor>newLength)){var newBefore=newText.slice(0,newCursor);if((newAfter=newText.slice(newCursor))===oldAfter){var prefixLength=Math.min(oldCursor,newCursor);if((oldPrefix=oldBefore.slice(0,prefixLength))===(newPrefix=newBefore.slice(0,prefixLength)))return make_edit_splice(oldPrefix,oldBefore.slice(prefixLength),newBefore.slice(prefixLength),oldAfter)}}if(null===maybeNewCursor||maybeNewCursor===oldCursor){var cursor=oldCursor,newAfter=(newBefore=newText.slice(0,cursor),newText.slice(cursor));if(newBefore===oldBefore){var suffixLength=Math.min(oldLength-cursor,newLength-cursor);if((oldSuffix=oldAfter.slice(oldAfter.length-suffixLength))===(newSuffix=newAfter.slice(newAfter.length-suffixLength)))return make_edit_splice(oldBefore,oldAfter.slice(0,oldAfter.length-suffixLength),newAfter.slice(0,newAfter.length-suffixLength),oldSuffix)}}}if(oldRange.length>0&&newRange&&0===newRange.length){var oldPrefix=oldText.slice(0,oldRange.index),oldSuffix=oldText.slice(oldRange.index+oldRange.length);if(!(newLength<(prefixLength=oldPrefix.length)+(suffixLength=oldSuffix.length))){var newPrefix=newText.slice(0,prefixLength),newSuffix=newText.slice(newLength-suffixLength);if(oldPrefix===newPrefix&&oldSuffix===newSuffix)return make_edit_splice(oldPrefix,oldText.slice(prefixLength,oldLength-suffixLength),newText.slice(prefixLength,newLength-suffixLength),oldSuffix)}}return null}(text1,text2,cursor_pos);if(editdiff)return editdiff}var commonlength=diff_commonPrefix(text1,text2),commonprefix=text1.substring(0,commonlength);commonlength=diff_commonSuffix(text1=text1.substring(commonlength),text2=text2.substring(commonlength));var commonsuffix=text1.substring(text1.length-commonlength),diffs=function diff_compute_(text1,text2){var diffs;if(!text1)return[[1,text2]];if(!text2)return[[-1,text1]];var longtext=text1.length>text2.length?text1:text2,shorttext=text1.length>text2.length?text2:text1,i=longtext.indexOf(shorttext);if(-1!==i)return diffs=[[1,longtext.substring(0,i)],[0,shorttext],[1,longtext.substring(i+shorttext.length)]],text1.length>text2.length&&(diffs[0][0]=diffs[2][0]=-1),diffs;if(1===shorttext.length)return[[-1,text1],[1,text2]];var hm=function diff_halfMatch_(text1,text2){var longtext=text1.length>text2.length?text1:text2,shorttext=text1.length>text2.length?text2:text1;if(longtext.length<4||2*shorttext.length<longtext.length)return null;function diff_halfMatchI_(longtext,shorttext,i){for(var best_longtext_a,best_longtext_b,best_shorttext_a,best_shorttext_b,seed=longtext.substring(i,i+Math.floor(longtext.length/4)),j=-1,best_common="";-1!==(j=shorttext.indexOf(seed,j+1));){var prefixLength=diff_commonPrefix(longtext.substring(i),shorttext.substring(j)),suffixLength=diff_commonSuffix(longtext.substring(0,i),shorttext.substring(0,j));best_common.length<suffixLength+prefixLength&&(best_common=shorttext.substring(j-suffixLength,j)+shorttext.substring(j,j+prefixLength),best_longtext_a=longtext.substring(0,i-suffixLength),best_longtext_b=longtext.substring(i+prefixLength),best_shorttext_a=shorttext.substring(0,j-suffixLength),best_shorttext_b=shorttext.substring(j+prefixLength))}return 2*best_common.length>=longtext.length?[best_longtext_a,best_longtext_b,best_shorttext_a,best_shorttext_b,best_common]:null}var hm,text1_a,text1_b,text2_a,text2_b,hm1=diff_halfMatchI_(longtext,shorttext,Math.ceil(longtext.length/4)),hm2=diff_halfMatchI_(longtext,shorttext,Math.ceil(longtext.length/2));if(!hm1&&!hm2)return null;hm=hm2?hm1&&hm1[4].length>hm2[4].length?hm1:hm2:hm1;text1.length>text2.length?(text1_a=hm[0],text1_b=hm[1],text2_a=hm[2],text2_b=hm[3]):(text2_a=hm[0],text2_b=hm[1],text1_a=hm[2],text1_b=hm[3]);var mid_common=hm[4];return[text1_a,text1_b,text2_a,text2_b,mid_common]}(text1,text2);if(hm){var text1_a=hm[0],text1_b=hm[1],text2_a=hm[2],text2_b=hm[3],mid_common=hm[4],diffs_a=diff_main(text1_a,text2_a),diffs_b=diff_main(text1_b,text2_b);return diffs_a.concat([[0,mid_common]],diffs_b)}return function diff_bisect_(text1,text2){for(var text1_length=text1.length,text2_length=text2.length,max_d=Math.ceil((text1_length+text2_length)/2),v_offset=max_d,v_length=2*max_d,v1=new Array(v_length),v2=new Array(v_length),x=0;x<v_length;x++)v1[x]=-1,v2[x]=-1;v1[v_offset+1]=0,v2[v_offset+1]=0;for(var delta=text1_length-text2_length,front=delta%2!=0,k1start=0,k1end=0,k2start=0,k2end=0,d=0;d<max_d;d++){for(var k1=-d+k1start;k1<=d-k1end;k1+=2){for(var k1_offset=v_offset+k1,y1=(x1=k1===-d||k1!==d&&v1[k1_offset-1]<v1[k1_offset+1]?v1[k1_offset+1]:v1[k1_offset-1]+1)-k1;x1<text1_length&&y1<text2_length&&text1.charAt(x1)===text2.charAt(y1);)x1++,y1++;if(v1[k1_offset]=x1,x1>text1_length)k1end+=2;else if(y1>text2_length)k1start+=2;else if(front){if((k2_offset=v_offset+delta-k1)>=0&&k2_offset<v_length&&-1!==v2[k2_offset])if(x1>=(x2=text1_length-v2[k2_offset]))return diff_bisectSplit_(text1,text2,x1,y1)}}for(var k2=-d+k2start;k2<=d-k2end;k2+=2){for(var x2,k2_offset=v_offset+k2,y2=(x2=k2===-d||k2!==d&&v2[k2_offset-1]<v2[k2_offset+1]?v2[k2_offset+1]:v2[k2_offset-1]+1)-k2;x2<text1_length&&y2<text2_length&&text1.charAt(text1_length-x2-1)===text2.charAt(text2_length-y2-1);)x2++,y2++;if(v2[k2_offset]=x2,x2>text1_length)k2end+=2;else if(y2>text2_length)k2start+=2;else if(!front){if((k1_offset=v_offset+delta-k2)>=0&&k1_offset<v_length&&-1!==v1[k1_offset]){var x1;y1=v_offset+(x1=v1[k1_offset])-k1_offset;if(x1>=(x2=text1_length-x2))return diff_bisectSplit_(text1,text2,x1,y1)}}}}return[[-1,text1],[1,text2]]}(text1,text2)}(text1=text1.substring(0,text1.length-commonlength),text2=text2.substring(0,text2.length-commonlength));return commonprefix&&diffs.unshift([0,commonprefix]),commonsuffix&&diffs.push([0,commonsuffix]),diff_cleanupMerge(diffs,_fix_unicode),cleanup&&function diff_cleanupSemantic(diffs){var changes=!1,equalities=[],equalitiesLength=0,lastequality=null,pointer=0,length_insertions1=0,length_deletions1=0,length_insertions2=0,length_deletions2=0;for(;pointer<diffs.length;)0==diffs[pointer][0]?(equalities[equalitiesLength++]=pointer,length_insertions1=length_insertions2,length_deletions1=length_deletions2,length_insertions2=0,length_deletions2=0,lastequality=diffs[pointer][1]):(1==diffs[pointer][0]?length_insertions2+=diffs[pointer][1].length:length_deletions2+=diffs[pointer][1].length,lastequality&&lastequality.length<=Math.max(length_insertions1,length_deletions1)&&lastequality.length<=Math.max(length_insertions2,length_deletions2)&&(diffs.splice(equalities[equalitiesLength-1],0,[-1,lastequality]),diffs[equalities[equalitiesLength-1]+1][0]=1,equalitiesLength--,pointer=--equalitiesLength>0?equalities[equalitiesLength-1]:-1,length_insertions1=0,length_deletions1=0,length_insertions2=0,length_deletions2=0,lastequality=null,changes=!0)),pointer++;changes&&diff_cleanupMerge(diffs);(function diff_cleanupSemanticLossless(diffs){function diff_cleanupSemanticScore_(one,two){if(!one||!two)return 6;var char1=one.charAt(one.length-1),char2=two.charAt(0),nonAlphaNumeric1=char1.match(nonAlphaNumericRegex_),nonAlphaNumeric2=char2.match(nonAlphaNumericRegex_),whitespace1=nonAlphaNumeric1&&char1.match(whitespaceRegex_),whitespace2=nonAlphaNumeric2&&char2.match(whitespaceRegex_),lineBreak1=whitespace1&&char1.match(linebreakRegex_),lineBreak2=whitespace2&&char2.match(linebreakRegex_),blankLine1=lineBreak1&&one.match(blanklineEndRegex_),blankLine2=lineBreak2&&two.match(blanklineStartRegex_);return blankLine1||blankLine2?5:lineBreak1||lineBreak2?4:nonAlphaNumeric1&&!whitespace1&&whitespace2?3:whitespace1||whitespace2?2:nonAlphaNumeric1||nonAlphaNumeric2?1:0}var pointer=1;for(;pointer<diffs.length-1;){if(0==diffs[pointer-1][0]&&0==diffs[pointer+1][0]){var equality1=diffs[pointer-1][1],edit=diffs[pointer][1],equality2=diffs[pointer+1][1],commonOffset=diff_commonSuffix(equality1,edit);if(commonOffset){var commonString=edit.substring(edit.length-commonOffset);equality1=equality1.substring(0,equality1.length-commonOffset),edit=commonString+edit.substring(0,edit.length-commonOffset),equality2=commonString+equality2}for(var bestEquality1=equality1,bestEdit=edit,bestEquality2=equality2,bestScore=diff_cleanupSemanticScore_(equality1,edit)+diff_cleanupSemanticScore_(edit,equality2);edit.charAt(0)===equality2.charAt(0);){equality1+=edit.charAt(0),edit=edit.substring(1)+equality2.charAt(0),equality2=equality2.substring(1);var score=diff_cleanupSemanticScore_(equality1,edit)+diff_cleanupSemanticScore_(edit,equality2);score>=bestScore&&(bestScore=score,bestEquality1=equality1,bestEdit=edit,bestEquality2=equality2)}diffs[pointer-1][1]!=bestEquality1&&(bestEquality1?diffs[pointer-1][1]=bestEquality1:(diffs.splice(pointer-1,1),pointer--),diffs[pointer][1]=bestEdit,bestEquality2?diffs[pointer+1][1]=bestEquality2:(diffs.splice(pointer+1,1),pointer--))}pointer++}})(diffs),pointer=1;for(;pointer<diffs.length;){if(-1==diffs[pointer-1][0]&&1==diffs[pointer][0]){var deletion=diffs[pointer-1][1],insertion=diffs[pointer][1],overlap_length1=diff_commonOverlap_(deletion,insertion),overlap_length2=diff_commonOverlap_(insertion,deletion);overlap_length1>=overlap_length2?(overlap_length1>=deletion.length/2||overlap_length1>=insertion.length/2)&&(diffs.splice(pointer,0,[0,insertion.substring(0,overlap_length1)]),diffs[pointer-1][1]=deletion.substring(0,deletion.length-overlap_length1),diffs[pointer+1][1]=insertion.substring(overlap_length1),pointer++):(overlap_length2>=deletion.length/2||overlap_length2>=insertion.length/2)&&(diffs.splice(pointer,0,[0,deletion.substring(0,overlap_length2)]),diffs[pointer-1][0]=1,diffs[pointer-1][1]=insertion.substring(0,insertion.length-overlap_length2),diffs[pointer+1][0]=-1,diffs[pointer+1][1]=deletion.substring(overlap_length2),pointer++),pointer++}pointer++}}(diffs),diffs}function diff_bisectSplit_(text1,text2,x,y){var text1a=text1.substring(0,x),text2a=text2.substring(0,y),text1b=text1.substring(x),text2b=text2.substring(y),diffs=diff_main(text1a,text2a),diffsb=diff_main(text1b,text2b);return diffs.concat(diffsb)}function diff_commonPrefix(text1,text2){if(!text1||!text2||text1.charAt(0)!==text2.charAt(0))return 0;for(var pointermin=0,pointermax=Math.min(text1.length,text2.length),pointermid=pointermax,pointerstart=0;pointermin<pointermid;)text1.substring(pointerstart,pointermid)==text2.substring(pointerstart,pointermid)?pointerstart=pointermin=pointermid:pointermax=pointermid,pointermid=Math.floor((pointermax-pointermin)/2+pointermin);return is_surrogate_pair_start(text1.charCodeAt(pointermid-1))&&pointermid--,pointermid}function diff_commonOverlap_(text1,text2){var text1_length=text1.length,text2_length=text2.length;if(0==text1_length||0==text2_length)return 0;text1_length>text2_length?text1=text1.substring(text1_length-text2_length):text1_length<text2_length&&(text2=text2.substring(0,text1_length));var text_length=Math.min(text1_length,text2_length);if(text1==text2)return text_length;for(var best=0,length=1;;){var pattern=text1.substring(text_length-length),found=text2.indexOf(pattern);if(-1==found)return best;length+=found,0!=found&&text1.substring(text_length-length)!=text2.substring(0,length)||(best=length,length++)}}function diff_commonSuffix(text1,text2){if(!text1||!text2||text1.slice(-1)!==text2.slice(-1))return 0;for(var pointermin=0,pointermax=Math.min(text1.length,text2.length),pointermid=pointermax,pointerend=0;pointermin<pointermid;)text1.substring(text1.length-pointermid,text1.length-pointerend)==text2.substring(text2.length-pointermid,text2.length-pointerend)?pointerend=pointermin=pointermid:pointermax=pointermid,pointermid=Math.floor((pointermax-pointermin)/2+pointermin);return is_surrogate_pair_end(text1.charCodeAt(text1.length-pointermid))&&pointermid--,pointermid}var nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,whitespaceRegex_=/\s/,linebreakRegex_=/[\r\n]/,blanklineEndRegex_=/\n\r?\n$/,blanklineStartRegex_=/^\r?\n\r?\n/;function diff_cleanupMerge(diffs,fix_unicode){diffs.push([0,""]);for(var commonlength,pointer=0,count_delete=0,count_insert=0,text_delete="",text_insert="";pointer<diffs.length;)if(pointer<diffs.length-1&&!diffs[pointer][1])diffs.splice(pointer,1);else switch(diffs[pointer][0]){case 1:count_insert++,text_insert+=diffs[pointer][1],pointer++;break;case-1:count_delete++,text_delete+=diffs[pointer][1],pointer++;break;case 0:var previous_equality=pointer-count_insert-count_delete-1;if(fix_unicode){if(previous_equality>=0&&ends_with_pair_start(diffs[previous_equality][1])){var stray=diffs[previous_equality][1].slice(-1);if(diffs[previous_equality][1]=diffs[previous_equality][1].slice(0,-1),text_delete=stray+text_delete,text_insert=stray+text_insert,!diffs[previous_equality][1]){diffs.splice(previous_equality,1),pointer--;var k=previous_equality-1;diffs[k]&&1===diffs[k][0]&&(count_insert++,text_insert=diffs[k][1]+text_insert,k--),diffs[k]&&-1===diffs[k][0]&&(count_delete++,text_delete=diffs[k][1]+text_delete,k--),previous_equality=k}}if(starts_with_pair_end(diffs[pointer][1])){stray=diffs[pointer][1].charAt(0);diffs[pointer][1]=diffs[pointer][1].slice(1),text_delete+=stray,text_insert+=stray}}if(pointer<diffs.length-1&&!diffs[pointer][1]){diffs.splice(pointer,1);break}if(text_delete.length>0||text_insert.length>0){text_delete.length>0&&text_insert.length>0&&(0!==(commonlength=diff_commonPrefix(text_insert,text_delete))&&(previous_equality>=0?diffs[previous_equality][1]+=text_insert.substring(0,commonlength):(diffs.splice(0,0,[0,text_insert.substring(0,commonlength)]),pointer++),text_insert=text_insert.substring(commonlength),text_delete=text_delete.substring(commonlength)),0!==(commonlength=diff_commonSuffix(text_insert,text_delete))&&(diffs[pointer][1]=text_insert.substring(text_insert.length-commonlength)+diffs[pointer][1],text_insert=text_insert.substring(0,text_insert.length-commonlength),text_delete=text_delete.substring(0,text_delete.length-commonlength)));var n=count_insert+count_delete;0===text_delete.length&&0===text_insert.length?(diffs.splice(pointer-n,n),pointer-=n):0===text_delete.length?(diffs.splice(pointer-n,n,[1,text_insert]),pointer=pointer-n+1):0===text_insert.length?(diffs.splice(pointer-n,n,[-1,text_delete]),pointer=pointer-n+1):(diffs.splice(pointer-n,n,[-1,text_delete],[1,text_insert]),pointer=pointer-n+2)}0!==pointer&&0===diffs[pointer-1][0]?(diffs[pointer-1][1]+=diffs[pointer][1],diffs.splice(pointer,1)):pointer++,count_insert=0,count_delete=0,text_delete="",text_insert=""}""===diffs[diffs.length-1][1]&&diffs.pop();var changes=!1;for(pointer=1;pointer<diffs.length-1;)0===diffs[pointer-1][0]&&0===diffs[pointer+1][0]&&(diffs[pointer][1].substring(diffs[pointer][1].length-diffs[pointer-1][1].length)===diffs[pointer-1][1]?(diffs[pointer][1]=diffs[pointer-1][1]+diffs[pointer][1].substring(0,diffs[pointer][1].length-diffs[pointer-1][1].length),diffs[pointer+1][1]=diffs[pointer-1][1]+diffs[pointer+1][1],diffs.splice(pointer-1,1),changes=!0):diffs[pointer][1].substring(0,diffs[pointer+1][1].length)==diffs[pointer+1][1]&&(diffs[pointer-1][1]+=diffs[pointer+1][1],diffs[pointer][1]=diffs[pointer][1].substring(diffs[pointer+1][1].length)+diffs[pointer+1][1],diffs.splice(pointer+1,1),changes=!0)),pointer++;changes&&diff_cleanupMerge(diffs,fix_unicode)}function is_surrogate_pair_start(charCode){return charCode>=55296&&charCode<=56319}function is_surrogate_pair_end(charCode){return charCode>=56320&&charCode<=57343}function starts_with_pair_end(str){return is_surrogate_pair_end(str.charCodeAt(0))}function ends_with_pair_start(str){return is_surrogate_pair_start(str.charCodeAt(str.length-1))}function make_edit_splice(before,oldMiddle,newMiddle,after){return ends_with_pair_start(before)||starts_with_pair_end(after)?null:function remove_empty_tuples(tuples){for(var ret=[],i=0;i<tuples.length;i++)tuples[i][1].length>0&&ret.push(tuples[i]);return ret}([[0,before],[-1,oldMiddle],[1,newMiddle],[0,after]])}function diff(text1,text2,cursor_pos,cleanup){return diff_main(text1,text2,cursor_pos,cleanup,!0)}diff.INSERT=1,diff.DELETE=-1,diff.EQUAL=0,module.exports=diff},"./node_modules/lodash-es/isEqual.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _baseIsEqual_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash-es/_baseIsEqual.js");const __WEBPACK_DEFAULT_EXPORT__=function isEqual(value,other){return(0,_baseIsEqual_js__WEBPACK_IMPORTED_MODULE_0__.A)(value,other)}},"./node_modules/lodash.clonedeep/index.js":(module,exports,__webpack_require__)=>{module=__webpack_require__.nmd(module);var argsTag="[object Arguments]",boolTag="[object Boolean]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",setTag="[object Set]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reFlags=/\w*$/,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,cloneableTags={};cloneableTags[argsTag]=cloneableTags["[object Array]"]=cloneableTags["[object ArrayBuffer]"]=cloneableTags["[object DataView]"]=cloneableTags["[object Boolean]"]=cloneableTags["[object Date]"]=cloneableTags["[object Float32Array]"]=cloneableTags["[object Float64Array]"]=cloneableTags["[object Int8Array]"]=cloneableTags["[object Int16Array]"]=cloneableTags["[object Int32Array]"]=cloneableTags[mapTag]=cloneableTags["[object Number]"]=cloneableTags["[object Object]"]=cloneableTags["[object RegExp]"]=cloneableTags[setTag]=cloneableTags["[object String]"]=cloneableTags["[object Symbol]"]=cloneableTags["[object Uint8Array]"]=cloneableTags["[object Uint8ClampedArray]"]=cloneableTags["[object Uint16Array]"]=cloneableTags["[object Uint32Array]"]=!0,cloneableTags["[object Error]"]=cloneableTags[funcTag]=cloneableTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports;function addMapEntry(map,pair){return map.set(pair[0],pair[1]),map}function addSetEntry(set,value){return set.add(value),set}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array?array.length:0;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=overArg(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function Stack(entries){this.__data__=new ListCache(entries)}function arrayLikeKeys(value,inherited){var result=isArray(value)||function isArguments(value){return function isArrayLikeObject(value){return function isObjectLike(value){return!!value&&"object"==typeof value}(value)&&isArrayLike(value)}(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}(value)?function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length,skipIndexes=!!length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isIndex(key,length))||result.push(key);return result}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||(object[key]=value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseClone(value,isDeep,isFull,customizer,key,object,stack){var result;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),void 0!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=function initCloneArray(array){var length=array.length,result=array.constructor(length);length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input);return result}(value),!isDeep)return function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));for(;++index<length;)array[index]=source[index];return array}(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var result=new buffer.constructor(buffer.length);return buffer.copy(result),result}(value,isDeep);if("[object Object]"==tag||tag==argsTag||isFunc&&!object){if(isHostObject(value))return object?value:{};if(result=function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:function baseCreate(proto){return isObject(proto)?objectCreate(proto):{}}(getPrototype(object))}(isFunc?{}:value),!isDeep)return function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}(value,function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case"[object ArrayBuffer]":return cloneArrayBuffer(object);case boolTag:case"[object Date]":return new Ctor(+object);case dataViewTag:return function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case"[object Uint8ClampedArray]":case uint16Tag:case uint32Tag:return function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}(object,isDeep);case mapTag:return function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),!0):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}(object,isDeep,cloneFunc);case"[object Number]":case"[object String]":return new Ctor(object);case"[object RegExp]":return function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}(object);case setTag:return function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),!0):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}(object,isDeep,cloneFunc);case"[object Symbol]":return function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}(object)}}(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;if(stack.set(value,result),!isArr)var props=isFull?function getAllKeys(object){return function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}(object,keys,getSymbols)}(value):keys(value);return function arrayEach(array,iteratee){for(var index=-1,length=array?array.length:0;++index<length&&!1!==iteratee(array[index],index,array););return array}(props||value,(function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,isDeep,isFull,customizer,key,value,stack))})),result}function baseIsNative(value){return!(!isObject(value)||function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}(value))&&(isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor).test(toSource(value))}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function copyObject(source,props,object,customizer){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;assignValue(object,key,void 0===newValue?source[key]:newValue)}return object}function getMapData(map,key){var data=map.__data__;return function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function getValue(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}},Hash.prototype.delete=function hashDelete(key){return this.has(key)&&delete this.__data__[key]},Hash.prototype.get=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function hashSet(key,value){return this.__data__[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[]},ListCache.prototype.delete=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),!0)},ListCache.prototype.get=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this},MapCache.prototype.clear=function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(key){return getMapData(this,key).delete(key)},MapCache.prototype.get=function mapCacheGet(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function mapCacheHas(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function mapCacheSet(key,value){return getMapData(this,key).set(key,value),this},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache},Stack.prototype.delete=function stackDelete(key){return this.__data__.delete(key)},Stack.prototype.get=function stackGet(key){return this.__data__.get(key)},Stack.prototype.has=function stackHas(key){return this.__data__.has(key)},Stack.prototype.set=function stackSet(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this;cache=this.__data__=new MapCache(pairs)}return cache.set(key,value),this};var getSymbols=nativeGetSymbols?overArg(nativeGetSymbols,Object):function stubArray(){return[]},getTag=function baseGetTag(value){return objectToString.call(value)};function isIndex(value,length){return!!(length=null==length?9007199254740991:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=objectToString.call(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):void 0;if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return"[object WeakMap]"}return result});var isArray=Array.isArray;function isArrayLike(value){return null!=value&&function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}(value.length)&&!isFunction(value)}var isBuffer=nativeIsBuffer||function stubFalse(){return!1};function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}(object)}module.exports=function cloneDeep(value){return baseClone(value,!0,!0)}},"./node_modules/lodash.isequal/index.js":(module,exports,__webpack_require__)=>{module=__webpack_require__.nmd(module);var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",mapTag="[object Map]",objectTag="[object Object]",setTag="[object Set]",dataViewTag="[object DataView]",reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags[argsTag]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags[mapTag]=typedArrayTags["[object Number]"]=typedArrayTags[objectTag]=typedArrayTags["[object RegExp]"]=typedArrayTags[setTag]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",nativeObjectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol?Symbol.toStringTag:void 0,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=function overArg(func,transform){return function(arg){return func(transform(arg))}}(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseGetTag(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]);return result}(value):function objectToString(value){return nativeObjectToString.call(value)}(value)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other),objIsObj=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othIsObj=(othTag=othTag==argsTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case"[object ArrayBuffer]":return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case"[object Date]":case"[object Number]":return eq(+object,+other);case"[object Error]":return object.name==other.name&&object.message==other.message;case"[object RegExp]":case"[object String]":return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=1&bitmask;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag)return!1;return stack||(stack=new Stack),function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return!1;var index=objLength;for(;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);var skipCtor=isPartial;for(;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack)}(value,other,bitmask,customizer,baseIsEqual,stack))}function baseIsNative(value){return!(!isObject(value)||function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function baseKeys(object){if(!function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(key=othIndex,!seen.has(key)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex);var key}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function getAllKeys(object){return function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}(object,keys,getSymbols)}function getMapData(map,key){var data=map.__data__;return function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function getValue(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function mapCacheGet(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function mapCacheHas(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function setCacheAdd(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function setCacheHas(value){return this.__data__.has(value)},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function stackGet(key){return this.__data__.get(key)},Stack.prototype.has=function stackHas(key){return this.__data__.has(key)},Stack.prototype.set=function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:function stubArray(){return[]},getTag=baseGetTag;function isIndex(value,length){return!!(length=null==length?9007199254740991:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return"[object WeakMap]"}return result});var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray;var isBuffer=nativeIsBuffer||function stubFalse(){return!1};function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return"[object Function]"==tag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isTypedArray=nodeIsTypedArray?function baseUnary(func){return function(value){return func(value)}}(nodeIsTypedArray):function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};function keys(object){return function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}(object)?arrayLikeKeys(object):baseKeys(object)}module.exports=function isEqual(value,other){return baseIsEqual(value,other)}},"./node_modules/quill-delta/dist/AttributeMap.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const cloneDeep=__webpack_require__("./node_modules/lodash.clonedeep/index.js"),isEqual=__webpack_require__("./node_modules/lodash.isequal/index.js");var AttributeMap;!function(AttributeMap){AttributeMap.compose=function compose(a={},b={},keepNull=!1){"object"!=typeof a&&(a={}),"object"!=typeof b&&(b={});let attributes=cloneDeep(b);keepNull||(attributes=Object.keys(attributes).reduce(((copy,key)=>(null!=attributes[key]&&(copy[key]=attributes[key]),copy)),{}));for(const key in a)void 0!==a[key]&&void 0===b[key]&&(attributes[key]=a[key]);return Object.keys(attributes).length>0?attributes:void 0},AttributeMap.diff=function diff(a={},b={}){"object"!=typeof a&&(a={}),"object"!=typeof b&&(b={});const attributes=Object.keys(a).concat(Object.keys(b)).reduce(((attrs,key)=>(isEqual(a[key],b[key])||(attrs[key]=void 0===b[key]?null:b[key]),attrs)),{});return Object.keys(attributes).length>0?attributes:void 0},AttributeMap.invert=function invert(attr={},base={}){attr=attr||{};const baseInverted=Object.keys(base).reduce(((memo,key)=>(base[key]!==attr[key]&&void 0!==attr[key]&&(memo[key]=base[key]),memo)),{});return Object.keys(attr).reduce(((memo,key)=>(attr[key]!==base[key]&&void 0===base[key]&&(memo[key]=null),memo)),baseInverted)},AttributeMap.transform=function transform(a,b,priority=!1){if("object"!=typeof a)return b;if("object"!=typeof b)return;if(!priority)return b;const attributes=Object.keys(b).reduce(((attrs,key)=>(void 0===a[key]&&(attrs[key]=b[key]),attrs)),{});return Object.keys(attributes).length>0?attributes:void 0}}(AttributeMap||(AttributeMap={})),exports.default=AttributeMap},"./node_modules/quill-delta/dist/Delta.js":(module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AttributeMap=exports.OpIterator=exports.Op=void 0;const diff=__webpack_require__("./node_modules/fast-diff/diff.js"),cloneDeep=__webpack_require__("./node_modules/lodash.clonedeep/index.js"),isEqual=__webpack_require__("./node_modules/lodash.isequal/index.js"),AttributeMap_1=__webpack_require__("./node_modules/quill-delta/dist/AttributeMap.js");exports.AttributeMap=AttributeMap_1.default;const Op_1=__webpack_require__("./node_modules/quill-delta/dist/Op.js");exports.Op=Op_1.default;const OpIterator_1=__webpack_require__("./node_modules/quill-delta/dist/OpIterator.js");exports.OpIterator=OpIterator_1.default;const NULL_CHARACTER=String.fromCharCode(0),getEmbedTypeAndData=(a,b)=>{if("object"!=typeof a||null===a)throw new Error("cannot retain a "+typeof a);if("object"!=typeof b||null===b)throw new Error("cannot retain a "+typeof b);const embedType=Object.keys(a)[0];if(!embedType||embedType!==Object.keys(b)[0])throw new Error(`embed types not matched: ${embedType} != ${Object.keys(b)[0]}`);return[embedType,a[embedType],b[embedType]]};class Delta{constructor(ops){Array.isArray(ops)?this.ops=ops:null!=ops&&Array.isArray(ops.ops)?this.ops=ops.ops:this.ops=[]}static registerEmbed(embedType,handler){this.handlers[embedType]=handler}static unregisterEmbed(embedType){delete this.handlers[embedType]}static getHandler(embedType){const handler=this.handlers[embedType];if(!handler)throw new Error(`no handlers for embed type "${embedType}"`);return handler}insert(arg,attributes){const newOp={};return"string"==typeof arg&&0===arg.length?this:(newOp.insert=arg,null!=attributes&&"object"==typeof attributes&&Object.keys(attributes).length>0&&(newOp.attributes=attributes),this.push(newOp))}delete(length){return length<=0?this:this.push({delete:length})}retain(length,attributes){if("number"==typeof length&&length<=0)return this;const newOp={retain:length};return null!=attributes&&"object"==typeof attributes&&Object.keys(attributes).length>0&&(newOp.attributes=attributes),this.push(newOp)}push(newOp){let index=this.ops.length,lastOp=this.ops[index-1];if(newOp=cloneDeep(newOp),"object"==typeof lastOp){if("number"==typeof newOp.delete&&"number"==typeof lastOp.delete)return this.ops[index-1]={delete:lastOp.delete+newOp.delete},this;if("number"==typeof lastOp.delete&&null!=newOp.insert&&(index-=1,lastOp=this.ops[index-1],"object"!=typeof lastOp))return this.ops.unshift(newOp),this;if(isEqual(newOp.attributes,lastOp.attributes)){if("string"==typeof newOp.insert&&"string"==typeof lastOp.insert)return this.ops[index-1]={insert:lastOp.insert+newOp.insert},"object"==typeof newOp.attributes&&(this.ops[index-1].attributes=newOp.attributes),this;if("number"==typeof newOp.retain&&"number"==typeof lastOp.retain)return this.ops[index-1]={retain:lastOp.retain+newOp.retain},"object"==typeof newOp.attributes&&(this.ops[index-1].attributes=newOp.attributes),this}}return index===this.ops.length?this.ops.push(newOp):this.ops.splice(index,0,newOp),this}chop(){const lastOp=this.ops[this.ops.length-1];return lastOp&&"number"==typeof lastOp.retain&&!lastOp.attributes&&this.ops.pop(),this}filter(predicate){return this.ops.filter(predicate)}forEach(predicate){this.ops.forEach(predicate)}map(predicate){return this.ops.map(predicate)}partition(predicate){const passed=[],failed=[];return this.forEach((op=>{(predicate(op)?passed:failed).push(op)})),[passed,failed]}reduce(predicate,initialValue){return this.ops.reduce(predicate,initialValue)}changeLength(){return this.reduce(((length,elem)=>elem.insert?length+Op_1.default.length(elem):elem.delete?length-elem.delete:length),0)}length(){return this.reduce(((length,elem)=>length+Op_1.default.length(elem)),0)}slice(start=0,end=1/0){const ops=[],iter=new OpIterator_1.default(this.ops);let index=0;for(;index<end&&iter.hasNext();){let nextOp;index<start?nextOp=iter.next(start-index):(nextOp=iter.next(end-index),ops.push(nextOp)),index+=Op_1.default.length(nextOp)}return new Delta(ops)}compose(other){const thisIter=new OpIterator_1.default(this.ops),otherIter=new OpIterator_1.default(other.ops),ops=[],firstOther=otherIter.peek();if(null!=firstOther&&"number"==typeof firstOther.retain&&null==firstOther.attributes){let firstLeft=firstOther.retain;for(;"insert"===thisIter.peekType()&&thisIter.peekLength()<=firstLeft;)firstLeft-=thisIter.peekLength(),ops.push(thisIter.next());firstOther.retain-firstLeft>0&&otherIter.next(firstOther.retain-firstLeft)}const delta=new Delta(ops);for(;thisIter.hasNext()||otherIter.hasNext();)if("insert"===otherIter.peekType())delta.push(otherIter.next());else if("delete"===thisIter.peekType())delta.push(thisIter.next());else{const length=Math.min(thisIter.peekLength(),otherIter.peekLength()),thisOp=thisIter.next(length),otherOp=otherIter.next(length);if(otherOp.retain){const newOp={};if("number"==typeof thisOp.retain)newOp.retain="number"==typeof otherOp.retain?length:otherOp.retain;else if("number"==typeof otherOp.retain)null==thisOp.retain?newOp.insert=thisOp.insert:newOp.retain=thisOp.retain;else{const action=null==thisOp.retain?"insert":"retain",[embedType,thisData,otherData]=getEmbedTypeAndData(thisOp[action],otherOp.retain),handler=Delta.getHandler(embedType);newOp[action]={[embedType]:handler.compose(thisData,otherData,"retain"===action)}}const attributes=AttributeMap_1.default.compose(thisOp.attributes,otherOp.attributes,"number"==typeof thisOp.retain);if(attributes&&(newOp.attributes=attributes),delta.push(newOp),!otherIter.hasNext()&&isEqual(delta.ops[delta.ops.length-1],newOp)){const rest=new Delta(thisIter.rest());return delta.concat(rest).chop()}}else"number"==typeof otherOp.delete&&("number"==typeof thisOp.retain||"object"==typeof thisOp.retain&&null!==thisOp.retain)&&delta.push(otherOp)}return delta.chop()}concat(other){const delta=new Delta(this.ops.slice());return other.ops.length>0&&(delta.push(other.ops[0]),delta.ops=delta.ops.concat(other.ops.slice(1))),delta}diff(other,cursor){if(this.ops===other.ops)return new Delta;const strings=[this,other].map((delta=>delta.map((op=>{if(null!=op.insert)return"string"==typeof op.insert?op.insert:NULL_CHARACTER;throw new Error("diff() called "+(delta===other?"on":"with")+" non-document")})).join(""))),retDelta=new Delta,diffResult=diff(strings[0],strings[1],cursor,!0),thisIter=new OpIterator_1.default(this.ops),otherIter=new OpIterator_1.default(other.ops);return diffResult.forEach((component=>{let length=component[1].length;for(;length>0;){let opLength=0;switch(component[0]){case diff.INSERT:opLength=Math.min(otherIter.peekLength(),length),retDelta.push(otherIter.next(opLength));break;case diff.DELETE:opLength=Math.min(length,thisIter.peekLength()),thisIter.next(opLength),retDelta.delete(opLength);break;case diff.EQUAL:opLength=Math.min(thisIter.peekLength(),otherIter.peekLength(),length);const thisOp=thisIter.next(opLength),otherOp=otherIter.next(opLength);isEqual(thisOp.insert,otherOp.insert)?retDelta.retain(opLength,AttributeMap_1.default.diff(thisOp.attributes,otherOp.attributes)):retDelta.push(otherOp).delete(opLength)}length-=opLength}})),retDelta.chop()}eachLine(predicate,newline="\n"){const iter=new OpIterator_1.default(this.ops);let line=new Delta,i=0;for(;iter.hasNext();){if("insert"!==iter.peekType())return;const thisOp=iter.peek(),start=Op_1.default.length(thisOp)-iter.peekLength(),index="string"==typeof thisOp.insert?thisOp.insert.indexOf(newline,start)-start:-1;if(index<0)line.push(iter.next());else if(index>0)line.push(iter.next(index));else{if(!1===predicate(line,iter.next(1).attributes||{},i))return;i+=1,line=new Delta}}line.length()>0&&predicate(line,{},i)}invert(base){const inverted=new Delta;return this.reduce(((baseIndex,op)=>{if(op.insert)inverted.delete(Op_1.default.length(op));else{if("number"==typeof op.retain&&null==op.attributes)return inverted.retain(op.retain),baseIndex+op.retain;if(op.delete||"number"==typeof op.retain){const length=op.delete||op.retain;return base.slice(baseIndex,baseIndex+length).forEach((baseOp=>{op.delete?inverted.push(baseOp):op.retain&&op.attributes&&inverted.retain(Op_1.default.length(baseOp),AttributeMap_1.default.invert(op.attributes,baseOp.attributes))})),baseIndex+length}if("object"==typeof op.retain&&null!==op.retain){const slice=base.slice(baseIndex,baseIndex+1),baseOp=new OpIterator_1.default(slice.ops).next(),[embedType,opData,baseOpData]=getEmbedTypeAndData(op.retain,baseOp.insert),handler=Delta.getHandler(embedType);return inverted.retain({[embedType]:handler.invert(opData,baseOpData)},AttributeMap_1.default.invert(op.attributes,baseOp.attributes)),baseIndex+1}}return baseIndex}),0),inverted.chop()}transform(arg,priority=!1){if(priority=!!priority,"number"==typeof arg)return this.transformPosition(arg,priority);const other=arg,thisIter=new OpIterator_1.default(this.ops),otherIter=new OpIterator_1.default(other.ops),delta=new Delta;for(;thisIter.hasNext()||otherIter.hasNext();)if("insert"!==thisIter.peekType()||!priority&&"insert"===otherIter.peekType())if("insert"===otherIter.peekType())delta.push(otherIter.next());else{const length=Math.min(thisIter.peekLength(),otherIter.peekLength()),thisOp=thisIter.next(length),otherOp=otherIter.next(length);if(thisOp.delete)continue;if(otherOp.delete)delta.push(otherOp);else{const thisData=thisOp.retain,otherData=otherOp.retain;let transformedData="object"==typeof otherData&&null!==otherData?otherData:length;if("object"==typeof thisData&&null!==thisData&&"object"==typeof otherData&&null!==otherData){const embedType=Object.keys(thisData)[0];if(embedType===Object.keys(otherData)[0]){const handler=Delta.getHandler(embedType);handler&&(transformedData={[embedType]:handler.transform(thisData[embedType],otherData[embedType],priority)})}}delta.retain(transformedData,AttributeMap_1.default.transform(thisOp.attributes,otherOp.attributes,priority))}}else delta.retain(Op_1.default.length(thisIter.next()));return delta.chop()}transformPosition(index,priority=!1){priority=!!priority;const thisIter=new OpIterator_1.default(this.ops);let offset=0;for(;thisIter.hasNext()&&offset<=index;){const length=thisIter.peekLength(),nextType=thisIter.peekType();thisIter.next(),"delete"!==nextType?("insert"===nextType&&(offset<index||!priority)&&(index+=length),offset+=length):index-=Math.min(length,index-offset)}return index}}Delta.Op=Op_1.default,Delta.OpIterator=OpIterator_1.default,Delta.AttributeMap=AttributeMap_1.default,Delta.handlers={},exports.default=Delta,module.exports=Delta,module.exports.default=Delta},"./node_modules/quill-delta/dist/Op.js":(__unused_webpack_module,exports)=>{"use strict";var Op;Object.defineProperty(exports,"__esModule",{value:!0}),function(Op){Op.length=function length(op){return"number"==typeof op.delete?op.delete:"number"==typeof op.retain?op.retain:"object"==typeof op.retain&&null!==op.retain?1:"string"==typeof op.insert?op.insert.length:1}}(Op||(Op={})),exports.default=Op},"./node_modules/quill-delta/dist/OpIterator.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Op_1=__webpack_require__("./node_modules/quill-delta/dist/Op.js");exports.default=class Iterator{constructor(ops){this.ops=ops,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(length){length||(length=1/0);const nextOp=this.ops[this.index];if(nextOp){const offset=this.offset,opLength=Op_1.default.length(nextOp);if(length>=opLength-offset?(length=opLength-offset,this.index+=1,this.offset=0):this.offset+=length,"number"==typeof nextOp.delete)return{delete:length};{const retOp={};return nextOp.attributes&&(retOp.attributes=nextOp.attributes),"number"==typeof nextOp.retain?retOp.retain=length:"object"==typeof nextOp.retain&&null!==nextOp.retain?retOp.retain=nextOp.retain:"string"==typeof nextOp.insert?retOp.insert=nextOp.insert.substr(offset,length):retOp.insert=nextOp.insert,retOp}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?Op_1.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const op=this.ops[this.index];return op?"number"==typeof op.delete?"delete":"number"==typeof op.retain||"object"==typeof op.retain&&null!==op.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const offset=this.offset,index=this.index,next=this.next(),rest=this.ops.slice(this.index);return this.offset=offset,this.index=index,[next].concat(rest)}}return[]}}},"./node_modules/quill-mention/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{PX:()=>Mention,Yj:()=>MentionBlot});var quill=__webpack_require__("./node_modules/quill/quill.js");const Embed=quill.Ay.import("blots/embed");class MentionEvent extends Event{constructor(name,options){super(name,options),this.value={},this.event=new Event(name)}}class MentionBlot extends Embed{constructor(scroll,node){super(scroll,node),this.mounted=!1}static create(data){const node=super.create();if(!function isMentionBlotData(data){return"object"==typeof data&&null!==data&&"value"in data&&"string"==typeof data.value&&"denotationChar"in data&&"string"==typeof data.denotationChar}(data)||node instanceof HTMLElement==!1)return node;const denotationChar=document.createElement("span");if(denotationChar.className="ql-mention-denotation-char",denotationChar.innerText=data.denotationChar,node.appendChild(denotationChar),"function"==typeof this.render)node.appendChild(this.render(data));else{const mentionValue=document.createElement("span");mentionValue.className="ql-mention-value",mentionValue.innerText=data.value,node.appendChild(mentionValue)}return MentionBlot.setDataValues(node,data)}static setDataValues(element,data){const domNode=element;return Object.keys(data).forEach((key=>{domNode.dataset[key]=data[key]})),domNode}static value(domNode){return domNode.dataset}attach(){super.attach(),this.mounted||(this.mounted=!0,this.clickHandler=this.getClickHandler(),this.hoverHandler=this.getHoverHandler(),this.domNode.addEventListener("click",this.clickHandler,!1),this.domNode.addEventListener("mouseenter",this.hoverHandler,!1))}detach(){super.detach(),this.mounted=!1,this.clickHandler&&(this.domNode.removeEventListener("click",this.clickHandler),this.clickHandler=void 0)}getClickHandler(){return e=>{const event=this.buildEvent("mention-clicked",e);window.dispatchEvent(event),e.preventDefault()}}getHoverHandler(){return e=>{const event=this.buildEvent("mention-hovered",e);window.dispatchEvent(event),e.preventDefault()}}buildEvent(name,e){const event=new MentionEvent(name,{bubbles:!0,cancelable:!0});return event.value=Object.assign({},this.domNode.dataset),event.event=e,event}}MentionBlot.blotName="mention",MentionBlot.tagName="span",MentionBlot.className="mention";const Keys_TAB="Tab",Keys_ENTER="Enter",Keys_ESCAPE="Escape",Keys_UP="ArrowUp",Keys_DOWN="ArrowDown";function attachDataValues(element,data,dataAttributes){const mention=element;return Object.keys(data).forEach((key=>{dataAttributes.indexOf(key)>-1?mention.dataset[key]=data[key]:delete mention.dataset[key]})),mention}function setInnerContent(element,value){null!==value&&("object"==typeof value?element.appendChild(value):element.innerText=value)}const Module=quill.Ay.import("core/module");class Mention extends Module{constructor(quill,options){super(quill,options),this.isOpen=!1,this.itemIndex=0,this.values=[],this.suspendMouseEnter=!1,Array.isArray(options?.dataAttributes)&&(this.options.dataAttributes=this.options.dataAttributes?this.options.dataAttributes.concat(options.dataAttributes):options.dataAttributes);for(let o in this.options){const key=o,value=this.options[key];"function"==typeof value&&(this.options[key]=value.bind(this))}this.mentionContainer=document.createElement("div"),this.mentionContainer.className=this.options.mentionContainerClass?this.options.mentionContainerClass:"",this.mentionContainer.style.cssText="display: none; position: absolute;",this.mentionContainer.onmousemove=this.onContainerMouseMove.bind(this),this.options.fixMentionsToQuill&&(this.mentionContainer.style.width="auto"),this.mentionList=document.createElement("ul"),this.mentionList.id="quill-mention-list",quill.root.setAttribute("aria-owns","quill-mention-list"),this.mentionList.className=this.options.mentionListClass?this.options.mentionListClass:"",this.mentionContainer.appendChild(this.mentionList),quill.on("text-change",this.onTextChange.bind(this)),quill.on("selection-change",this.onSelectionChange.bind(this)),quill.container.addEventListener("paste",(()=>{setTimeout((()=>{const range=quill.getSelection();this.onSelectionChange(range)}))})),quill.keyboard.addBinding({key:Keys_TAB},this.selectHandler.bind(this)),quill.keyboard.bindings[Keys_TAB].unshift(quill.keyboard.bindings[Keys_TAB].pop());for(let selectKey of this.options.selectKeys??[])quill.keyboard.addBinding({key:selectKey},this.selectHandler.bind(this));quill.keyboard.bindings[Keys_ENTER].unshift(quill.keyboard.bindings[Keys_ENTER].pop()),quill.keyboard.addBinding({key:Keys_ESCAPE},this.escapeHandler.bind(this)),quill.keyboard.addBinding({key:Keys_UP},this.upHandler.bind(this)),quill.keyboard.addBinding({key:Keys_DOWN},this.downHandler.bind(this))}selectHandler(){return!(this.isOpen&&!this.existingSourceExecutionToken)||(this.selectItem(),!1)}escapeHandler(){return!this.isOpen||(this.existingSourceExecutionToken&&(this.existingSourceExecutionToken.abandoned=!0),this.hideMentionList(),!1)}upHandler(){return!(this.isOpen&&!this.existingSourceExecutionToken)||(this.prevItem(),!1)}downHandler(){return!(this.isOpen&&!this.existingSourceExecutionToken)||(this.nextItem(),!1)}showMentionList(){"fixed"===this.options.positioningStrategy?document.body.appendChild(this.mentionContainer):this.quill.container.appendChild(this.mentionContainer),this.mentionContainer.style.visibility="hidden",this.mentionContainer.style.display="",this.mentionContainer.scrollTop=0,this.setMentionContainerPosition(),this.setIsOpen(!0)}hideMentionList(){this.options.onBeforeClose&&this.options.onBeforeClose(),this.mentionContainer.style.display="none",this.mentionContainer.remove(),this.setIsOpen(!1),this.quill.root.removeAttribute("aria-activedescendant")}highlightItem(scrollItemInView=!0){for(let i=0;i<this.mentionList.childNodes.length;i+=1){const element=this.mentionList.childNodes[i];element instanceof HTMLElement&&element.classList.remove("selected")}const elementAtItemIndex=this.mentionList.childNodes[this.itemIndex];if(-1!==this.itemIndex&&"true"!==elementAtItemIndex.dataset.disabled&&(elementAtItemIndex.classList.add("selected"),this.quill.root.setAttribute("aria-activedescendant",elementAtItemIndex.id),scrollItemInView)){const itemHeight=elementAtItemIndex.offsetHeight,itemPos=elementAtItemIndex.offsetTop,containerTop=this.mentionContainer.scrollTop,containerBottom=containerTop+this.mentionContainer.offsetHeight;itemPos<containerTop?this.mentionContainer.scrollTop=itemPos:itemPos>containerBottom-itemHeight&&(this.mentionContainer.scrollTop+=itemPos-containerBottom+itemHeight)}}onContainerMouseMove(){this.suspendMouseEnter=!1}selectItem(){if(-1===this.itemIndex)return;const data=this.mentionList.childNodes[this.itemIndex].dataset;data.disabled||(this.options.onSelect?.(data,((asyncData,programmaticInsert=!1,overriddenOptions={})=>this.insertItem(asyncData,programmaticInsert,overriddenOptions))),this.hideMentionList())}insertItem(data,programmaticInsert,overriddenOptions={}){const render=data;if(null===render||void 0===this.mentionCharPos||void 0===this.cursorPos)return;const options={...this.options,...overriddenOptions};let insertAtPos;options.showDenotationChar||(render.denotationChar=""),programmaticInsert?insertAtPos=this.cursorPos:(insertAtPos=this.mentionCharPos,this.quill.deleteText(this.mentionCharPos,this.cursorPos-this.mentionCharPos,quill.Ay.sources.USER));const delta=this.quill.insertEmbed(insertAtPos,options.blotName??Mention.DEFAULTS.blotName,render,quill.Ay.sources.USER);return options.spaceAfterInsert?(this.quill.insertText(insertAtPos+1," ",quill.Ay.sources.USER),this.quill.setSelection(insertAtPos+2,quill.Ay.sources.USER)):this.quill.setSelection(insertAtPos+1,quill.Ay.sources.USER),this.hideMentionList(),delta}onItemMouseEnter(e){if(this.suspendMouseEnter||e.target instanceof HTMLElement==!1)return;const index=Number(e.target?.dataset.index);Number.isNaN(index)||index===this.itemIndex||(this.itemIndex=index,this.highlightItem(!1))}onDisabledItemMouseEnter(){this.suspendMouseEnter||(this.itemIndex=-1,this.highlightItem(!1))}onItemClick(e){e.preventDefault(),e.stopImmediatePropagation(),e.currentTarget instanceof HTMLElement!=!1&&(this.itemIndex=e.currentTarget?.dataset.index?Number.parseInt(e.currentTarget.dataset.index):-1,this.highlightItem(),this.selectItem())}onItemMouseDown(e){e.preventDefault(),e.stopImmediatePropagation()}renderLoading(){const renderedLoading=this.options.renderLoading?.()??void 0;if(void 0===renderedLoading)return;if(this.mentionContainer.getElementsByClassName("ql-mention-loading").length>0)return void this.showMentionList();this.mentionList.innerHTML="";const loadingDiv=document.createElement("div");loadingDiv.className="ql-mention-loading",setInnerContent(loadingDiv,renderedLoading),this.mentionContainer.append(loadingDiv),this.showMentionList()}removeLoading(){const loadingDiv=this.mentionContainer.getElementsByClassName("ql-mention-loading");loadingDiv.length>0&&loadingDiv[0].remove()}renderList(mentionChar,data,searchTerm){if(data&&data.length>0){this.removeLoading(),this.values=data,this.mentionList.innerText="";let initialSelection=-1;for(let i=0;i<data.length;i+=1){const li=document.createElement("li");li.id="quill-mention-item-"+i,li.className=this.options.listItemClass?this.options.listItemClass:"",data[i].disabled?(li.className+=" disabled",li.setAttribute("aria-hidden","true")):-1===initialSelection&&(initialSelection=i),li.dataset.index=i.toString();setInnerContent(li,this.options.renderItem(data[i],searchTerm)),data[i].disabled?li.onmouseenter=this.onDisabledItemMouseEnter.bind(this):(li.onmouseenter=this.onItemMouseEnter.bind(this),li.onmouseup=this.onItemClick.bind(this),li.onmousedown=this.onItemMouseDown.bind(this)),li.dataset.denotationChar=mentionChar,this.mentionList.appendChild(attachDataValues(li,data[i],this.options.dataAttributes))}this.itemIndex=initialSelection,this.highlightItem(),this.showMentionList()}else this.hideMentionList()}nextItem(){let newIndex,disabled,increment=0;do{if(increment++,newIndex=(this.itemIndex+increment)%this.values.length,disabled="true"===this.mentionList.childNodes[newIndex].dataset.disabled,increment===this.values.length+1){newIndex=-1;break}}while(disabled);this.itemIndex=newIndex,this.suspendMouseEnter=!0,this.highlightItem()}prevItem(){let newIndex,disabled,decrement=0;do{if(decrement++,newIndex=(this.itemIndex+this.values.length-decrement)%this.values.length,disabled="true"===this.mentionList.childNodes[newIndex].dataset.disabled,decrement===this.values.length+1){newIndex=-1;break}}while(disabled);this.itemIndex=newIndex,this.suspendMouseEnter=!0,this.highlightItem()}containerBottomIsNotVisible(topPos,containerPos){return topPos+this.mentionContainer.offsetHeight+containerPos.top>window.scrollY+window.innerHeight}containerRightIsNotVisible(leftPos,containerPos){if(this.options.fixMentionsToQuill)return!1;return leftPos+this.mentionContainer.offsetWidth+containerPos.left>window.scrollX+document.documentElement.clientWidth}setIsOpen(isOpen){this.isOpen!==isOpen&&(isOpen?this.options.onOpen?.():this.options.onClose?.(),this.isOpen=isOpen)}setMentionContainerPosition(){"fixed"===this.options.positioningStrategy?this.setMentionContainerPosition_Fixed():this.setMentionContainerPosition_Normal()}setMentionContainerPosition_Normal(){if(void 0===this.mentionCharPos)return;const containerPos=this.quill.container.getBoundingClientRect(),mentionCharPos=this.quill.getBounds(this.mentionCharPos);if(null===mentionCharPos)return;const containerHeight=this.mentionContainer.offsetHeight;let topPos=this.options.offsetTop,leftPos=this.options.offsetLeft;if(this.options.fixMentionsToQuill){const rightPos=0;this.mentionContainer.style.right=`${rightPos}px`}else leftPos+=mentionCharPos.left;if(this.containerRightIsNotVisible(leftPos,containerPos)){const containerWidth=this.mentionContainer.offsetWidth+this.options.offsetLeft;leftPos=containerPos.width-containerWidth}if("top"===this.options.defaultMenuOrientation){if(topPos=this.options.fixMentionsToQuill?-1*(containerHeight+this.options.offsetTop):mentionCharPos.top-(containerHeight+this.options.offsetTop),topPos+containerPos.top<=0){let overMentionCharPos=this.options.offsetTop;this.options.fixMentionsToQuill?overMentionCharPos+=containerPos.height:overMentionCharPos+=mentionCharPos.bottom,topPos=overMentionCharPos}}else if(this.options.fixMentionsToQuill?topPos+=containerPos.height:topPos+=mentionCharPos.bottom,this.containerBottomIsNotVisible(topPos,containerPos)){let overMentionCharPos=-1*this.options.offsetTop;this.options.fixMentionsToQuill||(overMentionCharPos+=mentionCharPos.top),topPos=overMentionCharPos-containerHeight}topPos>=0?this.options.mentionContainerClass?.split(" ").forEach((className=>{this.mentionContainer.classList.add(`${className}-bottom`),this.mentionContainer.classList.remove(`${className}-top`)})):this.options.mentionContainerClass?.split(" ").forEach((className=>{this.mentionContainer.classList.add(`${className}-top`),this.mentionContainer.classList.remove(`${className}-bottom`)})),this.mentionContainer.style.top=`${topPos}px`,this.mentionContainer.style.left=`${leftPos}px`,this.mentionContainer.style.visibility="visible"}setMentionContainerPosition_Fixed(){if(void 0===this.mentionCharPos)return;this.mentionContainer.style.position="fixed",this.mentionContainer.style.height="";const containerPos=this.quill.container.getBoundingClientRect(),mentionCharPos=this.quill.getBounds(this.mentionCharPos);if(null===mentionCharPos)return;const mentionCharPosAbsolute={right:containerPos.right-mentionCharPos.right,left:containerPos.left+mentionCharPos.left,top:containerPos.top+mentionCharPos.top,width:0,height:mentionCharPos.height},relativeToPos=this.options.fixMentionsToQuill?containerPos:mentionCharPosAbsolute;let topPos=this.options.offsetTop,leftPos=this.options.offsetLeft;if(this.options.fixMentionsToQuill){const rightPos=relativeToPos.right;this.mentionContainer.style.right=`${rightPos}px`}else leftPos+=relativeToPos.left,leftPos+this.mentionContainer.offsetWidth>document.documentElement.clientWidth&&(leftPos-=leftPos+this.mentionContainer.offsetWidth-document.documentElement.clientWidth);const availableSpaceTop=relativeToPos.top,availableSpaceBottom=document.documentElement.clientHeight-(relativeToPos.top+relativeToPos.height),fitsBottom=this.mentionContainer.offsetHeight<=availableSpaceBottom,fitsTop=this.mentionContainer.offsetHeight<=availableSpaceTop;let placement;placement="top"===this.options.defaultMenuOrientation&&fitsTop?"top":"bottom"===this.options.defaultMenuOrientation&&fitsBottom||availableSpaceBottom>availableSpaceTop?"bottom":"top","bottom"===placement?(topPos=relativeToPos.top+relativeToPos.height,fitsBottom||(this.mentionContainer.style.height=availableSpaceBottom-3+"px"),this.options.mentionContainerClass?.split(" ").forEach((className=>{this.mentionContainer.classList.add(`${className}-bottom`),this.mentionContainer.classList.remove(`${className}-top`)}))):(topPos=relativeToPos.top-this.mentionContainer.offsetHeight,fitsTop||(this.mentionContainer.style.height=availableSpaceTop-3+"px",topPos=3),this.options.mentionContainerClass?.split(" ").forEach((className=>{this.mentionContainer.classList.add(`${className}-top`),this.mentionContainer.classList.remove(`${className}-bottom`)}))),this.mentionContainer.style.top=`${topPos}px`,this.mentionContainer.style.left=`${leftPos}px`,this.mentionContainer.style.visibility="visible"}getTextBeforeCursor(){const startPos=Math.max(0,(this.cursorPos??0)-this.options.maxChars);return this.quill.getText(startPos,(this.cursorPos??0)-startPos)}onSomethingChange(){const range=this.quill.getSelection();if(null==range)return;this.cursorPos=range.index;const textBeforeCursor=this.getTextBeforeCursor(),textOffset=Math.max(0,this.cursorPos-this.options.maxChars),textPrefix=textOffset?this.quill.getText(textOffset-1,textOffset):"",{mentionChar,mentionCharIndex}=function getMentionCharIndex(text,mentionDenotationChars,isolateChar,allowInlineMentionChar){return mentionDenotationChars.reduce(((prev,mentionChar)=>{let mentionCharIndex;if(isolateChar&&allowInlineMentionChar){const regex=new RegExp(`^${mentionChar}|\\s${mentionChar}`,"g"),lastMatch=(text.match(regex)||[]).pop();if(!lastMatch)return{mentionChar:prev.mentionChar,mentionCharIndex:prev.mentionCharIndex};mentionCharIndex=lastMatch!==mentionChar?text.lastIndexOf(lastMatch)+lastMatch.length-mentionChar.length:0}else mentionCharIndex=text.lastIndexOf(mentionChar);return mentionCharIndex>prev.mentionCharIndex?{mentionChar,mentionCharIndex}:{mentionChar:prev.mentionChar,mentionCharIndex:prev.mentionCharIndex}}),{mentionChar:null,mentionCharIndex:-1})}(textBeforeCursor,this.options.mentionDenotationChars,this.options.isolateCharacter,this.options.allowInlineMentionChar);if(null!==mentionChar&&function hasValidMentionCharIndex(mentionCharIndex,text,isolateChar,textPrefix){if(-1===mentionCharIndex)return!1;if(!isolateChar)return!0;const mentionPrefix=mentionCharIndex?text[mentionCharIndex-1]:textPrefix;return!mentionPrefix||!!mentionPrefix.match(/\s/)}(mentionCharIndex,textBeforeCursor,this.options.isolateCharacter,textPrefix)){const mentionCharPos=this.cursorPos-(textBeforeCursor.length-mentionCharIndex);this.mentionCharPos=mentionCharPos;const textAfter=textBeforeCursor.substring(mentionCharIndex+mentionChar.length);if(textAfter.length>=this.options.minChars&&function hasValidChars(text,allowedChars){return allowedChars.test(text)}(textAfter,this.getAllowedCharsRegex(mentionChar))){this.existingSourceExecutionToken&&(this.existingSourceExecutionToken.abandoned=!0),this.renderLoading();const sourceRequestToken={abandoned:!1};this.existingSourceExecutionToken=sourceRequestToken,this.options.source?.(textAfter,((data,searchTerm)=>{sourceRequestToken.abandoned||(this.existingSourceExecutionToken=void 0,this.renderList(mentionChar,data,searchTerm))}),mentionChar)}else this.existingSourceExecutionToken&&(this.existingSourceExecutionToken.abandoned=!0),this.hideMentionList()}else this.existingSourceExecutionToken&&(this.existingSourceExecutionToken.abandoned=!0),this.hideMentionList()}getAllowedCharsRegex(denotationChar){return this.options.allowedChars instanceof RegExp?this.options.allowedChars:this.options.allowedChars?.(denotationChar)??/^[a-zA-Z0-9_]*$/}onTextChange(delta,oldContent,source){"user"===source&&setTimeout(this.onSomethingChange.bind(this),50)}onSelectionChange(range){null!==range&&0===range.length?this.onSomethingChange():this.hideMentionList()}openMenu(denotationChar){const selection=this.quill.getSelection(!0);this.quill.insertText(selection.index,denotationChar),this.quill.blur(),this.quill.focus()}}Mention.DEFAULTS={mentionDenotationChars:["@"],showDenotationChar:!0,allowedChars:/^[a-zA-Z0-9_]*$/,minChars:0,maxChars:31,offsetTop:2,offsetLeft:0,isolateCharacter:!1,allowInlineMentionChar:!1,fixMentionsToQuill:!1,positioningStrategy:"normal",defaultMenuOrientation:"bottom",blotName:"mention",dataAttributes:["id","value","denotationChar","link","target","disabled"],linkTarget:"_blank",listItemClass:"ql-mention-list-item",mentionContainerClass:"ql-mention-list-container",mentionListClass:"ql-mention-list",spaceAfterInsert:!0,selectKeys:[Keys_ENTER],source:(searchTerm,renderList,mentionChar)=>{renderList([],searchTerm)},renderItem:({value})=>`${value}`,onSelect:(item,insertItem)=>insertItem(item),onOpen:()=>!0,onBeforeClose:()=>!0,onClose:()=>!0,renderLoading:()=>null}},"./node_modules/quill/quill.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>quill});var parchment_namespaceObject={};__webpack_require__.r(parchment_namespaceObject),__webpack_require__.d(parchment_namespaceObject,{Attributor:()=>Attributor,AttributorStore:()=>AttributorStore$1,BlockBlot:()=>BlockBlot$1,ClassAttributor:()=>ClassAttributor$1,ContainerBlot:()=>ContainerBlot$1,EmbedBlot:()=>EmbedBlot$1,InlineBlot:()=>InlineBlot$1,LeafBlot:()=>LeafBlot$1,ParentBlot:()=>ParentBlot$1,Registry:()=>Registry,Scope:()=>Scope,ScrollBlot:()=>ScrollBlot$1,StyleAttributor:()=>StyleAttributor$1,TextBlot:()=>TextBlot$1});var merge=__webpack_require__("./node_modules/lodash-es/merge.js"),Scope=(Scope2=>(Scope2[Scope2.TYPE=3]="TYPE",Scope2[Scope2.LEVEL=12]="LEVEL",Scope2[Scope2.ATTRIBUTE=13]="ATTRIBUTE",Scope2[Scope2.BLOT=14]="BLOT",Scope2[Scope2.INLINE=7]="INLINE",Scope2[Scope2.BLOCK=11]="BLOCK",Scope2[Scope2.BLOCK_BLOT=10]="BLOCK_BLOT",Scope2[Scope2.INLINE_BLOT=6]="INLINE_BLOT",Scope2[Scope2.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",Scope2[Scope2.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",Scope2[Scope2.ANY=15]="ANY",Scope2))(Scope||{});class Attributor{constructor(attrName,keyName,options={}){this.attrName=attrName,this.keyName=keyName;const attributeBit=Scope.TYPE&Scope.ATTRIBUTE;this.scope=null!=options.scope?options.scope&Scope.LEVEL|attributeBit:Scope.ATTRIBUTE,null!=options.whitelist&&(this.whitelist=options.whitelist)}static keys(node){return Array.from(node.attributes).map((item=>item.name))}add(node,value){return!!this.canAdd(node,value)&&(node.setAttribute(this.keyName,value),!0)}canAdd(_node,value){return null==this.whitelist||("string"==typeof value?this.whitelist.indexOf(value.replace(/["']/g,""))>-1:this.whitelist.indexOf(value)>-1)}remove(node){node.removeAttribute(this.keyName)}value(node){const value=node.getAttribute(this.keyName);return this.canAdd(node,value)&&value?value:""}}class ParchmentError extends Error{constructor(message){super(message="[Parchment] "+message),this.message=message,this.name=this.constructor.name}}const _Registry=class _Registry{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(node,bubble=!1){if(null==node)return null;if(this.blots.has(node))return this.blots.get(node)||null;if(bubble){let parentNode=null;try{parentNode=node.parentNode}catch{return null}return this.find(parentNode,bubble)}return null}create(scroll,input,value){const match2=this.query(input);if(null==match2)throw new ParchmentError(`Unable to create ${input} blot`);const blotClass=match2,node=input instanceof Node||input.nodeType===Node.TEXT_NODE?input:blotClass.create(value),blot=new blotClass(scroll,node,value);return _Registry.blots.set(blot.domNode,blot),blot}find(node,bubble=!1){return _Registry.find(node,bubble)}query(query,scope=Scope.ANY){let match2;return"string"==typeof query?match2=this.types[query]||this.attributes[query]:query instanceof Text||query.nodeType===Node.TEXT_NODE?match2=this.types.text:"number"==typeof query?query&Scope.LEVEL&Scope.BLOCK?match2=this.types.block:query&Scope.LEVEL&Scope.INLINE&&(match2=this.types.inline):query instanceof Element&&((query.getAttribute("class")||"").split(/\s+/).some((name=>(match2=this.classes[name],!!match2))),match2=match2||this.tags[query.tagName]),null==match2?null:"scope"in match2&&scope&Scope.LEVEL&match2.scope&&scope&Scope.TYPE&match2.scope?match2:null}register(...definitions){return definitions.map((definition=>{const isBlot="blotName"in definition,isAttr="attrName"in definition;if(!isBlot&&!isAttr)throw new ParchmentError("Invalid definition");if(isBlot&&"abstract"===definition.blotName)throw new ParchmentError("Cannot register abstract class");const key=isBlot?definition.blotName:isAttr?definition.attrName:void 0;return this.types[key]=definition,isAttr?"string"==typeof definition.keyName&&(this.attributes[definition.keyName]=definition):isBlot&&(definition.className&&(this.classes[definition.className]=definition),definition.tagName&&(Array.isArray(definition.tagName)?definition.tagName=definition.tagName.map((tagName=>tagName.toUpperCase())):definition.tagName=definition.tagName.toUpperCase(),(Array.isArray(definition.tagName)?definition.tagName:[definition.tagName]).forEach((tag=>{(null==this.tags[tag]||null==definition.className)&&(this.tags[tag]=definition)})))),definition}))}};_Registry.blots=new WeakMap;let Registry=_Registry;function match(node,prefix){return(node.getAttribute("class")||"").split(/\s+/).filter((name=>0===name.indexOf(`${prefix}-`)))}const ClassAttributor$1=class ClassAttributor extends Attributor{static keys(node){return(node.getAttribute("class")||"").split(/\s+/).map((name=>name.split("-").slice(0,-1).join("-")))}add(node,value){return!!this.canAdd(node,value)&&(this.remove(node),node.classList.add(`${this.keyName}-${value}`),!0)}remove(node){match(node,this.keyName).forEach((name=>{node.classList.remove(name)})),0===node.classList.length&&node.removeAttribute("class")}value(node){const value=(match(node,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(node,value)?value:""}};function camelize(name){const parts=name.split("-"),rest=parts.slice(1).map((part=>part[0].toUpperCase()+part.slice(1))).join("");return parts[0]+rest}const StyleAttributor$1=class StyleAttributor extends Attributor{static keys(node){return(node.getAttribute("style")||"").split(";").map((value=>value.split(":")[0].trim()))}add(node,value){return!!this.canAdd(node,value)&&(node.style[camelize(this.keyName)]=value,!0)}remove(node){node.style[camelize(this.keyName)]="",node.getAttribute("style")||node.removeAttribute("style")}value(node){const value=node.style[camelize(this.keyName)];return this.canAdd(node,value)?value:""}};const AttributorStore$1=class AttributorStore{constructor(domNode){this.attributes={},this.domNode=domNode,this.build()}attribute(attribute,value){value?attribute.add(this.domNode,value)&&(null!=attribute.value(this.domNode)?this.attributes[attribute.attrName]=attribute:delete this.attributes[attribute.attrName]):(attribute.remove(this.domNode),delete this.attributes[attribute.attrName])}build(){this.attributes={};const blot=Registry.find(this.domNode);if(null==blot)return;const attributes=Attributor.keys(this.domNode),classes=ClassAttributor$1.keys(this.domNode),styles=StyleAttributor$1.keys(this.domNode);attributes.concat(classes).concat(styles).forEach((name=>{const attr=blot.scroll.query(name,Scope.ATTRIBUTE);attr instanceof Attributor&&(this.attributes[attr.attrName]=attr)}))}copy(target){Object.keys(this.attributes).forEach((key=>{const value=this.attributes[key].value(this.domNode);target.format(key,value)}))}move(target){this.copy(target),Object.keys(this.attributes).forEach((key=>{this.attributes[key].remove(this.domNode)})),this.attributes={}}values(){return Object.keys(this.attributes).reduce(((attributes,name)=>(attributes[name]=this.attributes[name].value(this.domNode),attributes)),{})}},_ShadowBlot=class _ShadowBlot{constructor(scroll,domNode){this.scroll=scroll,this.domNode=domNode,Registry.blots.set(domNode,this),this.prev=null,this.next=null}static create(rawValue){if(null==this.tagName)throw new ParchmentError("Blot definition missing tagName");let node,value;return Array.isArray(this.tagName)?("string"==typeof rawValue?(value=rawValue.toUpperCase(),parseInt(value,10).toString()===value&&(value=parseInt(value,10))):"number"==typeof rawValue&&(value=rawValue),node="number"==typeof value?document.createElement(this.tagName[value-1]):value&&this.tagName.indexOf(value)>-1?document.createElement(value):document.createElement(this.tagName[0])):node=document.createElement(this.tagName),this.className&&node.classList.add(this.className),node}get statics(){return this.constructor}attach(){}clone(){const domNode=this.domNode.cloneNode(!1);return this.scroll.create(domNode)}detach(){null!=this.parent&&this.parent.removeChild(this),Registry.blots.delete(this.domNode)}deleteAt(index,length){this.isolate(index,length).remove()}formatAt(index,length,name,value){const blot=this.isolate(index,length);if(null!=this.scroll.query(name,Scope.BLOT)&&value)blot.wrap(name,value);else if(null!=this.scroll.query(name,Scope.ATTRIBUTE)){const parent=this.scroll.create(this.statics.scope);blot.wrap(parent),parent.format(name,value)}}insertAt(index,value,def){const blot=null==def?this.scroll.create("text",value):this.scroll.create(value,def),ref=this.split(index);this.parent.insertBefore(blot,ref||void 0)}isolate(index,length){const target=this.split(index);if(null==target)throw new Error("Attempt to isolate at end");return target.split(length),target}length(){return 1}offset(root=this.parent){return null==this.parent||this===root?0:this.parent.children.offset(this)+this.parent.offset(root)}optimize(_context){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(name,value){const replacement="string"==typeof name?this.scroll.create(name,value):name;return null!=this.parent&&(this.parent.insertBefore(replacement,this.next||void 0),this.remove()),replacement}split(index,_force){return 0===index?this:this.next}update(_mutations,_context){}wrap(name,value){const wrapper="string"==typeof name?this.scroll.create(name,value):name;if(null!=this.parent&&this.parent.insertBefore(wrapper,this.next||void 0),"function"!=typeof wrapper.appendChild)throw new ParchmentError(`Cannot wrap ${name}`);return wrapper.appendChild(this),wrapper}};_ShadowBlot.blotName="abstract";let ShadowBlot=_ShadowBlot;const _LeafBlot=class _LeafBlot extends ShadowBlot{static value(_domNode){return!0}index(node,offset){return this.domNode===node||this.domNode.compareDocumentPosition(node)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(offset,1):-1}position(index,_inclusive){let offset=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return index>0&&(offset+=1),[this.parent.domNode,offset]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};_LeafBlot.scope=Scope.INLINE_BLOT;const LeafBlot$1=_LeafBlot;class LinkedList{constructor(){this.head=null,this.tail=null,this.length=0}append(...nodes){if(this.insertBefore(nodes[0],null),nodes.length>1){const rest=nodes.slice(1);this.append(...rest)}}at(index){const next=this.iterator();let cur=next();for(;cur&&index>0;)index-=1,cur=next();return cur}contains(node){const next=this.iterator();let cur=next();for(;cur;){if(cur===node)return!0;cur=next()}return!1}indexOf(node){const next=this.iterator();let cur=next(),index=0;for(;cur;){if(cur===node)return index;index+=1,cur=next()}return-1}insertBefore(node,refNode){null!=node&&(this.remove(node),node.next=refNode,null!=refNode?(node.prev=refNode.prev,null!=refNode.prev&&(refNode.prev.next=node),refNode.prev=node,refNode===this.head&&(this.head=node)):null!=this.tail?(this.tail.next=node,node.prev=this.tail,this.tail=node):(node.prev=null,this.head=this.tail=node),this.length+=1)}offset(target){let index=0,cur=this.head;for(;null!=cur;){if(cur===target)return index;index+=cur.length(),cur=cur.next}return-1}remove(node){this.contains(node)&&(null!=node.prev&&(node.prev.next=node.next),null!=node.next&&(node.next.prev=node.prev),node===this.head&&(this.head=node.next),node===this.tail&&(this.tail=node.prev),this.length-=1)}iterator(curNode=this.head){return()=>{const ret=curNode;return null!=curNode&&(curNode=curNode.next),ret}}find(index,inclusive=!1){const next=this.iterator();let cur=next();for(;cur;){const length=cur.length();if(index<length||inclusive&&index===length&&(null==cur.next||0!==cur.next.length()))return[cur,index];index-=length,cur=next()}return[null,0]}forEach(callback){const next=this.iterator();let cur=next();for(;cur;)callback(cur),cur=next()}forEachAt(index,length,callback){if(length<=0)return;const[startNode,offset]=this.find(index);let curIndex=index-offset;const next=this.iterator(startNode);let cur=next();for(;cur&&curIndex<index+length;){const curLength=cur.length();index>curIndex?callback(cur,index-curIndex,Math.min(length,curIndex+curLength-index)):callback(cur,0,Math.min(curLength,index+length-curIndex)),curIndex+=curLength,cur=next()}}map(callback){return this.reduce(((memo,cur)=>(memo.push(callback(cur)),memo)),[])}reduce(callback,memo){const next=this.iterator();let cur=next();for(;cur;)memo=callback(memo,cur),cur=next();return memo}}function makeAttachedBlot(node,scroll){const found=scroll.find(node);if(found)return found;try{return scroll.create(node)}catch{const blot=scroll.create(Scope.INLINE);return Array.from(node.childNodes).forEach((child=>{blot.domNode.appendChild(child)})),node.parentNode&&node.parentNode.replaceChild(blot.domNode,node),blot.attach(),blot}}const _ParentBlot=class _ParentBlot extends ShadowBlot{constructor(scroll,domNode){super(scroll,domNode),this.uiNode=null,this.build()}appendChild(other){this.insertBefore(other)}attach(){super.attach(),this.children.forEach((child=>{child.attach()}))}attachUI(node){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=node,_ParentBlot.uiClass&&this.uiNode.classList.add(_ParentBlot.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new LinkedList,Array.from(this.domNode.childNodes).filter((node=>node!==this.uiNode)).reverse().forEach((node=>{try{const child=makeAttachedBlot(node,this.scroll);this.insertBefore(child,this.children.head||void 0)}catch(err){if(err instanceof ParchmentError)return;throw err}}))}deleteAt(index,length){if(0===index&&length===this.length())return this.remove();this.children.forEachAt(index,length,((child,offset,childLength)=>{child.deleteAt(offset,childLength)}))}descendant(criteria,index=0){const[child,offset]=this.children.find(index);return null==criteria.blotName&&criteria(child)||null!=criteria.blotName&&child instanceof criteria?[child,offset]:child instanceof _ParentBlot?child.descendant(criteria,offset):[null,-1]}descendants(criteria,index=0,length=Number.MAX_VALUE){let descendants=[],lengthLeft=length;return this.children.forEachAt(index,length,((child,childIndex,childLength)=>{(null==criteria.blotName&&criteria(child)||null!=criteria.blotName&&child instanceof criteria)&&descendants.push(child),child instanceof _ParentBlot&&(descendants=descendants.concat(child.descendants(criteria,childIndex,lengthLeft))),lengthLeft-=childLength})),descendants}detach(){this.children.forEach((child=>{child.detach()})),super.detach()}enforceAllowedChildren(){let done=!1;this.children.forEach((child=>{done||this.statics.allowedChildren.some((def=>child instanceof def))||(child.statics.scope===Scope.BLOCK_BLOT?(null!=child.next&&this.splitAfter(child),null!=child.prev&&this.splitAfter(child.prev),child.parent.unwrap(),done=!0):child instanceof _ParentBlot?child.unwrap():child.remove())}))}formatAt(index,length,name,value){this.children.forEachAt(index,length,((child,offset,childLength)=>{child.formatAt(offset,childLength,name,value)}))}insertAt(index,value,def){const[child,offset]=this.children.find(index);if(child)child.insertAt(offset,value,def);else{const blot=null==def?this.scroll.create("text",value):this.scroll.create(value,def);this.appendChild(blot)}}insertBefore(childBlot,refBlot){null!=childBlot.parent&&childBlot.parent.children.remove(childBlot);let refDomNode=null;this.children.insertBefore(childBlot,refBlot||null),childBlot.parent=this,null!=refBlot&&(refDomNode=refBlot.domNode),(this.domNode.parentNode!==childBlot.domNode||this.domNode.nextSibling!==refDomNode)&&this.domNode.insertBefore(childBlot.domNode,refDomNode),childBlot.attach()}length(){return this.children.reduce(((memo,child)=>memo+child.length()),0)}moveChildren(targetParent,refNode){this.children.forEach((child=>{targetParent.insertBefore(child,refNode)}))}optimize(context){if(super.optimize(context),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const child=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(child)}else this.remove()}path(index,inclusive=!1){const[child,offset]=this.children.find(index,inclusive),position=[[this,index]];return child instanceof _ParentBlot?position.concat(child.path(offset,inclusive)):(null!=child&&position.push([child,offset]),position)}removeChild(child){this.children.remove(child)}replaceWith(name,value){const replacement="string"==typeof name?this.scroll.create(name,value):name;return replacement instanceof _ParentBlot&&this.moveChildren(replacement),super.replaceWith(replacement)}split(index,force=!1){if(!force){if(0===index)return this;if(index===this.length())return this.next}const after=this.clone();return this.parent&&this.parent.insertBefore(after,this.next||void 0),this.children.forEachAt(index,this.length(),((child,offset,_length)=>{const split=child.split(offset,force);null!=split&&after.appendChild(split)})),after}splitAfter(child){const after=this.clone();for(;null!=child.next;)after.appendChild(child.next);return this.parent&&this.parent.insertBefore(after,this.next||void 0),after}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(mutations,_context){const addedNodes=[],removedNodes=[];mutations.forEach((mutation=>{mutation.target===this.domNode&&"childList"===mutation.type&&(addedNodes.push(...mutation.addedNodes),removedNodes.push(...mutation.removedNodes))})),removedNodes.forEach((node=>{if(null!=node.parentNode&&"IFRAME"!==node.tagName&&document.body.compareDocumentPosition(node)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const blot=this.scroll.find(node);null!=blot&&(null==blot.domNode.parentNode||blot.domNode.parentNode===this.domNode)&&blot.detach()})),addedNodes.filter((node=>node.parentNode===this.domNode&&node!==this.uiNode)).sort(((a,b)=>a===b?0:a.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1)).forEach((node=>{let refBlot=null;null!=node.nextSibling&&(refBlot=this.scroll.find(node.nextSibling));const blot=makeAttachedBlot(node,this.scroll);(blot.next!==refBlot||null==blot.next)&&(null!=blot.parent&&blot.parent.removeChild(this),this.insertBefore(blot,refBlot||void 0))})),this.enforceAllowedChildren()}};_ParentBlot.uiClass="";const ParentBlot$1=_ParentBlot;const _InlineBlot=class _InlineBlot extends ParentBlot$1{static create(value){return super.create(value)}static formats(domNode,scroll){const match2=scroll.query(_InlineBlot.blotName);if(null==match2||domNode.tagName!==match2.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return domNode.tagName.toLowerCase()}}constructor(scroll,domNode){super(scroll,domNode),this.attributes=new AttributorStore$1(this.domNode)}format(name,value){if(name!==this.statics.blotName||value){const format=this.scroll.query(name,Scope.INLINE);if(null==format)return;format instanceof Attributor?this.attributes.attribute(format,value):value&&(name!==this.statics.blotName||this.formats()[name]!==value)&&this.replaceWith(name,value)}else this.children.forEach((child=>{child instanceof _InlineBlot||(child=child.wrap(_InlineBlot.blotName,!0)),this.attributes.copy(child)})),this.unwrap()}formats(){const formats=this.attributes.values(),format=this.statics.formats(this.domNode,this.scroll);return null!=format&&(formats[this.statics.blotName]=format),formats}formatAt(index,length,name,value){null!=this.formats()[name]||this.scroll.query(name,Scope.ATTRIBUTE)?this.isolate(index,length).format(name,value):super.formatAt(index,length,name,value)}optimize(context){super.optimize(context);const formats=this.formats();if(0===Object.keys(formats).length)return this.unwrap();const next=this.next;next instanceof _InlineBlot&&next.prev===this&&function isEqual(obj1,obj2){if(Object.keys(obj1).length!==Object.keys(obj2).length)return!1;for(const prop in obj1)if(obj1[prop]!==obj2[prop])return!1;return!0}(formats,next.formats())&&(next.moveChildren(this),next.remove())}replaceWith(name,value){const replacement=super.replaceWith(name,value);return this.attributes.copy(replacement),replacement}update(mutations,context){super.update(mutations,context),mutations.some((mutation=>mutation.target===this.domNode&&"attributes"===mutation.type))&&this.attributes.build()}wrap(name,value){const wrapper=super.wrap(name,value);return wrapper instanceof _InlineBlot&&this.attributes.move(wrapper),wrapper}};_InlineBlot.allowedChildren=[_InlineBlot,LeafBlot$1],_InlineBlot.blotName="inline",_InlineBlot.scope=Scope.INLINE_BLOT,_InlineBlot.tagName="SPAN";const InlineBlot$1=_InlineBlot,_BlockBlot=class _BlockBlot extends ParentBlot$1{static create(value){return super.create(value)}static formats(domNode,scroll){const match2=scroll.query(_BlockBlot.blotName);if(null==match2||domNode.tagName!==match2.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return domNode.tagName.toLowerCase()}}constructor(scroll,domNode){super(scroll,domNode),this.attributes=new AttributorStore$1(this.domNode)}format(name,value){const format=this.scroll.query(name,Scope.BLOCK);null!=format&&(format instanceof Attributor?this.attributes.attribute(format,value):name!==this.statics.blotName||value?value&&(name!==this.statics.blotName||this.formats()[name]!==value)&&this.replaceWith(name,value):this.replaceWith(_BlockBlot.blotName))}formats(){const formats=this.attributes.values(),format=this.statics.formats(this.domNode,this.scroll);return null!=format&&(formats[this.statics.blotName]=format),formats}formatAt(index,length,name,value){null!=this.scroll.query(name,Scope.BLOCK)?this.format(name,value):super.formatAt(index,length,name,value)}insertAt(index,value,def){if(null==def||null!=this.scroll.query(value,Scope.INLINE))super.insertAt(index,value,def);else{const after=this.split(index);if(null==after)throw new Error("Attempt to insertAt after block boundaries");{const blot=this.scroll.create(value,def);after.parent.insertBefore(blot,after)}}}replaceWith(name,value){const replacement=super.replaceWith(name,value);return this.attributes.copy(replacement),replacement}update(mutations,context){super.update(mutations,context),mutations.some((mutation=>mutation.target===this.domNode&&"attributes"===mutation.type))&&this.attributes.build()}};_BlockBlot.blotName="block",_BlockBlot.scope=Scope.BLOCK_BLOT,_BlockBlot.tagName="P",_BlockBlot.allowedChildren=[InlineBlot$1,_BlockBlot,LeafBlot$1];const BlockBlot$1=_BlockBlot,_ContainerBlot=class _ContainerBlot extends ParentBlot$1{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(index,length){super.deleteAt(index,length),this.enforceAllowedChildren()}formatAt(index,length,name,value){super.formatAt(index,length,name,value),this.enforceAllowedChildren()}insertAt(index,value,def){super.insertAt(index,value,def),this.enforceAllowedChildren()}optimize(context){super.optimize(context),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};_ContainerBlot.blotName="container",_ContainerBlot.scope=Scope.BLOCK_BLOT;const ContainerBlot$1=_ContainerBlot;const EmbedBlot$1=class EmbedBlot extends LeafBlot$1{static formats(_domNode,_scroll){}format(name,value){super.formatAt(0,this.length(),name,value)}formatAt(index,length,name,value){0===index&&length===this.length()?this.format(name,value):super.formatAt(index,length,name,value)}formats(){return this.statics.formats(this.domNode,this.scroll)}},OBSERVER_CONFIG={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},_ScrollBlot=class _ScrollBlot extends ParentBlot$1{constructor(registry,node){super(null,node),this.registry=registry,this.scroll=this,this.build(),this.observer=new MutationObserver((mutations=>{this.update(mutations)})),this.observer.observe(this.domNode,OBSERVER_CONFIG),this.attach()}create(input,value){return this.registry.create(this,input,value)}find(node,bubble=!1){const blot=this.registry.find(node,bubble);return blot?blot.scroll===this?blot:bubble?this.find(blot.scroll.domNode.parentNode,!0):null:null}query(query,scope=Scope.ANY){return this.registry.query(query,scope)}register(...definitions){return this.registry.register(...definitions)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(index,length){this.update(),0===index&&length===this.length()?this.children.forEach((child=>{child.remove()})):super.deleteAt(index,length)}formatAt(index,length,name,value){this.update(),super.formatAt(index,length,name,value)}insertAt(index,value,def){this.update(),super.insertAt(index,value,def)}optimize(mutations=[],context={}){super.optimize(context);const mutationsMap=context.mutationsMap||new WeakMap;let records=Array.from(this.observer.takeRecords());for(;records.length>0;)mutations.push(records.pop());const mark=(blot,markParent=!0)=>{null==blot||blot===this||null!=blot.domNode.parentNode&&(mutationsMap.has(blot.domNode)||mutationsMap.set(blot.domNode,[]),markParent&&mark(blot.parent))},optimize=blot=>{mutationsMap.has(blot.domNode)&&(blot instanceof ParentBlot$1&&blot.children.forEach(optimize),mutationsMap.delete(blot.domNode),blot.optimize(context))};let remaining=mutations;for(let i=0;remaining.length>0;i+=1){if(i>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(remaining.forEach((mutation=>{const blot=this.find(mutation.target,!0);null!=blot&&(blot.domNode===mutation.target&&("childList"===mutation.type?(mark(this.find(mutation.previousSibling,!1)),Array.from(mutation.addedNodes).forEach((node=>{const child=this.find(node,!1);mark(child,!1),child instanceof ParentBlot$1&&child.children.forEach((grandChild=>{mark(grandChild,!1)}))}))):"attributes"===mutation.type&&mark(blot.prev)),mark(blot))})),this.children.forEach(optimize),remaining=Array.from(this.observer.takeRecords()),records=remaining.slice();records.length>0;)mutations.push(records.pop())}}update(mutations,context={}){mutations=mutations||this.observer.takeRecords();const mutationsMap=new WeakMap;mutations.map((mutation=>{const blot=this.find(mutation.target,!0);return null==blot?null:mutationsMap.has(blot.domNode)?(mutationsMap.get(blot.domNode).push(mutation),null):(mutationsMap.set(blot.domNode,[mutation]),blot)})).forEach((blot=>{null!=blot&&blot!==this&&mutationsMap.has(blot.domNode)&&blot.update(mutationsMap.get(blot.domNode)||[],context)})),context.mutationsMap=mutationsMap,mutationsMap.has(this.domNode)&&super.update(mutationsMap.get(this.domNode),context),this.optimize(mutations,context)}};_ScrollBlot.blotName="scroll",_ScrollBlot.defaultChild=BlockBlot$1,_ScrollBlot.allowedChildren=[BlockBlot$1,ContainerBlot$1],_ScrollBlot.scope=Scope.BLOCK_BLOT,_ScrollBlot.tagName="DIV";const ScrollBlot$1=_ScrollBlot,_TextBlot=class _TextBlot extends LeafBlot$1{static create(value){return document.createTextNode(value)}static value(domNode){return domNode.data}constructor(scroll,node){super(scroll,node),this.text=this.statics.value(this.domNode)}deleteAt(index,length){this.domNode.data=this.text=this.text.slice(0,index)+this.text.slice(index+length)}index(node,offset){return this.domNode===node?offset:-1}insertAt(index,value,def){null==def?(this.text=this.text.slice(0,index)+value+this.text.slice(index),this.domNode.data=this.text):super.insertAt(index,value,def)}length(){return this.text.length}optimize(context){super.optimize(context),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof _TextBlot&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(index,_inclusive=!1){return[this.domNode,index]}split(index,force=!1){if(!force){if(0===index)return this;if(index===this.length())return this.next}const after=this.scroll.create(this.domNode.splitText(index));return this.parent.insertBefore(after,this.next||void 0),this.text=this.statics.value(this.domNode),after}update(mutations,_context){mutations.some((mutation=>"characterData"===mutation.type&&mutation.target===this.domNode))&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};_TextBlot.blotName="text",_TextBlot.scope=Scope.INLINE_BLOT;const TextBlot$1=_TextBlot;var Delta=__webpack_require__("./node_modules/quill-delta/dist/Delta.js"),Delta_default=__webpack_require__.n(Delta),_Stack=__webpack_require__("./node_modules/lodash-es/_Stack.js"),_arrayEach=__webpack_require__("./node_modules/lodash-es/_arrayEach.js"),_assignValue=__webpack_require__("./node_modules/lodash-es/_assignValue.js"),_copyObject=__webpack_require__("./node_modules/lodash-es/_copyObject.js"),keys=__webpack_require__("./node_modules/lodash-es/keys.js");const _baseAssign=function baseAssign(object,source){return object&&(0,_copyObject.A)(source,(0,keys.A)(source),object)};var keysIn=__webpack_require__("./node_modules/lodash-es/keysIn.js");const _baseAssignIn=function baseAssignIn(object,source){return object&&(0,_copyObject.A)(source,(0,keysIn.A)(source),object)};var _cloneBuffer=__webpack_require__("./node_modules/lodash-es/_cloneBuffer.js"),_copyArray=__webpack_require__("./node_modules/lodash-es/_copyArray.js"),_getSymbols=__webpack_require__("./node_modules/lodash-es/_getSymbols.js");const _copySymbols=function copySymbols(source,object){return(0,_copyObject.A)(source,(0,_getSymbols.A)(source),object)};var _arrayPush=__webpack_require__("./node_modules/lodash-es/_arrayPush.js"),_getPrototype=__webpack_require__("./node_modules/lodash-es/_getPrototype.js"),stubArray=__webpack_require__("./node_modules/lodash-es/stubArray.js");const _getSymbolsIn=Object.getOwnPropertySymbols?function(object){for(var result=[];object;)(0,_arrayPush.A)(result,(0,_getSymbols.A)(object)),object=(0,_getPrototype.A)(object);return result}:stubArray.A;const _copySymbolsIn=function copySymbolsIn(source,object){return(0,_copyObject.A)(source,_getSymbolsIn(source),object)};var _getAllKeys=__webpack_require__("./node_modules/lodash-es/_getAllKeys.js"),_baseGetAllKeys=__webpack_require__("./node_modules/lodash-es/_baseGetAllKeys.js");const _getAllKeysIn=function getAllKeysIn(object){return(0,_baseGetAllKeys.A)(object,keysIn.A,_getSymbolsIn)};var _getTag=__webpack_require__("./node_modules/lodash-es/_getTag.js"),_initCloneArray_hasOwnProperty=Object.prototype.hasOwnProperty;const _initCloneArray=function initCloneArray(array){var length=array.length,result=new array.constructor(length);return length&&"string"==typeof array[0]&&_initCloneArray_hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result};var _cloneArrayBuffer=__webpack_require__("./node_modules/lodash-es/_cloneArrayBuffer.js");const _cloneDataView=function cloneDataView(dataView,isDeep){var buffer=isDeep?(0,_cloneArrayBuffer.A)(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)};var reFlags=/\w*$/;const _cloneRegExp=function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result};var _Symbol=__webpack_require__("./node_modules/lodash-es/_Symbol.js"),symbolProto=_Symbol.A?_Symbol.A.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;const _cloneSymbol=function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}};var _cloneTypedArray=__webpack_require__("./node_modules/lodash-es/_cloneTypedArray.js");const _initCloneByTag=function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case"[object ArrayBuffer]":return(0,_cloneArrayBuffer.A)(object);case"[object Boolean]":case"[object Date]":return new Ctor(+object);case"[object DataView]":return _cloneDataView(object,isDeep);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return(0,_cloneTypedArray.A)(object,isDeep);case"[object Map]":case"[object Set]":return new Ctor;case"[object Number]":case"[object String]":return new Ctor(object);case"[object RegExp]":return _cloneRegExp(object);case"[object Symbol]":return _cloneSymbol(object)}};var _initCloneObject=__webpack_require__("./node_modules/lodash-es/_initCloneObject.js"),isArray=__webpack_require__("./node_modules/lodash-es/isArray.js"),isBuffer=__webpack_require__("./node_modules/lodash-es/isBuffer.js"),isObjectLike=__webpack_require__("./node_modules/lodash-es/isObjectLike.js");const _baseIsMap=function baseIsMap(value){return(0,isObjectLike.A)(value)&&"[object Map]"==(0,_getTag.A)(value)};var _baseUnary=__webpack_require__("./node_modules/lodash-es/_baseUnary.js"),_nodeUtil=__webpack_require__("./node_modules/lodash-es/_nodeUtil.js"),nodeIsMap=_nodeUtil.A&&_nodeUtil.A.isMap;const lodash_es_isMap=nodeIsMap?(0,_baseUnary.A)(nodeIsMap):_baseIsMap;var isObject=__webpack_require__("./node_modules/lodash-es/isObject.js");const _baseIsSet=function baseIsSet(value){return(0,isObjectLike.A)(value)&&"[object Set]"==(0,_getTag.A)(value)};var nodeIsSet=_nodeUtil.A&&_nodeUtil.A.isSet;const lodash_es_isSet=nodeIsSet?(0,_baseUnary.A)(nodeIsSet):_baseIsSet;var cloneableTags={};cloneableTags["[object Arguments]"]=cloneableTags["[object Array]"]=cloneableTags["[object ArrayBuffer]"]=cloneableTags["[object DataView]"]=cloneableTags["[object Boolean]"]=cloneableTags["[object Date]"]=cloneableTags["[object Float32Array]"]=cloneableTags["[object Float64Array]"]=cloneableTags["[object Int8Array]"]=cloneableTags["[object Int16Array]"]=cloneableTags["[object Int32Array]"]=cloneableTags["[object Map]"]=cloneableTags["[object Number]"]=cloneableTags["[object Object]"]=cloneableTags["[object RegExp]"]=cloneableTags["[object Set]"]=cloneableTags["[object String]"]=cloneableTags["[object Symbol]"]=cloneableTags["[object Uint8Array]"]=cloneableTags["[object Uint8ClampedArray]"]=cloneableTags["[object Uint16Array]"]=cloneableTags["[object Uint32Array]"]=!0,cloneableTags["[object Error]"]=cloneableTags["[object Function]"]=cloneableTags["[object WeakMap]"]=!1;const _baseClone=function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=1&bitmask,isFlat=2&bitmask,isFull=4&bitmask;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),void 0!==result)return result;if(!(0,isObject.A)(value))return value;var isArr=(0,isArray.A)(value);if(isArr){if(result=_initCloneArray(value),!isDeep)return(0,_copyArray.A)(value,result)}else{var tag=(0,_getTag.A)(value),isFunc="[object Function]"==tag||"[object GeneratorFunction]"==tag;if((0,isBuffer.A)(value))return(0,_cloneBuffer.A)(value,isDeep);if("[object Object]"==tag||"[object Arguments]"==tag||isFunc&&!object){if(result=isFlat||isFunc?{}:(0,_initCloneObject.A)(value),!isDeep)return isFlat?_copySymbolsIn(value,_baseAssignIn(result,value)):_copySymbols(value,_baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=_initCloneByTag(value,tag,isDeep)}}stack||(stack=new _Stack.A);var stacked=stack.get(value);if(stacked)return stacked;stack.set(value,result),lodash_es_isSet(value)?value.forEach((function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))})):lodash_es_isMap(value)&&value.forEach((function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack))}));var keysFunc=isFull?isFlat?_getAllKeysIn:_getAllKeys.A:isFlat?keysIn.A:keys.A,props=isArr?void 0:keysFunc(value);return(0,_arrayEach.A)(props||value,(function(subValue,key){props&&(subValue=value[key=subValue]),(0,_assignValue.A)(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))})),result};const lodash_es_cloneDeep=function cloneDeep(value){return _baseClone(value,5)};var lodash_es_isEqual=__webpack_require__("./node_modules/lodash-es/isEqual.js");class Break extends EmbedBlot$1{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Break.blotName="break",Break.tagName="BR";const blots_break=Break;class text_Text extends TextBlot$1{}const entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function escapeText(text){return text.replace(/[&<>"']/g,(s=>entityMap[s]))}class Inline extends InlineBlot$1{static allowedChildren=[Inline,blots_break,EmbedBlot$1,text_Text];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(self,other){const selfIndex=Inline.order.indexOf(self),otherIndex=Inline.order.indexOf(other);return selfIndex>=0||otherIndex>=0?selfIndex-otherIndex:self===other?0:self<other?-1:1}formatAt(index,length,name,value){if(Inline.compare(this.statics.blotName,name)<0&&this.scroll.query(name,Scope.BLOT)){const blot=this.isolate(index,length);value&&blot.wrap(name,value)}else super.formatAt(index,length,name,value)}optimize(context){if(super.optimize(context),this.parent instanceof Inline&&Inline.compare(this.statics.blotName,this.parent.statics.blotName)>0){const parent=this.parent.isolate(this.offset(),this.length());this.moveChildren(parent),parent.wrap(this)}}}const inline=Inline;class Block extends BlockBlot$1{cache={};delta(){return null==this.cache.delta&&(this.cache.delta=blockDelta(this)),this.cache.delta}deleteAt(index,length){super.deleteAt(index,length),this.cache={}}formatAt(index,length,name,value){length<=0||(this.scroll.query(name,Scope.BLOCK)?index+length===this.length()&&this.format(name,value):super.formatAt(index,Math.min(length,this.length()-index-1),name,value),this.cache={})}insertAt(index,value,def){if(null!=def)return super.insertAt(index,value,def),void(this.cache={});if(0===value.length)return;const lines=value.split("\n"),text=lines.shift();text.length>0&&(index<this.length()-1||null==this.children.tail?super.insertAt(Math.min(index,this.length()-1),text):this.children.tail.insertAt(this.children.tail.length(),text),this.cache={});let block=this;lines.reduce(((lineIndex,line)=>(block=block.split(lineIndex,!0),block.insertAt(0,line),line.length)),index+text.length)}insertBefore(blot,ref){const{head}=this.children;super.insertBefore(blot,ref),head instanceof blots_break&&head.remove(),this.cache={}}length(){return null==this.cache.length&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(target,ref){super.moveChildren(target,ref),this.cache={}}optimize(context){super.optimize(context),this.cache={}}path(index){return super.path(index,!0)}removeChild(child){super.removeChild(child),this.cache={}}split(index){let force=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(force&&(0===index||index>=this.length()-1)){const clone=this.clone();return 0===index?(this.parent.insertBefore(clone,this),this):(this.parent.insertBefore(clone,this.next),clone)}const next=super.split(index,force);return this.cache={},next}}Block.blotName="block",Block.tagName="P",Block.defaultChild=blots_break,Block.allowedChildren=[blots_break,inline,EmbedBlot$1,text_Text];class BlockEmbed extends EmbedBlot$1{attach(){super.attach(),this.attributes=new AttributorStore$1(this.domNode)}delta(){return(new(Delta_default())).insert(this.value(),{...this.formats(),...this.attributes.values()})}format(name,value){const attribute=this.scroll.query(name,Scope.BLOCK_ATTRIBUTE);null!=attribute&&this.attributes.attribute(attribute,value)}formatAt(index,length,name,value){this.format(name,value)}insertAt(index,value,def){if(null!=def)return void super.insertAt(index,value,def);const lines=value.split("\n"),text=lines.pop(),blocks=lines.map((line=>{const block=this.scroll.create(Block.blotName);return block.insertAt(0,line),block})),ref=this.split(index);blocks.forEach((block=>{this.parent.insertBefore(block,ref)})),text&&this.parent.insertBefore(this.scroll.create("text",text),ref)}}function blockDelta(blot){let filter=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return blot.descendants(LeafBlot$1).reduce(((delta,leaf)=>0===leaf.length()?delta:delta.insert(leaf.value(),bubbleFormats(leaf,{},filter))),new(Delta_default())).insert("\n",bubbleFormats(blot))}function bubbleFormats(blot){let formats=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},filter=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==blot?formats:("formats"in blot&&"function"==typeof blot.formats&&(formats={...formats,...blot.formats()},filter&&delete formats["code-token"]),null==blot.parent||"scroll"===blot.parent.statics.blotName||blot.parent.statics.scope!==blot.statics.scope?formats:bubbleFormats(blot.parent,formats,filter))}BlockEmbed.scope=Scope.BLOCK_BLOT;class Cursor extends EmbedBlot$1{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\ufeff";static value(){}constructor(scroll,domNode,selection){super(scroll,domNode),this.selection=selection,this.textNode=document.createTextNode(Cursor.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){null!=this.parent&&this.parent.removeChild(this)}format(name,value){if(0!==this.savedLength)return void super.format(name,value);let target=this,index=0;for(;null!=target&&target.statics.scope!==Scope.BLOCK_BLOT;)index+=target.offset(target.parent),target=target.parent;null!=target&&(this.savedLength=Cursor.CONTENTS.length,target.optimize(),target.formatAt(index,Cursor.CONTENTS.length,name,value),this.savedLength=0)}index(node,offset){return node===this.textNode?0:super.index(node,offset)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||null==this.parent)return null;const range=this.selection.getNativeRange();for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const prevTextBlot=this.prev instanceof text_Text?this.prev:null,prevTextLength=prevTextBlot?prevTextBlot.length():0,nextTextBlot=this.next instanceof text_Text?this.next:null,nextText=nextTextBlot?nextTextBlot.text:"",{textNode}=this,newText=textNode.data.split(Cursor.CONTENTS).join("");let mergedTextBlot;if(textNode.data=Cursor.CONTENTS,prevTextBlot)mergedTextBlot=prevTextBlot,(newText||nextTextBlot)&&(prevTextBlot.insertAt(prevTextBlot.length(),newText+nextText),nextTextBlot&&nextTextBlot.remove());else if(nextTextBlot)mergedTextBlot=nextTextBlot,nextTextBlot.insertAt(0,newText);else{const newTextNode=document.createTextNode(newText);mergedTextBlot=this.scroll.create(newTextNode),this.parent.insertBefore(mergedTextBlot,this)}if(this.remove(),range){const remapOffset=(node,offset)=>prevTextBlot&&node===prevTextBlot.domNode?offset:node===textNode?prevTextLength+offset-1:nextTextBlot&&node===nextTextBlot.domNode?prevTextLength+newText.length+offset:null,start=remapOffset(range.start.node,range.start.offset),end=remapOffset(range.end.node,range.end.offset);if(null!==start&&null!==end)return{startNode:mergedTextBlot.domNode,startOffset:start,endNode:mergedTextBlot.domNode,endOffset:end}}return null}update(mutations,context){if(mutations.some((mutation=>"characterData"===mutation.type&&mutation.target===this.textNode))){const range=this.restore();range&&(context.range=range)}}optimize(context){super.optimize(context);let{parent}=this;for(;parent;){if("A"===parent.domNode.tagName){this.savedLength=Cursor.CONTENTS.length,parent.isolate(this.offset(parent),this.length()).unwrap(),this.savedLength=0;break}parent=parent.parent}}value(){return""}}const cursor=Cursor;var eventemitter3=__webpack_require__("./node_modules/eventemitter3/index.js"),eventemitter3_default=__webpack_require__.n(eventemitter3);const instances=new WeakMap,levels=["error","warn","log","info"];let level="warn";function debug(method){if(level&&levels.indexOf(method)<=levels.indexOf(level)){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];console[method](...args)}}function namespace(ns){return levels.reduce(((logger,method)=>(logger[method]=debug.bind(console,method,ns),logger)),{})}namespace.level=newLevel=>{level=newLevel},debug.level=namespace.level;const logger=namespace,emitter_debug=logger("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((eventName=>{document.addEventListener(eventName,(function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];Array.from(document.querySelectorAll(".ql-container")).forEach((node=>{const quill=instances.get(node);quill&&quill.emitter&&quill.emitter.handleDOM(...args)}))}))}));class Emitter extends(eventemitter3_default()){static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",emitter_debug.error)}emit(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return emitter_debug.log.call(emitter_debug,...args),super.emit(...args)}handleDOM(event){for(var _len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];(this.domListeners[event.type]||[]).forEach((_ref=>{let{node,handler}=_ref;(event.target===node||node.contains(event.target))&&handler(event,...args)}))}listenDOM(eventName,node,handler){this.domListeners[eventName]||(this.domListeners[eventName]=[]),this.domListeners[eventName].push({node,handler})}}const core_emitter=Emitter,selection_debug=logger("quill:selection");class Range{constructor(index){let length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.index=index,this.length=length}}function contains(parent,descendant){try{descendant.parentNode}catch(e){return!1}return parent.contains(descendant)}const selection=class Selection{constructor(scroll,emitter){this.emitter=emitter,this.scroll=scroll,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Range(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(()=>{this.mouseDown||this.composing||setTimeout(this.update.bind(this,core_emitter.sources.USER),1)})),this.emitter.on(core_emitter.events.SCROLL_BEFORE_UPDATE,(()=>{if(!this.hasFocus())return;const native=this.getNativeRange();null!=native&&native.start.node!==this.cursor.textNode&&this.emitter.once(core_emitter.events.SCROLL_UPDATE,((source,mutations)=>{try{this.root.contains(native.start.node)&&this.root.contains(native.end.node)&&this.setNativeRange(native.start.node,native.start.offset,native.end.node,native.end.offset);const triggeredByTyping=mutations.some((mutation=>"characterData"===mutation.type||"childList"===mutation.type||"attributes"===mutation.type&&mutation.target===this.root));this.update(triggeredByTyping?core_emitter.sources.SILENT:source)}catch(ignored){}}))})),this.emitter.on(core_emitter.events.SCROLL_OPTIMIZE,((mutations,context)=>{if(context.range){const{startNode,startOffset,endNode,endOffset}=context.range;this.setNativeRange(startNode,startOffset,endNode,endOffset),this.update(core_emitter.sources.SILENT)}})),this.update(core_emitter.sources.SILENT)}handleComposition(){this.emitter.on(core_emitter.events.COMPOSITION_BEFORE_START,(()=>{this.composing=!0})),this.emitter.on(core_emitter.events.COMPOSITION_END,(()=>{if(this.composing=!1,this.cursor.parent){const range=this.cursor.restore();if(!range)return;setTimeout((()=>{this.setNativeRange(range.startNode,range.startOffset,range.endNode,range.endOffset)}),1)}}))}handleDragging(){this.emitter.listenDOM("mousedown",document.body,(()=>{this.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(()=>{this.mouseDown=!1,this.update(core_emitter.sources.USER)}))}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(format,value){this.scroll.update();const nativeRange=this.getNativeRange();if(null!=nativeRange&&nativeRange.native.collapsed&&!this.scroll.query(format,Scope.BLOCK)){if(nativeRange.start.node!==this.cursor.textNode){const blot=this.scroll.find(nativeRange.start.node,!1);if(null==blot)return;if(blot instanceof LeafBlot$1){const after=blot.split(nativeRange.start.offset);blot.parent.insertBefore(this.cursor,after)}else blot.insertBefore(this.cursor,nativeRange.start.node);this.cursor.attach()}this.cursor.format(format,value),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(index){let length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const scrollLength=this.scroll.length();let node;index=Math.min(index,scrollLength-1),length=Math.min(index+length,scrollLength-1)-index;let[leaf,offset]=this.scroll.leaf(index);if(null==leaf)return null;if(length>0&&offset===leaf.length()){const[next]=this.scroll.leaf(index+1);if(next){const[line]=this.scroll.line(index),[nextLine]=this.scroll.line(index+1);line===nextLine&&(leaf=next,offset=0)}}[node,offset]=leaf.position(offset,!0);const range=document.createRange();if(length>0)return range.setStart(node,offset),[leaf,offset]=this.scroll.leaf(index+length),null==leaf?null:([node,offset]=leaf.position(offset,!0),range.setEnd(node,offset),range.getBoundingClientRect());let rect,side="left";if(node instanceof Text){if(!node.data.length)return null;offset<node.data.length?(range.setStart(node,offset),range.setEnd(node,offset+1)):(range.setStart(node,offset-1),range.setEnd(node,offset),side="right"),rect=range.getBoundingClientRect()}else{if(!(leaf.domNode instanceof Element))return null;rect=leaf.domNode.getBoundingClientRect(),offset>0&&(side="right")}return{bottom:rect.top+rect.height,height:rect.height,left:rect[side],right:rect[side],top:rect.top,width:0}}getNativeRange(){const selection=document.getSelection();if(null==selection||selection.rangeCount<=0)return null;const nativeRange=selection.getRangeAt(0);if(null==nativeRange)return null;const range=this.normalizeNative(nativeRange);return selection_debug.info("getNativeRange",range),range}getRange(){const root=this.scroll.domNode;if("isConnected"in root&&!root.isConnected)return[null,null];const normalized=this.getNativeRange();if(null==normalized)return[null,null];return[this.normalizedToRange(normalized),normalized]}hasFocus(){return document.activeElement===this.root||null!=document.activeElement&&contains(this.root,document.activeElement)}normalizedToRange(range){const positions=[[range.start.node,range.start.offset]];range.native.collapsed||positions.push([range.end.node,range.end.offset]);const indexes=positions.map((position=>{const[node,offset]=position,blot=this.scroll.find(node,!0),index=blot.offset(this.scroll);return 0===offset?index:blot instanceof LeafBlot$1?index+blot.index(node,offset):index+blot.length()})),end=Math.min(Math.max(...indexes),this.scroll.length()-1),start=Math.min(end,...indexes);return new Range(start,end-start)}normalizeNative(nativeRange){if(!contains(this.root,nativeRange.startContainer)||!nativeRange.collapsed&&!contains(this.root,nativeRange.endContainer))return null;const range={start:{node:nativeRange.startContainer,offset:nativeRange.startOffset},end:{node:nativeRange.endContainer,offset:nativeRange.endOffset},native:nativeRange};return[range.start,range.end].forEach((position=>{let{node,offset}=position;for(;!(node instanceof Text)&&node.childNodes.length>0;)if(node.childNodes.length>offset)node=node.childNodes[offset],offset=0;else{if(node.childNodes.length!==offset)break;node=node.lastChild,offset=node instanceof Text?node.data.length:node.childNodes.length>0?node.childNodes.length:node.childNodes.length+1}position.node=node,position.offset=offset})),range}rangeToNative(range){const scrollLength=this.scroll.length(),getPosition=(index,inclusive)=>{index=Math.min(scrollLength-1,index);const[leaf,leafOffset]=this.scroll.leaf(index);return leaf?leaf.position(leafOffset,inclusive):[null,-1]};return[...getPosition(range.index,!1),...getPosition(range.index+range.length,!0)]}setNativeRange(startNode,startOffset){let endNode=arguments.length>2&&void 0!==arguments[2]?arguments[2]:startNode,endOffset=arguments.length>3&&void 0!==arguments[3]?arguments[3]:startOffset,force=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(selection_debug.info("setNativeRange",startNode,startOffset,endNode,endOffset),null!=startNode&&(null==this.root.parentNode||null==startNode.parentNode||null==endNode.parentNode))return;const selection=document.getSelection();if(null!=selection)if(null!=startNode){this.hasFocus()||this.root.focus({preventScroll:!0});const{native}=this.getNativeRange()||{};if(null==native||force||startNode!==native.startContainer||startOffset!==native.startOffset||endNode!==native.endContainer||endOffset!==native.endOffset){startNode instanceof Element&&"BR"===startNode.tagName&&(startOffset=Array.from(startNode.parentNode.childNodes).indexOf(startNode),startNode=startNode.parentNode),endNode instanceof Element&&"BR"===endNode.tagName&&(endOffset=Array.from(endNode.parentNode.childNodes).indexOf(endNode),endNode=endNode.parentNode);const range=document.createRange();range.setStart(startNode,startOffset),range.setEnd(endNode,endOffset),selection.removeAllRanges(),selection.addRange(range)}}else selection.removeAllRanges(),this.root.blur()}setRange(range){let force=arguments.length>1&&void 0!==arguments[1]&&arguments[1],source=arguments.length>2&&void 0!==arguments[2]?arguments[2]:core_emitter.sources.API;if("string"==typeof force&&(source=force,force=!1),selection_debug.info("setRange",range),null!=range){const args=this.rangeToNative(range);this.setNativeRange(...args,force)}else this.setNativeRange(null);this.update(source)}update(){let source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:core_emitter.sources.USER;const oldRange=this.lastRange,[lastRange,nativeRange]=this.getRange();if(this.lastRange=lastRange,this.lastNative=nativeRange,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,lodash_es_isEqual.A)(oldRange,this.lastRange)){if(!this.composing&&null!=nativeRange&&nativeRange.native.collapsed&&nativeRange.start.node!==this.cursor.textNode){const range=this.cursor.restore();range&&this.setNativeRange(range.startNode,range.startOffset,range.endNode,range.endOffset)}const args=[core_emitter.events.SELECTION_CHANGE,lodash_es_cloneDeep(this.lastRange),lodash_es_cloneDeep(oldRange),source];this.emitter.emit(core_emitter.events.EDITOR_CHANGE,...args),source!==core_emitter.sources.SILENT&&this.emitter.emit(...args)}}},ASCII=/^[ -~]*$/;function convertListHTML(items,lastIndent,types){if(0===items.length){const[endTag]=getListType(types.pop());return lastIndent<=0?`</li></${endTag}>`:`</li></${endTag}>${convertListHTML([],lastIndent-1,types)}`}const[{child,offset,length,indent,type},...rest]=items,[tag,attribute]=getListType(type);if(indent>lastIndent)return types.push(type),indent===lastIndent+1?`<${tag}><li${attribute}>${convertHTML(child,offset,length)}${convertListHTML(rest,indent,types)}`:`<${tag}><li>${convertListHTML(items,lastIndent+1,types)}`;const previousType=types[types.length-1];if(indent===lastIndent&&type===previousType)return`</li><li${attribute}>${convertHTML(child,offset,length)}${convertListHTML(rest,indent,types)}`;const[endTag]=getListType(types.pop());return`</li></${endTag}>${convertListHTML(items,lastIndent-1,types)}`}function convertHTML(blot,index,length){let isRoot=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("html"in blot&&"function"==typeof blot.html)return blot.html(index,length);if(blot instanceof text_Text){return escapeText(blot.value().slice(index,index+length)).replaceAll(" ","&nbsp;")}if(blot instanceof ParentBlot$1){if("list-container"===blot.statics.blotName){const items=[];return blot.children.forEachAt(index,length,((child,offset,childLength)=>{const formats="formats"in child&&"function"==typeof child.formats?child.formats():{};items.push({child,offset,length:childLength,indent:formats.indent||0,type:formats.list})})),convertListHTML(items,-1,[])}const parts=[];if(blot.children.forEachAt(index,length,((child,offset,childLength)=>{parts.push(convertHTML(child,offset,childLength))})),isRoot||"list"===blot.statics.blotName)return parts.join("");const{outerHTML,innerHTML}=blot.domNode,[start,end]=outerHTML.split(`>${innerHTML}<`);return"<table"===start?`<table style="border: 1px solid #000;">${parts.join("")}<${end}`:`${start}>${parts.join("")}<${end}`}return blot.domNode instanceof Element?blot.domNode.outerHTML:""}function combineFormats(formats,combined){return Object.keys(combined).reduce(((merged,name)=>{if(null==formats[name])return merged;const combinedValue=combined[name];return combinedValue===formats[name]?merged[name]=combinedValue:Array.isArray(combinedValue)?combinedValue.indexOf(formats[name])<0?merged[name]=combinedValue.concat([formats[name]]):merged[name]=combinedValue:merged[name]=[combinedValue,formats[name]],merged}),{})}function getListType(type){const tag="ordered"===type?"ol":"ul";switch(type){case"checked":return[tag,' data-list="checked"'];case"unchecked":return[tag,' data-list="unchecked"'];default:return[tag,""]}}function normalizeDelta(delta){return delta.reduce(((normalizedDelta,op)=>{if("string"==typeof op.insert){const text=op.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return normalizedDelta.insert(text,op.attributes)}return normalizedDelta.push(op)}),new(Delta_default()))}function shiftRange(_ref,amount){let{index,length}=_ref;return new Range(index+amount,length)}const editor=class Editor{constructor(scroll){this.scroll=scroll,this.delta=this.getDelta()}applyDelta(delta){this.scroll.update();let scrollLength=this.scroll.length();this.scroll.batchStart();const normalizedDelta=normalizeDelta(delta),deleteDelta=new(Delta_default());return function splitOpLines(ops){const split=[];return ops.forEach((op=>{if("string"==typeof op.insert){op.insert.split("\n").forEach(((line,index)=>{index&&split.push({insert:"\n",attributes:op.attributes}),line&&split.push({insert:line,attributes:op.attributes})}))}else split.push(op)})),split}(normalizedDelta.ops.slice()).reduce(((index,op)=>{const length=Delta.Op.length(op);let attributes=op.attributes||{},isImplicitNewlinePrepended=!1,isImplicitNewlineAppended=!1;if(null!=op.insert){if(deleteDelta.retain(length),"string"==typeof op.insert){const text=op.insert;isImplicitNewlineAppended=!text.endsWith("\n")&&(scrollLength<=index||!!this.scroll.descendant(BlockEmbed,index)[0]),this.scroll.insertAt(index,text);const[line,offset]=this.scroll.line(index);let formats=(0,merge.A)({},bubbleFormats(line));if(line instanceof Block){const[leaf]=line.descendant(LeafBlot$1,offset);leaf&&(formats=(0,merge.A)(formats,bubbleFormats(leaf)))}attributes=Delta.AttributeMap.diff(formats,attributes)||{}}else if("object"==typeof op.insert){const key=Object.keys(op.insert)[0];if(null==key)return index;const isInlineEmbed=null!=this.scroll.query(key,Scope.INLINE);if(isInlineEmbed)(scrollLength<=index||this.scroll.descendant(BlockEmbed,index)[0])&&(isImplicitNewlineAppended=!0);else if(index>0){const[leaf,offset]=this.scroll.descendant(LeafBlot$1,index-1);if(leaf instanceof text_Text){"\n"!==leaf.value()[offset]&&(isImplicitNewlinePrepended=!0)}else leaf instanceof EmbedBlot$1&&leaf.statics.scope===Scope.INLINE_BLOT&&(isImplicitNewlinePrepended=!0)}if(this.scroll.insertAt(index,key,op.insert[key]),isInlineEmbed){const[leaf]=this.scroll.descendant(LeafBlot$1,index);if(leaf){const formats=(0,merge.A)({},bubbleFormats(leaf));attributes=Delta.AttributeMap.diff(formats,attributes)||{}}}}scrollLength+=length}else if(deleteDelta.push(op),null!==op.retain&&"object"==typeof op.retain){const key=Object.keys(op.retain)[0];if(null==key)return index;this.scroll.updateEmbedAt(index,key,op.retain[key])}Object.keys(attributes).forEach((name=>{this.scroll.formatAt(index,length,name,attributes[name])}));const prependedLength=isImplicitNewlinePrepended?1:0,addedLength=isImplicitNewlineAppended?1:0;return scrollLength+=prependedLength+addedLength,deleteDelta.retain(prependedLength),deleteDelta.delete(addedLength),index+length+prependedLength+addedLength}),0),deleteDelta.reduce(((index,op)=>"number"==typeof op.delete?(this.scroll.deleteAt(index,op.delete),index):index+Delta.Op.length(op)),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(normalizedDelta)}deleteText(index,length){return this.scroll.deleteAt(index,length),this.update((new(Delta_default())).retain(index).delete(length))}formatLine(index,length){let formats=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(formats).forEach((format=>{this.scroll.lines(index,Math.max(length,1)).forEach((line=>{line.format(format,formats[format])}))})),this.scroll.optimize();const delta=(new(Delta_default())).retain(index).retain(length,lodash_es_cloneDeep(formats));return this.update(delta)}formatText(index,length){let formats=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(formats).forEach((format=>{this.scroll.formatAt(index,length,format,formats[format])}));const delta=(new(Delta_default())).retain(index).retain(length,lodash_es_cloneDeep(formats));return this.update(delta)}getContents(index,length){return this.delta.slice(index,index+length)}getDelta(){return this.scroll.lines().reduce(((delta,line)=>delta.concat(line.delta())),new(Delta_default()))}getFormat(index){let length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,lines=[],leaves=[];0===length?this.scroll.path(index).forEach((path=>{const[blot]=path;blot instanceof Block?lines.push(blot):blot instanceof LeafBlot$1&&leaves.push(blot)})):(lines=this.scroll.lines(index,length),leaves=this.scroll.descendants(LeafBlot$1,index,length));const[lineFormats,leafFormats]=[lines,leaves].map((blots=>{const blot=blots.shift();if(null==blot)return{};let formats=bubbleFormats(blot);for(;Object.keys(formats).length>0;){const blot=blots.shift();if(null==blot)return formats;formats=combineFormats(bubbleFormats(blot),formats)}return formats}));return{...lineFormats,...leafFormats}}getHTML(index,length){const[line,lineOffset]=this.scroll.line(index);if(line){const lineLength=line.length();return!(line.length()>=lineOffset+length)||0===lineOffset&&length===lineLength?convertHTML(this.scroll,index,length,!0):convertHTML(line,lineOffset,length,!0)}return""}getText(index,length){return this.getContents(index,length).filter((op=>"string"==typeof op.insert)).map((op=>op.insert)).join("")}insertContents(index,contents){const normalizedDelta=normalizeDelta(contents),change=(new(Delta_default())).retain(index).concat(normalizedDelta);return this.scroll.insertContents(index,normalizedDelta),this.update(change)}insertEmbed(index,embed,value){return this.scroll.insertAt(index,embed,value),this.update((new(Delta_default())).retain(index).insert({[embed]:value}))}insertText(index,text){let formats=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return text=text.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(index,text),Object.keys(formats).forEach((format=>{this.scroll.formatAt(index,text.length,format,formats[format])})),this.update((new(Delta_default())).retain(index).insert(text,lodash_es_cloneDeep(formats)))}isBlank(){if(0===this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;const blot=this.scroll.children.head;if(blot?.statics.blotName!==Block.blotName)return!1;const block=blot;return!(block.children.length>1)&&block.children.head instanceof blots_break}removeFormat(index,length){const text=this.getText(index,length),[line,offset]=this.scroll.line(index+length);let suffixLength=0,suffix=new(Delta_default());null!=line&&(suffixLength=line.length()-offset,suffix=line.delta().slice(offset,offset+suffixLength-1).insert("\n"));const diff=this.getContents(index,length+suffixLength).diff((new(Delta_default())).insert(text).concat(suffix)),delta=(new(Delta_default())).retain(index).concat(diff);return this.applyDelta(delta)}update(change){let mutations=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],selectionInfo=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const oldDelta=this.delta;if(1===mutations.length&&"characterData"===mutations[0].type&&mutations[0].target.data.match(ASCII)&&this.scroll.find(mutations[0].target)){const textBlot=this.scroll.find(mutations[0].target),formats=bubbleFormats(textBlot),index=textBlot.offset(this.scroll),oldValue=mutations[0].oldValue.replace(cursor.CONTENTS,""),oldText=(new(Delta_default())).insert(oldValue),newText=(new(Delta_default())).insert(textBlot.value()),relativeSelectionInfo=selectionInfo&&{oldRange:shiftRange(selectionInfo.oldRange,-index),newRange:shiftRange(selectionInfo.newRange,-index)};change=(new(Delta_default())).retain(index).concat(oldText.diff(newText,relativeSelectionInfo)).reduce(((delta,op)=>op.insert?delta.insert(op.insert,formats):delta.push(op)),new(Delta_default())),this.delta=oldDelta.compose(change)}else this.delta=this.getDelta(),change&&(0,lodash_es_isEqual.A)(oldDelta.compose(change),this.delta)||(change=oldDelta.diff(this.delta,selectionInfo));return change}};const core_module=class Module{static DEFAULTS={};constructor(quill){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.quill=quill,this.options=options}};const blots_embed=class Embed extends EmbedBlot$1{constructor(scroll,node){super(scroll,node),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach((childNode=>{this.contentNode.appendChild(childNode)})),this.leftGuard=document.createTextNode("\ufeff"),this.rightGuard=document.createTextNode("\ufeff"),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(node,offset){return node===this.leftGuard?0:node===this.rightGuard?1:super.index(node,offset)}restore(node){let textNode,range=null;const text=node.data.split("\ufeff").join("");if(node===this.leftGuard)if(this.prev instanceof text_Text){const prevLength=this.prev.length();this.prev.insertAt(prevLength,text),range={startNode:this.prev.domNode,startOffset:prevLength+text.length}}else textNode=document.createTextNode(text),this.parent.insertBefore(this.scroll.create(textNode),this),range={startNode:textNode,startOffset:text.length};else node===this.rightGuard&&(this.next instanceof text_Text?(this.next.insertAt(0,text),range={startNode:this.next.domNode,startOffset:text.length}):(textNode=document.createTextNode(text),this.parent.insertBefore(this.scroll.create(textNode),this.next),range={startNode:textNode,startOffset:text.length}));return node.data="\ufeff",range}update(mutations,context){mutations.forEach((mutation=>{if("characterData"===mutation.type&&(mutation.target===this.leftGuard||mutation.target===this.rightGuard)){const range=this.restore(mutation.target);range&&(context.range=range)}}))}};const composition=class Composition{isComposing=!1;constructor(scroll,emitter){this.scroll=scroll,this.emitter=emitter,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",(event=>{this.isComposing||this.handleCompositionStart(event)})),this.scroll.domNode.addEventListener("compositionend",(event=>{this.isComposing&&queueMicrotask((()=>{this.handleCompositionEnd(event)}))}))}handleCompositionStart(event){const blot=event.target instanceof Node?this.scroll.find(event.target,!0):null;!blot||blot instanceof blots_embed||(this.emitter.emit(core_emitter.events.COMPOSITION_BEFORE_START,event),this.scroll.batchStart(),this.emitter.emit(core_emitter.events.COMPOSITION_START,event),this.isComposing=!0)}handleCompositionEnd(event){this.emitter.emit(core_emitter.events.COMPOSITION_BEFORE_END,event),this.scroll.batchEnd(),this.emitter.emit(core_emitter.events.COMPOSITION_END,event),this.isComposing=!1}};class Theme{static DEFAULTS={modules:{}};static themes={default:Theme};modules={};constructor(quill,options){this.quill=quill,this.options=options}init(){Object.keys(this.options.modules).forEach((name=>{null==this.modules[name]&&this.addModule(name)}))}addModule(name){const ModuleClass=this.quill.constructor.import(`modules/${name}`);return this.modules[name]=new ModuleClass(this.quill,this.options.modules[name]||{}),this.modules[name]}}const core_theme=Theme,getElementRect=element=>{const rect=element.getBoundingClientRect(),scaleX="offsetWidth"in element&&Math.abs(rect.width)/element.offsetWidth||1,scaleY="offsetHeight"in element&&Math.abs(rect.height)/element.offsetHeight||1;return{top:rect.top,right:rect.left+element.clientWidth*scaleX,bottom:rect.top+element.clientHeight*scaleY,left:rect.left}},paddingValueToInt=value=>{const number=parseInt(value,10);return Number.isNaN(number)?0:number},getScrollDistance=(targetStart,targetEnd,scrollStart,scrollEnd,scrollPaddingStart,scrollPaddingEnd)=>targetStart<scrollStart&&targetEnd>scrollEnd?0:targetStart<scrollStart?-(scrollStart-targetStart+scrollPaddingStart):targetEnd>scrollEnd?targetEnd-targetStart>scrollEnd-scrollStart?targetStart+scrollPaddingStart-scrollStart:targetEnd-scrollEnd+scrollPaddingEnd:0,utils_scrollRectIntoView=(root,targetRect)=>{const document=root.ownerDocument;let rect=targetRect,current=root;for(;current;){const isDocumentBody=current===document.body,bounding=isDocumentBody?{top:0,right:window.visualViewport?.width??document.documentElement.clientWidth,bottom:window.visualViewport?.height??document.documentElement.clientHeight,left:0}:getElementRect(current),style=getComputedStyle(current),scrollDistanceX=getScrollDistance(rect.left,rect.right,bounding.left,bounding.right,paddingValueToInt(style.scrollPaddingLeft),paddingValueToInt(style.scrollPaddingRight)),scrollDistanceY=getScrollDistance(rect.top,rect.bottom,bounding.top,bounding.bottom,paddingValueToInt(style.scrollPaddingTop),paddingValueToInt(style.scrollPaddingBottom));if(scrollDistanceX||scrollDistanceY)if(isDocumentBody)document.defaultView?.scrollBy(scrollDistanceX,scrollDistanceY);else{const{scrollLeft,scrollTop}=current;scrollDistanceY&&(current.scrollTop+=scrollDistanceY),scrollDistanceX&&(current.scrollLeft+=scrollDistanceX);const scrolledLeft=current.scrollLeft-scrollLeft,scrolledTop=current.scrollTop-scrollTop;rect={left:rect.left-scrolledLeft,top:rect.top-scrolledTop,right:rect.right-scrolledLeft,bottom:rect.bottom-scrolledTop}}current=isDocumentBody||"fixed"===style.position?null:(element=current).parentElement||element.getRootNode().host||null}var element},CORE_FORMATS=["block","break","cursor","inline","scroll","text"],utils_createRegistryWithFormats=(formats,sourceRegistry,debug)=>{const registry=new Registry;return CORE_FORMATS.forEach((name=>{const coreBlot=sourceRegistry.query(name);coreBlot&&registry.register(coreBlot)})),formats.forEach((name=>{let format=sourceRegistry.query(name);format||debug.error(`Cannot register "${name}" specified in "formats" config. Are you sure it was registered?`);let iterations=0;for(;format;)if(registry.register(format),format="blotName"in format?format.requiredContainer??null:null,iterations+=1,iterations>100){debug.error(`Cycle detected in registering blot requiredContainer: "${name}"`);break}})),registry},quill_debug=logger("quill"),globalRegistry=new Registry;ParentBlot$1.uiClass="ql-ui";class Quill{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:globalRegistry,theme:"default"};static events=core_emitter.events;static sources=core_emitter.sources;static version="2.0.3";static imports={delta:Delta_default(),parchment:parchment_namespaceObject,"core/module":core_module,"core/theme":core_theme};static debug(limit){!0===limit&&(limit="log"),logger.level(limit)}static find(node){let bubble=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return instances.get(node)||globalRegistry.find(node,bubble)}static import(name){return null==this.imports[name]&&quill_debug.error(`Cannot import ${name}. Are you sure it was registered?`),this.imports[name]}static register(){if("string"!=typeof(arguments.length<=0?void 0:arguments[0])){const target=arguments.length<=0?void 0:arguments[0],overwrite=!!(arguments.length<=1?void 0:arguments[1]),name="attrName"in target?target.attrName:target.blotName;"string"==typeof name?this.register(`formats/${name}`,target,overwrite):Object.keys(target).forEach((key=>{this.register(key,target[key],overwrite)}))}else{const path=arguments.length<=0?void 0:arguments[0],target=arguments.length<=1?void 0:arguments[1],overwrite=!!(arguments.length<=2?void 0:arguments[2]);null==this.imports[path]||overwrite||quill_debug.warn(`Overwriting ${path} with`,target),this.imports[path]=target,(path.startsWith("blots/")||path.startsWith("formats/"))&&target&&"boolean"!=typeof target&&"abstract"!==target.blotName&&globalRegistry.register(target),"function"==typeof target.register&&target.register(globalRegistry)}}constructor(container){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options=function expandConfig(containerOrSelector,options){const container=resolveSelector(containerOrSelector);if(!container)throw new Error("Invalid Quill container");const shouldUseDefaultTheme=!options.theme||options.theme===Quill.DEFAULTS.theme,theme=shouldUseDefaultTheme?core_theme:Quill.import(`themes/${options.theme}`);if(!theme)throw new Error(`Invalid theme ${options.theme}. Did you register it?`);const{modules:quillModuleDefaults,...quillDefaults}=Quill.DEFAULTS,{modules:themeModuleDefaults,...themeDefaults}=theme.DEFAULTS;let userModuleOptions=expandModuleConfig(options.modules);null!=userModuleOptions&&userModuleOptions.toolbar&&userModuleOptions.toolbar.constructor!==Object&&(userModuleOptions={...userModuleOptions,toolbar:{container:userModuleOptions.toolbar}});const modules=(0,merge.A)({},expandModuleConfig(quillModuleDefaults),expandModuleConfig(themeModuleDefaults),userModuleOptions),config={...quillDefaults,...omitUndefinedValuesFromOptions(themeDefaults),...omitUndefinedValuesFromOptions(options)};let registry=options.registry;registry?options.formats&&quill_debug.warn('Ignoring "formats" option because "registry" is specified'):registry=options.formats?utils_createRegistryWithFormats(options.formats,config.registry,quill_debug):config.registry;return{...config,registry,container,theme,modules:Object.entries(modules).reduce(((modulesWithDefaults,_ref2)=>{let[name,value]=_ref2;if(!value)return modulesWithDefaults;const moduleClass=Quill.import(`modules/${name}`);return null==moduleClass?(quill_debug.error(`Cannot load ${name} module. Are you sure you registered it?`),modulesWithDefaults):{...modulesWithDefaults,[name]:(0,merge.A)({},moduleClass.DEFAULTS||{},value)}}),{}),bounds:resolveSelector(config.bounds)}}(container,options),this.container=this.options.container,null==this.container)return void quill_debug.error("Invalid Quill container",container);this.options.debug&&Quill.debug(this.options.debug);const html=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",instances.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new core_emitter;const scrollBlotName=ScrollBlot$1.blotName,ScrollBlot=this.options.registry.query(scrollBlotName);if(!ScrollBlot||!("blotName"in ScrollBlot))throw new Error(`Cannot initialize Quill without "${scrollBlotName}" blot`);if(this.scroll=new ScrollBlot(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new editor(this.scroll),this.selection=new selection(this.scroll,this.emitter),this.composition=new composition(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(core_emitter.events.EDITOR_CHANGE,(type=>{type===core_emitter.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())})),this.emitter.on(core_emitter.events.SCROLL_UPDATE,((source,mutations)=>{const oldRange=this.selection.lastRange,[newRange]=this.selection.getRange(),selectionInfo=oldRange&&newRange?{oldRange,newRange}:void 0;modify.call(this,(()=>this.editor.update(null,mutations,selectionInfo)),source)})),this.emitter.on(core_emitter.events.SCROLL_EMBED_UPDATE,((blot,delta)=>{const oldRange=this.selection.lastRange,[newRange]=this.selection.getRange(),selectionInfo=oldRange&&newRange?{oldRange,newRange}:void 0;modify.call(this,(()=>{const change=(new(Delta_default())).retain(blot.offset(this)).retain({[blot.statics.blotName]:delta});return this.editor.update(change,[],selectionInfo)}),Quill.sources.USER)})),html){const contents=this.clipboard.convert({html:`${html}<p><br></p>`,text:"\n"});this.setContents(contents)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(container){let refNode=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof container){const className=container;(container=document.createElement("div")).classList.add(className)}return this.container.insertBefore(container,refNode),container}blur(){this.selection.setRange(null)}deleteText(index,length,source){return[index,length,,source]=overload(index,length,source),modify.call(this,(()=>this.editor.deleteText(index,length)),source,index,-1*length)}disable(){this.enable(!1)}editReadOnly(modifier){this.allowReadOnlyEdits=!0;const value=modifier();return this.allowReadOnlyEdits=!1,value}enable(){let enabled=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(enabled),this.container.classList.toggle("ql-disabled",!enabled)}focus(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selection.focus(),options.preventScroll||this.scrollSelectionIntoView()}format(name,value){let source=arguments.length>2&&void 0!==arguments[2]?arguments[2]:core_emitter.sources.API;return modify.call(this,(()=>{const range=this.getSelection(!0);let change=new(Delta_default());if(null==range)return change;if(this.scroll.query(name,Scope.BLOCK))change=this.editor.formatLine(range.index,range.length,{[name]:value});else{if(0===range.length)return this.selection.format(name,value),change;change=this.editor.formatText(range.index,range.length,{[name]:value})}return this.setSelection(range,core_emitter.sources.SILENT),change}),source)}formatLine(index,length,name,value,source){let formats;return[index,length,formats,source]=overload(index,length,name,value,source),modify.call(this,(()=>this.editor.formatLine(index,length,formats)),source,index,0)}formatText(index,length,name,value,source){let formats;return[index,length,formats,source]=overload(index,length,name,value,source),modify.call(this,(()=>this.editor.formatText(index,length,formats)),source,index,0)}getBounds(index){let length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,bounds=null;if(bounds="number"==typeof index?this.selection.getBounds(index,length):this.selection.getBounds(index.index,index.length),!bounds)return null;const containerBounds=this.container.getBoundingClientRect();return{bottom:bounds.bottom-containerBounds.top,height:bounds.height,left:bounds.left-containerBounds.left,right:bounds.right-containerBounds.left,top:bounds.top-containerBounds.top,width:bounds.width}}getContents(){let index=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-index;return[index,length]=overload(index,length),this.editor.getContents(index,length)}getFormat(){let index=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof index?this.editor.getFormat(index,length):this.editor.getFormat(index.index,index.length)}getIndex(blot){return blot.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(index){return this.scroll.leaf(index)}getLine(index){return this.scroll.line(index)}getLines(){let index=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof index?this.scroll.lines(index.index,index.length):this.scroll.lines(index,length)}getModule(name){return this.theme.modules[name]}getSelection(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let index=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,length=arguments.length>1?arguments[1]:void 0;return"number"==typeof index&&(length=length??this.getLength()-index),[index,length]=overload(index,length),this.editor.getHTML(index,length)}getText(){let index=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,length=arguments.length>1?arguments[1]:void 0;return"number"==typeof index&&(length=length??this.getLength()-index),[index,length]=overload(index,length),this.editor.getText(index,length)}hasFocus(){return this.selection.hasFocus()}insertEmbed(index,embed,value){let source=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Quill.sources.API;return modify.call(this,(()=>this.editor.insertEmbed(index,embed,value)),source,index)}insertText(index,text,name,value,source){let formats;return[index,,formats,source]=overload(index,0,name,value,source),modify.call(this,(()=>this.editor.insertText(index,text,formats)),source,index,text.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(index,length,source){return[index,length,,source]=overload(index,length,source),modify.call(this,(()=>this.editor.removeFormat(index,length)),source,index)}scrollRectIntoView(rect){utils_scrollRectIntoView(this.root,rect)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const range=this.selection.lastRange,bounds=range&&this.selection.getBounds(range.index,range.length);bounds&&this.scrollRectIntoView(bounds)}setContents(delta){let source=arguments.length>1&&void 0!==arguments[1]?arguments[1]:core_emitter.sources.API;return modify.call(this,(()=>{delta=new(Delta_default())(delta);const length=this.getLength(),delete1=this.editor.deleteText(0,length),applied=this.editor.insertContents(0,delta),delete2=this.editor.deleteText(this.getLength()-1,1);return delete1.compose(applied).compose(delete2)}),source)}setSelection(index,length,source){null==index?this.selection.setRange(null,length||Quill.sources.API):([index,length,,source]=overload(index,length,source),this.selection.setRange(new Range(Math.max(0,index),length),source),source!==core_emitter.sources.SILENT&&this.scrollSelectionIntoView())}setText(text){let source=arguments.length>1&&void 0!==arguments[1]?arguments[1]:core_emitter.sources.API;const delta=(new(Delta_default())).insert(text);return this.setContents(delta,source)}update(){let source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:core_emitter.sources.USER;const change=this.scroll.update(source);return this.selection.update(source),change}updateContents(delta){let source=arguments.length>1&&void 0!==arguments[1]?arguments[1]:core_emitter.sources.API;return modify.call(this,(()=>(delta=new(Delta_default())(delta),this.editor.applyDelta(delta))),source,!0)}}function resolveSelector(selector){return"string"==typeof selector?document.querySelector(selector):selector}function expandModuleConfig(config){return Object.entries(config??{}).reduce(((expanded,_ref)=>{let[key,value]=_ref;return{...expanded,[key]:!0===value?{}:value}}),{})}function omitUndefinedValuesFromOptions(obj){return Object.fromEntries(Object.entries(obj).filter((entry=>void 0!==entry[1])))}function modify(modifier,source,index,shift){if(!this.isEnabled()&&source===core_emitter.sources.USER&&!this.allowReadOnlyEdits)return new(Delta_default());let range=null==index?null:this.getSelection();const oldDelta=this.editor.delta,change=modifier();if(null!=range&&(!0===index&&(index=range.index),null==shift?range=quill_shiftRange(range,change,source):0!==shift&&(range=quill_shiftRange(range,index,shift,source)),this.setSelection(range,core_emitter.sources.SILENT)),change.length()>0){const args=[core_emitter.events.TEXT_CHANGE,change,oldDelta,source];this.emitter.emit(core_emitter.events.EDITOR_CHANGE,...args),source!==core_emitter.sources.SILENT&&this.emitter.emit(...args)}return change}function overload(index,length,name,value,source){let formats={};return"number"==typeof index.index&&"number"==typeof index.length?"number"!=typeof length?(source=value,value=name,name=length,length=index.length,index=index.index):(length=index.length,index=index.index):"number"!=typeof length&&(source=value,value=name,name=length,length=0),"object"==typeof name?(formats=name,source=value):"string"==typeof name&&(null!=value?formats[name]=value:source=name),[index,length,formats,source=source||core_emitter.sources.API]}function quill_shiftRange(range,index,lengthOrSource,source){const length="number"==typeof lengthOrSource?lengthOrSource:0;if(null==range)return null;let start,end;return index&&"function"==typeof index.transformPosition?[start,end]=[range.index,range.index+range.length].map((pos=>index.transformPosition(pos,source!==core_emitter.sources.USER))):[start,end]=[range.index,range.index+range.length].map((pos=>pos<index||pos===index&&source===core_emitter.sources.USER?pos:length>=0?pos+length:Math.max(index,pos+length))),new Range(start,end-start)}const container=class Container extends ContainerBlot$1{};function isLine(blot){return blot instanceof Block||blot instanceof BlockEmbed}function isUpdatable(blot){return"function"==typeof blot.updateContent}function insertInlineContents(parent,index,inlineContents){inlineContents.reduce(((index,op)=>{const length=Delta.Op.length(op);let attributes=op.attributes||{};if(null!=op.insert)if("string"==typeof op.insert){const text=op.insert;parent.insertAt(index,text);const[leaf]=parent.descendant(LeafBlot$1,index),formats=bubbleFormats(leaf);attributes=Delta.AttributeMap.diff(formats,attributes)||{}}else if("object"==typeof op.insert){const key=Object.keys(op.insert)[0];if(null==key)return index;parent.insertAt(index,key,op.insert[key]);if(null!=parent.scroll.query(key,Scope.INLINE)){const[leaf]=parent.descendant(LeafBlot$1,index),formats=bubbleFormats(leaf);attributes=Delta.AttributeMap.diff(formats,attributes)||{}}}return Object.keys(attributes).forEach((key=>{parent.formatAt(index,length,key,attributes[key])})),index+length}),index)}const blots_scroll=class Scroll extends ScrollBlot$1{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Block;static allowedChildren=[Block,BlockEmbed,container];constructor(registry,domNode,_ref){let{emitter}=_ref;super(registry,domNode),this.emitter=emitter,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",(e=>this.handleDragStart(e)))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const mutations=this.batch;this.batch=!1,this.update(mutations)}emitMount(blot){this.emitter.emit(core_emitter.events.SCROLL_BLOT_MOUNT,blot)}emitUnmount(blot){this.emitter.emit(core_emitter.events.SCROLL_BLOT_UNMOUNT,blot)}emitEmbedUpdate(blot,change){this.emitter.emit(core_emitter.events.SCROLL_EMBED_UPDATE,blot,change)}deleteAt(index,length){const[first,offset]=this.line(index),[last]=this.line(index+length);if(super.deleteAt(index,length),null!=last&&first!==last&&offset>0){if(first instanceof BlockEmbed||last instanceof BlockEmbed)return void this.optimize();const ref=last.children.head instanceof blots_break?null:last.children.head;first.moveChildren(last,ref),first.remove()}this.optimize()}enable(){let enabled=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",enabled?"true":"false")}formatAt(index,length,format,value){super.formatAt(index,length,format,value),this.optimize()}insertAt(index,value,def){if(index>=this.length())if(null==def||null==this.scroll.query(value,Scope.BLOCK)){const blot=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(blot),null==def&&value.endsWith("\n")?blot.insertAt(0,value.slice(0,-1),def):blot.insertAt(0,value,def)}else{const embed=this.scroll.create(value,def);this.appendChild(embed)}else super.insertAt(index,value,def);this.optimize()}insertBefore(blot,ref){if(blot.statics.scope===Scope.INLINE_BLOT){const wrapper=this.scroll.create(this.statics.defaultChild.blotName);wrapper.appendChild(blot),super.insertBefore(wrapper,ref)}else super.insertBefore(blot,ref)}insertContents(index,delta){const renderBlocks=this.deltaToRenderBlocks(delta.concat((new(Delta_default())).insert("\n"))),last=renderBlocks.pop();if(null==last)return;this.batchStart();const first=renderBlocks.shift();if(first){const shouldInsertNewlineChar="block"===first.type&&(0===first.delta.length()||!this.descendant(BlockEmbed,index)[0]&&index<this.length()),delta="block"===first.type?first.delta:(new(Delta_default())).insert({[first.key]:first.value});insertInlineContents(this,index,delta);const newlineCharLength="block"===first.type?1:0,lineEndIndex=index+delta.length()+newlineCharLength;shouldInsertNewlineChar&&this.insertAt(lineEndIndex-1,"\n");const formats=bubbleFormats(this.line(index)[0]),attributes=Delta.AttributeMap.diff(formats,first.attributes)||{};Object.keys(attributes).forEach((name=>{this.formatAt(lineEndIndex-1,1,name,attributes[name])})),index=lineEndIndex}let[refBlot,refBlotOffset]=this.children.find(index);if(renderBlocks.length&&(refBlot&&(refBlot=refBlot.split(refBlotOffset),refBlotOffset=0),renderBlocks.forEach((renderBlock=>{if("block"===renderBlock.type){insertInlineContents(this.createBlock(renderBlock.attributes,refBlot||void 0),0,renderBlock.delta)}else{const blockEmbed=this.create(renderBlock.key,renderBlock.value);this.insertBefore(blockEmbed,refBlot||void 0),Object.keys(renderBlock.attributes).forEach((name=>{blockEmbed.format(name,renderBlock.attributes[name])}))}}))),"block"===last.type&&last.delta.length()){insertInlineContents(this,refBlot?refBlot.offset(refBlot.scroll)+refBlotOffset:this.length(),last.delta)}this.batchEnd(),this.optimize()}isEnabled(){return"true"===this.domNode.getAttribute("contenteditable")}leaf(index){const last=this.path(index).pop();if(!last)return[null,-1];const[blot,offset]=last;return blot instanceof LeafBlot$1?[blot,offset]:[null,-1]}line(index){return index===this.length()?this.line(index-1):this.descendant(isLine,index)}lines(){let index=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;const getLines=(blot,blotIndex,blotLength)=>{let lines=[],lengthLeft=blotLength;return blot.children.forEachAt(blotIndex,blotLength,((child,childIndex,childLength)=>{isLine(child)?lines.push(child):child instanceof ContainerBlot$1&&(lines=lines.concat(getLines(child,childIndex,lengthLeft))),lengthLeft-=childLength})),lines};return getLines(this,index,length)}optimize(){let mutations=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(super.optimize(mutations,context),mutations.length>0&&this.emitter.emit(core_emitter.events.SCROLL_OPTIMIZE,mutations,context))}path(index){return super.path(index).slice(1)}remove(){}update(mutations){if(this.batch)return void(Array.isArray(mutations)&&(this.batch=this.batch.concat(mutations)));let source=core_emitter.sources.USER;"string"==typeof mutations&&(source=mutations),Array.isArray(mutations)||(mutations=this.observer.takeRecords()),(mutations=mutations.filter((_ref2=>{let{target}=_ref2;const blot=this.find(target,!0);return blot&&!isUpdatable(blot)}))).length>0&&this.emitter.emit(core_emitter.events.SCROLL_BEFORE_UPDATE,source,mutations),super.update(mutations.concat([])),mutations.length>0&&this.emitter.emit(core_emitter.events.SCROLL_UPDATE,source,mutations)}updateEmbedAt(index,key,change){const[blot]=this.descendant((b=>b instanceof BlockEmbed),index);blot&&blot.statics.blotName===key&&isUpdatable(blot)&&blot.updateContent(change)}handleDragStart(event){event.preventDefault()}deltaToRenderBlocks(delta){const renderBlocks=[];let currentBlockDelta=new(Delta_default());return delta.forEach((op=>{const insert=op?.insert;if(insert)if("string"==typeof insert){const splitted=insert.split("\n");splitted.slice(0,-1).forEach((text=>{currentBlockDelta.insert(text,op.attributes),renderBlocks.push({type:"block",delta:currentBlockDelta,attributes:op.attributes??{}}),currentBlockDelta=new(Delta_default())}));const last=splitted[splitted.length-1];last&&currentBlockDelta.insert(last,op.attributes)}else{const key=Object.keys(insert)[0];if(!key)return;this.query(key,Scope.INLINE)?currentBlockDelta.push(op):(currentBlockDelta.length()&&renderBlocks.push({type:"block",delta:currentBlockDelta,attributes:{}}),currentBlockDelta=new(Delta_default()),renderBlocks.push({type:"blockEmbed",key,value:insert[key],attributes:op.attributes??{}}))}})),currentBlockDelta.length()&&renderBlocks.push({type:"block",delta:currentBlockDelta,attributes:{}}),renderBlocks}createBlock(attributes,refBlot){let blotName;const formats={};Object.entries(attributes).forEach((_ref3=>{let[key,value]=_ref3;null!=this.query(key,Scope.BLOCK&Scope.BLOT)?blotName=key:formats[key]=value}));const block=this.create(blotName||this.statics.defaultChild.blotName,blotName?attributes[blotName]:void 0);this.insertBefore(block,refBlot||void 0);const length=block.length();return Object.entries(formats).forEach((_ref4=>{let[key,value]=_ref4;block.formatAt(0,length,key,value)})),block}},config={scope:Scope.BLOCK,whitelist:["right","center","justify"]},AlignAttribute=new Attributor("align","align",config),AlignClass=new ClassAttributor$1("align","ql-align",config),AlignStyle=new StyleAttributor$1("align","text-align",config);class ColorAttributor extends StyleAttributor$1{value(domNode){let value=super.value(domNode);if(!value.startsWith("rgb("))return value;value=value.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"");return`#${value.split(",").map((component=>`00${parseInt(component,10).toString(16)}`.slice(-2))).join("")}`}}const ColorClass=new ClassAttributor$1("color","ql-color",{scope:Scope.INLINE}),ColorStyle=new ColorAttributor("color","color",{scope:Scope.INLINE}),BackgroundClass=new ClassAttributor$1("background","ql-bg",{scope:Scope.INLINE}),BackgroundStyle=new ColorAttributor("background","background-color",{scope:Scope.INLINE});class CodeBlockContainer extends container{static create(value){const domNode=super.create(value);return domNode.setAttribute("spellcheck","false"),domNode}code(index,length){return this.children.map((child=>child.length()<=1?"":child.domNode.innerText)).join("\n").slice(index,index+length)}html(index,length){return`<pre>\n${escapeText(this.code(index,length))}\n</pre>`}}class CodeBlock extends Block{static TAB="  ";static register(){Quill.register(CodeBlockContainer)}}class Code extends inline{}Code.blotName="code",Code.tagName="CODE",CodeBlock.blotName="code-block",CodeBlock.className="ql-code-block",CodeBlock.tagName="DIV",CodeBlockContainer.blotName="code-block-container",CodeBlockContainer.className="ql-code-block-container",CodeBlockContainer.tagName="DIV",CodeBlockContainer.allowedChildren=[CodeBlock],CodeBlock.allowedChildren=[text_Text,blots_break,cursor],CodeBlock.requiredContainer=CodeBlockContainer;const direction_config={scope:Scope.BLOCK,whitelist:["rtl"]},DirectionAttribute=new Attributor("direction","dir",direction_config),DirectionClass=new ClassAttributor$1("direction","ql-direction",direction_config),DirectionStyle=new StyleAttributor$1("direction","direction",direction_config),font_config={scope:Scope.INLINE,whitelist:["serif","monospace"]},FontClass=new ClassAttributor$1("font","ql-font",font_config);const FontStyle=new class FontStyleAttributor extends StyleAttributor$1{value(node){return super.value(node).replace(/["']/g,"")}}("font","font-family",font_config),SizeClass=new ClassAttributor$1("size","ql-size",{scope:Scope.INLINE,whitelist:["small","large","huge"]}),SizeStyle=new StyleAttributor$1("size","font-size",{scope:Scope.INLINE,whitelist:["10px","18px","32px"]}),keyboard_debug=logger("quill:keyboard"),SHORTKEY=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Keyboard extends core_module{static match(evt,binding){return!["altKey","ctrlKey","metaKey","shiftKey"].some((key=>!!binding[key]!==evt[key]&&null!==binding[key]))&&(binding.key===evt.key||binding.key===evt.which)}constructor(quill,options){super(quill,options),this.bindings={},Object.keys(this.options.bindings).forEach((name=>{this.options.bindings[name]&&this.addBinding(this.options.bindings[name])})),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},(()=>{})),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(keyBinding){let context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},handler=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const binding=function normalize(binding){if("string"==typeof binding||"number"==typeof binding)binding={key:binding};else{if("object"!=typeof binding)return null;binding=lodash_es_cloneDeep(binding)}binding.shortKey&&(binding[SHORTKEY]=binding.shortKey,delete binding.shortKey);return binding}(keyBinding);if(null==binding)return void keyboard_debug.warn("Attempted to add invalid keyboard binding",binding);"function"==typeof context&&(context={handler:context}),"function"==typeof handler&&(handler={handler});(Array.isArray(binding.key)?binding.key:[binding.key]).forEach((key=>{const singleBinding={...binding,key,...context,...handler};this.bindings[singleBinding.key]=this.bindings[singleBinding.key]||[],this.bindings[singleBinding.key].push(singleBinding)}))}listen(){this.quill.root.addEventListener("keydown",(evt=>{if(evt.defaultPrevented||evt.isComposing)return;if(229===evt.keyCode&&("Enter"===evt.key||"Backspace"===evt.key))return;const matches=(this.bindings[evt.key]||[]).concat(this.bindings[evt.which]||[]).filter((binding=>Keyboard.match(evt,binding)));if(0===matches.length)return;const blot=Quill.find(evt.target,!0);if(blot&&blot.scroll!==this.quill.scroll)return;const range=this.quill.getSelection();if(null==range||!this.quill.hasFocus())return;const[line,offset]=this.quill.getLine(range.index),[leafStart,offsetStart]=this.quill.getLeaf(range.index),[leafEnd,offsetEnd]=0===range.length?[leafStart,offsetStart]:this.quill.getLeaf(range.index+range.length),prefixText=leafStart instanceof TextBlot$1?leafStart.value().slice(0,offsetStart):"",suffixText=leafEnd instanceof TextBlot$1?leafEnd.value().slice(offsetEnd):"",curContext={collapsed:0===range.length,empty:0===range.length&&line.length()<=1,format:this.quill.getFormat(range),line,offset,prefix:prefixText,suffix:suffixText,event:evt};matches.some((binding=>{if(null!=binding.collapsed&&binding.collapsed!==curContext.collapsed)return!1;if(null!=binding.empty&&binding.empty!==curContext.empty)return!1;if(null!=binding.offset&&binding.offset!==curContext.offset)return!1;if(Array.isArray(binding.format)){if(binding.format.every((name=>null==curContext.format[name])))return!1}else if("object"==typeof binding.format&&!Object.keys(binding.format).every((name=>!0===binding.format[name]?null!=curContext.format[name]:!1===binding.format[name]?null==curContext.format[name]:(0,lodash_es_isEqual.A)(binding.format[name],curContext.format[name]))))return!1;return!(null!=binding.prefix&&!binding.prefix.test(curContext.prefix))&&(!(null!=binding.suffix&&!binding.suffix.test(curContext.suffix))&&!0!==binding.handler.call(this,range,curContext,binding))}))&&evt.preventDefault()}))}handleBackspace(range,context){const length=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(context.prefix)?2:1;if(0===range.index||this.quill.getLength()<=1)return;let formats={};const[line]=this.quill.getLine(range.index);let delta=(new(Delta_default())).retain(range.index-length).delete(length);if(0===context.offset){const[prev]=this.quill.getLine(range.index-1);if(prev){if(!("block"===prev.statics.blotName&&prev.length()<=1)){const curFormats=line.formats(),prevFormats=this.quill.getFormat(range.index-1,1);if(formats=Delta.AttributeMap.diff(curFormats,prevFormats)||{},Object.keys(formats).length>0){const formatDelta=(new(Delta_default())).retain(range.index+line.length()-2).retain(1,formats);delta=delta.compose(formatDelta)}}}}this.quill.updateContents(delta,Quill.sources.USER),this.quill.focus()}handleDelete(range,context){const length=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(context.suffix)?2:1;if(range.index>=this.quill.getLength()-length)return;let formats={};const[line]=this.quill.getLine(range.index);let delta=(new(Delta_default())).retain(range.index).delete(length);if(context.offset>=line.length()-1){const[next]=this.quill.getLine(range.index+1);if(next){const curFormats=line.formats(),nextFormats=this.quill.getFormat(range.index,1);formats=Delta.AttributeMap.diff(curFormats,nextFormats)||{},Object.keys(formats).length>0&&(delta=delta.retain(next.length()-1).retain(1,formats))}}this.quill.updateContents(delta,Quill.sources.USER),this.quill.focus()}handleDeleteRange(range){deleteRange({range,quill:this.quill}),this.quill.focus()}handleEnter(range,context){const lineFormats=Object.keys(context.format).reduce(((formats,format)=>(this.quill.scroll.query(format,Scope.BLOCK)&&!Array.isArray(context.format[format])&&(formats[format]=context.format[format]),formats)),{}),delta=(new(Delta_default())).retain(range.index).delete(range.length).insert("\n",lineFormats);this.quill.updateContents(delta,Quill.sources.USER),this.quill.setSelection(range.index+1,Quill.sources.SILENT),this.quill.focus()}}const defaultOptions={bindings:{bold:makeFormatHandler("bold"),italic:makeFormatHandler("italic"),underline:makeFormatHandler("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(range,context){return!(!context.collapsed||0===context.offset)||(this.quill.format("indent","+1",Quill.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(range,context){return!(!context.collapsed||0===context.offset)||(this.quill.format("indent","-1",Quill.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(range,context){null!=context.format.indent?this.quill.format("indent","-1",Quill.sources.USER):null!=context.format.list&&this.quill.format("list",!1,Quill.sources.USER)}},"indent code-block":makeCodeBlockHandler(!0),"outdent code-block":makeCodeBlockHandler(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(range){this.quill.deleteText(range.index-1,1,Quill.sources.USER)}},tab:{key:"Tab",handler(range,context){if(context.format.table)return!0;this.quill.history.cutoff();const delta=(new(Delta_default())).retain(range.index).delete(range.length).insert("\t");return this.quill.updateContents(delta,Quill.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(range.index+1,Quill.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Quill.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(range,context){const formats={list:!1};context.format.indent&&(formats.indent=!1),this.quill.formatLine(range.index,range.length,formats,Quill.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(range){const[line,offset]=this.quill.getLine(range.index),formats={...line.formats(),list:"checked"},delta=(new(Delta_default())).retain(range.index).insert("\n",formats).retain(line.length()-offset-1).retain(1,{list:"unchecked"});this.quill.updateContents(delta,Quill.sources.USER),this.quill.setSelection(range.index+1,Quill.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(range,context){const[line,offset]=this.quill.getLine(range.index),delta=(new(Delta_default())).retain(range.index).insert("\n",context.format).retain(line.length()-offset-1).retain(1,{header:null});this.quill.updateContents(delta,Quill.sources.USER),this.quill.setSelection(range.index+1,Quill.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(range){const module=this.quill.getModule("table");if(module){const[table,row,cell,offset]=module.getTable(range),shift=function tableSide(_table,row,cell,offset){if(null==row.prev&&null==row.next)return null==cell.prev&&null==cell.next?0===offset?-1:1:null==cell.prev?-1:1;if(null==row.prev)return-1;if(null==row.next)return 1;return null}(0,row,cell,offset);if(null==shift)return;let index=table.offset();if(shift<0){const delta=(new(Delta_default())).retain(index).insert("\n");this.quill.updateContents(delta,Quill.sources.USER),this.quill.setSelection(range.index+1,range.length,Quill.sources.SILENT)}else if(shift>0){index+=table.length();const delta=(new(Delta_default())).retain(index).insert("\n");this.quill.updateContents(delta,Quill.sources.USER),this.quill.setSelection(index,Quill.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(range,context){const{event,line:cell}=context,offset=cell.offset(this.quill.scroll);event.shiftKey?this.quill.setSelection(offset-1,Quill.sources.USER):this.quill.setSelection(offset+cell.length(),Quill.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(range,context){if(null==this.quill.scroll.query("list"))return!0;const{length}=context.prefix,[line,offset]=this.quill.getLine(range.index);if(offset>length)return!0;let value;switch(context.prefix.trim()){case"[]":case"[ ]":value="unchecked";break;case"[x]":value="checked";break;case"-":case"*":value="bullet";break;default:value="ordered"}this.quill.insertText(range.index," ",Quill.sources.USER),this.quill.history.cutoff();const delta=(new(Delta_default())).retain(range.index-offset).delete(length+1).retain(line.length()-2-offset).retain(1,{list:value});return this.quill.updateContents(delta,Quill.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(range.index-length,Quill.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(range){const[line,offset]=this.quill.getLine(range.index);let numLines=2,cur=line;for(;null!=cur&&cur.length()<=1&&cur.formats()["code-block"];)if(cur=cur.prev,numLines-=1,numLines<=0){const delta=(new(Delta_default())).retain(range.index+line.length()-offset-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(delta,Quill.sources.USER),this.quill.setSelection(range.index-1,Quill.sources.SILENT),!1}return!0}},"embed left":makeEmbedArrowHandler("ArrowLeft",!1),"embed left shift":makeEmbedArrowHandler("ArrowLeft",!0),"embed right":makeEmbedArrowHandler("ArrowRight",!1),"embed right shift":makeEmbedArrowHandler("ArrowRight",!0),"table down":makeTableArrowHandler(!1),"table up":makeTableArrowHandler(!0)}};function makeCodeBlockHandler(indent){return{key:"Tab",shiftKey:!indent,format:{"code-block":!0},handler(range,_ref){let{event}=_ref;const CodeBlock=this.quill.scroll.query("code-block"),{TAB}=CodeBlock;if(0===range.length&&!event.shiftKey)return this.quill.insertText(range.index,TAB,Quill.sources.USER),void this.quill.setSelection(range.index+TAB.length,Quill.sources.SILENT);const lines=0===range.length?this.quill.getLines(range.index,1):this.quill.getLines(range);let{index,length}=range;lines.forEach(((line,i)=>{indent?(line.insertAt(0,TAB),0===i?index+=TAB.length:length+=TAB.length):line.domNode.textContent.startsWith(TAB)&&(line.deleteAt(0,TAB.length),0===i?index-=TAB.length:length-=TAB.length)})),this.quill.update(Quill.sources.USER),this.quill.setSelection(index,length,Quill.sources.SILENT)}}}function makeEmbedArrowHandler(key,shiftKey){const where="ArrowLeft"===key?"prefix":"suffix";return{key,shiftKey,altKey:null,[where]:/^$/,handler(range){let{index}=range;"ArrowRight"===key&&(index+=range.length+1);const[leaf]=this.quill.getLeaf(index);return!(leaf instanceof EmbedBlot$1)||("ArrowLeft"===key?shiftKey?this.quill.setSelection(range.index-1,range.length+1,Quill.sources.USER):this.quill.setSelection(range.index-1,Quill.sources.USER):shiftKey?this.quill.setSelection(range.index,range.length+1,Quill.sources.USER):this.quill.setSelection(range.index+range.length+1,Quill.sources.USER),!1)}}}function makeFormatHandler(format){return{key:format[0],shortKey:!0,handler(range,context){this.quill.format(format,!context.format[format],Quill.sources.USER)}}}function makeTableArrowHandler(up){return{key:up?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(range,context){const key=up?"prev":"next",cell=context.line,targetRow=cell.parent[key];if(null!=targetRow){if("table-row"===targetRow.statics.blotName){let targetCell=targetRow.children.head,cur=cell;for(;null!=cur.prev;)cur=cur.prev,targetCell=targetCell.next;const index=targetCell.offset(this.quill.scroll)+Math.min(context.offset,targetCell.length()-1);this.quill.setSelection(index,0,Quill.sources.USER)}}else{const targetLine=cell.table()[key];null!=targetLine&&(up?this.quill.setSelection(targetLine.offset(this.quill.scroll)+targetLine.length()-1,0,Quill.sources.USER):this.quill.setSelection(targetLine.offset(this.quill.scroll),0,Quill.sources.USER))}return!1}}}function deleteRange(_ref2){let{quill,range}=_ref2;const lines=quill.getLines(range);let formats={};if(lines.length>1){const firstFormats=lines[0].formats(),lastFormats=lines[lines.length-1].formats();formats=Delta.AttributeMap.diff(lastFormats,firstFormats)||{}}quill.deleteText(range,Quill.sources.USER),Object.keys(formats).length>0&&quill.formatLine(range.index,1,formats,Quill.sources.USER),quill.setSelection(range.index,Quill.sources.SILENT)}Keyboard.DEFAULTS=defaultOptions;const normalWeightRegexp=/font-weight:\s*normal/,blockTagNames=["P","OL","UL"],isBlockElement=element=>element&&blockTagNames.includes(element.tagName);const ignoreRegexp=/\bmso-list:[^;]*ignore/i,idRegexp=/\bmso-list:[^;]*\bl(\d+)/i,indentRegexp=/\bmso-list:[^;]*\blevel(\d+)/i,normalizeListItem=doc=>{const msoList=Array.from(doc.querySelectorAll("[style*=mso-list]")),ignored=[],others=[];msoList.forEach((node=>{(node.getAttribute("style")||"").match(ignoreRegexp)?ignored.push(node):others.push(node)})),ignored.forEach((node=>node.parentNode?.removeChild(node)));const html=doc.documentElement.innerHTML,listItems=others.map((element=>((element,html)=>{const style=element.getAttribute("style"),idMatch=style?.match(idRegexp);if(!idMatch)return null;const id=Number(idMatch[1]),indentMatch=style?.match(indentRegexp),indent=indentMatch?Number(indentMatch[1]):1,typeRegexp=new RegExp(`@list l${id}:level${indent}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),typeMatch=html.match(typeRegexp);return{id,indent,type:typeMatch&&"bullet"===typeMatch[1]?"bullet":"ordered",element}})(element,html))).filter((parsed=>parsed));for(;listItems.length;){const childListItems=[];let current=listItems.shift();for(;current;)childListItems.push(current),current=listItems.length&&listItems[0]?.element===current.element.nextElementSibling&&listItems[0].id===current.id?listItems.shift():null;const ul=document.createElement("ul");childListItems.forEach((listItem=>{const li=document.createElement("li");li.setAttribute("data-list",listItem.type),listItem.indent>1&&li.setAttribute("class","ql-indent-"+(listItem.indent-1)),li.innerHTML=listItem.element.innerHTML,ul.appendChild(li)}));const element=childListItems[0]?.element,{parentNode}=element??{};element&&parentNode?.replaceChild(ul,element),childListItems.slice(1).forEach((_ref=>{let{element:e}=_ref;parentNode?.removeChild(e)}))}};const NORMALIZERS=[function msWord_normalize(doc){"urn:schemas-microsoft-com:office:word"===doc.documentElement.getAttribute("xmlns:w")&&normalizeListItem(doc)},function googleDocs_normalize(doc){doc.querySelector('[id^="docs-internal-guid-"]')&&((doc=>{Array.from(doc.querySelectorAll('b[style*="font-weight"]')).filter((node=>node.getAttribute("style")?.match(normalWeightRegexp))).forEach((node=>{const fragment=doc.createDocumentFragment();fragment.append(...node.childNodes),node.parentNode?.replaceChild(fragment,node)}))})(doc),(doc=>{Array.from(doc.querySelectorAll("br")).filter((br=>isBlockElement(br.previousElementSibling)&&isBlockElement(br.nextElementSibling))).forEach((br=>{br.parentNode?.removeChild(br)}))})(doc))}],modules_normalizeExternalHTML=doc=>{doc.documentElement&&NORMALIZERS.forEach((normalize=>{normalize(doc)}))},clipboard_debug=logger("quill:clipboard"),CLIPBOARD_CONFIG=[[Node.TEXT_NODE,function matchText(node,delta,scroll){let text=node.data;if("O:P"===node.parentElement?.tagName)return delta.insert(text.trim());if(!isPre(node)){if(0===text.trim().length&&text.includes("\n")&&!function isBetweenInlineElements(node,scroll){return node.previousElementSibling&&node.nextElementSibling&&!clipboard_isLine(node.previousElementSibling,scroll)&&!clipboard_isLine(node.nextElementSibling,scroll)}(node,scroll))return delta;text=text.replace(/[^\S\u00a0]/g," "),text=text.replace(/ {2,}/g," "),(null==node.previousSibling&&null!=node.parentElement&&clipboard_isLine(node.parentElement,scroll)||node.previousSibling instanceof Element&&clipboard_isLine(node.previousSibling,scroll))&&(text=text.replace(/^ /,"")),(null==node.nextSibling&&null!=node.parentElement&&clipboard_isLine(node.parentElement,scroll)||node.nextSibling instanceof Element&&clipboard_isLine(node.nextSibling,scroll))&&(text=text.replace(/ $/,"")),text=text.replaceAll(""," ")}return delta.insert(text)}],[Node.TEXT_NODE,matchNewline],["br",function matchBreak(node,delta){deltaEndsWith(delta,"\n")||delta.insert("\n");return delta}],[Node.ELEMENT_NODE,matchNewline],[Node.ELEMENT_NODE,function matchBlot(node,delta,scroll){const match=scroll.query(node);if(null==match)return delta;if(match.prototype instanceof EmbedBlot$1){const embed={},value=match.value(node);if(null!=value)return embed[match.blotName]=value,(new(Delta_default())).insert(embed,match.formats(node,scroll))}else if(match.prototype instanceof BlockBlot$1&&!deltaEndsWith(delta,"\n")&&delta.insert("\n"),"blotName"in match&&"formats"in match&&"function"==typeof match.formats)return applyFormat(delta,match.blotName,match.formats(node,scroll),scroll);return delta}],[Node.ELEMENT_NODE,function matchAttributor(node,delta,scroll){const attributes=Attributor.keys(node),classes=ClassAttributor$1.keys(node),styles=StyleAttributor$1.keys(node),formats={};return attributes.concat(classes).concat(styles).forEach((name=>{let attr=scroll.query(name,Scope.ATTRIBUTE);null!=attr&&(formats[attr.attrName]=attr.value(node),formats[attr.attrName])||(attr=ATTRIBUTE_ATTRIBUTORS[name],null==attr||attr.attrName!==name&&attr.keyName!==name||(formats[attr.attrName]=attr.value(node)||void 0),attr=STYLE_ATTRIBUTORS[name],null==attr||attr.attrName!==name&&attr.keyName!==name||(attr=STYLE_ATTRIBUTORS[name],formats[attr.attrName]=attr.value(node)||void 0))})),Object.entries(formats).reduce(((newDelta,_ref4)=>{let[name,value]=_ref4;return applyFormat(newDelta,name,value,scroll)}),delta)}],[Node.ELEMENT_NODE,function matchStyles(node,delta,scroll){const formats={},style=node.style||{};"italic"===style.fontStyle&&(formats.italic=!0);"underline"===style.textDecoration&&(formats.underline=!0);"line-through"===style.textDecoration&&(formats.strike=!0);(style.fontWeight?.startsWith("bold")||parseInt(style.fontWeight,10)>=700)&&(formats.bold=!0);if(delta=Object.entries(formats).reduce(((newDelta,_ref5)=>{let[name,value]=_ref5;return applyFormat(newDelta,name,value,scroll)}),delta),parseFloat(style.textIndent||0)>0)return(new(Delta_default())).insert("\t").concat(delta);return delta}],["li",function matchIndent(node,delta,scroll){const match=scroll.query(node);if(null==match||"list"!==match.blotName||!deltaEndsWith(delta,"\n"))return delta;let indent=-1,parent=node.parentNode;for(;null!=parent;)["OL","UL"].includes(parent.tagName)&&(indent+=1),parent=parent.parentNode;return indent<=0?delta:delta.reduce(((composed,op)=>op.insert?op.attributes&&"number"==typeof op.attributes.indent?composed.push(op):composed.insert(op.insert,{indent,...op.attributes||{}}):composed),new(Delta_default()))}],["ol, ul",function matchList(node,delta,scroll){const element=node;let list="OL"===element.tagName?"ordered":"bullet";const checkedAttr=element.getAttribute("data-checked");checkedAttr&&(list="true"===checkedAttr?"checked":"unchecked");return applyFormat(delta,"list",list,scroll)}],["pre",function matchCodeBlock(node,delta,scroll){const match=scroll.query("code-block"),language=!match||!("formats"in match)||"function"!=typeof match.formats||match.formats(node,scroll);return applyFormat(delta,"code-block",language,scroll)}],["tr",function matchTable(node,delta,scroll){const table="TABLE"===node.parentElement?.tagName?node.parentElement:node.parentElement?.parentElement;if(null!=table){return applyFormat(delta,"table",Array.from(table.querySelectorAll("tr")).indexOf(node)+1,scroll)}return delta}],["b",createMatchAlias("bold")],["i",createMatchAlias("italic")],["strike",createMatchAlias("strike")],["style",function matchIgnore(){return new(Delta_default())}]],ATTRIBUTE_ATTRIBUTORS=[AlignAttribute,DirectionAttribute].reduce(((memo,attr)=>(memo[attr.keyName]=attr,memo)),{}),STYLE_ATTRIBUTORS=[AlignStyle,BackgroundStyle,ColorStyle,DirectionStyle,FontStyle,SizeStyle].reduce(((memo,attr)=>(memo[attr.keyName]=attr,memo)),{});function applyFormat(delta,format,value,scroll){return scroll.query(format)?delta.reduce(((newDelta,op)=>{if(!op.insert)return newDelta;if(op.attributes&&op.attributes[format])return newDelta.push(op);const formats=value?{[format]:value}:{};return newDelta.insert(op.insert,{...formats,...op.attributes})}),new(Delta_default())):delta}function deltaEndsWith(delta,text){let endText="";for(let i=delta.ops.length-1;i>=0&&endText.length<text.length;--i){const op=delta.ops[i];if("string"!=typeof op.insert)break;endText=op.insert+endText}return endText.slice(-1*text.length)===text}function clipboard_isLine(node,scroll){if(!(node instanceof Element))return!1;const match=scroll.query(node);return!(match&&match.prototype instanceof EmbedBlot$1)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(node.tagName.toLowerCase())}const preNodes=new WeakMap;function isPre(node){return null!=node&&(preNodes.has(node)||("PRE"===node.tagName?preNodes.set(node,!0):preNodes.set(node,isPre(node.parentNode))),preNodes.get(node))}function traverse(scroll,node,elementMatchers,textMatchers,nodeMatches){return node.nodeType===node.TEXT_NODE?textMatchers.reduce(((delta,matcher)=>matcher(node,delta,scroll)),new(Delta_default())):node.nodeType===node.ELEMENT_NODE?Array.from(node.childNodes||[]).reduce(((delta,childNode)=>{let childrenDelta=traverse(scroll,childNode,elementMatchers,textMatchers,nodeMatches);return childNode.nodeType===node.ELEMENT_NODE&&(childrenDelta=elementMatchers.reduce(((reducedDelta,matcher)=>matcher(childNode,reducedDelta,scroll)),childrenDelta),childrenDelta=(nodeMatches.get(childNode)||[]).reduce(((reducedDelta,matcher)=>matcher(childNode,reducedDelta,scroll)),childrenDelta)),delta.concat(childrenDelta)}),new(Delta_default())):new(Delta_default())}function createMatchAlias(format){return(_node,delta,scroll)=>applyFormat(delta,format,!0,scroll)}function matchNewline(node,delta,scroll){if(!deltaEndsWith(delta,"\n")){if(clipboard_isLine(node,scroll)&&(node.childNodes.length>0||node instanceof HTMLParagraphElement))return delta.insert("\n");if(delta.length()>0&&node.nextSibling){let nextSibling=node.nextSibling;for(;null!=nextSibling;){if(clipboard_isLine(nextSibling,scroll))return delta.insert("\n");const match=scroll.query(nextSibling);if(match&&match.prototype instanceof BlockEmbed)return delta.insert("\n");nextSibling=nextSibling.firstChild}}}return delta}function transformStack(stack,delta){let remoteDelta=delta;for(let i=stack.length-1;i>=0;i-=1){const oldItem=stack[i];stack[i]={delta:remoteDelta.transform(oldItem.delta,!0),range:oldItem.range&&transformRange(oldItem.range,remoteDelta)},remoteDelta=oldItem.delta.transform(remoteDelta),0===stack[i].delta.length()&&stack.splice(i,1)}}function transformRange(range,delta){if(!range)return range;const start=delta.transformPosition(range.index);return{index:start,length:delta.transformPosition(range.index+range.length)-start}}class Uploader extends core_module{constructor(quill,options){super(quill,options),quill.root.addEventListener("drop",(e=>{e.preventDefault();let native=null;if(document.caretRangeFromPoint)native=document.caretRangeFromPoint(e.clientX,e.clientY);else if(document.caretPositionFromPoint){const position=document.caretPositionFromPoint(e.clientX,e.clientY);native=document.createRange(),native.setStart(position.offsetNode,position.offset),native.setEnd(position.offsetNode,position.offset)}const normalized=native&&quill.selection.normalizeNative(native);if(normalized){const range=quill.selection.normalizedToRange(normalized);e.dataTransfer?.files&&this.upload(range,e.dataTransfer.files)}}))}upload(range,files){const uploads=[];Array.from(files).forEach((file=>{file&&this.options.mimetypes?.includes(file.type)&&uploads.push(file)})),uploads.length>0&&this.options.handler.call(this,range,uploads)}}Uploader.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(range,files){if(!this.quill.scroll.query("image"))return;const promises=files.map((file=>new Promise((resolve=>{const reader=new FileReader;reader.onload=()=>{resolve(reader.result)},reader.readAsDataURL(file)}))));Promise.all(promises).then((images=>{const update=images.reduce(((delta,image)=>delta.insert({image})),(new(Delta_default())).retain(range.index).delete(range.length));this.quill.updateContents(update,core_emitter.sources.USER),this.quill.setSelection(range.index+images.length,core_emitter.sources.SILENT)}))}};const uploader=Uploader,INSERT_TYPES=["insertText","insertReplacementText"];const input=class Input extends core_module{constructor(quill,options){super(quill,options),quill.root.addEventListener("beforeinput",(event=>{this.handleBeforeInput(event)})),/Android/i.test(navigator.userAgent)||quill.on(Quill.events.COMPOSITION_BEFORE_START,(()=>{this.handleCompositionStart()}))}deleteRange(range){deleteRange({range,quill:this.quill})}replaceText(range){let text=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===range.length)return!1;if(text){const formats=this.quill.getFormat(range.index,1);this.deleteRange(range),this.quill.updateContents((new(Delta_default())).retain(range.index).insert(text,formats),Quill.sources.USER)}else this.deleteRange(range);return this.quill.setSelection(range.index+text.length,0,Quill.sources.SILENT),!0}handleBeforeInput(event){if(this.quill.composition.isComposing||event.defaultPrevented||!INSERT_TYPES.includes(event.inputType))return;const staticRange=event.getTargetRanges?event.getTargetRanges()[0]:null;if(!staticRange||!0===staticRange.collapsed)return;const text=function getPlainTextFromInputEvent(event){if("string"==typeof event.data)return event.data;if(event.dataTransfer?.types.includes("text/plain"))return event.dataTransfer.getData("text/plain");return null}(event);if(null==text)return;const normalized=this.quill.selection.normalizeNative(staticRange),range=normalized?this.quill.selection.normalizedToRange(normalized):null;range&&this.replaceText(range,text)&&event.preventDefault()}handleCompositionStart(){const range=this.quill.getSelection();range&&this.replaceText(range)}},isMac=/Mac/i.test(navigator.platform);const uiNode=class UINode extends core_module{isListening=!1;selectionChangeDeadline=0;constructor(quill,options){super(quill,options),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(range,_ref){let{line,event}=_ref;if(!(line instanceof ParentBlot$1&&line.uiNode))return!0;const isRTL="rtl"===getComputedStyle(line.domNode).direction;return!!(isRTL&&"ArrowRight"!==event.key||!isRTL&&"ArrowLeft"!==event.key)||(this.quill.setSelection(range.index-1,range.length+(event.shiftKey?1:0),Quill.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",(event=>{!event.defaultPrevented&&(event=>"ArrowLeft"===event.key||"ArrowRight"===event.key||"ArrowUp"===event.key||"ArrowDown"===event.key||"Home"===event.key||!(!isMac||"a"!==event.key||!0!==event.ctrlKey))(event)&&this.ensureListeningToSelectionChange()}))}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+100,this.isListening)return;this.isListening=!0;document.addEventListener("selectionchange",(()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()}),{once:!0})}handleSelectionChange(){const selection=document.getSelection();if(!selection)return;const range=selection.getRangeAt(0);if(!0!==range.collapsed||0!==range.startOffset)return;const line=this.quill.scroll.find(range.startContainer);if(!(line instanceof ParentBlot$1&&line.uiNode))return;const newRange=document.createRange();newRange.setStartAfter(line.uiNode),newRange.setEndAfter(line.uiNode),selection.removeAllRanges(),selection.addRange(newRange)}};Quill.register({"blots/block":Block,"blots/block/embed":BlockEmbed,"blots/break":blots_break,"blots/container":container,"blots/cursor":cursor,"blots/embed":blots_embed,"blots/inline":inline,"blots/scroll":blots_scroll,"blots/text":text_Text,"modules/clipboard":class Clipboard extends core_module{static DEFAULTS={matchers:[]};constructor(quill,options){super(quill,options),this.quill.root.addEventListener("copy",(e=>this.onCaptureCopy(e,!1))),this.quill.root.addEventListener("cut",(e=>this.onCaptureCopy(e,!0))),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],CLIPBOARD_CONFIG.concat(this.options.matchers??[]).forEach((_ref=>{let[selector,matcher]=_ref;this.addMatcher(selector,matcher)}))}addMatcher(selector,matcher){this.matchers.push([selector,matcher])}convert(_ref2){let{html,text}=_ref2,formats=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(formats[CodeBlock.blotName])return(new(Delta_default())).insert(text||"",{[CodeBlock.blotName]:formats[CodeBlock.blotName]});if(!html)return(new(Delta_default())).insert(text||"",formats);const delta=this.convertHTML(html);return deltaEndsWith(delta,"\n")&&(null==delta.ops[delta.ops.length-1].attributes||formats.table)?delta.compose((new(Delta_default())).retain(delta.length()-1).delete(1)):delta}normalizeHTML(doc){modules_normalizeExternalHTML(doc)}convertHTML(html){const doc=(new DOMParser).parseFromString(html,"text/html");this.normalizeHTML(doc);const container=doc.body,nodeMatches=new WeakMap,[elementMatchers,textMatchers]=this.prepareMatching(container,nodeMatches);return traverse(this.quill.scroll,container,elementMatchers,textMatchers,nodeMatches)}dangerouslyPasteHTML(index,html){let source=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Quill.sources.API;if("string"==typeof index){const delta=this.convert({html:index,text:""});this.quill.setContents(delta,html),this.quill.setSelection(0,Quill.sources.SILENT)}else{const paste=this.convert({html,text:""});this.quill.updateContents((new(Delta_default())).retain(index).concat(paste),source),this.quill.setSelection(index+paste.length(),Quill.sources.SILENT)}}onCaptureCopy(e){let isCut=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.defaultPrevented)return;e.preventDefault();const[range]=this.quill.selection.getRange();if(null==range)return;const{html,text}=this.onCopy(range,isCut);e.clipboardData?.setData("text/plain",text),e.clipboardData?.setData("text/html",html),isCut&&deleteRange({range,quill:this.quill})}normalizeURIList(urlList){return urlList.split(/\r?\n/).filter((url=>"#"!==url[0])).join("\n")}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const range=this.quill.getSelection(!0);if(null==range)return;const html=e.clipboardData?.getData("text/html");let text=e.clipboardData?.getData("text/plain");if(!html&&!text){const urlList=e.clipboardData?.getData("text/uri-list");urlList&&(text=this.normalizeURIList(urlList))}const files=Array.from(e.clipboardData?.files||[]);if(!html&&files.length>0)this.quill.uploader.upload(range,files);else{if(html&&files.length>0){const doc=(new DOMParser).parseFromString(html,"text/html");if(1===doc.body.childElementCount&&"IMG"===doc.body.firstElementChild?.tagName)return void this.quill.uploader.upload(range,files)}this.onPaste(range,{html,text})}}onCopy(range){const text=this.quill.getText(range);return{html:this.quill.getSemanticHTML(range),text}}onPaste(range,_ref3){let{text,html}=_ref3;const formats=this.quill.getFormat(range.index),pastedDelta=this.convert({text,html},formats);clipboard_debug.log("onPaste",pastedDelta,{text,html});const delta=(new(Delta_default())).retain(range.index).delete(range.length).concat(pastedDelta);this.quill.updateContents(delta,Quill.sources.USER),this.quill.setSelection(delta.length()-range.length,Quill.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(container,nodeMatches){const elementMatchers=[],textMatchers=[];return this.matchers.forEach((pair=>{const[selector,matcher]=pair;switch(selector){case Node.TEXT_NODE:textMatchers.push(matcher);break;case Node.ELEMENT_NODE:elementMatchers.push(matcher);break;default:Array.from(container.querySelectorAll(selector)).forEach((node=>{if(nodeMatches.has(node)){const matches=nodeMatches.get(node);matches?.push(matcher)}else nodeMatches.set(node,[matcher])}))}})),[elementMatchers,textMatchers]}},"modules/history":class History extends core_module{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(quill,options){super(quill,options),this.quill.on(Quill.events.EDITOR_CHANGE,((eventName,value,oldValue,source)=>{eventName===Quill.events.SELECTION_CHANGE?value&&source!==Quill.sources.SILENT&&(this.currentRange=value):eventName===Quill.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&source!==Quill.sources.USER?this.transform(value):this.record(value,oldValue)),this.currentRange=transformRange(this.currentRange,value))})),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",(event=>{"historyUndo"===event.inputType?(this.undo(),event.preventDefault()):"historyRedo"===event.inputType&&(this.redo(),event.preventDefault())}))}change(source,dest){if(0===this.stack[source].length)return;const item=this.stack[source].pop();if(!item)return;const base=this.quill.getContents(),inverseDelta=item.delta.invert(base);this.stack[dest].push({delta:inverseDelta,range:transformRange(item.range,inverseDelta)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(item.delta,Quill.sources.USER),this.ignoreChange=!1,this.restoreSelection(item)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(changeDelta,oldDelta){if(0===changeDelta.ops.length)return;this.stack.redo=[];let undoDelta=changeDelta.invert(oldDelta),undoRange=this.currentRange;const timestamp=Date.now();if(this.lastRecorded+this.options.delay>timestamp&&this.stack.undo.length>0){const item=this.stack.undo.pop();item&&(undoDelta=undoDelta.compose(item.delta),undoRange=item.range)}else this.lastRecorded=timestamp;0!==undoDelta.length()&&(this.stack.undo.push({delta:undoDelta,range:undoRange}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(delta){transformStack(this.stack.undo,delta),transformStack(this.stack.redo,delta)}undo(){this.change("undo","redo")}restoreSelection(stackItem){if(stackItem.range)this.quill.setSelection(stackItem.range,Quill.sources.USER);else{const index=function getLastChangeIndex(scroll,delta){const deleteLength=delta.reduce(((length,op)=>length+(op.delete||0)),0);let changeIndex=delta.length()-deleteLength;(function endsWithNewlineChange(scroll,delta){const lastOp=delta.ops[delta.ops.length-1];if(null==lastOp)return!1;if(null!=lastOp.insert)return"string"==typeof lastOp.insert&&lastOp.insert.endsWith("\n");if(null!=lastOp.attributes)return Object.keys(lastOp.attributes).some((attr=>null!=scroll.query(attr,Scope.BLOCK)));return!1})(scroll,delta)&&(changeIndex-=1);return changeIndex}(this.quill.scroll,stackItem.delta);this.quill.setSelection(index,Quill.sources.USER)}}},"modules/keyboard":Keyboard,"modules/uploader":uploader,"modules/input":input,"modules/uiNode":uiNode});const core=Quill;const IndentClass=new class IndentAttributor extends ClassAttributor$1{add(node,value){let normalizedValue=0;if("+1"===value||"-1"===value){const indent=this.value(node)||0;normalizedValue="+1"===value?indent+1:indent-1}else"number"==typeof value&&(normalizedValue=value);return 0===normalizedValue?(this.remove(node),!0):super.add(node,normalizedValue.toString())}canAdd(node,value){return super.canAdd(node,value)||super.canAdd(node,parseInt(value,10))}value(node){return parseInt(super.value(node),10)||void 0}}("indent","ql-indent",{scope:Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),indent=IndentClass;const blockquote=class Blockquote extends Block{static blotName="blockquote";static tagName="blockquote"};const header=class Header extends Block{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(domNode){return this.tagName.indexOf(domNode.tagName)+1}};class ListContainer extends container{}ListContainer.blotName="list-container",ListContainer.tagName="OL";class ListItem extends Block{static create(value){const node=super.create();return node.setAttribute("data-list",value),node}static formats(domNode){return domNode.getAttribute("data-list")||void 0}static register(){Quill.register(ListContainer)}constructor(scroll,domNode){super(scroll,domNode);const ui=domNode.ownerDocument.createElement("span"),listEventHandler=e=>{if(!scroll.isEnabled())return;const format=this.statics.formats(domNode,scroll);"checked"===format?(this.format("list","unchecked"),e.preventDefault()):"unchecked"===format&&(this.format("list","checked"),e.preventDefault())};ui.addEventListener("mousedown",listEventHandler),ui.addEventListener("touchstart",listEventHandler),this.attachUI(ui)}format(name,value){name===this.statics.blotName&&value?this.domNode.setAttribute("data-list",value):super.format(name,value)}}ListItem.blotName="list",ListItem.tagName="LI",ListContainer.allowedChildren=[ListItem],ListItem.requiredContainer=ListContainer;const bold=class Bold extends inline{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(context){super.optimize(context),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}};const italic=class Italic extends bold{static blotName="italic";static tagName=["EM","I"]};class Link extends inline{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(value){const node=super.create(value);return node.setAttribute("href",this.sanitize(value)),node.setAttribute("rel","noopener noreferrer"),node.setAttribute("target","_blank"),node}static formats(domNode){return domNode.getAttribute("href")}static sanitize(url){return sanitize(url,this.PROTOCOL_WHITELIST)?url:this.SANITIZED_URL}format(name,value){name===this.statics.blotName&&value?this.domNode.setAttribute("href",this.constructor.sanitize(value)):super.format(name,value)}}function sanitize(url,protocols){const anchor=document.createElement("a");anchor.href=url;const protocol=anchor.href.slice(0,anchor.href.indexOf(":"));return protocols.indexOf(protocol)>-1}const script=class Script extends inline{static blotName="script";static tagName=["SUB","SUP"];static create(value){return"super"===value?document.createElement("sup"):"sub"===value?document.createElement("sub"):super.create(value)}static formats(domNode){return"SUB"===domNode.tagName?"sub":"SUP"===domNode.tagName?"super":void 0}};const strike=class Strike extends bold{static blotName="strike";static tagName=["S","STRIKE"]};const underline=class Underline extends inline{static blotName="underline";static tagName="U"};const formula=class Formula extends blots_embed{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(value){if(null==window.katex)throw new Error("Formula module requires KaTeX.");const node=super.create(value);return"string"==typeof value&&(window.katex.render(value,node,{throwOnError:!1,errorColor:"#f00"}),node.setAttribute("data-value",value)),node}static value(domNode){return domNode.getAttribute("data-value")}html(){const{formula}=this.value();return`<span>${formula}</span>`}},ATTRIBUTES=["alt","height","width"];const formats_image=class Image extends EmbedBlot$1{static blotName="image";static tagName="IMG";static create(value){const node=super.create(value);return"string"==typeof value&&node.setAttribute("src",this.sanitize(value)),node}static formats(domNode){return ATTRIBUTES.reduce(((formats,attribute)=>(domNode.hasAttribute(attribute)&&(formats[attribute]=domNode.getAttribute(attribute)),formats)),{})}static match(url){return/\.(jpe?g|gif|png)$/.test(url)||/^data:image\/.+;base64/.test(url)}static sanitize(url){return sanitize(url,["http","https","data"])?url:"//:0"}static value(domNode){return domNode.getAttribute("src")}format(name,value){ATTRIBUTES.indexOf(name)>-1?value?this.domNode.setAttribute(name,value):this.domNode.removeAttribute(name):super.format(name,value)}},video_ATTRIBUTES=["height","width"];const video=class Video extends BlockEmbed{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(value){const node=super.create(value);return node.setAttribute("frameborder","0"),node.setAttribute("allowfullscreen","true"),node.setAttribute("src",this.sanitize(value)),node}static formats(domNode){return video_ATTRIBUTES.reduce(((formats,attribute)=>(domNode.hasAttribute(attribute)&&(formats[attribute]=domNode.getAttribute(attribute)),formats)),{})}static sanitize(url){return Link.sanitize(url)}static value(domNode){return domNode.getAttribute("src")}format(name,value){video_ATTRIBUTES.indexOf(name)>-1?value?this.domNode.setAttribute(name,value):this.domNode.removeAttribute(name):super.format(name,value)}html(){const{video}=this.value();return`<a href="${video}">${video}</a>`}},TokenAttributor=new ClassAttributor$1("code-token","hljs",{scope:Scope.INLINE});class CodeToken extends inline{static formats(node,scroll){for(;null!=node&&node!==scroll.domNode;){if(node.classList&&node.classList.contains(CodeBlock.className))return super.formats(node,scroll);node=node.parentNode}}constructor(scroll,domNode,value){super(scroll,domNode,value),TokenAttributor.add(this.domNode,value)}format(format,value){format!==CodeToken.blotName?super.format(format,value):value?TokenAttributor.add(this.domNode,value):(TokenAttributor.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),TokenAttributor.value(this.domNode)||this.unwrap()}}CodeToken.blotName="code-token",CodeToken.className="ql-token";class SyntaxCodeBlock extends CodeBlock{static create(value){const domNode=super.create(value);return"string"==typeof value&&domNode.setAttribute("data-language",value),domNode}static formats(domNode){return domNode.getAttribute("data-language")||"plain"}static register(){}format(name,value){name===this.statics.blotName&&value?this.domNode.setAttribute("data-language",value):super.format(name,value)}replaceWith(name,value){return this.formatAt(0,this.length(),CodeToken.blotName,!1),super.replaceWith(name,value)}}class SyntaxCodeBlockContainer extends CodeBlockContainer{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(name,value){name===SyntaxCodeBlock.blotName&&(this.forceNext=!0,this.children.forEach((child=>{child.format(name,value)})))}formatAt(index,length,name,value){name===SyntaxCodeBlock.blotName&&(this.forceNext=!0),super.formatAt(index,length,name,value)}highlight(highlight){let forced=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.children.head)return;const text=`${Array.from(this.domNode.childNodes).filter((node=>node!==this.uiNode)).map((node=>node.textContent)).join("\n")}\n`,language=SyntaxCodeBlock.formats(this.children.head.domNode);if(forced||this.forceNext||this.cachedText!==text){if(text.trim().length>0||null==this.cachedText){const oldDelta=this.children.reduce(((delta,child)=>delta.concat(blockDelta(child,!1))),new(Delta_default())),delta=highlight(text,language);oldDelta.diff(delta).reduce(((index,_ref)=>{let{retain,attributes}=_ref;return retain?(attributes&&Object.keys(attributes).forEach((format=>{[SyntaxCodeBlock.blotName,CodeToken.blotName].includes(format)&&this.formatAt(index,retain,format,attributes[format])})),index+retain):index}),0)}this.cachedText=text,this.forceNext=!1}}html(index,length){const[codeBlock]=this.children.find(index);return`<pre data-language="${codeBlock?SyntaxCodeBlock.formats(codeBlock.domNode):"plain"}">\n${escapeText(this.code(index,length))}\n</pre>`}optimize(context){if(super.optimize(context),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){const language=SyntaxCodeBlock.formats(this.children.head.domNode);language!==this.uiNode.value&&(this.uiNode.value=language)}}}SyntaxCodeBlockContainer.allowedChildren=[SyntaxCodeBlock],SyntaxCodeBlock.requiredContainer=SyntaxCodeBlockContainer,SyntaxCodeBlock.allowedChildren=[CodeToken,cursor,text_Text,blots_break];class Syntax extends core_module{static register(){Quill.register(CodeToken,!0),Quill.register(SyntaxCodeBlock,!0),Quill.register(SyntaxCodeBlockContainer,!0)}constructor(quill,options){if(super(quill,options),null==this.options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce(((memo,_ref2)=>{let{key}=_ref2;return memo[key]=!0,memo}),{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Quill.events.SCROLL_BLOT_MOUNT,(blot=>{if(!(blot instanceof SyntaxCodeBlockContainer))return;const select=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach((_ref3=>{let{key,label}=_ref3;const option=select.ownerDocument.createElement("option");option.textContent=label,option.setAttribute("value",key),select.appendChild(option)})),select.addEventListener("change",(()=>{blot.format(SyntaxCodeBlock.blotName,select.value),this.quill.root.focus(),this.highlight(blot,!0)})),null==blot.uiNode&&(blot.attachUI(select),blot.children.head&&(select.value=SyntaxCodeBlock.formats(blot.children.head.domNode)))}))}initTimer(){let timer=null;this.quill.on(Quill.events.SCROLL_OPTIMIZE,(()=>{timer&&clearTimeout(timer),timer=setTimeout((()=>{this.highlight(),timer=null}),this.options.interval)}))}highlight(){let blot=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,force=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(Quill.sources.USER);const range=this.quill.getSelection();(null==blot?this.quill.scroll.descendants(SyntaxCodeBlockContainer):[blot]).forEach((container=>{container.highlight(this.highlightBlot,force)})),this.quill.update(Quill.sources.SILENT),null!=range&&this.quill.setSelection(range,Quill.sources.SILENT)}highlightBlot(text){let language=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if(language=this.languages[language]?language:"plain","plain"===language)return escapeText(text).split("\n").reduce(((delta,line,i)=>(0!==i&&delta.insert("\n",{[CodeBlock.blotName]:language}),delta.insert(line))),new(Delta_default()));const container=this.quill.root.ownerDocument.createElement("div");return container.classList.add(CodeBlock.className),container.innerHTML=((lib,language,text)=>{if("string"==typeof lib.versionString){const majorVersion=lib.versionString.split(".")[0];if(parseInt(majorVersion,10)>=11)return lib.highlight(text,{language}).value}return lib.highlight(language,text).value})(this.options.hljs,language,text),traverse(this.quill.scroll,container,[(node,delta)=>{const value=TokenAttributor.value(node);return value?delta.compose((new(Delta_default())).retain(delta.length(),{[CodeToken.blotName]:value})):delta}],[(node,delta)=>node.data.split("\n").reduce(((memo,nodeText,i)=>(0!==i&&memo.insert("\n",{[CodeBlock.blotName]:language}),memo.insert(nodeText))),delta)],new WeakMap)}}Syntax.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class TableCell extends Block{static blotName="table";static tagName="TD";static create(value){const node=super.create();return value?node.setAttribute("data-row",value):node.setAttribute("data-row",tableId()),node}static formats(domNode){if(domNode.hasAttribute("data-row"))return domNode.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(name,value){name===TableCell.blotName&&value?this.domNode.setAttribute("data-row",value):super.format(name,value)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class TableRow extends container{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&null!=this.next.children.head){const thisHead=this.children.head.formats(),thisTail=this.children.tail.formats(),nextHead=this.next.children.head.formats(),nextTail=this.next.children.tail.formats();return thisHead.table===thisTail.table&&thisHead.table===nextHead.table&&thisHead.table===nextTail.table}return!1}optimize(context){super.optimize(context),this.children.forEach((child=>{if(null==child.next)return;const childFormats=child.formats(),nextFormats=child.next.formats();if(childFormats.table!==nextFormats.table){const next=this.splitAfter(child);next&&next.optimize(),this.prev&&this.prev.optimize()}}))}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class TableBody extends container{static blotName="table-body";static tagName="TBODY"}class TableContainer extends container{static blotName="table-container";static tagName="TABLE";balanceCells(){const rows=this.descendants(TableRow),maxColumns=rows.reduce(((max,row)=>Math.max(row.children.length,max)),0);rows.forEach((row=>{new Array(maxColumns-row.children.length).fill(0).forEach((()=>{let value;null!=row.children.head&&(value=TableCell.formats(row.children.head.domNode));const blot=this.scroll.create(TableCell.blotName,value);row.appendChild(blot),blot.optimize()}))}))}cells(column){return this.rows().map((row=>row.children.at(column)))}deleteColumn(index){const[body]=this.descendant(TableBody);null!=body&&null!=body.children.head&&body.children.forEach((row=>{const cell=row.children.at(index);null!=cell&&cell.remove()}))}insertColumn(index){const[body]=this.descendant(TableBody);null!=body&&null!=body.children.head&&body.children.forEach((row=>{const ref=row.children.at(index),value=TableCell.formats(row.children.head.domNode),cell=this.scroll.create(TableCell.blotName,value);row.insertBefore(cell,ref)}))}insertRow(index){const[body]=this.descendant(TableBody);if(null==body||null==body.children.head)return;const id=tableId(),row=this.scroll.create(TableRow.blotName);body.children.head.children.forEach((()=>{const cell=this.scroll.create(TableCell.blotName,id);row.appendChild(cell)}));const ref=body.children.at(index);body.insertBefore(row,ref)}rows(){const body=this.children.head;return null==body?[]:body.children.map((row=>row))}}function tableId(){return`row-${Math.random().toString(36).slice(2,6)}`}TableContainer.allowedChildren=[TableBody],TableBody.requiredContainer=TableContainer,TableBody.allowedChildren=[TableRow],TableRow.requiredContainer=TableBody,TableRow.allowedChildren=[TableCell],TableCell.requiredContainer=TableRow;const table=class Table extends core_module{static register(){Quill.register(TableCell),Quill.register(TableRow),Quill.register(TableBody),Quill.register(TableContainer)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(TableContainer).forEach((table=>{table.balanceCells()}))}deleteColumn(){const[table,,cell]=this.getTable();null!=cell&&(table.deleteColumn(cell.cellOffset()),this.quill.update(Quill.sources.USER))}deleteRow(){const[,row]=this.getTable();null!=row&&(row.remove(),this.quill.update(Quill.sources.USER))}deleteTable(){const[table]=this.getTable();if(null==table)return;const offset=table.offset();table.remove(),this.quill.update(Quill.sources.USER),this.quill.setSelection(offset,Quill.sources.SILENT)}getTable(){let range=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(null==range)return[null,null,null,-1];const[cell,offset]=this.quill.getLine(range.index);if(null==cell||cell.statics.blotName!==TableCell.blotName)return[null,null,null,-1];const row=cell.parent;return[row.parent.parent,row,cell,offset]}insertColumn(offset){const range=this.quill.getSelection();if(!range)return;const[table,row,cell]=this.getTable(range);if(null==cell)return;const column=cell.cellOffset();table.insertColumn(column+offset),this.quill.update(Quill.sources.USER);let shift=row.rowOffset();0===offset&&(shift+=1),this.quill.setSelection(range.index+shift,range.length,Quill.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(offset){const range=this.quill.getSelection();if(!range)return;const[table,row,cell]=this.getTable(range);if(null==cell)return;const index=row.rowOffset();table.insertRow(index+offset),this.quill.update(Quill.sources.USER),offset>0?this.quill.setSelection(range,Quill.sources.SILENT):this.quill.setSelection(range.index+row.children.length,range.length,Quill.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(rows,columns){const range=this.quill.getSelection();if(null==range)return;const delta=new Array(rows).fill(0).reduce((memo=>{const text=new Array(columns).fill("\n").join("");return memo.insert(text,{table:tableId()})}),(new(Delta_default())).retain(range.index));this.quill.updateContents(delta,Quill.sources.USER),this.quill.setSelection(range.index,Quill.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Quill.events.SCROLL_OPTIMIZE,(mutations=>{mutations.some((mutation=>!!["TD","TR","TBODY","TABLE"].includes(mutation.target.tagName)&&(this.quill.once(Quill.events.TEXT_CHANGE,((delta,old,source)=>{source===Quill.sources.USER&&this.balanceTables()})),!0)))}))}},toolbar_debug=logger("quill:toolbar");class Toolbar extends core_module{constructor(quill,options){if(super(quill,options),Array.isArray(this.options.container)){const container=document.createElement("div");container.setAttribute("role","toolbar"),function addControls(container,groups){Array.isArray(groups[0])||(groups=[groups]);groups.forEach((controls=>{const group=document.createElement("span");group.classList.add("ql-formats"),controls.forEach((control=>{if("string"==typeof control)addButton(group,control);else{const format=Object.keys(control)[0],value=control[format];Array.isArray(value)?function addSelect(container,format,values){const input=document.createElement("select");input.classList.add(`ql-${format}`),values.forEach((value=>{const option=document.createElement("option");!1!==value?option.setAttribute("value",String(value)):option.setAttribute("selected","selected"),input.appendChild(option)})),container.appendChild(input)}(group,format,value):addButton(group,format,value)}})),container.appendChild(group)}))}(container,this.options.container),quill.container?.parentNode?.insertBefore(container,quill.container),this.container=container}else"string"==typeof this.options.container?this.container=document.querySelector(this.options.container):this.container=this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach((format=>{const handler=this.options.handlers?.[format];handler&&this.addHandler(format,handler)})),Array.from(this.container.querySelectorAll("button, select")).forEach((input=>{this.attach(input)})),this.quill.on(Quill.events.EDITOR_CHANGE,(()=>{const[range]=this.quill.selection.getRange();this.update(range)}))):toolbar_debug.error("Container required for toolbar",this.options)}addHandler(format,handler){this.handlers[format]=handler}attach(input){let format=Array.from(input.classList).find((className=>0===className.indexOf("ql-")));if(!format)return;if(format=format.slice(3),"BUTTON"===input.tagName&&input.setAttribute("type","button"),null==this.handlers[format]&&null==this.quill.scroll.query(format))return void toolbar_debug.warn("ignoring attaching to nonexistent format",format,input);const eventName="SELECT"===input.tagName?"change":"click";input.addEventListener(eventName,(e=>{let value;if("SELECT"===input.tagName){if(input.selectedIndex<0)return;const selected=input.options[input.selectedIndex];value=!selected.hasAttribute("selected")&&(selected.value||!1)}else value=!input.classList.contains("ql-active")&&(input.value||!input.hasAttribute("value")),e.preventDefault();this.quill.focus();const[range]=this.quill.selection.getRange();if(null!=this.handlers[format])this.handlers[format].call(this,value);else if(this.quill.scroll.query(format).prototype instanceof EmbedBlot$1){if(value=prompt(`Enter ${format}`),!value)return;this.quill.updateContents((new(Delta_default())).retain(range.index).delete(range.length).insert({[format]:value}),Quill.sources.USER)}else this.quill.format(format,value,Quill.sources.USER);this.update(range)})),this.controls.push([format,input])}update(range){const formats=null==range?{}:this.quill.getFormat(range);this.controls.forEach((pair=>{const[format,input]=pair;if("SELECT"===input.tagName){let option=null;if(null==range)option=null;else if(null==formats[format])option=input.querySelector("option[selected]");else if(!Array.isArray(formats[format])){let value=formats[format];"string"==typeof value&&(value=value.replace(/"/g,'\\"')),option=input.querySelector(`option[value="${value}"]`)}null==option?(input.value="",input.selectedIndex=-1):option.selected=!0}else if(null==range)input.classList.remove("ql-active"),input.setAttribute("aria-pressed","false");else if(input.hasAttribute("value")){const value=formats[format],isActive=value===input.getAttribute("value")||null!=value&&value.toString()===input.getAttribute("value")||null==value&&!input.getAttribute("value");input.classList.toggle("ql-active",isActive),input.setAttribute("aria-pressed",isActive.toString())}else{const isActive=null!=formats[format];input.classList.toggle("ql-active",isActive),input.setAttribute("aria-pressed",isActive.toString())}}))}}function addButton(container,format,value){const input=document.createElement("button");input.setAttribute("type","button"),input.classList.add(`ql-${format}`),input.setAttribute("aria-pressed","false"),null!=value?(input.value=value,input.setAttribute("aria-label",`${format}: ${value}`)):input.setAttribute("aria-label",format),container.appendChild(input)}Toolbar.DEFAULTS={},Toolbar.DEFAULTS={container:null,handlers:{clean(){const range=this.quill.getSelection();if(null!=range)if(0===range.length){const formats=this.quill.getFormat();Object.keys(formats).forEach((name=>{null!=this.quill.scroll.query(name,Scope.INLINE)&&this.quill.format(name,!1,Quill.sources.USER)}))}else this.quill.removeFormat(range.index,range.length,Quill.sources.USER)},direction(value){const{align}=this.quill.getFormat();"rtl"===value&&null==align?this.quill.format("align","right",Quill.sources.USER):value||"right"!==align||this.quill.format("align",!1,Quill.sources.USER),this.quill.format("direction",value,Quill.sources.USER)},indent(value){const range=this.quill.getSelection(),formats=this.quill.getFormat(range),indent=parseInt(formats.indent||0,10);if("+1"===value||"-1"===value){let modifier="+1"===value?1:-1;"rtl"===formats.direction&&(modifier*=-1),this.quill.format("indent",indent+modifier,Quill.sources.USER)}},link(value){!0===value&&(value=prompt("Enter link URL:")),this.quill.format("link",value,Quill.sources.USER)},list(value){const range=this.quill.getSelection(),formats=this.quill.getFormat(range);"check"===value?"checked"===formats.list||"unchecked"===formats.list?this.quill.format("list",!1,Quill.sources.USER):this.quill.format("list","unchecked",Quill.sources.USER):this.quill.format("list",value,Quill.sources.USER)}}};const codeIcon='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',icons={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:codeIcon,"code-block":codeIcon,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'};let optionsCounter=0;function toggleAriaAttribute(element,attribute){element.setAttribute(attribute,`${!("true"===element.getAttribute(attribute))}`)}const picker=class Picker{constructor(select){this.select=select,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(()=>{this.togglePicker()})),this.label.addEventListener("keydown",(event=>{switch(event.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),event.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),toggleAriaAttribute(this.label,"aria-expanded"),toggleAriaAttribute(this.options,"aria-hidden")}buildItem(option){const item=document.createElement("span");item.tabIndex="0",item.setAttribute("role","button"),item.classList.add("ql-picker-item");const value=option.getAttribute("value");return value&&item.setAttribute("data-value",value),option.textContent&&item.setAttribute("data-label",option.textContent),item.addEventListener("click",(()=>{this.selectItem(item,!0)})),item.addEventListener("keydown",(event=>{switch(event.key){case"Enter":this.selectItem(item,!0),event.preventDefault();break;case"Escape":this.escape(),event.preventDefault()}})),item}buildLabel(){const label=document.createElement("span");return label.classList.add("ql-picker-label"),label.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',label.tabIndex="0",label.setAttribute("role","button"),label.setAttribute("aria-expanded","false"),this.container.appendChild(label),label}buildOptions(){const options=document.createElement("span");options.classList.add("ql-picker-options"),options.setAttribute("aria-hidden","true"),options.tabIndex="-1",options.id=`ql-picker-options-${optionsCounter}`,optionsCounter+=1,this.label.setAttribute("aria-controls",options.id),this.options=options,Array.from(this.select.options).forEach((option=>{const item=this.buildItem(option);options.appendChild(item),!0===option.selected&&this.selectItem(item)})),this.container.appendChild(options)}buildPicker(){Array.from(this.select.attributes).forEach((item=>{this.container.setAttribute(item.name,item.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout((()=>this.label.focus()),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(item){let trigger=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const selected=this.container.querySelector(".ql-selected");item!==selected&&(null!=selected&&selected.classList.remove("ql-selected"),null!=item&&(item.classList.add("ql-selected"),this.select.selectedIndex=Array.from(item.parentNode.children).indexOf(item),item.hasAttribute("data-value")?this.label.setAttribute("data-value",item.getAttribute("data-value")):this.label.removeAttribute("data-value"),item.hasAttribute("data-label")?this.label.setAttribute("data-label",item.getAttribute("data-label")):this.label.removeAttribute("data-label"),trigger&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let option;if(this.select.selectedIndex>-1){const item=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];option=this.select.options[this.select.selectedIndex],this.selectItem(item)}else this.selectItem(null);const isActive=null!=option&&option!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",isActive)}};const color_picker=class ColorPicker extends picker{constructor(select,label){super(select),this.label.innerHTML=label,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach((item=>{item.classList.add("ql-primary")}))}buildItem(option){const item=super.buildItem(option);return item.style.backgroundColor=option.getAttribute("value")||"",item}selectItem(item,trigger){super.selectItem(item,trigger);const colorLabel=this.label.querySelector(".ql-color-label"),value=item&&item.getAttribute("data-value")||"";colorLabel&&("line"===colorLabel.tagName?colorLabel.style.stroke=value:colorLabel.style.fill=value)}};const icon_picker=class IconPicker extends picker{constructor(select,icons){super(select),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach((item=>{item.innerHTML=icons[item.getAttribute("data-value")||""]})),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(target,trigger){super.selectItem(target,trigger);const item=target||this.defaultItem;if(null!=item){if(this.label.innerHTML===item.innerHTML)return;this.label.innerHTML=item.innerHTML}}};const tooltip=class Tooltip{constructor(quill,boundsContainer){this.quill=quill,this.boundsContainer=boundsContainer||document.body,this.root=quill.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(el=>{const{overflowY}=getComputedStyle(el,null);return"visible"!==overflowY&&"clip"!==overflowY})(this.quill.root)&&this.quill.root.addEventListener("scroll",(()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"})),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(reference){const left=reference.left+reference.width/2-this.root.offsetWidth/2,top=reference.bottom+this.quill.root.scrollTop;this.root.style.left=`${left}px`,this.root.style.top=`${top}px`,this.root.classList.remove("ql-flip");const containerBounds=this.boundsContainer.getBoundingClientRect(),rootBounds=this.root.getBoundingClientRect();let shift=0;if(rootBounds.right>containerBounds.right&&(shift=containerBounds.right-rootBounds.right,this.root.style.left=`${left+shift}px`),rootBounds.left<containerBounds.left&&(shift=containerBounds.left-rootBounds.left,this.root.style.left=`${left+shift}px`),rootBounds.bottom>containerBounds.bottom){const height=rootBounds.bottom-rootBounds.top,verticalShift=reference.bottom-reference.top+height;this.root.style.top=top-verticalShift+"px",this.root.classList.add("ql-flip")}return shift}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},ALIGNS=[!1,"center","right","justify"],COLORS=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],FONTS=[!1,"serif","monospace"],HEADERS=["1","2","3",!1],SIZES=["small",!1,"large","huge"];class BaseTheme extends core_theme{constructor(quill,options){super(quill,options);const listener=e=>{document.body.contains(quill.root)?(null==this.tooltip||this.tooltip.root.contains(e.target)||document.activeElement===this.tooltip.textbox||this.quill.hasFocus()||this.tooltip.hide(),null!=this.pickers&&this.pickers.forEach((picker=>{picker.container.contains(e.target)||picker.close()}))):document.body.removeEventListener("click",listener)};quill.emitter.listenDOM("click",document.body,listener)}addModule(name){const module=super.addModule(name);return"toolbar"===name&&this.extendToolbar(module),module}buildButtons(buttons,icons){Array.from(buttons).forEach((button=>{(button.getAttribute("class")||"").split(/\s+/).forEach((name=>{if(name.startsWith("ql-")&&(name=name.slice(3),null!=icons[name]))if("direction"===name)button.innerHTML=icons[name][""]+icons[name].rtl;else if("string"==typeof icons[name])button.innerHTML=icons[name];else{const value=button.value||"";null!=value&&icons[name][value]&&(button.innerHTML=icons[name][value])}}))}))}buildPickers(selects,icons){this.pickers=Array.from(selects).map((select=>{if(select.classList.contains("ql-align")&&(null==select.querySelector("option")&&fillSelect(select,ALIGNS),"object"==typeof icons.align))return new icon_picker(select,icons.align);if(select.classList.contains("ql-background")||select.classList.contains("ql-color")){const format=select.classList.contains("ql-background")?"background":"color";return null==select.querySelector("option")&&fillSelect(select,COLORS,"background"===format?"#ffffff":"#000000"),new color_picker(select,icons[format])}return null==select.querySelector("option")&&(select.classList.contains("ql-font")?fillSelect(select,FONTS):select.classList.contains("ql-header")?fillSelect(select,HEADERS):select.classList.contains("ql-size")&&fillSelect(select,SIZES)),new picker(select)}));this.quill.on(core_emitter.events.EDITOR_CHANGE,(()=>{this.pickers.forEach((picker=>{picker.update()}))}))}}BaseTheme.DEFAULTS=(0,merge.A)({},core_theme.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let fileInput=this.container.querySelector("input.ql-image[type=file]");null==fileInput&&(fileInput=document.createElement("input"),fileInput.setAttribute("type","file"),fileInput.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),fileInput.classList.add("ql-image"),fileInput.addEventListener("change",(()=>{const range=this.quill.getSelection(!0);this.quill.uploader.upload(range,fileInput.files),fileInput.value=""})),this.container.appendChild(fileInput)),fileInput.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class BaseTooltip extends tooltip{constructor(quill,boundsContainer){super(quill,boundsContainer),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",(event=>{"Enter"===event.key?(this.save(),event.preventDefault()):"Escape"===event.key&&(this.cancel(),event.preventDefault())}))}cancel(){this.hide(),this.restoreFocus()}edit(){let mode=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",preview=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null==this.textbox)return;null!=preview?this.textbox.value=preview:mode!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const bounds=this.quill.getBounds(this.quill.selection.savedRange);null!=bounds&&this.position(bounds),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${mode}`)||""),this.root.setAttribute("data-mode",mode)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",value,core_emitter.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",value,core_emitter.sources.USER)),this.quill.root.scrollTop=scrollTop;break}case"video":value=function extractVideoUrl(url){let match=url.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||url.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);if(match)return`${match[1]||"https"}://www.youtube.com/embed/${match[2]}?showinfo=0`;if(match=url.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))return`${match[1]||"https"}://player.vimeo.com/video/${match[2]}/`;return url}(value);case"formula":{if(!value)break;const range=this.quill.getSelection(!0);if(null!=range){const index=range.index+range.length;this.quill.insertEmbed(index,this.root.getAttribute("data-mode"),value,core_emitter.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(index+1," ",core_emitter.sources.USER),this.quill.setSelection(index+2,core_emitter.sources.USER)}break}}this.textbox.value="",this.hide()}}function fillSelect(select,values){let defaultValue=arguments.length>2&&void 0!==arguments[2]&&arguments[2];values.forEach((value=>{const option=document.createElement("option");value===defaultValue?option.setAttribute("selected","selected"):option.setAttribute("value",String(value)),select.appendChild(option)}))}const TOOLBAR_CONFIG=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class BubbleTooltip extends BaseTooltip{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(quill,bounds){super(quill,bounds),this.quill.on(core_emitter.events.EDITOR_CHANGE,((type,range,oldRange,source)=>{if(type===core_emitter.events.SELECTION_CHANGE)if(null!=range&&range.length>0&&source===core_emitter.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const lines=this.quill.getLines(range.index,range.length);if(1===lines.length){const bounds=this.quill.getBounds(range);null!=bounds&&this.position(bounds)}else{const lastLine=lines[lines.length-1],index=this.quill.getIndex(lastLine),length=Math.min(lastLine.length()-1,range.index+range.length-index),indexBounds=this.quill.getBounds(new Range(index,length));null!=indexBounds&&this.position(indexBounds)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()}))}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",(()=>{this.root.classList.remove("ql-editing")})),this.quill.on(core_emitter.events.SCROLL_OPTIMIZE,(()=>{setTimeout((()=>{if(this.root.classList.contains("ql-hidden"))return;const range=this.quill.getSelection();if(null!=range){const bounds=this.quill.getBounds(range);null!=bounds&&this.position(bounds)}}),1)}))}cancel(){this.show()}position(reference){const shift=super.position(reference),arrow=this.root.querySelector(".ql-tooltip-arrow");return arrow.style.marginLeft="",0!==shift&&(arrow.style.marginLeft=-1*shift-arrow.offsetWidth/2+"px"),shift}}class BubbleTheme extends BaseTheme{constructor(quill,options){null!=options.modules.toolbar&&null==options.modules.toolbar.container&&(options.modules.toolbar.container=TOOLBAR_CONFIG),super(quill,options),this.quill.container.classList.add("ql-bubble")}extendToolbar(toolbar){this.tooltip=new BubbleTooltip(this.quill,this.options.bounds),null!=toolbar.container&&(this.tooltip.root.appendChild(toolbar.container),this.buildButtons(toolbar.container.querySelectorAll("button"),icons),this.buildPickers(toolbar.container.querySelectorAll("select"),icons))}}BubbleTheme.DEFAULTS=(0,merge.A)({},BaseTheme.DEFAULTS,{modules:{toolbar:{handlers:{link(value){value?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Quill.sources.USER)}}}}});const snow_TOOLBAR_CONFIG=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class SnowTooltip extends BaseTooltip{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",(event=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),event.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(event=>{if(null!=this.linkRange){const range=this.linkRange;this.restoreFocus(),this.quill.formatText(range,"link",!1,core_emitter.sources.USER),delete this.linkRange}event.preventDefault(),this.hide()})),this.quill.on(core_emitter.events.SELECTION_CHANGE,((range,oldRange,source)=>{if(null!=range){if(0===range.length&&source===core_emitter.sources.USER){const[link,offset]=this.quill.scroll.descendant(Link,range.index);if(null!=link){this.linkRange=new Range(range.index-offset,link.length());const preview=Link.formats(link.domNode);this.preview.textContent=preview,this.preview.setAttribute("href",preview),this.show();const bounds=this.quill.getBounds(this.linkRange);return void(null!=bounds&&this.position(bounds))}}else delete this.linkRange;this.hide()}}))}show(){super.show(),this.root.removeAttribute("data-mode")}}class SnowTheme extends BaseTheme{constructor(quill,options){null!=options.modules.toolbar&&null==options.modules.toolbar.container&&(options.modules.toolbar.container=snow_TOOLBAR_CONFIG),super(quill,options),this.quill.container.classList.add("ql-snow")}extendToolbar(toolbar){null!=toolbar.container&&(toolbar.container.classList.add("ql-snow"),this.buildButtons(toolbar.container.querySelectorAll("button"),icons),this.buildPickers(toolbar.container.querySelectorAll("select"),icons),this.tooltip=new SnowTooltip(this.quill,this.options.bounds),toolbar.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},((_range,context)=>{toolbar.handlers.link.call(toolbar,!context.format.link)})))}}SnowTheme.DEFAULTS=(0,merge.A)({},BaseTheme.DEFAULTS,{modules:{toolbar:{handlers:{link(value){if(value){const range=this.quill.getSelection();if(null==range||0===range.length)return;let preview=this.quill.getText(range);/^\S+@\S+\.\S+$/.test(preview)&&0!==preview.indexOf("mailto:")&&(preview=`mailto:${preview}`);const{tooltip}=this.quill.theme;tooltip.edit("link",preview)}else this.quill.format("link",!1,Quill.sources.USER)}}}}});const snow=SnowTheme;core.register({"attributors/attribute/direction":DirectionAttribute,"attributors/class/align":AlignClass,"attributors/class/background":BackgroundClass,"attributors/class/color":ColorClass,"attributors/class/direction":DirectionClass,"attributors/class/font":FontClass,"attributors/class/size":SizeClass,"attributors/style/align":AlignStyle,"attributors/style/background":BackgroundStyle,"attributors/style/color":ColorStyle,"attributors/style/direction":DirectionStyle,"attributors/style/font":FontStyle,"attributors/style/size":SizeStyle},!0),core.register({"formats/align":AlignClass,"formats/direction":DirectionClass,"formats/indent":indent,"formats/background":BackgroundStyle,"formats/color":ColorStyle,"formats/font":FontClass,"formats/size":SizeClass,"formats/blockquote":blockquote,"formats/code-block":CodeBlock,"formats/header":header,"formats/list":ListItem,"formats/bold":bold,"formats/code":Code,"formats/italic":italic,"formats/link":Link,"formats/script":script,"formats/strike":strike,"formats/underline":underline,"formats/formula":formula,"formats/image":formats_image,"formats/video":video,"modules/syntax":Syntax,"modules/table":table,"modules/toolbar":Toolbar,"themes/bubble":BubbleTheme,"themes/snow":snow,"ui/icons":icons,"ui/picker":picker,"ui/icon-picker":icon_picker,"ui/color-picker":color_picker,"ui/tooltip":tooltip},!0);const quill=core},"./node_modules/react-quill-new/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,_:()=>quill__WEBPACK_IMPORTED_MODULE_1__.Ay});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),lodash_es__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash-es/isEqual.js"),quill__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/quill/quill.js");class ReactQuill extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.editingAreaRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.createRef)(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(eventName,rangeOrDelta,oldRangeOrDelta,source)=>{"text-change"===eventName?this.onEditorChangeText?.(this.editor.root.innerHTML,rangeOrDelta,source,this.unprivilegedEditor):"selection-change"===eventName&&this.onEditorChangeSelection?.(rangeOrDelta,source,this.unprivilegedEditor)};const value=this.isControlled()?props.value:props.defaultValue;this.value=value??""}validateProps(props){if(react__WEBPACK_IMPORTED_MODULE_0__.Children.count(props.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(react__WEBPACK_IMPORTED_MODULE_0__.Children.count(props.children)){const child=react__WEBPACK_IMPORTED_MODULE_0__.Children.only(props.children);if("textarea"===child?.type)throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&props.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(nextProps,nextState){if(this.validateProps(nextProps),!this.editor||this.state.generation!==nextState.generation)return!0;if("value"in nextProps){const prevContents=this.getEditorContents(),nextContents=nextProps.value??"";this.isEqualValue(nextContents,prevContents)||this.setEditorContents(this.editor,nextContents)}return nextProps.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,nextProps.readOnly),[...this.cleanProps,...this.dirtyProps].some((prop=>!(0,lodash_es__WEBPACK_IMPORTED_MODULE_2__.A)(nextProps[prop],this.props[prop])))}shouldComponentRegenerate(nextProps){return this.dirtyProps.some((prop=>!(0,lodash_es__WEBPACK_IMPORTED_MODULE_2__.A)(nextProps[prop],this.props[prop])))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(prevProps,prevState){if(this.editor&&this.shouldComponentRegenerate(prevProps)){const delta=this.editor.getContents(),selection=this.editor.getSelection();this.regenerationSnapshot={delta,selection},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==prevState.generation){const{delta,selection}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const editor=this.editor;editor.setContents(delta),postpone((()=>this.setEditorSelection(editor,selection)))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const toolbar=this.props.modules?.toolbar;if(!("object"==typeof toolbar&&toolbar&&"container"in toolbar&&"string"==typeof toolbar.container||"string"==typeof toolbar)){const leftOverToolbar=document.querySelector(".ql-toolbar");leftOverToolbar&&leftOverToolbar.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(element,config){const editor=new quill__WEBPACK_IMPORTED_MODULE_1__.Ay(element,config);return null!=config.tabIndex&&this.setEditorTabIndex(editor,config.tabIndex),this.hookEditor(editor),editor}hookEditor(editor){this.unprivilegedEditor=this.makeUnprivilegedEditor(editor),editor.on("editor-change",this.onEditorChange)}unhookEditor(editor){editor.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(value){return value&&value.ops}isEqualValue(value,nextValue){return this.isDelta(value)&&this.isDelta(nextValue)?(0,lodash_es__WEBPACK_IMPORTED_MODULE_2__.A)(value.ops,nextValue.ops):(0,lodash_es__WEBPACK_IMPORTED_MODULE_2__.A)(value,nextValue)}setEditorContents(editor,value){this.value=value;const sel=this.getEditorSelection();"string"==typeof value?editor.setContents(editor.clipboard.convert({html:value})):editor.setContents(value),postpone((()=>this.setEditorSelection(editor,sel)))}setEditorSelection(editor,range){if(this.selection=range,range){const length=editor.getLength();range.index=Math.max(0,Math.min(range.index,length-1)),range.length=Math.max(0,Math.min(range.length,length-1-range.index)),editor.setSelection(range)}}setEditorTabIndex(editor,tabIndex){editor?.scroll?.domNode&&(editor.scroll.domNode.tabIndex=tabIndex)}setEditorReadOnly(editor,value){value?editor.disable():editor.enable()}makeUnprivilegedEditor(editor){const e=editor;return{getHTML:()=>e.root.innerHTML,getSemanticHTML:e.getSemanticHTML.bind(e),getLength:e.getLength.bind(e),getText:e.getText.bind(e),getContents:e.getContents.bind(e),getSelection:e.getSelection.bind(e),getBounds:e.getBounds.bind(e)}}getEditingArea(){const element=this.editingAreaRef.current;if(!element)throw new Error("Cannot find element for editing area");if(3===element.nodeType)throw new Error("Editing area cannot be a text node");return element}renderEditingArea(){const{children,preserveWhitespace}=this.props,{generation}=this.state,properties={key:generation,ref:this.editingAreaRef};return react__WEBPACK_IMPORTED_MODULE_0__.Children.count(children)?react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(react__WEBPACK_IMPORTED_MODULE_0__.Children.only(children),properties):preserveWhitespace?react__WEBPACK_IMPORTED_MODULE_0__.createElement("pre",{...properties}):react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{...properties})}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(value,delta,source,editor){if(!this.editor)return;const nextContents=this.isDelta(this.value)?editor.getContents():editor.getHTML();nextContents!==this.getEditorContents()&&(this.lastDeltaChangeSet=delta,this.value=nextContents,this.props.onChange?.(value,delta,source,editor))}onEditorChangeSelection(nextSelection,source,editor){if(!this.editor)return;const currentSelection=this.getEditorSelection(),hasGainedFocus=!currentSelection&&nextSelection,hasLostFocus=currentSelection&&!nextSelection;(0,lodash_es__WEBPACK_IMPORTED_MODULE_2__.A)(nextSelection,currentSelection)||(this.selection=nextSelection,this.props.onChangeSelection?.(nextSelection,source,editor),hasGainedFocus?this.props.onFocus?.(nextSelection,source,editor):hasLostFocus&&this.props.onBlur?.(currentSelection,source,editor))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}function postpone(fn){Promise.resolve().then(fn)}ReactQuill.displayName="React Quill",ReactQuill.Quill=quill__WEBPACK_IMPORTED_MODULE_1__.Ay,ReactQuill.defaultProps={theme:"snow",modules:{},readOnly:!1};const __WEBPACK_DEFAULT_EXPORT__=ReactQuill}}]);