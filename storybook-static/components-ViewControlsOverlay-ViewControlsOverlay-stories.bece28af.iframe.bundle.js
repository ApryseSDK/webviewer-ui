(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[15087],{"./node_modules/@pdftron/webviewer-react-toolkit/dist/esm/utils/domUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O1:()=>focusableElementDomString});var focusableElementDomString=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(",")},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/PasswordModal/PasswordModal.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".open.PasswordModal{visibility:visible}.closed.PasswordModal{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.PasswordModal .footer .modal-button.confirm:hover{background:var(--primary-button-hover);border-color:var(--primary-button-hover);color:var(--gray-0)}.PasswordModal .footer .modal-button.confirm{background:var(--primary-button);border-color:var(--primary-button);color:var(--primary-button-text)}.PasswordModal .footer .modal-button.confirm.disabled{cursor:default;background:var(--disabled-button-color);color:var(--primary-button-text)}.PasswordModal .footer .modal-button.confirm.disabled span{color:var(--primary-button-text)}.PasswordModal .footer .modal-button.cancel:hover,.PasswordModal .footer .modal-button.secondary-btn-custom:hover{border:none;box-shadow:inset 0 0 0 1px var(--blue-6);color:var(--blue-6)}.PasswordModal .footer .modal-button.cancel,.PasswordModal .footer .modal-button.secondary-btn-custom{border:none;box-shadow:inset 0 0 0 1px var(--primary-button);color:var(--primary-button)}.PasswordModal .footer .modal-button.cancel.disabled,.PasswordModal .footer .modal-button.secondary-btn-custom.disabled{cursor:default;border:none;box-shadow:inset 0 0 0 1px rgba(43,115,171,.5);color:rgba(43,115,171,.5)}.PasswordModal .footer .modal-button.cancel.disabled span,.PasswordModal .footer .modal-button.secondary-btn-custom.disabled span{color:rgba(43,115,171,.5)}.PasswordModal{position:fixed;inset-inline-start:0;inset-block-end:0;z-index:100;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:var(--modal-negative-space)}.PasswordModal .modal-container .wrapper .modal-content{padding:10px}.PasswordModal .footer{display:flex;flex-direction:row;justify-content:flex-end;width:100%;margin-top:13px}.PasswordModal .footer.modal-footer{padding:16px;margin:0;border-top:1px solid var(--divider)}.PasswordModal .footer .modal-button{display:flex;justify-content:center;align-items:center;padding:6px 18px;margin:8px 0 0;width:auto;width:-moz-fit-content;width:fit-content;border-radius:4px;height:30px;cursor:pointer}.PasswordModal .footer .modal-button.confirm{margin-inline-start:4px}.PasswordModal .footer .modal-button.secondary-btn-custom{border-radius:4px;padding:2px 20px 4px;cursor:pointer}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PasswordModal .footer .modal-button{padding:23px 8px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PasswordModal .footer .modal-button{padding:23px 8px}}.PasswordModal .swipe-indicator{background:var(--swipe-indicator-bg);border-radius:2px;height:4px;width:38px;position:absolute;inset-block-start:12px;margin-inline-start:auto;margin-inline-end:auto;inset-inline-start:0;inset-inline-end:0}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PasswordModal .swipe-indicator{display:none}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .PasswordModal .swipe-indicator{display:none}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PasswordModal .swipe-indicator{width:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PasswordModal .swipe-indicator{width:32px}}.PasswordModal .modal-container{width:480px}.PasswordModal .modal-container .wrapper form{padding:16px;font-size:14px}.PasswordModal .modal-container .wrapper .incorrect-password{margin-top:6px;font-size:13px;color:#cf0101}.PasswordModal .modal-container .wrapper .modal-button{margin-top:0}.PasswordModal .modal-container .wrapper .error-modal-content{padding:2px 16px}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./node_modules/lodash/isArrayLike.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isFunction=__webpack_require__("./node_modules/lodash/isFunction.js"),isLength=__webpack_require__("./node_modules/lodash/isLength.js");module.exports=function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}},"./node_modules/lodash/isString.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetTag=__webpack_require__("./node_modules/lodash/_baseGetTag.js"),isArray=__webpack_require__("./node_modules/lodash/isArray.js"),isObjectLike=__webpack_require__("./node_modules/lodash/isObjectLike.js");module.exports=function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&"[object String]"==baseGetTag(value)}},"./node_modules/react-swipeable/es/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Hx:()=>Swipeable});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var defaultProps={preventDefaultTouchmoveEvent:!1,delta:10,rotationAngle:0,trackMouse:!1,trackTouch:!0},initialState={xy:[0,0],swiping:!1,eventData:void 0,start:void 0};function rotateXYByAngle(pos,angle){if(0===angle)return pos;var angleInRadians=Math.PI/180*angle;return[pos[0]*Math.cos(angleInRadians)+pos[1]*Math.sin(angleInRadians),pos[1]*Math.cos(angleInRadians)-pos[0]*Math.sin(angleInRadians)]}function getHandlers(set,handlerProps){var onStart=function onStart(event){event.touches&&event.touches.length>1||set((function(state,props){props.trackMouse&&(document.addEventListener("mousemove",onMove),document.addEventListener("mouseup",onUp));var _ref=event.touches?event.touches[0]:event,xy=rotateXYByAngle([_ref.clientX,_ref.clientY],props.rotationAngle);return _extends({},state,initialState,{eventData:{initial:[].concat(xy),first:!0},xy,start:event.timeStamp||0})}))},onMove=function onMove(event){set((function(state,props){if(!state.xy[0]||!state.xy[1]||event.touches&&event.touches.length>1)return state;var _ref2=event.touches?event.touches[0]:event,_rotateXYByAngle=rotateXYByAngle([_ref2.clientX,_ref2.clientY],props.rotationAngle),x=_rotateXYByAngle[0],y=_rotateXYByAngle[1],deltaX=state.xy[0]-x,deltaY=state.xy[1]-y,absX=Math.abs(deltaX),absY=Math.abs(deltaY),time=(event.timeStamp||0)-state.start,velocity=Math.sqrt(absX*absX+absY*absY)/(time||1);if(absX<props.delta&&absY<props.delta&&!state.swiping)return state;var dir=function getDirection(absX,absY,deltaX,deltaY){return absX>absY?deltaX>0?"Left":"Right":deltaY>0?"Up":"Down"}(absX,absY,deltaX,deltaY),eventData=_extends({},state.eventData,{event,absX,absY,deltaX,deltaY,velocity,dir});props.onSwiping&&props.onSwiping(eventData);var cancelablePageSwipe=!1;return(props.onSwiping||props.onSwiped||props["onSwiped"+dir])&&(cancelablePageSwipe=!0),cancelablePageSwipe&&props.preventDefaultTouchmoveEvent&&props.trackTouch&&event.cancelable&&event.preventDefault(),_extends({},state,{eventData:_extends({},eventData,{first:!1}),swiping:!0})}))},onEnd=function onEnd(event){set((function(state,props){var eventData;return state.swiping&&(eventData=_extends({},state.eventData,{event}),props.onSwiped&&props.onSwiped(eventData),props["onSwiped"+eventData.dir]&&props["onSwiped"+eventData.dir](eventData)),_extends({},state,initialState,{eventData})}))},cleanUpMouse=function cleanUpMouse(){document.removeEventListener("mousemove",onMove),document.removeEventListener("mouseup",onUp)},onUp=function onUp(e){cleanUpMouse(),onEnd(e)},attachTouch=function attachTouch(el){if(el&&el.addEventListener){var tls=[["touchstart",onStart],["touchmove",onMove],["touchend",onEnd]];return tls.forEach((function(_ref3){var e=_ref3[0],h=_ref3[1];return el.addEventListener(e,h)})),function(){return tls.forEach((function(_ref4){var e=_ref4[0],h=_ref4[1];return el.removeEventListener(e,h)}))}}},output={ref:function onRef(el){null!==el&&set((function(state,props){if(state.el===el)return state;var addState={};return state.el&&state.el!==el&&state.cleanUpTouch&&(state.cleanUpTouch(),addState.cleanUpTouch=null),props.trackTouch&&el&&(addState.cleanUpTouch=attachTouch(el)),_extends({},state,{el},addState)}))}};return handlerProps.trackMouse&&(output.onMouseDown=onStart),[output,attachTouch]}function updateTransientState(state,props,attachTouch){var addState={};return!props.trackTouch&&state.cleanUpTouch?(state.cleanUpTouch(),addState.cleanUpTouch=null):props.trackTouch&&!state.cleanUpTouch&&state.el&&(addState.cleanUpTouch=attachTouch(state.el)),_extends({},state,addState)}var Swipeable=function(_React$PureComponent){function Swipeable(props){var _this;return(_this=_React$PureComponent.call(this,props)||this)._set=function(cb){_this.transientState=cb(_this.transientState,_this.props)},_this.transientState=_extends({},initialState,{type:"class"}),_this}return function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,subClass.__proto__=superClass}(Swipeable,_React$PureComponent),Swipeable.prototype.render=function render(){var _this$props=this.props,className=_this$props.className,style=_this$props.style,_this$props$nodeName=_this$props.nodeName,nodeName=void 0===_this$props$nodeName?"div":_this$props$nodeName,innerRef=_this$props.innerRef,children=_this$props.children,trackMouse=_this$props.trackMouse,_getHandlers=getHandlers(this._set,{trackMouse}),handlers=_getHandlers[0],attachTouch=_getHandlers[1];this.transientState=updateTransientState(this.transientState,this.props,attachTouch);var ref=innerRef?function(el){return innerRef(el),handlers.ref(el)}:handlers.ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(nodeName,_extends({},handlers,{className,style,ref}),children)},Swipeable}(react__WEBPACK_IMPORTED_MODULE_0__.PureComponent);Swipeable.propTypes={onSwiped:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onSwiping:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onSwipedUp:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onSwipedRight:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onSwipedDown:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onSwipedLeft:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,delta:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,preventDefaultTouchmoveEvent:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,nodeName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,trackMouse:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,trackTouch:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,innerRef:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,rotationAngle:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number},Swipeable.defaultProps=defaultProps},"./src/components/ActionButton/ActionButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_redux__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-redux/es/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),components_Button__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Button/index.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.Ng)(((state,{isNotClickableSelector,className,disabled})=>({className:classnames__WEBPACK_IMPORTED_MODULE_1___default()({ActionButton:!0,[className]:!!className}),disabled:disabled||isNotClickableSelector&&isNotClickableSelector(state)})),((dispatch,ownProps)=>({onClick:ownProps.shouldPassActiveDocumentViewerKeyToOnClickHandler||!ownProps.onClick?ownProps.onClick:()=>ownProps.onClick(dispatch)})))(components_Button__WEBPACK_IMPORTED_MODULE_2__.A)},"./src/components/ActionButton/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("./src/components/ActionButton/ActionButton.js").A},"./src/components/Button/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("./src/components/Button/Button.js").A},"./src/components/DataElementWrapper/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>components_DataElementWrapper});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),selectors=__webpack_require__("./src/redux/selectors/index.js");const propTypes={id:prop_types_default().string,children:prop_types_default().node,dataElement:prop_types_default().string,type:prop_types_default().string,ariaLabel:prop_types_default().string};const DataElementWrapper=react.forwardRef((({type="div",children,dataElement,ariaLabel,...props},ref)=>function useIsDisabledWithDefaultValue(selector,defaultValue=!1){try{return(0,es.d4)(selector)}catch(e){e.message}return defaultValue}((state=>selectors.A.isElementDisabled(state,dataElement)))?null:"button"===type?(0,jsx_runtime.jsx)("button",{ref,"data-element":dataElement,"aria-label":ariaLabel,...props,children}):(0,jsx_runtime.jsx)("div",{ref,"data-element":dataElement,...props,children})));DataElementWrapper.displayName="DataElementWrapper",DataElementWrapper.propTypes=propTypes;const DataElementWrapper_DataElementWrapper=DataElementWrapper;DataElementWrapper.__docgenInfo={description:"",methods:[],displayName:"DataElementWrapper",props:{type:{defaultValue:{value:"'div'",computed:!1},description:"",type:{name:"string"},required:!1},id:{description:"",type:{name:"string"},required:!1},children:{description:"",type:{name:"node"},required:!1},dataElement:{description:"",type:{name:"string"},required:!1},ariaLabel:{description:"Accessibility",type:{name:"string"},required:!1}}};const components_DataElementWrapper=DataElementWrapper_DataElementWrapper},"./src/components/PasswordModal/PasswordModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,Pm:()=>setCancelPasswordCheckCallback,mw:()=>setCheckPasswordFunction});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),react_redux__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-redux/es/index.js"),react_i18next__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),components_Button__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Button/index.js"),actions__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/redux/actions/index.js"),selectors__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/redux/selectors/index.js"),_ModalWrapper__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/ModalWrapper/index.js"),helpers_accessibility__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/helpers/accessibility.js"),constants_dataElement__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/constants/dataElement.js");__webpack_require__("./src/components/PasswordModal/PasswordModal.scss");let checkPassword=()=>{};const setCheckPasswordFunction=fn=>{checkPassword=fn};let cancelPasswordCheckCallback=()=>{};const setCancelPasswordCheckCallback=fn=>{cancelPasswordCheckCallback=fn},PasswordModal=()=>{const[isOpen,attempt,maxAttempts]=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.d4)((state=>[selectors__WEBPACK_IMPORTED_MODULE_6__.A.isElementOpen(state,constants_dataElement__WEBPACK_IMPORTED_MODULE_9__.A.PASSWORD_MODAL),selectors__WEBPACK_IMPORTED_MODULE_6__.A.getPasswordAttempts(state),selectors__WEBPACK_IMPORTED_MODULE_6__.A.getMaxPasswordAttempts(state)]),react_redux__WEBPACK_IMPORTED_MODULE_3__.bN),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.wA)(),[t]=(0,react_i18next__WEBPACK_IMPORTED_MODULE_11__.B)(),passwordInput=react__WEBPACK_IMPORTED_MODULE_1__.createRef(),[password,setPassword]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[userCancelled,setUserCancelled]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>(isOpen?(dispatch(actions__WEBPACK_IMPORTED_MODULE_5__.A.closeElement(constants_dataElement__WEBPACK_IMPORTED_MODULE_9__.A.PROGRESS_MODAL)),passwordInput.current?.focus(),window.addEventListener("keydown",(e=>(0,helpers_accessibility__WEBPACK_IMPORTED_MODULE_8__.dy)(e,closeModal)))):(setPassword(""),setUserCancelled(!1)),()=>window.removeEventListener("keydown",helpers_accessibility__WEBPACK_IMPORTED_MODULE_8__.dy))),[dispatch,isOpen,passwordInput]);const handleSubmit=e=>{e.preventDefault(),checkPassword(password)},closeModal=event=>{"Escape"===event.key?setUserCancelled(!0):dispatch(actions__WEBPACK_IMPORTED_MODULE_5__.A.closeElement(constants_dataElement__WEBPACK_IMPORTED_MODULE_9__.A.PASSWORD_MODAL)),cancelPasswordCheckCallback()},getErrorModal=errorMessage=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_ModalWrapper__WEBPACK_IMPORTED_MODULE_7__.A,{isOpen,title:"message.error",closeButtonDataElement:"errorModalCloseButton",onCloseClick:closeModal,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"modal-content error-modal-content",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{"aria-live":"assertive",role:"alert",children:t(errorMessage)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"modal-footer footer",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_4__.A,{className:"confirm modal-button",dataElement:"passwordSubmitButton",label:t("action.ok"),onClick:closeModal})})]}),onKeyDown=e=>{13===e.which&&handleSubmit(e)},renderEnterPasswordContent=()=>{const wrongPassword=0!==attempt,wrongPasswordMessage=`${t("message.incorrectPassword",{remainingAttempts:maxAttempts-attempt})}`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_ModalWrapper__WEBPACK_IMPORTED_MODULE_7__.A,{isOpen,title:"message.passwordRequired",closeButtonDataElement:"errorModalCloseButton",onCloseClick:()=>{setUserCancelled(!0)},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{onSubmit:handleSubmit,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:t("message.enterPassword")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{className:(wrongPassword?"wrong":"correct")+" text-input-modal",type:"password",ref:passwordInput,autoComplete:"current-password",value:password,onKeyDown,onChange:e=>setPassword(e.target.value),placeholder:t("message.enterPasswordPlaceholder"),"aria-label":`${wrongPassword?wrongPasswordMessage:t("message.enterPassword")}`}),wrongPassword&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"incorrect-password",children:wrongPasswordMessage})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"modal-footer footer",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_4__.A,{className:"confirm modal-button",dataElement:"passwordSubmitButton",label:t("action.submit"),disabled:!password,onClick:handleSubmit})})]})};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()({Modal:!0,PasswordModal:!0,open:isOpen,closed:!isOpen}),"data-element":constants_dataElement__WEBPACK_IMPORTED_MODULE_9__.A.PASSWORD_MODAL,children:attempt===maxAttempts?getErrorModal("message.encryptedAttemptsExceeded"):userCancelled?getErrorModal("message.encryptedUserCancelled"):renderEnterPasswordContent()})},__WEBPACK_DEFAULT_EXPORT__=PasswordModal;PasswordModal.__docgenInfo={description:"",methods:[],displayName:"PasswordModal"}},"./src/components/PasswordModal/PasswordModal.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/PasswordModal/PasswordModal.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/PasswordModal/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,setCancelPasswordCheckCallback:()=>_PasswordModal__WEBPACK_IMPORTED_MODULE_0__.Pm,setCheckPasswordFunction:()=>_PasswordModal__WEBPACK_IMPORTED_MODULE_0__.mw});var _PasswordModal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/PasswordModal/PasswordModal.js");const __WEBPACK_DEFAULT_EXPORT__=_PasswordModal__WEBPACK_IMPORTED_MODULE_0__.Ay},"./src/components/ViewControlsOverlay/ViewControlsOverlay.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),components_ActionButton__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/ActionButton/index.js"),components_Button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Button/index.js"),constants_displayModeObjects__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/constants/displayModeObjects.js"),core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/core/index.js"),react_i18next__WEBPACK_IMPORTED_MODULE_16__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js")),react_redux__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-redux/es/index.js"),selectors__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/redux/selectors/index.js"),_FlyoutMenu_FlyoutMenu__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/FlyoutMenu/FlyoutMenu.js"),components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/components/DataElementWrapper/index.js"),helpers_readerMode__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/helpers/readerMode.js"),actions__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/redux/actions/index.js"),helpers_toggleFullscreen__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/helpers/toggleFullscreen.js"),src_constants_dataElement__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/constants/dataElement.js"),helpers_device__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/helpers/device.js");function ViewControlsOverlay(){const[t]=(0,react_i18next__WEBPACK_IMPORTED_MODULE_16__.B)(),store=(0,react_redux__WEBPACK_IMPORTED_MODULE_7__.Pj)(),[totalPages,displayMode,isDisabled,isReaderMode,isMultiViewerMode,isFullScreen,activeDocumentViewerKey,isMultiTab,isMultiViewerModeAvailable]=(0,react_redux__WEBPACK_IMPORTED_MODULE_7__.d4)((state=>[selectors__WEBPACK_IMPORTED_MODULE_8__.A.getTotalPages(state),selectors__WEBPACK_IMPORTED_MODULE_8__.A.getDisplayMode(state),selectors__WEBPACK_IMPORTED_MODULE_8__.A.isElementDisabled(state,src_constants_dataElement__WEBPACK_IMPORTED_MODULE_14__.A.VIEW_CONTROLS_OVERLAY),selectors__WEBPACK_IMPORTED_MODULE_8__.A.isReaderMode(state),selectors__WEBPACK_IMPORTED_MODULE_8__.A.isMultiViewerMode(state),selectors__WEBPACK_IMPORTED_MODULE_8__.A.isFullScreen(state),selectors__WEBPACK_IMPORTED_MODULE_8__.A.getActiveDocumentViewerKey(state),selectors__WEBPACK_IMPORTED_MODULE_8__.A.getIsMultiTab(state),selectors__WEBPACK_IMPORTED_MODULE_8__.A.getIsMultiViewerModeAvailable(state)]));let isPageTransitionEnabled=totalPages<1e3;const documentViewer=core__WEBPACK_IMPORTED_MODULE_5__.A.getDocumentViewer(),displayModeManager=documentViewer?.getDisplayModeManager();displayModeManager&&displayModeManager.isVirtualDisplayEnabled()&&(isPageTransitionEnabled=!0);const showCompareButton=!helpers_device__WEBPACK_IMPORTED_MODULE_15__.lw&&!isMultiTab&&isMultiViewerModeAvailable,handleClick=(pageTransition,layout)=>{const setDisplayMode=()=>{const displayModeObject=constants_displayModeObjects__WEBPACK_IMPORTED_MODULE_4__.A.find((obj=>obj.pageTransition===pageTransition&&obj.layout===layout));core__WEBPACK_IMPORTED_MODULE_5__.A.setDisplayMode(displayModeObject.displayMode)};isReaderMode?((0,helpers_readerMode__WEBPACK_IMPORTED_MODULE_11__.t)(store),setTimeout((()=>{setDisplayMode()}))):setDisplayMode()};if(isDisabled)return null;let pageTransition,layout;const displayModeObject=constants_displayModeObjects__WEBPACK_IMPORTED_MODULE_4__.A.find((obj=>obj.displayMode===displayMode));displayModeObject&&(pageTransition=displayModeObject.pageTransition,layout=displayModeObject.layout);const showReaderButton=core__WEBPACK_IMPORTED_MODULE_5__.A.isFullPDFEnabled()&&"pdf"===core__WEBPACK_IMPORTED_MODULE_5__.A.getDocument()?.getType();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_FlyoutMenu_FlyoutMenu__WEBPACK_IMPORTED_MODULE_9__.A,{menu:src_constants_dataElement__WEBPACK_IMPORTED_MODULE_14__.A.VIEW_CONTROLS_OVERLAY,trigger:src_constants_dataElement__WEBPACK_IMPORTED_MODULE_14__.A.VIEW_CONTROLS_OVERLAY_BUTTON,ariaLabel:t("component.viewControls"),children:[isPageTransitionEnabled&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{dataElement:"pageTransitionHeader",className:"type",ariaLabel:t("option.displayMode.pageTransition"),children:t("option.displayMode.pageTransition")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()({row:!0,active:"continuous"===pageTransition&&!isReaderMode}),onClick:()=>handleClick("continuous",layout),dataElement:"continuousPageTransitionButton",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_3__.A,{title:"option.pageTransition.continuous",img:"icon-header-page-manipulation-page-transition-continuous-page-line",isActive:"continuous"===pageTransition&&!isReaderMode,role:"option"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"title",children:t("option.pageTransition.continuous")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()({row:!0,active:"default"===pageTransition&&!isReaderMode}),onClick:()=>handleClick("default",layout),dataElement:"defaultPageTransitionButton",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_3__.A,{title:"option.pageTransition.default",img:"icon-header-page-manipulation-page-transition-page-by-page-line",isActive:"default"===pageTransition&&!isReaderMode,role:"option"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"title",children:t("option.pageTransition.default")})]}),showReaderButton&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()({row:!0,active:isReaderMode}),onClick:()=>{isReaderMode||(0,helpers_readerMode__WEBPACK_IMPORTED_MODULE_11__.b)(store)},dataElement:"readerPageTransitionButton",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_3__.A,{title:"option.pageTransition.reader",img:"icon-header-page-manipulation-page-transition-reader",isActive:isReaderMode,role:"option"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"title",children:t("option.pageTransition.reader")})]}),!isReaderMode&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{dataElement:"viewControlsDivider1",className:"divider"})]}),!isReaderMode&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{dataElement:"rotateHeader",className:"type",ariaLabel:t("action.rotate"),children:t("action.rotate")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{className:"row",onClick:()=>core__WEBPACK_IMPORTED_MODULE_5__.A.rotateClockwise(activeDocumentViewerKey),dataElement:"rotateClockwiseButton",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_ActionButton__WEBPACK_IMPORTED_MODULE_2__.A,{title:"action.rotateClockwise",img:"icon-header-page-manipulation-page-rotation-clockwise-line",role:"option"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"title",children:t("action.rotateClockwise")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{className:"row",onClick:()=>core__WEBPACK_IMPORTED_MODULE_5__.A.rotateCounterClockwise(activeDocumentViewerKey),dataElement:"rotateCounterClockwiseButton",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_ActionButton__WEBPACK_IMPORTED_MODULE_2__.A,{title:"action.rotateCounterClockwise",img:"icon-header-page-manipulation-page-rotation-counterclockwise-line",role:"option"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"title",children:t("action.rotateCounterClockwise")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{dataElement:"viewControlsDivider2",className:"divider"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{dataElement:"layoutHeader",className:"type",ariaLabel:t("option.displayMode.layout"),children:t("option.displayMode.layout")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()({row:!0,active:"single"===layout}),onClick:()=>handleClick(pageTransition,"single"),dataElement:"singleLayoutButton",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_3__.A,{title:"option.layout.single",img:"icon-header-page-manipulation-page-layout-single-page-line",isActive:"single"===layout,role:"option"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"title",children:t("option.layout.single")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()({row:!0,active:"double"===layout}),onClick:()=>handleClick(pageTransition,"double"),dataElement:"doubleLayoutButton",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_3__.A,{title:"option.layout.double",img:"icon-header-page-manipulation-page-layout-double-page-line",isActive:"double"===layout,role:"option"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"title",children:t("option.layout.double")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()({row:!0,active:"cover"===layout}),onClick:()=>handleClick(pageTransition,"cover"),dataElement:"coverLayoutButton",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_3__.A,{title:"option.layout.cover",img:"icon-header-page-manipulation-page-layout-cover-line",isActive:"cover"===layout,role:"option"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"title",children:t("option.layout.cover")})]}),showCompareButton&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()({row:!0,active:isMultiViewerMode}),onClick:()=>{store.dispatch(actions__WEBPACK_IMPORTED_MODULE_12__.A.setIsMultiViewerMode(!isMultiViewerMode))},dataElement:"toggleCompareModeButton",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_3__.A,{title:"action.comparePages",img:"icon-header-compare",isActive:isMultiViewerMode,role:"option"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"title",children:t("action.sideBySideView")})]})]}),helpers_device__WEBPACK_IMPORTED_MODULE_15__.un&&!helpers_device__WEBPACK_IMPORTED_MODULE_15__.lB?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{dataElement:"viewControlsDivider3",className:"divider"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(components_DataElementWrapper__WEBPACK_IMPORTED_MODULE_10__.A,{className:"row",onClick:helpers_toggleFullscreen__WEBPACK_IMPORTED_MODULE_13__.A,dataElement:"fullScreenButton",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_3__.A,{img:isFullScreen?"icon-header-full-screen-exit":"icon-header-full-screen",role:"option"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"title",children:t(isFullScreen?"action.exitFullscreen":"action.enterFullscreen")})]})]})]})}const __WEBPACK_DEFAULT_EXPORT__=ViewControlsOverlay;ViewControlsOverlay.__docgenInfo={description:"",methods:[],displayName:"ViewControlsOverlay"}},"./src/components/ViewControlsOverlay/ViewControlsOverlay.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithMultiTab:()=>WithMultiTab,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js")),react_redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-redux/es/index.js"),_ViewControlsOverlay__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ViewControlsOverlay/ViewControlsOverlay.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Components/ViewControlsOverlay",component:_ViewControlsOverlay__WEBPACK_IMPORTED_MODULE_3__.A},initialState={viewer:{activeDocumentViewerKey:1,disabledElements:{},customElementOverrides:{},openElements:{viewControlsOverlay:!0},customPanels:[],genericPanels:[]},document:{totalPages:{1:1}},featureFlags:{customizableUI:!1}},store=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_4__.U1)({reducer:()=>initialState}),Default=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_redux__WEBPACK_IMPORTED_MODULE_2__.Kq,{store,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{position:"relative",right:"-9999px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ViewControlsOverlay__WEBPACK_IMPORTED_MODULE_3__.A,{})})}),initialStateWithMultiTab={...initialState,viewer:{...initialState.viewer,isMultiTab:!0},featureFlags:{customizableUI:!1}},storeWithMultiTab=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_4__.U1)({reducer:()=>initialStateWithMultiTab}),WithMultiTab=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_redux__WEBPACK_IMPORTED_MODULE_2__.Kq,{store:storeWithMultiTab,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{position:"relative",right:"-9999px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ViewControlsOverlay__WEBPACK_IMPORTED_MODULE_3__.A,{})})});WithMultiTab.parameters={chromatic:{disableSnapshot:!0}};const __namedExportsOrder=["Default","WithMultiTab"]},"./src/helpers/TabManager.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>TabManager,Cf:()=>enableMultiTab,IT:()=>prepareMultiTab,T3:()=>removeFileNameExtension});var core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/core/index.js"),constants_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/constants/types.js"),helpers_loadDocument__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/loadDocument.js"),actions_internalActions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/redux/actions/internalActions.js"),actions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/redux/actions/index.js"),selectors__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/redux/selectors/index.js"),helpers_getHashParameters__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/helpers/getHashParameters.js"),helpers_fireEvent__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/helpers/fireEvent.js"),helpers_downloadPdf__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/helpers/downloadPdf.js"),constants_events__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/constants/events.js"),lodash_isString__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/lodash/isString.js"),lodash_isString__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(lodash_isString__WEBPACK_IMPORTED_MODULE_10__),constants_dataElement__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/constants/dataElement.js"),helpers_getRootNode__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/helpers/getRootNode.js");const FILE_DATA_OPTIONS={flags:window.Core.SaveOptions.INCREMENTAL},enableMultiTab=()=>(dispatch,getState)=>{const state=getState();if(selectors__WEBPACK_IMPORTED_MODULE_5__.A.getIsMultiTab(state)&&selectors__WEBPACK_IMPORTED_MODULE_5__.A.getTabManager(state))return;const doc=core__WEBPACK_IMPORTED_MODULE_0__.A.getDocument();let docArr=[];if(doc)docArr.push(doc);else{let initialDoc=(0,helpers_getHashParameters__WEBPACK_IMPORTED_MODULE_6__.A)("d","");initialDoc=initialDoc?JSON.parse(initialDoc):"",initialDoc&&(Array.isArray(initialDoc)?docArr=docArr.concat(initialDoc):docArr.push(initialDoc))}const tabManager=new TabManager(docArr,[],{dispatch,getState});dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.setMultiTab(!0)),dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.setTabManager(tabManager)),setTimeout((()=>{(0,helpers_fireEvent__WEBPACK_IMPORTED_MODULE_7__.A)(constants_events__WEBPACK_IMPORTED_MODULE_9__.A.TAB_MANAGER_READY)}),300),core__WEBPACK_IMPORTED_MODULE_0__.A.addEventListener("documentLoaded",(function docLoadedEvent(){const doc=core__WEBPACK_IMPORTED_MODULE_0__.A.getDocument();selectors__WEBPACK_IMPORTED_MODULE_5__.A.getTabs(state).some((item=>item.options?.filename===doc.filename))||doc.getFileData(FILE_DATA_OPTIONS).then((data=>{try{tabManager.addTab(new File([data],doc.getFilename()))}catch(error){console.error(error)}})),core__WEBPACK_IMPORTED_MODULE_0__.A.removeEventListener("documentLoaded",docLoadedEvent)}))};function prepareMultiTab(initialDoc,store){const extensions=(0,helpers_getHashParameters__WEBPACK_IMPORTED_MODULE_6__.A)("extension",null)?.split(",");if(extensions&&1!==extensions.length&&extensions.length!==initialDoc.length)throw new Error("'initialDoc' array length doesn't match 'extension' array length.\n          Please add an extension for each document or add one for all documents.\n          ex:\n          Webviewer({ initialDoc: ['pdf_doc', 'word_doc'], extension: ['pdf', 'docx'] })\n          OR\n          Webviewer({ initialDoc: ['pdf_doc1', 'pdf_doc2', 'pdf_doc3'], extension: ['pdf'] })");extensions&&1===extensions.length&&console.warn(`Extension option '${extensions[0]}' will be applied to all tabs from the constructor.`),store.dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.setMultiTab(!0));const tabManager=new TabManager(initialDoc,extensions,store);store.dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.setTabManager(tabManager)),tabManager.listenForAnnotChanges(),setTimeout((()=>{(0,helpers_fireEvent__WEBPACK_IMPORTED_MODULE_7__.A)(constants_events__WEBPACK_IMPORTED_MODULE_9__.A.TAB_MANAGER_READY)}),300)}function removeFileNameExtension(filename,shouldRemoveSpace=!0){if(!filename)return;const lastDotIndex=filename.lastIndexOf(".");return-1!==lastDotIndex&&(filename=filename.substring(0,lastDotIndex)),shouldRemoveSpace?filename.replace(/\s+/g,"").toLowerCase():filename}async function writeToDB(db,arrBuff,tabId){const tx=db.transaction("files","readwrite");tx.objectStore("files").put(arrBuff,tabId),await tx.commit()}class TabManager{db;store;useDB;constructor(docArr,extensionArr,store){this.store=store;const state=this.store.getState();this.useDB=!state.advanced.disableIndexedDB;const{tabs,isMultiTab}=state.viewer;if(this.useDB){const req=indexedDB.open("WebViewer Files",1);req.onerror=TabManager.indexedDBNotSupported,req.onsuccess=async()=>{this.db=req.result,this.db.onerror=TabManager.throwError},req.onupgradeneeded=e=>{e.target.result.createObjectStore("files")}}isMultiTab&&selectors__WEBPACK_IMPORTED_MODULE_5__.A.getTabManager(state)||(docArr.forEach(((doc,index)=>{const extension=extensionArr&&lodash_isString__WEBPACK_IMPORTED_MODULE_10___default()(doc)?extensionArr[extensionArr.length>1?index:0]:void 0;let filename=`Document ${tabs.length+1}`;lodash_isString__WEBPACK_IMPORTED_MODULE_10___default()(doc)?filename=doc.substring(doc.lastIndexOf("/")+1):doc instanceof window.Core.Document&&doc.getFilename&&doc.getFilename()&&(filename=doc.getFilename()),tabs.push(new Tab(tabs.length,doc,this,{filename,extension},this.useDB))})),this.store.dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.setTabs(tabs)),this.prepareTabEventListeners(),core__WEBPACK_IMPORTED_MODULE_0__.A.addEventListener("documentLoaded",(async()=>{const state=this.store.getState(),{tabs,activeTab}=state.viewer,{dispatch}=store,currentTab=tabs.find((tab=>tab.id===activeTab)),documentType=await core__WEBPACK_IMPORTED_MODULE_0__.A.getDocument().getType();if(documentType===constants_types__WEBPACK_IMPORTED_MODULE_1__._.PDF||documentType===constants_types__WEBPACK_IMPORTED_MODULE_1__._.OFFICE){await writeToDB(this.db,await core__WEBPACK_IMPORTED_MODULE_0__.A.getDocument().getFileData(FILE_DATA_OPTIONS),currentTab.id);const nextUntitledDocumentNumber=function getNextNumberForUntitledDocument(tabs){const untitledTabs=tabs.filter((tab=>tab.options.filename.includes("untitled-")));if(0===untitledTabs.length)return 1;const untitledNumbers=untitledTabs.map((tab=>{const untitledNumber=tab.options.filename.match(/\d+/);return untitledNumber?parseInt(untitledNumber[0]):0}));return Math.max(...untitledNumbers)+1}(tabs);currentTab.options.filename=core__WEBPACK_IMPORTED_MODULE_0__.A.getDocument().getFilename()||`untitled-${nextUntitledDocumentNumber}`;const refreshedTab=new Tab(activeTab,core__WEBPACK_IMPORTED_MODULE_0__.A.getDocument(),currentTab.tabManager,currentTab.options,currentTab.useDB);refreshedTab.saveData.docInDB=!0;const indexOfTabToBeReplaced=tabs.findIndex((tab=>tab.id===currentTab.id));tabs[indexOfTabToBeReplaced]=refreshedTab;const newTabs=[...tabs];dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.setTabs(newTabs))}})))}prepareTabEventListeners(){const documentViewer=core__WEBPACK_IMPORTED_MODULE_0__.A.getDocumentViewer(1);documentViewer.addEventListener("finishedRendering",(()=>{this.listenForAnnotChanges(),this.listenToDocumentDownloaded(documentViewer)}),{once:!0})}async setActiveTab(id,saveCurrentActiveTabState=!0){this.store.dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.openElement(constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.PROGRESS_MODAL)),this.store.dispatch((0,actions_internalActions__WEBPACK_IMPORTED_MODULE_3__.setLoadingProgress)(0));const state=this.store.getState(),{tabs,activeTab}=state.viewer,currentTab=tabs.find((tab=>tab.id===activeTab)),isEmptyPageOpen=selectors__WEBPACK_IMPORTED_MODULE_5__.A.isElementOpen(state,constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.MULTITABS_EMPTY_PAGE);this.prepareTabEventListeners();const newTab=tabs.find((tab=>tab.id===id));if(!newTab)return console.error(`Tab id not found: ${id}`);currentTab&&(await core__WEBPACK_IMPORTED_MODULE_0__.A.getDocumentViewer().getAnnotationManager().exportAnnotations(),await core__WEBPACK_IMPORTED_MODULE_0__.A.getDocumentViewer().getAnnotationsLoadedPromise()),(0,helpers_fireEvent__WEBPACK_IMPORTED_MODULE_7__.A)(constants_events__WEBPACK_IMPORTED_MODULE_9__.A.BEFORE_TAB_CHANGED,{currentTab:currentTab?{src:currentTab.src,options:currentTab.options,id:currentTab.id,annotationsChanged:currentTab.changes.annotations,hasUnsavedChanges:currentTab.changes.hasUnsavedChanges}:null,nextTab:{src:newTab.src,options:newTab.options,id:newTab.id}}),setTimeout((async()=>{currentTab&&(saveCurrentActiveTabState&&await currentTab.saveCurrentActiveTabState(this.db),core__WEBPACK_IMPORTED_MODULE_0__.A.closeDocument()),this.store.dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.setActiveTab(id)),isEmptyPageOpen&&this.store.dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.closeElement(constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.MULTITABS_EMPTY_PAGE)),await newTab.load(this.store.dispatch,this.db,this.getViewerState(state))}),400)}getViewerState=state=>{const currentViewerState={},viewerState=state.viewer;return currentViewerState.documentContainerWidth=viewerState.documentContainerWidth,currentViewerState.documentContainerHeight=viewerState.documentContainerHeight,currentViewerState.isNotesPanelOpen=selectors__WEBPACK_IMPORTED_MODULE_5__.A.isElementOpen(state,"notesPanel"),currentViewerState.isLeftPanelOpen=selectors__WEBPACK_IMPORTED_MODULE_5__.A.isElementOpen(state,"leftPanel"),currentViewerState.isSearchPanelOpen=selectors__WEBPACK_IMPORTED_MODULE_5__.A.isElementOpen(state,"searchPanel"),currentViewerState.activeToolName=viewerState.activeToolName,currentViewerState};showDeleteWarning(tabToDelete){const confirmationWarning={message:"warning.closeFile.message",title:"warning.closeFile.title",onConfirm:()=>{(0,helpers_downloadPdf__WEBPACK_IMPORTED_MODULE_8__.A)(this.store.dispatch).then((()=>{tabToDelete.changes.hasUnsavedChanges=!1,this.deleteTab(tabToDelete.id)}))},onSecondary:()=>{tabToDelete.changes.hasUnsavedChanges=!1,this.deleteTab(tabToDelete.id)},confirmBtnText:"action.download",secondaryBtnText:"warning.closeFile.rejectDownloadButton",secondaryBtnClass:"secondary-btn-custom",showAskAgainCheckbox:!0,onClose:disableWarning=>{disableWarning&&this.store.dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.disableDeleteTabWarning())}};this.store.dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.showWarningMessage(confirmationWarning))}deleteTab(id){const state=this.store.getState(),{tabs,activeTab}=state.viewer,tabToDelete=tabs.find((tab=>tab.id===id));if(selectors__WEBPACK_IMPORTED_MODULE_5__.A.getShowDeleteTabWarning(state)&&tabToDelete.changes.hasUnsavedChanges)this.showDeleteWarning(tabToDelete);else{const[deletedTab]=tabs.splice(tabs.findIndex((tab=>tab.id===id)),1);deletedTab.delete(this.db),(0,helpers_fireEvent__WEBPACK_IMPORTED_MODULE_7__.A)(constants_events__WEBPACK_IMPORTED_MODULE_9__.A.TAB_DELETED,{src:deletedTab.src,options:deletedTab.options,id:deletedTab.id}),id===activeTab&&tabs.length?this.setActiveTab(tabs[0].id):tabs.length||(core__WEBPACK_IMPORTED_MODULE_0__.A.closeDocument(),this.store.dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.setActiveTab(null))),this.store.dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.setTabs(tabs))}}async addTab(src,options={}){const saveCurrentTabState=options.saveCurrentActiveTabState||options.saveCurrent,useDB=!1===options.useDB?options.useDB&&this.useDB:this.useDB,shouldLoadTab=options.setActive||options.load,{tabs}=this.store.getState().viewer,currId=tabs.reduce(((highestId,tab)=>tab.id>highestId?tab.id:highestId),0);"filename"in options||(options.filename=`Document ${currId+2}`,lodash_isString__WEBPACK_IMPORTED_MODULE_10___default()(src)?options.filename=src.substring(src.lastIndexOf("/")+1):src instanceof window.Core.Document&&src.getFilename&&src.getFilename()?options.filename=src.getFilename():(src instanceof File||"[object File]"===Object.prototype.toString.call(src))&&(options.filename=src.name));const tab=new Tab(currId+1,src,this,options,useDB);return tabs.push(tab),(0,helpers_fireEvent__WEBPACK_IMPORTED_MODULE_7__.A)(constants_events__WEBPACK_IMPORTED_MODULE_9__.A.TAB_ADDED,{src:tab.src,options:tab.options,id:tab.id}),shouldLoadTab&&await this.setActiveTab(tab.id,saveCurrentTabState),this.store.dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.setTabs(tabs)),tab.id}moveTab(from,to){const{tabs}=this.store.getState().viewer,tab=tabs.splice(from,1)[0];tabs.splice(to,0,tab),(0,helpers_fireEvent__WEBPACK_IMPORTED_MODULE_7__.A)(constants_events__WEBPACK_IMPORTED_MODULE_9__.A.TAB_MOVED,{src:tab.src,options:tab.options,id:tab.id,prevIndex:from,newIndex:to}),this.store.dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.setTabs(tabs))}listenForAnnotChanges(){const onAnnotChange=(_,__,info)=>{if(info.imported)return;const{tabs,activeTab}=this.store.getState().viewer,tab=tabs.find((t=>t.id===activeTab));tab&&(tab.changes.annotations=!0,tab.changes.hasUnsavedChanges=!0),removeListeners()},onFieldChange=()=>{const{tabs,activeTab}=this.store.getState().viewer,tab=tabs.find((t=>t.id===activeTab));tab&&(tab.changes.annotations=!0,tab.changes.hasUnsavedChanges=!0),removeListeners()};core__WEBPACK_IMPORTED_MODULE_0__.A.addEventListener("annotationChanged",onAnnotChange),core__WEBPACK_IMPORTED_MODULE_0__.A.addEventListener("fieldChanged",onFieldChange,{once:!0});const removeListeners=()=>{core__WEBPACK_IMPORTED_MODULE_0__.A.removeEventListener("annotationChanged",onAnnotChange),core__WEBPACK_IMPORTED_MODULE_0__.A.removeEventListener("fieldChanged",onFieldChange)};core__WEBPACK_IMPORTED_MODULE_0__.A.addEventListener("documentUnloaded",removeListeners,{once:!0})}listenToDocumentDownloaded=async documentViewer=>{const{tabs,activeTab}=this.store.getState().viewer,currentTab=tabs.find((tab=>tab.id===activeTab)),onFileDownloaded=()=>{currentTab.changes.hasUnsavedChanges=!1},onPagesUpdated=info=>{"refresh"!==info.source&&(currentTab.changes.hasUnsavedChanges=!0)};(0,helpers_getRootNode__WEBPACK_IMPORTED_MODULE_12__.Iv)().addEventListener(constants_events__WEBPACK_IMPORTED_MODULE_9__.A.FILE_DOWNLOADED,onFileDownloaded),documentViewer.addEventListener("pagesUpdated",onPagesUpdated);core__WEBPACK_IMPORTED_MODULE_0__.A.addEventListener("documentUnloaded",(()=>{(0,helpers_getRootNode__WEBPACK_IMPORTED_MODULE_12__.Iv)().removeEventListener(constants_events__WEBPACK_IMPORTED_MODULE_9__.A.FILE_DOWNLOADED,onFileDownloaded),documentViewer.removeEventListener("pagesUpdated",onPagesUpdated)}),{once:!0})};*[Symbol.iterator](){const{tabs}=this.store.getState().viewer;for(const tab of tabs)yield tab}map(cb){const mapped=[];let index=0;const{tabs}=this.store.getState().viewer;for(const tab of tabs)mapped.push(cb(tab,index++));return mapped}static throwError(){console.warn("File database has encountered an error. File data will not be saved when switching tabs")}static indexedDBNotSupported(){console.warn("IndexedDB is not supported, file data will not be saved")}static MAX_FILE_SIZE=25e7}class Tab{disabled=!1;saveData={annotInDB:!1,docInDB:!1,scrollTop:void 0,scrollLeft:void 0,page:null,annots:null};changes={annotations:!1,hasUnsavedChanges:!1};id;src;options;useDB;tabManager;constructor(id,src,tabManager,options={},useDB=!0){this.id=id,this.src=src,this.options=options,this.useDB=useDB,this.tabManager=tabManager}async preLoad(db){if(!this.useDB)return console.error("Cant preload tab with useDB = false");const file=await fetch(this.src);this.saveData.docInDB=!0,await writeToDB(db,await file.arrayBuffer(),this.id)}async load(dispatch,db,viewerState){const annotsChanged=this.saveData.annotInDB||this.saveData.annots;if(this.options.loadAnnotations=!annotsChanged,core__WEBPACK_IMPORTED_MODULE_0__.A.addEventListener("documentUnloaded",(async()=>{this.restorePageDataOnLoad(viewerState,dispatch),annotsChanged&&await this.restoreAnnotDataOnLoad(db)}),{once:!0}),this.useDB&&this.saveData.docInDB){const tx=db.transaction("files","readonly"),req=tx.objectStore("files").get(this.id);req.onsuccess=async()=>{const doc=req.result;(0,helpers_loadDocument__WEBPACK_IMPORTED_MODULE_2__.A)(dispatch,doc,this.options)},tx.commit()}else(0,helpers_loadDocument__WEBPACK_IMPORTED_MODULE_2__.A)(dispatch,this.src,this.options)}async saveCurrentActiveTabState(db){this.disabled=!0,this.savePageData();const document=core__WEBPACK_IMPORTED_MODULE_0__.A.getDocument();this.useDB&&(document?.type===constants_types__WEBPACK_IMPORTED_MODULE_1__._.PDF&&document.arePagesAltered()||this.src instanceof window.Core.Document)?await this.saveFileData(db,document):this.changes.annotations&&(this.useDB?await this.saveAnnotDataInDB(db):await this.saveAnnotData()),this.disabled=!1}async saveFileData(db,document){this.saveData.annotInDB=!1;const xfdfString=await core__WEBPACK_IMPORTED_MODULE_0__.A.exportAnnotations(),data=await document.getFileData({xfdfString,finishedWithDocument:!0,...FILE_DATA_OPTIONS});this.saveData.docInDB=!0,await writeToDB(db,data,this.id)}async saveAnnotData(){this.saveData.annotInDB=!1;const annotData=await core__WEBPACK_IMPORTED_MODULE_0__.A.exportAnnotations({options:{fields:!0,widgets:!0,links:!0}});annotData&&(this.saveData.annots=annotData)}async saveAnnotDataInDB(db){const annotData=await core__WEBPACK_IMPORTED_MODULE_0__.A.exportAnnotations({options:{fields:!0,widgets:!0,links:!0}});if(annotData){const annots=annotData,tx=db.transaction("files","readwrite");tx.objectStore("files").put(annots,`${this.id}-annots`),await tx.commit(),this.saveData.annotInDB=!0}}savePageData(){const docContainer=(0,helpers_getRootNode__WEBPACK_IMPORTED_MODULE_12__.Ay)().getElementById("app").getElementsByClassName("DocumentContainer")[0];this.saveData.scrollTop=docContainer.scrollTop,this.saveData.scrollLeft=docContainer.scrollLeft,this.saveData.page=core__WEBPACK_IMPORTED_MODULE_0__.A.getCurrentPage();this.saveData.zoom=Math.floor(1e4*core__WEBPACK_IMPORTED_MODULE_0__.A.getZoom())/1e4}restorePageDataOnLoad(viewerState,dispatch){const docContainer=(0,helpers_getRootNode__WEBPACK_IMPORTED_MODULE_12__.Ay)().getElementById("app").getElementsByClassName("DocumentContainer")[0],updateScroll=async()=>{await core__WEBPACK_IMPORTED_MODULE_0__.A.getDocument().getDocumentCompletePromise(),docContainer.scrollTo({top:this.saveData.scrollTop,left:this.saveData.scrollLeft})};viewerState.isNotesPanelOpen&&dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.openElement("notesPanel")),viewerState.isLeftPanelOpen&&dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.openElement("leftPanel")),viewerState.isSearchPanelOpen&&dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.openElement("searchPanel")),viewerState.activeToolName&&core__WEBPACK_IMPORTED_MODULE_0__.A.setToolMode(viewerState.activeToolName);const updateViewer=async()=>{await core__WEBPACK_IMPORTED_MODULE_0__.A.getDocument().getDocumentCompletePromise(),this.saveData.zoom&&await core__WEBPACK_IMPORTED_MODULE_0__.A.zoomTo(this.saveData.zoom),this.saveData.page&&await core__WEBPACK_IMPORTED_MODULE_0__.A.setCurrentPage(this.saveData.page)};core__WEBPACK_IMPORTED_MODULE_0__.A.addEventListener("documentLoaded",updateViewer,{once:!0}),!isNaN(this.saveData.scrollTop)&&core__WEBPACK_IMPORTED_MODULE_0__.A.addEventListener("finishedRendering",updateScroll,{once:!0});core__WEBPACK_IMPORTED_MODULE_0__.A.addEventListener("documentUnloaded",(()=>{core__WEBPACK_IMPORTED_MODULE_0__.A.removeEventListener("documentLoaded",updateViewer),core__WEBPACK_IMPORTED_MODULE_0__.A.removeEventListener("finishedRendering",updateScroll)}),{once:!0})}async updateAnnotations(db){const state=this.tabManager.store.getState(),activeTabId=selectors__WEBPACK_IMPORTED_MODULE_5__.A.getActiveTab(state);if(activeTabId!==this.id)return selectors__WEBPACK_IMPORTED_MODULE_5__.A.getTabs(state).find((tab=>tab.id===activeTabId)).updateAnnotations(db);if(this.saveData.annotInDB){const tx=db.transaction("files","readwrite"),annotReq=tx.objectStore("files").get(`${this.id}-annots`);annotReq.onsuccess=async()=>{await core__WEBPACK_IMPORTED_MODULE_0__.A.getDocument().getDocumentCompletePromise(),await core__WEBPACK_IMPORTED_MODULE_0__.A.getAnnotationManager().importAnnotations(annotReq.result)},await tx.commit()}else this.saveData.annots&&(await core__WEBPACK_IMPORTED_MODULE_0__.A.getDocument().getDocumentCompletePromise(),await core__WEBPACK_IMPORTED_MODULE_0__.A.getAnnotationManager().importAnnotations(this.saveData.annots))}async restoreAnnotDataOnLoad(db){const updateAnnotations=()=>this.updateAnnotations(db);core__WEBPACK_IMPORTED_MODULE_0__.A.addEventListener("documentLoaded",updateAnnotations,{once:!0}),core__WEBPACK_IMPORTED_MODULE_0__.A.addEventListener("documentUnloaded",(()=>{core__WEBPACK_IMPORTED_MODULE_0__.A.removeEventListener("documentLoaded",updateAnnotations)}),{once:!0})}async delete(db){if(this.useDB){const tx=db.transaction("files","readwrite"),store=tx.objectStore("files");store.delete(this.id),store.delete(`${this.id}-annot-states`),store.delete(`${this.id}-annots`),await tx.commit()}}}},"./src/helpers/downloadPdf.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var file_saver__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/file-saver/dist/FileSaver.min.js"),core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/index.js"),helpers_device__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/device.js"),helpers_fireEvent__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/helpers/fireEvent.js"),constants_events__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/constants/events.js"),actions__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/redux/actions/index.js"),helpers_rasterPrint__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/helpers/rasterPrint.js"),selectors__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/redux/selectors/index.js"),blob_stream__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/blob-stream/index.js"),blob_stream__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(blob_stream__WEBPACK_IMPORTED_MODULE_8__),constants_sortStrategies__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/constants/sortStrategies.js"),constants_map__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/constants/map.js"),lodash_range__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/lodash/range.js"),lodash_range__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(lodash_range__WEBPACK_IMPORTED_MODULE_11__),helpers_getRootNode__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/helpers/getRootNode.js"),constants_types__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/constants/types.js"),_officeEditor__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/helpers/officeEditor.js"),src_constants_dataElement__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/constants/dataElement.js"),constants_commonColors__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/constants/commonColors.js");let isDownloaded=!1,previousWatermarkSettings={},previousFileName="";const __WEBPACK_DEFAULT_EXPORT__=async(dispatch,options={},documentViewerKey=1)=>{let temporaryModifiedDoc,doc=core__WEBPACK_IMPORTED_MODULE_1__.A.getDocument(documentViewerKey);if(!doc)return void console.warn("Document is not loaded");previousFileName!==doc?.getFilename()&&(previousFileName=doc?.getFilename(),isDownloaded=!1);const documentViewer=core__WEBPACK_IMPORTED_MODULE_1__.A.getDocumentViewer();previousWatermarkSettings=await documentViewer.getWatermark(),isDownloaded?documentViewer.setWatermark():(isDownloaded=!0,doc.enableWatermarkApplied());const{filename=doc?.getFilename()||"document",includeAnnotations=!0,externalURL,useDisplayAuthor=!1,store}=options;let pages=options.pages,includeComments=!!options.includeComments;const downloadAllPages=!pages||pages.length===doc.getPageCount(),downloadDataAsFile=(data,extension,options)=>{const arr=new Uint8Array(data),{downloadName}=options;let file,downloadType="application/pdf";if(options.downloadType===constants_types__WEBPACK_IMPORTED_MODULE_12__._.OFFICE||options.downloadType===constants_types__WEBPACK_IMPORTED_MODULE_12__._.SPREADSHEET_EDITOR){downloadType=function reverseObject(obj){return Object.assign({},...Object.entries(obj).map((([key,value])=>({[value]:key}))))}(window.Core.mimeTypeToExtension)[extension]}file=helpers_device__WEBPACK_IMPORTED_MODULE_2__.lT?new Blob([arr],{type:downloadType}):new File([arr],filename,{type:downloadType}),(0,file_saver__WEBPACK_IMPORTED_MODULE_0__.saveAs)(file,downloadName||filename),dispatch(actions__WEBPACK_IMPORTED_MODULE_5__.A.closeElement(src_constants_dataElement__WEBPACK_IMPORTED_MODULE_14__.A.LOADING_MODAL)),(0,helpers_fireEvent__WEBPACK_IMPORTED_MODULE_3__.A)(constants_events__WEBPACK_IMPORTED_MODULE_4__.A.FILE_DOWNLOADED),temporaryModifiedDoc&&temporaryModifiedDoc.unloadResources(),documentViewer.setWatermark(previousWatermarkSettings)};(0,_officeEditor__WEBPACK_IMPORTED_MODULE_13__.pb)()&&(includeComments=!1),options.downloadType||(options.downloadType=constants_types__WEBPACK_IMPORTED_MODULE_12__._.PDF);const downloadAsImage="png"===options.downloadType;if(dispatch(actions__WEBPACK_IMPORTED_MODULE_5__.A.openElement(src_constants_dataElement__WEBPACK_IMPORTED_MODULE_14__.A.LOADING_MODAL)),downloadAsImage){pages?.length||(pages=lodash_range__WEBPACK_IMPORTED_MODULE_11___default()(1,doc.getPageCount()+1,1));const state=store.getState(),[sortStrategy,dateFormat,language,printQuality,colorMap]=[selectors__WEBPACK_IMPORTED_MODULE_7__.A.getSortStrategy(state),selectors__WEBPACK_IMPORTED_MODULE_7__.A.getPrintedNoteDateFormat(state),selectors__WEBPACK_IMPORTED_MODULE_7__.A.getCurrentLanguage(state),selectors__WEBPACK_IMPORTED_MODULE_7__.A.getPrintQuality(state),selectors__WEBPACK_IMPORTED_MODULE_7__.A.getColorMap(state)],id="download-handler-css";if(!(0,helpers_getRootNode__WEBPACK_IMPORTED_MODULE_16__.Ay)().querySelector(`#${id}`)){const style=window.document.createElement("style");style.id=id,style.textContent="\n        img {\n          display: block !important;\n          max-width: 100%;\n          max-height: 100%;\n          height: 100%;\n          width: 100%;\n          object-fit: contain;\n          page-break-after: always;\n          padding: 0;\n          margin: 0;\n        }\n\n        .page__container {\n          margin: 10px;\n          box-sizing: border-box;\n          display: flex !important;\n          flex-direction: column;\n          padding: 10px;\n          min-height: 100%;\n          min-width: 100%;\n          font-size: 10px;\n        }\n\n        .page__container .page__header {\n          margin-top: 2rem;\n          display: block !important;\n          align-self: flex-start;\n          font-size: 2rem;\n          margin-bottom: 2rem;\n          padding-bottom: 0.6rem;\n          border-bottom: 0.1rem solid black;\n        }\n\n        .page__container .note {\n          display: flex !important;\n          flex-direction: column;\n          padding: 0.6rem;\n          border: 0.1rem lightgray solid;\n          border-radius: 0.4rem;\n          margin-bottom: 0.5rem;\n        }\n\n        .page__container .note .note__info {\n          display: block !important;\n          font-size: 1.3rem;\n          margin-bottom: 0.1rem;\n        }\n\n        .page__container .note .note__info--with-icon {\n          display: flex !important;\n        }\n\n        .page__container .note .note__info--with-icon .note__icon {\n          display: block !important;\n          width: 1.65rem;\n          height: 1.65rem;\n          margin-top: -0.1rem;\n          margin-right: 0.2rem;\n        }\n\n        .page__container .note .note__info--with-icon .note__icon path:not([fill=none]) {\n          display: block !important;\n          fill: currentColor;\n        }\n\n        .page__container .note .note__root .note__content {\n          display: block !important;\n          margin-left: 0.3rem;\n        }\n\n        .page__container .note .note__root {\n          display: block !important;\n        }\n\n        .page__container .note .note__info--with-icon .note__icon svg {\n          display: block !important;\n        }\n\n        .page__container .note .note__reply {\n          display: block !important;\n          margin: 0.5rem 0 0 2rem;\n        }\n\n        .page__container .note .note__content {\n          display: block !important;\n          font-size: 1.2rem;\n          margin-top: 0.1rem;\n        }\n      ",window.document.head.prepend(style)}const printingOptions={includeComments,includeAnnotations,maintainPageOrientation:!0,printQuality,sortStrategy,colorMap,dateFormat,isPrintCurrentView:!1,language,createCanvases:!0,isGrayscale:!1},createdPages=(0,helpers_rasterPrint__WEBPACK_IMPORTED_MODULE_6__.F1)(pages,printingOptions,void 0),addWhiteBackground=dataURL=>{const pagePrintCanvas=document.createElement("canvas"),pagePrintContext=pagePrintCanvas.getContext("2d");return new Promise((res=>{const printImg=new Image;printImg.src=dataURL,printImg.onload=()=>{pagePrintCanvas.width=printImg.width,pagePrintCanvas.height=printImg.height,pagePrintContext.fillStyle=constants_commonColors__WEBPACK_IMPORTED_MODULE_15__.zb.white,pagePrintContext.fillRect(0,0,pagePrintCanvas.width,pagePrintCanvas.height),pagePrintContext.drawImage(printImg,0,0),res(pagePrintCanvas.toDataURL())}}))},html2canvas=(await __webpack_require__.e(26526).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/html2canvas/dist/npm/index.js",23))).default;for(let page of createdPages){let dataURL;if(page=await page,page instanceof HTMLElement){document.body.appendChild(page);const canvas=await html2canvas(page,{backgroundColor:null,scale:1,logging:!1});dataURL=await addWhiteBackground(canvas.toDataURL()),document.body.removeChild(page)}else dataURL=doc?.getType()===constants_types__WEBPACK_IMPORTED_MODULE_12__._.OFFICE||doc?.getType()===constants_types__WEBPACK_IMPORTED_MODULE_12__._.LEGACY_OFFICE||doc?.getType()===constants_types__WEBPACK_IMPORTED_MODULE_12__._.OFFICE_EDITOR?await addWhiteBackground(page):page;const link=document.createElement("a");link.href=dataURL,link.download=`${filename}.png`,link.style.display="none",document.body.appendChild(link),link.click(),document.body.removeChild(link)}return dispatch(actions__WEBPACK_IMPORTED_MODULE_5__.A.closeElement(src_constants_dataElement__WEBPACK_IMPORTED_MODULE_14__.A.LOADING_MODAL)),void(0,helpers_fireEvent__WEBPACK_IMPORTED_MODULE_3__.A)(constants_events__WEBPACK_IMPORTED_MODULE_4__.A.FILE_DOWNLOADED)}let annotationsPromise=Promise.resolve();const convertToPDF=options.downloadType===constants_types__WEBPACK_IMPORTED_MODULE_12__._.PDF&&(doc.getType()===constants_types__WEBPACK_IMPORTED_MODULE_12__._.OFFICE||(0,_officeEditor__WEBPACK_IMPORTED_MODULE_13__.pb)()||doc.getType()===constants_types__WEBPACK_IMPORTED_MODULE_12__._.SPREADSHEET_EDITOR);if(!(0,_officeEditor__WEBPACK_IMPORTED_MODULE_13__.pb)()&&doc.getType()!==constants_types__WEBPACK_IMPORTED_MODULE_12__._.SPREADSHEET_EDITOR||!convertToPDF){if(convertToPDF||includeComments){const xfdfString=await core__WEBPACK_IMPORTED_MODULE_1__.A.exportAnnotations({fields:!0,widgets:!0,links:!0,useDisplayAuthor},documentViewerKey),fileData=await doc.getFileData({xfdfString,includeAnnotations,downloadType:constants_types__WEBPACK_IMPORTED_MODULE_12__._.PDF});if(temporaryModifiedDoc=await core__WEBPACK_IMPORTED_MODULE_1__.A.createDocument(fileData,{extension:constants_types__WEBPACK_IMPORTED_MODULE_12__._.PDF,filename}),includeComments){const canvas2pdf=await Promise.all([__webpack_require__.e(4373),__webpack_require__.e(4118)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/canvas2pdf/canvas2pdf.js",23)),state=store.getState(),[sortStrategy,colorMap]=[selectors__WEBPACK_IMPORTED_MODULE_7__.A.getSortStrategy(state),selectors__WEBPACK_IMPORTED_MODULE_7__.A.getColorMap(state)],pageWidth=612,pageHeight=792,titleFontSize=12,bodyFontSize=11,cardSpacing=8,padding=36,commentPages={};for(const pageNumber of pages){const annotationNotes=(0,constants_sortStrategies__WEBPACK_IMPORTED_MODULE_9__.Qk)()[sortStrategy].getSortedNotes(core__WEBPACK_IMPORTED_MODULE_1__.A.getAnnotationsList(documentViewerKey).filter((annotation=>annotation.Listable&&annotation.PageNumber===pageNumber&&!annotation.isReply()&&!annotation.isGrouped())));if(!annotationNotes?.length)continue;const startX=padding;let startY=padding,ctx=new canvas2pdf.PdfContext(blob_stream__WEBPACK_IMPORTED_MODULE_8___default()(),{font:"Helvetica"});async function savePage(){const blob=await new Promise((res=>{ctx.stream.on("finish",(()=>res(ctx.stream.toBlob("application/pdf")))),ctx.end()}));commentPages[pageNumber]?commentPages[pageNumber].push(blob):commentPages[pageNumber]=[blob]}let x=startX,y=startY;const text=`Page ${pageNumber}`;ctx.font=`${titleFontSize}px Helvetica`,ctx.fillStyle=constants_commonColors__WEBPACK_IMPORTED_MODULE_15__.zb.black;let textSize=ctx.measureText(text);ctx.fillText(text,x,y),y+=textSize.height;for(const annotation of annotationNotes){let skip;async function drawAnnotationComment(annotation,startX,isReply=!1){async function drawText(text,options={}){const{bold=!1,fillStyle=constants_commonColors__WEBPACK_IMPORTED_MODULE_15__.zb.black,size=bodyFontSize,font="Helvetica"}=options;let{x,y}=options;ctx.fillStyle=fillStyle,ctx.font=`${size}px ${font}`;const textSize=ctx.measureText(text);return textSize.height+y>pageHeight-padding&&(drawRoundedRect(ctx,padding,startY,pageWidth-2*padding,pageHeight-startY-padding,4,"bottom"),await savePage(),ctx=new canvas2pdf.PdfContext(blob_stream__WEBPACK_IMPORTED_MODULE_8___default()(),{font:"Helvetica"}),ctx.fillStyle=fillStyle,ctx.font=`${size}px ${font}`,x=startX,y=padding+cardSpacing,startY=padding,skip="top"),ctx.fillText(text,x,y),bold&&(ctx.fillText(text,x+.1,y),textSize.width+=.1),{textSize,x,y,startY}}function extractProperties(newProperties){x=newProperties.x,y=newProperties.y,startY=newProperties.startY,textSize=newProperties.textSize}extractProperties(await drawText(annotation.Author||"Guest",{bold:!0,x,y})),x+=textSize.width+cardSpacing;const dateText=`- ${new Date(annotation.DateCreated).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"})}`;if(extractProperties(await drawText(dateText,{fillStyle:constants_commonColors__WEBPACK_IMPORTED_MODULE_15__.zb.gray8,x,y})),x+=textSize.width+cardSpacing,!isReply){const subjectText=`Subject: ${annotation.Subject}`,subjectTextSize=ctx.measureText(subjectText);subjectTextSize.width<90&&(subjectTextSize.width=90),ctx.fillText(subjectText,pageWidth-padding-subjectTextSize.width-cardSpacing,y)}x=startX,y+=textSize.height+cardSpacing,isReply||(y+=cardSpacing),ctx.fillStyle=constants_commonColors__WEBPACK_IMPORTED_MODULE_15__.zb.black;return annotation.getContents()?(await async function drawTextAndWrap(text,checkNewLines=!0){if(checkNewLines){const textArray=text.split("\n");if(textArray.length>1){for(const text of textArray)await drawTextAndWrap(text,!1),x=startX;return}}const textSize=ctx.measureText(text);if(textSize.width+x>pageWidth-padding-cardSpacing){let maxSize=pageWidth-2*padding-3*cardSpacing;isReply&&(maxSize-=36);const indexOfLastSpaceToFit=text.lastIndexOf(" ",text.length*maxSize/(textSize.width+x));extractProperties(await drawText(text.substring(0,indexOfLastSpaceToFit),{x,y})),y+=textSize.height,x=startX,await drawTextAndWrap(text.substring(indexOfLastSpaceToFit+1))}else ctx.fillText(text,x,y),y+=textSize.height}(annotation.getContents()),y+=cardSpacing):y-=cardSpacing,y-cardSpacing}y+40>pageHeight&&(await savePage(),ctx=new canvas2pdf.PdfContext(blob_stream__WEBPACK_IMPORTED_MODULE_8___default()(),{font:"Helvetica"}),x=padding,y=padding),y+=cardSpacing,startY=y,y+=cardSpacing,x+=cardSpacing,await new Promise((resolve=>{const key=(0,constants_map__WEBPACK_IMPORTED_MODULE_10__.c7)(annotation),colorProperty=colorMap[key]&&colorMap[key].iconColor,color=annotation[colorProperty||"StrokeColor"].toString(),iconKey=(0,constants_map__WEBPACK_IMPORTED_MODULE_10__.ap)(key).icon,icon=__webpack_require__("./assets/icons sync recursive ^\\.\\/.*\\.svg$")(`./${iconKey}.svg`),blob=new Blob([icon],{type:"image/svg+xml;charset=utf-8"}),url=URL.createObjectURL(blob),img=new Image;img.style.color=color,img.src=url,img.onload=()=>{ctx.drawImage(img,x,y,24,24),URL.revokeObjectURL(url),resolve()}})),x+=30,y+=14;let lastYPos=await drawAnnotationComment(annotation,x-30);x=startX+36;for(const reply of annotation.getReplies())y+=cardSpacing,lastYPos=await drawAnnotationComment(reply,x,!0);drawRoundedRect(ctx,padding,startY,pageWidth-2*padding,lastYPos-startY+cardSpacing,4,skip),x=startX}await savePage()}let pageOffset=1;for(let page of Object.keys(commentPages)){page=parseInt(page);for(const blob of commentPages[page]){const commentPagesDoc=await core__WEBPACK_IMPORTED_MODULE_1__.A.createDocument(blob,{extension:constants_types__WEBPACK_IMPORTED_MODULE_12__._.PDF});await temporaryModifiedDoc.insertPages(commentPagesDoc,[1],page+pageOffset),downloadAllPages||(pages=pages.map((p=>p>=page+pageOffset?p+1:p)),pages.push(page+pageOffset)),pageOffset++,commentPagesDoc.unloadResources()}}pages=downloadAllPages?void 0:pages.sort(((a,b)=>a-b)),annotationsPromise=Promise.resolve((await temporaryModifiedDoc.extractXFDF({pages})).xfdfString)}else annotationsPromise=Promise.resolve(xfdfString)}else!includeAnnotations||options.xfdfString||downloadAsImage?options.xfdfString||includeAnnotations||(options.xfdfString=window.Core.EMPTY_XFDF):annotationsPromise=options.documentToBeDownloaded?Promise.resolve((await options.documentToBeDownloaded.extractXFDF(pages)).xfdfString):core__WEBPACK_IMPORTED_MODULE_1__.A.exportAnnotations({useDisplayAuthor},documentViewerKey);return annotationsPromise.then((async xfdfString=>{options.xfdfString=options.xfdfString||xfdfString,includeAnnotations||(options.includeAnnotations=!1);const extension=doc.getFilename().split(".").pop()?.toLowerCase()||"",docType=doc?.getType(),isNotPDF=docType?.includes("video")||"audio"===docType||docType===constants_types__WEBPACK_IMPORTED_MODULE_12__._.OFFICE||docType===constants_types__WEBPACK_IMPORTED_MODULE_12__._.SPREADSHEET_EDITOR||(0,_officeEditor__WEBPACK_IMPORTED_MODULE_13__.pb)(),downloadName=((name,extension)=>name.toLowerCase().endsWith(extension)?name:`${name}${extension}`)(filename,isNotPDF&&!convertToPDF?`.${extension}`:".pdf"),clonedOptions=Object.assign({},options);clonedOptions.documentToBeDownloaded&&(temporaryModifiedDoc=clonedOptions.documentToBeDownloaded,delete clonedOptions.documentToBeDownloaded),clonedOptions.store&&delete clonedOptions.store;const handleError=error=>{throw dispatch(actions__WEBPACK_IMPORTED_MODULE_5__.A.closeElement(src_constants_dataElement__WEBPACK_IMPORTED_MODULE_14__.A.LOADING_MODAL)),new Error(error.message)},signatureWidgets=core__WEBPACK_IMPORTED_MODULE_1__.A.getAnnotationsList().filter((a=>a instanceof window.Core.Annotations.SignatureWidgetAnnotation));if((await Promise.all(signatureWidgets.map((a=>a.isSignedDigitally())))).includes(!0)&&(clonedOptions.flags|=window.Core.SaveOptions.INCREMENTAL),!externalURL)return pages&&!downloadAllPages?(temporaryModifiedDoc||doc).extractPages(pages,options.xfdfString).then((data=>downloadDataAsFile(data,extension,{...options,downloadName})),handleError):(temporaryModifiedDoc||doc).getFileData(clonedOptions).then((data=>downloadDataAsFile(data,extension,{...options,downloadName})),handleError);{const downloadIframe=(0,helpers_getRootNode__WEBPACK_IMPORTED_MODULE_16__.Ay)().querySelector("#download-iframe")||document.createElement("iframe");downloadIframe.width=0,downloadIframe.height=0,downloadIframe.id="download-iframe",downloadIframe.src=null,document.body.appendChild(downloadIframe),downloadIframe.src=externalURL,dispatch(actions__WEBPACK_IMPORTED_MODULE_5__.A.closeElement(src_constants_dataElement__WEBPACK_IMPORTED_MODULE_14__.A.LOADING_MODAL)),(0,helpers_fireEvent__WEBPACK_IMPORTED_MODULE_3__.A)(constants_events__WEBPACK_IMPORTED_MODULE_4__.A.FILE_DOWNLOADED)}})).catch((error=>{console.warn(error),dispatch(actions__WEBPACK_IMPORTED_MODULE_5__.A.closeElement(src_constants_dataElement__WEBPACK_IMPORTED_MODULE_14__.A.LOADING_MODAL))}))}{const data=await doc.getFileData({downloadType:constants_types__WEBPACK_IMPORTED_MODULE_12__._.PDF});downloadDataAsFile(data,constants_types__WEBPACK_IMPORTED_MODULE_12__._.PDF,options)}};function drawRoundedRect(ctx,x,y,width,height,radius,skip=void 0){const skipTop="top"===skip,skipBottom="bottom"===skip;ctx.beginPath(),ctx.strokeStyle="lightgray",ctx.lineWidth=1,skipTop?(ctx.moveTo(x,y),ctx.lineTo(x,y+height-radius),ctx.quadraticCurveTo(x,y+height,x+radius,y+height),ctx.lineTo(x+width-radius,y+height),ctx.quadraticCurveTo(x+width,y+height,x+width,y+height-radius),ctx.lineTo(x+width,y)):skipBottom?(ctx.moveTo(x,y+height),ctx.lineTo(x,y+radius),ctx.quadraticCurveTo(x,y,x+radius,y),ctx.lineTo(x+width-radius,y),ctx.quadraticCurveTo(x+width,y,x+width,y+radius),ctx.lineTo(x+width,y+height)):(ctx.moveTo(x+radius,y),ctx.lineTo(x+width-radius,y),ctx.quadraticCurveTo(x+width,y,x+width,y+radius),ctx.lineTo(x+width,y+height-radius),ctx.quadraticCurveTo(x+width,y+height,x+width-radius,y+height),ctx.lineTo(x+radius,y+height),ctx.quadraticCurveTo(x,y+height,x,y+height-radius),ctx.lineTo(x,y+radius),ctx.quadraticCurveTo(x,y,x+radius,y),ctx.closePath()),ctx.stroke()}},"./src/helpers/getAnnotationCreateToolNames.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/core/index.js");const __WEBPACK_DEFAULT_EXPORT__=()=>{const toolNames=[],toolModeMap=core__WEBPACK_IMPORTED_MODULE_0__.A.getToolModeMap();return Object.keys(toolModeMap).forEach((toolMode=>{const tool=toolModeMap[toolMode];(tool instanceof window.Core.Tools.GenericAnnotationCreateTool||tool instanceof window.Core.Tools.TextAnnotationCreateTool||tool.defaults)&&toolNames.push(tool.name)})),toolNames}},"./src/helpers/getDeviceSize.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$p:()=>isTabletAndMobileSize,IS:()=>isMobileSize,sf:()=>isTabletSize,ud:()=>isDesktopSize});var _getRootNode__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/helpers/getRootNode.js"),hooks_useMedia__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/hooks/useMedia.js"),constants_deviceSizes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/constants/deviceSizes.js");const isMobileSize=()=>window.isApryseWebViewerWebComponent?(0,_getRootNode__WEBPACK_IMPORTED_MODULE_1__.Ay)()?.host.clientWidth<=constants_deviceSizes__WEBPACK_IMPORTED_MODULE_2__.j:(0,hooks_useMedia__WEBPACK_IMPORTED_MODULE_0__.A)([`(max-width: ${constants_deviceSizes__WEBPACK_IMPORTED_MODULE_2__.j}px)`],[!0],!1),isTabletSize=()=>window.isApryseWebViewerWebComponent?(0,_getRootNode__WEBPACK_IMPORTED_MODULE_1__.Ay)()?.host.clientWidth>constants_deviceSizes__WEBPACK_IMPORTED_MODULE_2__.j&&(0,_getRootNode__WEBPACK_IMPORTED_MODULE_1__.Ay)()?.host.clientWidth<=constants_deviceSizes__WEBPACK_IMPORTED_MODULE_2__.T:(0,hooks_useMedia__WEBPACK_IMPORTED_MODULE_0__.A)([`(min-width: ${constants_deviceSizes__WEBPACK_IMPORTED_MODULE_2__.j+1}px) and (max-width: ${constants_deviceSizes__WEBPACK_IMPORTED_MODULE_2__.T}px)`],[!0],!1),isTabletAndMobileSize=()=>window.isApryseWebViewerWebComponent?(0,_getRootNode__WEBPACK_IMPORTED_MODULE_1__.Ay)()?.host.clientWidth<=constants_deviceSizes__WEBPACK_IMPORTED_MODULE_2__.T:(0,hooks_useMedia__WEBPACK_IMPORTED_MODULE_0__.A)([`(max-width: ${constants_deviceSizes__WEBPACK_IMPORTED_MODULE_2__.T}px)`],[!0],!1),isDesktopSize=()=>window.isApryseWebViewerWebComponent?(0,_getRootNode__WEBPACK_IMPORTED_MODULE_1__.Ay)()?.host.clientWidth>constants_deviceSizes__WEBPACK_IMPORTED_MODULE_2__.T:(0,hooks_useMedia__WEBPACK_IMPORTED_MODULE_0__.A)([`(min-width: ${constants_deviceSizes__WEBPACK_IMPORTED_MODULE_2__.T+1}px)`],[!0],!1)},"./src/helpers/getOverlayPositionBasedOn.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var helpers_getRootNode__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/getRootNode.js");const __WEBPACK_DEFAULT_EXPORT__=(element,overlay,isTabletAndMobile,selector="data-element")=>{const isApryseWebViewerWebComponent=window.isApryseWebViewerWebComponent,innerWidth=isApryseWebViewerWebComponent?(0,helpers_getRootNode__WEBPACK_IMPORTED_MODULE_0__.Ay)().host.clientWidth:window.innerWidth,innerHeight=isApryseWebViewerWebComponent?(0,helpers_getRootNode__WEBPACK_IMPORTED_MODULE_0__.Ay)().host.clientHeight:window.innerHeight,button=(0,helpers_getRootNode__WEBPACK_IMPORTED_MODULE_0__.Ay)().querySelector(`[${selector}="${element}"]`);let left=0,right="auto";if(!button||!overlay.current)return{left:-9999,right};const{bottom:buttonBottom,left:buttonLeft}=button.getBoundingClientRect(),rootLeft=isApryseWebViewerWebComponent?(0,helpers_getRootNode__WEBPACK_IMPORTED_MODULE_0__.Ay)().host.getBoundingClientRect().left:0,relativeButtonBottom=buttonBottom-(isApryseWebViewerWebComponent?(0,helpers_getRootNode__WEBPACK_IMPORTED_MODULE_0__.Ay)().host.getBoundingClientRect().top:0),relativeButtonLeft=buttonLeft-rootLeft,{width:overlayWidth,height:overlayHeight}=overlay.current.getBoundingClientRect();if(relativeButtonLeft+overlayWidth>innerWidth){left=innerWidth-6-overlayWidth,right="auto"}else left=relativeButtonLeft,right="auto";const verticalGap=isTabletAndMobile?14:6;let top=relativeButtonBottom+verticalGap;if(relativeButtonBottom>100&&relativeButtonBottom+overlayHeight>innerHeight){const calculatedTop=innerHeight-overlayHeight-verticalGap;top=calculatedTop>0?calculatedTop:0}return{left:isNaN(left)?left:Math.max(left,0),right,top}}},"./src/helpers/isFullscreen.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=()=>!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},"./src/helpers/loadDocument.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>loadDocument});var PasswordModal=__webpack_require__("./src/components/PasswordModal/index.js"),core=__webpack_require__("./src/core/index.js"),fireEvent=__webpack_require__("./src/helpers/fireEvent.js"),isString=__webpack_require__("./node_modules/lodash/isString.js"),isString_default=__webpack_require__.n(isString);const helpers_getFileExtension=(src,options)=>{if(options?.extension)return options.extension.toLowerCase();if(!src)return null;if(src instanceof File)return src.name.split(".").pop().toLowerCase();if((src instanceof Blob||src instanceof ArrayBuffer)&&options?.filename)return options.filename.split(".").pop().toLowerCase();if(isString_default()(src)){return src.split("?")[0].split("#")[0].split(".").pop().toLowerCase()}return null};var getHashParameters=__webpack_require__("./src/helpers/getHashParameters.js"),actions=__webpack_require__("./src/redux/actions/index.js"),dataElement=__webpack_require__("./src/constants/dataElement.js"),customizationVariables=__webpack_require__("./src/constants/customizationVariables.js");const loadDocument=(dispatch,src,options={},documentViewerKey=1)=>{(options={...getDefaultOptions(),...options}).docId=options.docId||options.documentId||null;const customLoadingProgressFunction=options.onLoadingProgress;if(options.onLoadingProgress=percent=>{customLoadingProgressFunction&&customLoadingProgressFunction(percent),dispatch(actions.A.setLoadingProgress(percent))},options.password=transformPasswordOption(options.password,dispatch),options.xodOptions=extractXodOptions(options),"onError"in options){const userDefinedOnErrorCallback=options.onError;options.onError=function(error){(0,fireEvent.R)(error),userDefinedOnErrorCallback(error)}}else options.onError=fireEvent.R;dispatch(actions.A.closeElement(dataElement.A.PASSWORD_MODAL));const extension=helpers_getFileExtension(src,options),isDOCXEditorMode=options.initialMode===customizationVariables.jq.DOCX_EDITOR||options.enableOfficeEditing,isXLSXEditorMode=options.initialMode===customizationVariables.jq.SPREADSHEET_EDITOR;isDOCXEditorMode&&customizationVariables.rM.includes(extension)||isXLSXEditorMode&&customizationVariables.CG.includes(extension)?options.enableOfficeEditing=!0:options.enableOfficeEditing=!1,src?core.A.loadDocument(src,options,documentViewerKey).catch((()=>{})):isXLSXEditorMode?core.A.loadBlankSpreadsheet(options):isDOCXEditorMode&&core.A.loadBlankOfficeEditorDocument(options),dispatch(actions.A.openElement(dataElement.A.PROGRESS_MODAL))},getDefaultOptions=()=>({startOffline:(0,getHashParameters.A)("startOffline",!1),azureWorkaround:(0,getHashParameters.A)("azureWorkaround",!1),webviewerServerURL:(0,getHashParameters.A)("webviewerServerURL",""),fallbackToClientSide:(0,getHashParameters.A)("fallbackToClientSide",!1),singleServerMode:(0,getHashParameters.A)("singleServerMode",!1),webviewerServerRangeRequests:(0,getHashParameters.A)("wvsRange",!0),forceClientSideInit:(0,getHashParameters.A)("forceClientSideInit",!1),disableWebsockets:(0,getHashParameters.A)("disableWebsockets",!1),cacheKey:(0,getHashParameters.A)("cacheKey",null),officeOptions:JSON.parse((0,getHashParameters.A)("officeOptions",null)),rasterizerOptions:JSON.parse((0,getHashParameters.A)("rasterizerOptions",null)),streaming:(0,getHashParameters.A)("streaming",null),useDownloader:(0,getHashParameters.A)("useDownloader",!0),backendType:(0,getHashParameters.A)("pdf",null),loadAsPDF:(0,getHashParameters.A)("loadAsPDF",null),initialMode:(0,getHashParameters.A)("initialMode",null),enableOfficeEditing:(0,getHashParameters.A)("enableOfficeEditing",!1)}),transformPasswordOption=(password,dispatch)=>{let attempt,passwordChecked=!1;return checkPassword=>{dispatch(actions.A.setPasswordAttempts(attempt++)),password||(password=""),passwordChecked||"string"!=typeof password?(passwordChecked&&1!==attempt&&console.error("Wrong password has been passed as an argument. WebViewer will open password modal."),(0,PasswordModal.setCheckPasswordFunction)(checkPassword),dispatch(actions.A.openElement(dataElement.A.PASSWORD_MODAL))):(checkPassword(password),passwordChecked=!0,attempt=0)}},extractXodOptions=options=>{const xodOptions=options.xodOptions||{};return options.decryptOptions&&(xodOptions.decrypt=window.Core.Encryption.decrypt,xodOptions.decryptOptions=options.decryptOptions),options.decrypt&&(xodOptions.decrypt=options.decrypt),null!==options.streaming&&(xodOptions.streaming="true"===options.streaming||!0===options.streaming),options.azureWorkaround&&(xodOptions.azureWorkaround=options.azureWorkaround),options.startOffline&&(xodOptions.startOffline=options.startOffline),xodOptions}},"./src/helpers/localStorageManager.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=new class LocalStorageManager{constructor(){try{this.localStorageEnabled=!!window.localStorage}catch(error){console.error("window.localStorage unavailable. Disabling local storage."),this.localStorageEnabled=!1}}enableLocalStorage(){this.localStorageEnabled=!0}disableLocalStorage(){this.localStorageEnabled=!1}isLocalStorageEnabled(){return this.localStorageEnabled}}},"./src/helpers/toggleFullscreen.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _fireEvent__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/fireEvent.js"),constants_events__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/constants/events.js"),_isFullscreen__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/helpers/isFullscreen.js"),_getRootNode__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/getRootNode.js");const __WEBPACK_DEFAULT_EXPORT__=()=>{const rootNode=(0,_getRootNode__WEBPACK_IMPORTED_MODULE_2__.Ay)(),targetElement=rootNode instanceof ShadowRoot?rootNode.host:rootNode.documentElement;(0,_isFullscreen__WEBPACK_IMPORTED_MODULE_3__.A)()?(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),(0,_fireEvent__WEBPACK_IMPORTED_MODULE_0__.A)(constants_events__WEBPACK_IMPORTED_MODULE_1__.A.FULLSCREEN_MODE_TOGGLED,{isInFullscreen:!1})):(targetElement.requestFullscreen?targetElement.requestFullscreen():targetElement.msRequestFullscreen?targetElement.msRequestFullscreen():targetElement.mozRequestFullScreen?targetElement.mozRequestFullScreen():targetElement.webkitRequestFullScreen&&(targetElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),setTimeout((()=>{document.webkitCurrentFullScreenElement||targetElement.webkitRequestFullScreen()}),200)),(0,_fireEvent__WEBPACK_IMPORTED_MODULE_0__.A)(constants_events__WEBPACK_IMPORTED_MODULE_1__.A.FULLSCREEN_MODE_TOGGLED,{isInFullscreen:!0}))}},"./src/hooks/useMedia.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const __WEBPACK_DEFAULT_EXPORT__=(queries,values,defaultValue)=>{const mediaQueryLists=queries.map((q=>window.matchMedia(`screen and ${q}`))),getValue=initial=>{initial&&window.innerWidth;const index=mediaQueryLists.findIndex((mql=>mql?.matches));return void 0!==values[index]?values[index]:defaultValue},[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((()=>getValue(!0)));return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const handler=()=>setValue((()=>getValue()));return mediaQueryLists.forEach((mql=>mql?.addListener(handler))),()=>mediaQueryLists.forEach((mql=>mql?.removeListener(handler)))}),[]),value}},"./src/hooks/useOnClickOutside.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),helpers_getRootNode__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/helpers/getRootNode.js");const __WEBPACK_DEFAULT_EXPORT__=(ref,handler)=>{(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const listener=event=>{ref.current&&!ref.current.contains(event.target)&&handler(event)};let browserDocument=document;return window.isApryseWebViewerWebComponent&&(browserDocument=(0,helpers_getRootNode__WEBPACK_IMPORTED_MODULE_1__.Ay)().getElementById("app")),browserDocument.addEventListener("mousedown",listener),browserDocument.addEventListener("touchstart",listener),()=>{browserDocument.removeEventListener("mousedown",listener),browserDocument.removeEventListener("touchstart",listener)}}),[ref,handler])}},"?19e6":()=>{},"?3e83":()=>{}}]);