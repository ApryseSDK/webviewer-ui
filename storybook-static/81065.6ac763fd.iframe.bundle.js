(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[81065],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/PrintModal/WatermarkModal/WatermarkModal.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".Watermark{position:fixed;inset-inline-start:0;inset-block-end:0;z-index:100;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:var(--modal-negative-space)}.Watermark .modal-container .wrapper .modal-content{padding:10px}.Watermark .footer{display:flex;flex-direction:row;justify-content:flex-end;width:100%;margin-top:13px}.Watermark .footer.modal-footer{padding:16px;margin:0;border-top:1px solid var(--divider)}.Watermark .footer .modal-button{display:flex;justify-content:center;align-items:center;padding:6px 18px;margin:8px 0 0;width:auto;width:-moz-fit-content;width:fit-content;border-radius:4px;height:30px;cursor:pointer}.Watermark .footer .modal-button.confirm{margin-inline-start:4px}.Watermark .footer .modal-button.secondary-btn-custom{border-radius:4px;padding:2px 20px 4px;cursor:pointer}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .footer .modal-button{padding:23px 8px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .footer .modal-button{padding:23px 8px}}.Watermark .swipe-indicator{background:var(--swipe-indicator-bg);border-radius:2px;height:4px;width:38px;position:absolute;inset-block-start:12px;margin-inline-start:auto;margin-inline-end:auto;inset-inline-start:0;inset-inline-end:0}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .swipe-indicator{display:none}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .swipe-indicator{display:none}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .swipe-indicator{width:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .swipe-indicator{width:32px}}.open.Watermark{visibility:visible}.closed.Watermark{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.Watermark .button-container .button.add-watermark:hover,.Watermark .footer .modal-button.confirm:hover{background:var(--primary-button-hover);border-color:var(--primary-button-hover);color:var(--gray-0)}.Watermark .button-container .button.add-watermark,.Watermark .footer .modal-button.confirm{background:var(--primary-button);border-color:var(--primary-button);color:var(--primary-button-text)}.Watermark .footer .modal-button.confirm.disabled{cursor:default;background:var(--disabled-button-color);color:var(--primary-button-text)}.Watermark .footer .modal-button.confirm.disabled span{color:var(--primary-button-text)}.Watermark .footer .modal-button.cancel:hover,.Watermark .footer .modal-button.secondary-btn-custom:hover{border:none;box-shadow:inset 0 0 0 1px var(--blue-6);color:var(--blue-6)}.Watermark .footer .modal-button.cancel,.Watermark .footer .modal-button.secondary-btn-custom{border:none;box-shadow:inset 0 0 0 1px var(--primary-button);color:var(--primary-button)}.Watermark .footer .modal-button.cancel.disabled,.Watermark .footer .modal-button.secondary-btn-custom.disabled{cursor:default;border:none;box-shadow:inset 0 0 0 1px rgba(43,115,171,.5);color:rgba(43,115,171,.5)}.Watermark .footer .modal-button.cancel.disabled span,.Watermark .footer .modal-button.secondary-btn-custom.disabled span{color:rgba(43,115,171,.5)}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}.Watermark{z-index:110}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .modal-container{overflow:visible}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .modal-container{overflow:visible}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .h2{font-size:16px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .h2{font-size:16px}}.Watermark .StylePopup{position:absolute;margin-top:-140px;background:var(--preset-background);display:flex;flex-direction:column;justify-content:center;border-radius:0 0 4px 4px;box-shadow:0 0 3px 0 var(--box-shadow);align-items:center;z-index:85}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.Watermark .StylePopup{margin-top:0}}.Watermark .StylePopup .ColorPalette{padding:10px}.Watermark .style-container{display:flex}.Watermark .style-container .Button{margin-inline-end:8px}.Watermark .style-container .Button:hover{background:var(--popup-button-hover)}.Watermark .style-container .Button.active{background:var(--popup-button-active)}.Watermark .form-content-container{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:16px;width:100%}.Watermark .form-content-container form{width:auto}@media(min-width:315px)and (max-width:480px){.Watermark .form-content-container form{width:auto}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .form-content-container{flex-direction:column;padding:16px 16px 0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .form-content-container{flex-direction:column;padding:16px 16px 0}}.Watermark .font-form-fields{display:flex;flex-direction:column;margin:0}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .font-form-fields{flex-direction:row}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .font-form-fields{flex-direction:row}}.Watermark .font-form-fields .form-font-type{margin-top:16px;margin-inline-start:16px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .font-form-fields .form-font-type{width:160px;margin-inline-start:0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .font-form-fields .form-font-type{width:160px;margin-inline-start:0}}.Watermark .font-form-fields .form-font-type label{font-weight:700}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .font-form-fields .form-font-type label{font-size:13px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .font-form-fields .form-font-type label{font-size:13px}}.Watermark .font-form-fields .form-font-type .Dropdown__wrapper{margin-top:8px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .font-form-fields .form-font-type .Dropdown__wrapper{width:160px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .font-form-fields .form-font-type .Dropdown__wrapper{width:160px}}.Watermark .font-form-fields .form-font-type .Dropdown__wrapper .Dropdown{text-align:start;height:32px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .font-form-fields .form-font-type .Dropdown__wrapper .Dropdown{height:28px;width:160px;z-index:0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .font-form-fields .form-font-type .Dropdown__wrapper .Dropdown{height:28px;width:160px;z-index:0}}.Watermark .font-form-fields .form-font-type .Dropdown__wrapper .Dropdown__items{width:100%;inset-block-start:0}.Watermark .font-form-fields .form-font-type .Dropdown__wrapper#location .Dropdown__items{z-index:101}.Watermark .font-form-fields .form-font-size{margin-top:16px;margin-inline-start:16px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .font-form-fields .form-font-size{width:160px;margin-inline-start:8px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .font-form-fields .form-font-size{width:160px;margin-inline-start:8px}}.Watermark .font-form-fields .form-font-size label{font-weight:700}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .font-form-fields .form-font-size label{font-size:13px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .font-form-fields .form-font-size label{font-size:13px}}.Watermark .font-form-fields .form-font-size .FontSizeDropdown{padding:2px;height:32px;margin-top:8px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .font-form-fields .form-font-size .FontSizeDropdown{height:28px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .font-form-fields .form-font-size .FontSizeDropdown{height:28px}}.Watermark .font-form-fields .form-font-size .FontSizeDropdown .icon-button{cursor:pointer;width:14px;height:14px}.Watermark .font-form-fields .form-font-size .FontSizeDropdown .icon-button>.Icon{color:var(--icon-color);width:12px;height:16px;margin-top:2px}.Watermark .watermark-settings{display:flex;flex-direction:column;width:330px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .watermark-settings{width:100%;height:374px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .watermark-settings{width:100%;height:374px}}.Watermark .watermark-settings .form-field{display:flex;flex-direction:column;margin:16px 0 0 16px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .watermark-settings .form-field{margin:0;width:100%}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .watermark-settings .form-field{margin:0;width:100%}}.Watermark .watermark-settings .form-field label{margin-bottom:8px;font-weight:700}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .watermark-settings .form-field label{margin-top:16px;font-size:13px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .watermark-settings .form-field label{margin-top:16px;font-size:13px}}.Watermark .watermark-settings .form-field .text-input,.Watermark .watermark-settings .form-field select{height:32px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .watermark-settings .form-field .text-input,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .watermark-settings .form-field select{height:28px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .watermark-settings .form-field .text-input,.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .watermark-settings .form-field select{height:28px}}.Watermark .watermark-settings .form-field.opacity-slider{display:flex;margin-bottom:0}.Watermark .watermark-settings .form-field.opacity-slider .slider-property{font-weight:700}.Watermark .watermark-settings .form-field.opacity-slider .slider-svg-container{margin:0;height:30px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.Watermark .watermark-settings .form-field.opacity-slider{align-items:stretch}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .watermark-settings .form-field.opacity-slider{font-size:13px;margin-top:16px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .watermark-settings .form-field.opacity-slider{font-size:13px;margin-top:16px}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .watermark-settings .form-field .Dropdown__wrapper{width:328px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .watermark-settings .form-field .Dropdown__wrapper{width:328px}}.Watermark .watermark-settings .form-field .Dropdown__wrapper button{width:314px}.Watermark .watermark-settings .form-field .Dropdown__wrapper .Dropdown{text-align:start;width:314px;height:32px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .watermark-settings .form-field .Dropdown__wrapper .Dropdown{height:28px;z-index:0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .watermark-settings .form-field .Dropdown__wrapper .Dropdown{height:28px;z-index:0}}.Watermark .watermark-settings .form-field .Dropdown__wrapper .Dropdown__items{width:100%;inset-block-start:0}.Watermark .watermark-settings .form-field .Dropdown__wrapper#location .Dropdown__items{z-index:101}.Watermark .watermark-settings .colorSelect{width:18px;height:18px;margin:7px;margin-inline-end:8px;border-radius:10000000px}.Watermark .watermark-settings .white-color{border:1px solid var(--white-color-palette-border)}.Watermark .watermark-settings .slider-input-field{height:32px}.Watermark .canvas-container{display:flex;justify-content:center;align-items:center;width:500px;height:436px;background-color:var(--file-preview-background);border:1px solid var(--lighter-border)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .canvas-container{display:block;width:328px;height:261px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .canvas-container{display:block;width:328px;height:261px}}.Watermark .canvas-container canvas{width:325px!important}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .canvas-container canvas{width:328px;height:261px;-o-object-fit:contain;object-fit:contain;background-color:var(--file-preview-background)}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .canvas-container canvas{width:328px;height:261px;-o-object-fit:contain;object-fit:contain;background-color:var(--file-preview-background)}}.Watermark .divider{height:1px;width:100%;background:var(--divider)}.Watermark .divider.separator{margin-top:16px}.Watermark .button-container{display:flex;justify-content:space-between;align-items:baseline;width:100%;padding:16px}.Watermark .button-container .button{padding:6px 18px;width:auto}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .button-container .button.add-watermark{font-size:13px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .button-container .button.add-watermark{font-size:13px}}.Watermark .button-container .button.cancel{color:var(--secondary-button-text);background:none}.Watermark .button-container .button.cancel:hover{color:var(--secondary-button-hover)}.Watermark .button-container .reset-settings{background-color:transparent;cursor:pointer;background:none;border:0;border-radius:4px;color:var(--secondary-button-text);display:flex;font-size:13px;padding:6px 18px}:host(:not([data-tabbing=true])) .Watermark .button-container .reset-settings,html:not([data-tabbing=true]) .Watermark .button-container .reset-settings{outline:none}.Watermark .button-container .reset-settings:hover{color:var(--secondary-button-hover)}.Watermark .button-container .reset-settings.focus-visible,.Watermark .button-container .reset-settings:focus-visible{outline:var(--focus-visible-outline)!important}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .Watermark .button-container .reset-settings{font-size:13px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .Watermark .button-container .reset-settings{font-size:13px}}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./src/components/PrintModal/WatermarkModal/WatermarkModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>PrintModal_WatermarkModal_WatermarkModal});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),ColorPalette=__webpack_require__("./src/components/ColorPalette/index.js"),Slider=__webpack_require__("./src/components/Slider/index.js"),core=__webpack_require__("./src/core/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("./node_modules/react/index.js"),withTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/withTranslation.js"),Button=__webpack_require__("./src/components/Button/index.js"),FontSizeDropdown=__webpack_require__("./src/components/FontSizeDropdown/index.js");const FONTS=["Arial","Times New Roman","Tahoma ","Trebuchet MS","Courier","Verdana","Georgia","Palatino","Comic Sans MS","Arial Black","Impact"];__webpack_require__("./src/components/PrintModal/WatermarkModal/WatermarkModal.scss");var ModalWrapper=__webpack_require__("./src/components/ModalWrapper/index.js"),DataElementWrapper=__webpack_require__("./src/components/DataElementWrapper/index.js"),Dropdown=__webpack_require__("./src/components/Dropdown/index.js"),device=__webpack_require__("./src/helpers/device.js");const WATERMARK_LOCATIONS={CENTER:"center",TOP_LEFT:"topLeft",TOP_RIGHT:"topRight",TOP_CENTER:"topCenter",BOT_LEFT:"bottomLeft",BOT_RIGHT:"bottomRight",BOT_CENTER:"bottomCenter"},FORM_FIELD_KEYS_location="location",FORM_FIELD_KEYS_fontSize="fontSize",FORM_FIELD_KEYS_text="text",FORM_FIELD_KEYS_color="color",FORM_FIELD_KEYS_opacity="opacity",FORM_FIELD_KEYS_font="font",FORM_FIELD_KEYS_isBolded="isBolded",FORM_FIELD_KEYS_isItalic="isItalic",FORM_FIELD_KEYS_isUnderlined="isUnderlined",DEFAULT_VALS={[FORM_FIELD_KEYS_location]:WATERMARK_LOCATIONS.CENTER,[FORM_FIELD_KEYS_fontSize]:48,[FORM_FIELD_KEYS_text]:"",[FORM_FIELD_KEYS_color]:new window.Core.Annotations.Color(228,66,52),[FORM_FIELD_KEYS_opacity]:100,[FORM_FIELD_KEYS_font]:FONTS[0],[FORM_FIELD_KEYS_isBolded]:!1,[FORM_FIELD_KEYS_isItalic]:!1,[FORM_FIELD_KEYS_isUnderlined]:!1},WATERMARK_API_LOCATIONS={[WATERMARK_LOCATIONS.CENTER]:"diagonal",[WATERMARK_LOCATIONS.TOP_LEFT]:"headerLeft",[WATERMARK_LOCATIONS.TOP_RIGHT]:"headerRight",[WATERMARK_LOCATIONS.TOP_CENTER]:"headerCenter",[WATERMARK_LOCATIONS.BOT_LEFT]:"footerLeft",[WATERMARK_LOCATIONS.BOT_RIGHT]:"footerRight",[WATERMARK_LOCATIONS.BOT_CENTER]:"footerCenter"};class WatermarkModal_WatermarkModal extends react.PureComponent{static propTypes={isVisible:prop_types_default().bool,pageIndexToView:prop_types_default().number,watermarkLocations:prop_types_default().object,modalClosed:prop_types_default().func,formSubmitted:prop_types_default().func,t:prop_types_default().func.isRequired,isCustomizableUI:prop_types_default().bool};constructor(props){super(props);const locationSettings=this.initializeLocationSettings();this.preExistingWatermark=void 0,this.state={isColorPaletteVisible:!1,locationSettings,previousLocationSettings:locationSettings,lockFocus:!1},this.canvasContainerRef=react.createRef()}componentDidUpdate(prevProps){core.A.addEventListener("documentLoaded",this.closeModal),this.props.isVisible!==prevProps.isVisible&&(this.props.isVisible?this.setState({lockFocus:!0}):this.setState({lockFocus:!1}),this.setState({isColorPaletteVisible:!1},(()=>this.handleWatermarkOnVisibilityChanged())))}handleWatermarkOnVisibilityChanged=()=>{this.props.isVisible?this.setState({locationSettings:this.state.previousLocationSettings},(async()=>{this.preExistingWatermark=await core.A.getWatermark(),this.addWatermarks()})):(this.removeWatermarkCreatedByModal(),core.A.setWatermark(this.preExistingWatermark))};addWatermarks=()=>{const watermarkOptions=this.createWatermarks(),{t}=this.props;core.A.setWatermark(watermarkOptions);const pageHeight=core.A.getPageHeight(this.props.pageIndexToView+1),desiredZoomForWidth=300/core.A.getPageWidth(this.props.pageIndexToView+1),desiredZoomForHeight=300/pageHeight,desiredZoom=Math.min(desiredZoomForHeight,desiredZoomForWidth),pageNumber=this.props.pageIndexToView+1;core.A.getDocument().loadCanvas({pageNumber,zoom:desiredZoom,drawComplete:canvas=>{const nodes=this.canvasContainerRef.current.childNodes;nodes&&nodes.length>0&&this.canvasContainerRef.current.removeChild(nodes[0]),canvas.style.border=this.canvasContainerRef.current.style.border,canvas.style.height=this.canvasContainerRef.current.style.height,canvas.style.backgroundColor=this.canvasContainerRef.current.style.backgroundColor,canvas.setAttribute("role","img"),canvas.setAttribute("aria-label",`${t("action.page")} ${pageNumber}`),this.canvasContainerRef.current.appendChild(canvas)}})};constructWatermarkOption=value=>{const fontStyles=[];value.isBolded&&fontStyles.push(core.A.getFontStyles().BOLD),value.isItalic&&fontStyles.push(core.A.getFontStyles().ITALIC),value.isUnderlined&&fontStyles.push(core.A.getFontStyles().UNDERLINE);return{fontSize:value.fontSize,fontFamily:value.font,color:value.color.toString(),opacity:value.opacity,text:value.text,fontStyles}};createWatermarks=()=>{const watermarks={};return Object.keys(WATERMARK_LOCATIONS).forEach((key=>{const temp=this.constructWatermarkOption(this.state.locationSettings[key]);watermarks[WATERMARK_API_LOCATIONS[WATERMARK_LOCATIONS[key]]]=temp})),watermarks};removeWatermarkCreatedByModal=()=>{core.A.setWatermark({})};closeModal=()=>{this.props.modalClosed()};handleInputChange=(key,value)=>{const currLocationSettings={...this.state.locationSettings},currSelectedLocation=this.getCurrentSelectedLocation();currLocationSettings[currSelectedLocation]={...currLocationSettings[currSelectedLocation],[key]:value},this.setState({locationSettings:currLocationSettings},(()=>{this.addWatermarks()}))};resetForm=event=>{event.preventDefault();const locationSettings=this.resetLocationSettings();this.setState({locationSettings},(()=>this.addWatermarks()))};onOkPressed=()=>{this.setState({previousLocationSettings:this.state.locationSettings},(()=>{this.props.modalClosed();const watermarkOptions=this.createWatermarks();this.props.formSubmitted(watermarkOptions)}))};setColorPaletteVisibility=visible=>{this.setState({isColorPaletteVisible:visible})};onLocationChanged=key=>{const currLocationSettings={...this.state.locationSettings};Object.keys(currLocationSettings).forEach((locationKey=>{let locationSetting=currLocationSettings[locationKey];locationSetting={...locationSetting,isSelected:key===locationKey},currLocationSettings[locationKey]=locationSetting})),this.setState({locationSettings:currLocationSettings},(()=>{this.addWatermarks()}))};resetLocationSettings=()=>{const locationSettings={};return Object.keys(WATERMARK_LOCATIONS).forEach((key=>{const{...others}=DEFAULT_VALS,temp={...others,isSelected:WATERMARK_LOCATIONS[key]===DEFAULT_VALS.location};locationSettings[key]=temp})),locationSettings};initializeLocationSettings=()=>{const locationSettings=this.resetLocationSettings();return this.props.watermarkLocations&&Object.keys(WATERMARK_LOCATIONS).forEach((key=>{const watermarkStrVal=WATERMARK_LOCATIONS[key],tempWatermarkProps=this.props.watermarkLocations[WATERMARK_API_LOCATIONS[watermarkStrVal]]??!1;if(!tempWatermarkProps)return;const temp=this.constructWatermarkOption(tempWatermarkProps);locationSettings[key].text=temp.text;const colorArray=tempWatermarkProps.color.slice(5).replace(")","").split(","),color=new window.Core.Annotations.Color(colorArray[0],colorArray[1],colorArray[2],colorArray[3]);locationSettings[key].color=color,locationSettings[key].opacity=temp.opacity,locationSettings[key].fontSize=temp.fontSize,tempWatermarkProps.fontStyles&&(locationSettings[key].isBolded=tempWatermarkProps.fontStyles.includes("BOLD"),locationSettings[key].isItalic=tempWatermarkProps.fontStyles.includes("ITALIC"),locationSettings[key].isUnderlined=tempWatermarkProps.fontStyles.includes("UNDERLINE"));const fontFamily=tempWatermarkProps.fontFamily??!1;fontFamily&&0!==fontFamily.trim().length||(locationSettings[key]=DEFAULT_VALS.font)})),locationSettings};getKeyByValue=(object,value)=>Object.keys(object).find((key=>object[key]===value));getCurrentSelectedLocation=()=>Object.keys(this.state.locationSettings).find((locationKey=>this.state.locationSettings[locationKey].isSelected));onColorChanged=newColor=>{const currLocation=this.getCurrentSelectedLocation(),currLocationSetting=this.state.locationSettings[currLocation];currLocationSetting[FORM_FIELD_KEYS_color]=new window.Core.Annotations.Color(newColor.R,newColor.G,newColor.B);const locationSettings={...this.state.locationSettings};currLocationSetting[FORM_FIELD_KEYS_text]||Object.keys(WATERMARK_LOCATIONS).forEach((location=>{const locationSetting=locationSettings[location];locationSetting[FORM_FIELD_KEYS_text]||(locationSetting[FORM_FIELD_KEYS_color]=new window.Core.Annotations.Color(newColor.R,newColor.G,newColor.B))})),this.setState({locationSettings},(()=>{this.addWatermarks()}))};render(){const{isVisible}=this.props;if(!isVisible)return null;const{t,isCustomizableUI}=this.props,currLocation=this.getCurrentSelectedLocation(),formInfo=this.state.locationSettings[currLocation],hexColor=formInfo[FORM_FIELD_KEYS_color].toHexString(),dropdownHalfWidth=(0,device.Fr)()?160:314,dropdownFullWidth=(0,device.Fr)()?328:314;return(0,jsx_runtime.jsx)(DataElementWrapper.A,{className:"Modal Watermark",id:"watermarkModal","data-element":"watermarkModal",children:(0,jsx_runtime.jsxs)(ModalWrapper.A,{isOpen:this.state.lockFocus,title:"option.watermark.addWatermark",closeButtonDataElement:"watermarkModalCloseButton",onCloseClick:this.closeModal,swipeToClose:!0,closeHandler:this.closeModal,children:[(0,jsx_runtime.jsx)("div",{className:"swipe-indicator"}),(0,jsx_runtime.jsxs)("div",{className:"form-content-container",children:[(0,jsx_runtime.jsx)("div",{className:"canvas-container",ref:this.canvasContainerRef}),(0,jsx_runtime.jsx)("div",{className:"watermark-settings",children:(0,jsx_runtime.jsxs)("form",{id:"form",onSubmit:e=>e.preventDefault(),children:[(0,jsx_runtime.jsxs)("div",{className:"form-field",children:[(0,jsx_runtime.jsx)("label",{className:"section-label print-quality-section-label",htmlFor:"location",id:"watermark-location-dropdown-label",children:t("option.watermark.location")}),(0,jsx_runtime.jsx)(Dropdown.A,{id:"location",labelledById:"watermark-location-dropdown-label",dataElement:"watermarkLocation",items:Object.keys(WATERMARK_LOCATIONS),getTranslationLabel:key=>t(`option.watermark.locations.${WATERMARK_LOCATIONS[key]}`),currentSelectionKey:currLocation,onClickItem:this.onLocationChanged,width:dropdownFullWidth}),(0,jsx_runtime.jsx)("div",{className:"separator divider"})]}),(0,jsx_runtime.jsxs)("div",{className:"form-field",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"textInput",children:t("option.watermark.text")}),(0,jsx_runtime.jsx)("input",{className:"text-input",id:"textInput",value:formInfo[FORM_FIELD_KEYS_text],onChange:event=>this.handleInputChange(FORM_FIELD_KEYS_text,event.target.value),type:"text"})]}),(0,jsx_runtime.jsxs)("div",{className:"font-form-fields",children:[(0,jsx_runtime.jsxs)("div",{className:"form-font-type",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"fonts",id:"watermark-font-dropdown-label",children:t("option.watermark.font")}),(0,jsx_runtime.jsx)(Dropdown.A,{id:"fonts",labelledById:"watermark-font-dropdown-label",dataElement:"watermarkFont",items:FONTS,currentSelectionKey:formInfo[FORM_FIELD_KEYS_font],onClickItem:key=>this.handleInputChange(FORM_FIELD_KEYS_font,key),width:dropdownHalfWidth})]}),(0,jsx_runtime.jsxs)("div",{className:"form-font-size",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"fontSize",children:t("option.watermark.size")}),(0,jsx_runtime.jsx)(FontSizeDropdown.A,{fontSize:formInfo[FORM_FIELD_KEYS_fontSize],fontUnit:"pt",onFontSizeChange:val=>this.handleInputChange(FORM_FIELD_KEYS_fontSize,Number.parseInt(val)),maxFontSize:1600,initialFontValue:1,initialMaxFontValue:512,width:dropdownHalfWidth},"fontSize")]})]}),(0,jsx_runtime.jsx)("div",{className:"form-field opacity-slider",id:"opacitySlider",children:(0,jsx_runtime.jsx)(Slider.A,{dataElement:"watermarkOpacitySlider",property:"Opacity",displayProperty:"opacity",min:0,max:100,step:1,value:formInfo[FORM_FIELD_KEYS_opacity],getDisplayValue:opacity=>`${Math.round(opacity)}%`,withInputField:isCustomizableUI,inputFieldType:"number",onSliderChange:()=>{},onStyleChange:(property,value)=>this.handleInputChange(FORM_FIELD_KEYS_opacity,Math.round(100*value)),getLocalValue:opacity=>parseInt(opacity)/100})}),(0,jsx_runtime.jsxs)("div",{className:"form-field",children:[(0,jsx_runtime.jsx)("label",{children:t("option.watermark.style")}),(0,jsx_runtime.jsxs)("div",{className:"style-container",children:[(0,jsx_runtime.jsx)(Button.A,{id:"currentColorCell",className:"colorSelect "+("#FFFFFF"===hexColor?"white-color":""),ariaLabel:"colorSelectButton",style:{backgroundColor:hexColor},onClick:()=>this.setColorPaletteVisibility(!this.state.isColorPaletteVisible)}),(0,jsx_runtime.jsxs)("div",{className:"style-container",children:[(0,jsx_runtime.jsx)(Button.A,{dataElement:"boldText",img:"icon-text-bold",isActive:formInfo[FORM_FIELD_KEYS_isBolded],onClick:()=>this.handleInputChange(FORM_FIELD_KEYS_isBolded,!formInfo[FORM_FIELD_KEYS_isBolded]),ariaLabel:t("option.richText.bold")}),(0,jsx_runtime.jsx)(Button.A,{dataElement:"italicizeText",img:"icon-text-italic",isActive:formInfo[FORM_FIELD_KEYS_isItalic],onClick:()=>this.handleInputChange(FORM_FIELD_KEYS_isItalic,!formInfo[FORM_FIELD_KEYS_isItalic]),ariaLabel:t("option.richText.italic")}),(0,jsx_runtime.jsx)(Button.A,{dataElement:"underlineText",img:"icon-text-underline",isActive:formInfo[FORM_FIELD_KEYS_isUnderlined],onClick:()=>this.handleInputChange(FORM_FIELD_KEYS_isUnderlined,!formInfo[FORM_FIELD_KEYS_isUnderlined]),ariaLabel:t("option.richText.underline")})]})]}),this.state.isColorPaletteVisible&&(0,jsx_runtime.jsx)("div",{className:"Popup StylePopup",id:"stylePopup",onClick:()=>this.setColorPaletteVisibility(!1),children:(0,jsx_runtime.jsx)(ColorPalette.A,{color:formInfo[FORM_FIELD_KEYS_color],property:"TextColor",onStyleChange:(property,color)=>{this.onColorChanged(color),this.setColorPaletteVisibility(!1)}})})]})]})})]}),(0,jsx_runtime.jsx)("div",{className:"divider"}),(0,jsx_runtime.jsxs)("div",{className:"button-container",children:[(0,jsx_runtime.jsx)("button",{className:"reset-settings",id:"reset",onClick:this.resetForm,children:t("option.watermark.resetAllSettings")}),(0,jsx_runtime.jsx)(Button.A,{className:"add-watermark button",id:"submit",onClick:this.onOkPressed,children:t("action.add")})]})]})})}}const PrintModal_WatermarkModal_WatermarkModal=(0,withTranslation.C)()(WatermarkModal_WatermarkModal);WatermarkModal_WatermarkModal.__docgenInfo={description:"",methods:[{name:"handleWatermarkOnVisibilityChanged",docblock:null,modifiers:[],params:[],returns:null},{name:"addWatermarks",docblock:null,modifiers:[],params:[],returns:null},{name:"constructWatermarkOption",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null},{name:"createWatermarks",docblock:null,modifiers:[],params:[],returns:null},{name:"removeWatermarkCreatedByModal",docblock:null,modifiers:[],params:[],returns:null},{name:"closeModal",docblock:null,modifiers:[],params:[],returns:null},{name:"handleInputChange",docblock:null,modifiers:[],params:[{name:"key",optional:!1,type:null},{name:"value",optional:!1,type:null}],returns:null},{name:"resetForm",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"onOkPressed",docblock:null,modifiers:[],params:[],returns:null},{name:"setColorPaletteVisibility",docblock:null,modifiers:[],params:[{name:"visible",optional:!1,type:null}],returns:null},{name:"onLocationChanged",docblock:null,modifiers:[],params:[{name:"key",optional:!1,type:null}],returns:null},{name:"resetLocationSettings",docblock:null,modifiers:[],params:[],returns:null},{name:"initializeLocationSettings",docblock:null,modifiers:[],params:[],returns:null},{name:"getKeyByValue",docblock:null,modifiers:[],params:[{name:"object",optional:!1,type:null},{name:"value",optional:!1,type:null}],returns:null},{name:"getCurrentSelectedLocation",docblock:null,modifiers:[],params:[],returns:null},{name:"onColorChanged",docblock:null,modifiers:[],params:[{name:"newColor",optional:!1,type:null}],returns:null}],displayName:"WatermarkModal",props:{isVisible:{description:"",type:{name:"bool"},required:!1},pageIndexToView:{description:"",type:{name:"number"},required:!1},watermarkLocations:{description:"",type:{name:"object"},required:!1},modalClosed:{description:"",type:{name:"func"},required:!1},formSubmitted:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!0},isCustomizableUI:{description:"",type:{name:"bool"},required:!1}}}},"./src/components/PrintModal/WatermarkModal/WatermarkModal.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/PrintModal/WatermarkModal/WatermarkModal.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}}}]);