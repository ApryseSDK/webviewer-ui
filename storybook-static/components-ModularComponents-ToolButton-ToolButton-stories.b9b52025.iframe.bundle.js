(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[51812],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/ModularComponents/ToolButton/ToolButton.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.ToolButton{width:32px;height:32px}.ToolButton.button-with-label{width:-moz-min-content;width:min-content}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .ToolButton:hover{background:var(--gray-3)}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .ToolButton.active{background:var(--tools-button-active)}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .ToolButton:hover{background:var(--gray-3)}.App.is-web-component:not(.is-in-desktop-only-mode) .ToolButton.active{background:var(--tools-button-active)}}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./src/components/ModularComponents/ToolButton/ToolButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-redux/es/index.js"),core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/core/index.js"),classnames__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_4__),prop_types__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_18__),components_Button__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Button/index.js"),actions__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/redux/actions/index.js"),selectors__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/redux/selectors/index.js"),constants_map__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/constants/map.js"),constants_defaultTool__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/constants/defaultTool.js"),helpers_getToolStyles__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/helpers/getToolStyles.js"),helpers_getColor__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./src/helpers/getColor.js"),helpers_hotkeysManager__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/helpers/hotkeysManager.js"),helpers_itemToFlyoutHelper__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/helpers/itemToFlyoutHelper.js"),constants_dataElement__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/constants/dataElement.js"),_FlyoutItemContainer__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/components/ModularComponents/FlyoutItemContainer/index.js");__webpack_require__("./src/components/Button/Button.scss"),__webpack_require__("./src/components/ModularComponents/ToolButton/ToolButton.scss");const{ToolNames}=window.Core.Tools,ToolButton=(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(((props,ref)=>{const{title,dataElement,label,img,disabled,className,preset,headerPlacement,toolName,isFlyoutItem=!1,groupedItem,allFlyoutItems=[],style}=props,activeToolName=((0,react_redux__WEBPACK_IMPORTED_MODULE_2__.d4)(selectors__WEBPACK_IMPORTED_MODULE_7__.A.getActiveToolStyles),(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.d4)(selectors__WEBPACK_IMPORTED_MODULE_7__.A.getActiveToolName)),iconColorKey=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.d4)((state=>selectors__WEBPACK_IMPORTED_MODULE_7__.A.getIconColor(state,(0,constants_map__WEBPACK_IMPORTED_MODULE_8__.YP)(toolName)))),toolButtonObject=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.d4)((state=>selectors__WEBPACK_IMPORTED_MODULE_7__.A.getToolButtonObject(state,toolName)),react_redux__WEBPACK_IMPORTED_MODULE_2__.bN),activeGroupedItems=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.d4)(selectors__WEBPACK_IMPORTED_MODULE_7__.A.getActiveGroupedItems,react_redux__WEBPACK_IMPORTED_MODULE_2__.bN),isSignatureListPanelOpen=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.d4)((state=>selectors__WEBPACK_IMPORTED_MODULE_7__.A.isElementOpen(state,constants_dataElement__WEBPACK_IMPORTED_MODULE_13__.A.SIGNATURE_LIST_PANEL))),isRubberStampPanelOpen=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.d4)((state=>selectors__WEBPACK_IMPORTED_MODULE_7__.A.isElementOpen(state,constants_dataElement__WEBPACK_IMPORTED_MODULE_13__.A.RUBBER_STAMP_PANEL))),customOverrides=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.d4)((state=>selectors__WEBPACK_IMPORTED_MODULE_7__.A.getCustomElementOverrides(state,selectors__WEBPACK_IMPORTED_MODULE_7__.A.getToolButtonDataElement(state,toolName))),react_redux__WEBPACK_IMPORTED_MODULE_2__.bN),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.wA)(),[isButtonActive,setIsButtonActive]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(activeToolName===toolName);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{setIsButtonActive(toolName===activeToolName)}),[activeToolName]);const isToolWithPanelAssociatedActive=(toolName,activeTool)=>{if(activeTool===constants_defaultTool__WEBPACK_IMPORTED_MODULE_9__.A||activeTool===toolName){if(toolName===ToolNames.SIGNATURE)return isSignatureListPanelOpen;if(toolName===ToolNames.RUBBER_STAMP)return isRubberStampPanelOpen}return!1};(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{const handleToolModeChange=tool=>{const isSignatureToolActive=isToolWithPanelAssociatedActive(toolName,tool.name),isRubberStampToolActive=isToolWithPanelAssociatedActive(toolName,tool.name),shouldActivateButton=tool.name===toolName||isSignatureToolActive||isRubberStampToolActive;setIsButtonActive(!!shouldActivateButton)};return core__WEBPACK_IMPORTED_MODULE_3__.A.addEventListener("toolModeUpdated",handleToolModeChange),()=>{core__WEBPACK_IMPORTED_MODULE_3__.A.removeEventListener("toolModeUpdated",handleToolModeChange)}}),[isSignatureListPanelOpen,isRubberStampPanelOpen]);const handleClick=()=>{if(groupedItem){const combinedGroupedItems=new Set([...activeGroupedItems,groupedItem]),groupedItemsArray=Array.from(combinedGroupedItems);dispatch(actions__WEBPACK_IMPORTED_MODULE_6__.A.setActiveGroupedItems(groupedItemsArray))}isButtonActive?(setIsButtonActive(!1),toolName===ToolNames.SIGNATURE?dispatch(actions__WEBPACK_IMPORTED_MODULE_6__.A.closeElement(constants_dataElement__WEBPACK_IMPORTED_MODULE_13__.A.SIGNATURE_LIST_PANEL)):toolName===ToolNames.RUBBER_STAMP&&dispatch(actions__WEBPACK_IMPORTED_MODULE_6__.A.closeElement(constants_dataElement__WEBPACK_IMPORTED_MODULE_13__.A.RUBBER_STAMP_PANEL)),core__WEBPACK_IMPORTED_MODULE_3__.A.setToolMode(constants_defaultTool__WEBPACK_IMPORTED_MODULE_9__.A)):((toolName=>{toolName===ToolNames.SIGNATURE?dispatch(actions__WEBPACK_IMPORTED_MODULE_6__.A.openElement(constants_dataElement__WEBPACK_IMPORTED_MODULE_13__.A.SIGNATURE_LIST_PANEL)):toolName===ToolNames.RUBBER_STAMP&&dispatch(actions__WEBPACK_IMPORTED_MODULE_6__.A.openElement(constants_dataElement__WEBPACK_IMPORTED_MODULE_13__.A.RUBBER_STAMP_PANEL))})(toolName),core__WEBPACK_IMPORTED_MODULE_3__.A.setToolMode(toolName))},icon=img||toolButtonObject?.img,toolTipTitle=title||toolButtonObject?.title;let color="",fillColor="",strokeColor="";const showColor=customOverrides?.showColor||toolButtonObject?.showColor;if("always"===showColor||"active"===showColor&&isButtonActive){const toolStyles=(0,helpers_getToolStyles__WEBPACK_IMPORTED_MODULE_10__.A)(toolName);color=toolStyles?.[iconColorKey]?.toHexString?.(),fillColor=(0,helpers_getColor__WEBPACK_IMPORTED_MODULE_17__.A)(toolStyles?.FillColor),strokeColor=(0,helpers_getColor__WEBPACK_IMPORTED_MODULE_17__.A)(toolStyles?.StrokeColor),toolName.indexOf(ToolNames.FREETEXT)>-1&&0===toolStyles?.StrokeThickness&&(strokeColor="ff000000")}let forceTooltipPosition;if(["left","right"].includes(headerPlacement)&&(forceTooltipPosition="left"===headerPlacement?"right":"left"),isFlyoutItem){const shortcutKey=toolTipTitle?toolTipTitle.slice(toolTipTitle.indexOf(".")+1):void 0,ariaKeyshortcuts=shortcutKey?(0,helpers_hotkeysManager__WEBPACK_IMPORTED_MODULE_11__.K3)(shortcutKey):void 0,displayTitle=label||toolTipTitle,icon=(0,helpers_itemToFlyoutHelper__WEBPACK_IMPORTED_MODULE_12__.u$)({...toolButtonObject},allFlyoutItems),isActive=activeToolName===toolName;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_FlyoutItemContainer__WEBPACK_IMPORTED_MODULE_14__.A,{...props,ref,onClick:handleClick,label:displayTitle,ariaKeyshortcuts,icon,additionalClass:isActive?"active":""})}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_Button__WEBPACK_IMPORTED_MODULE_5__.A,{className:classnames__WEBPACK_IMPORTED_MODULE_4___default()({ToolButton:!0,Button:!0,[className]:className,"confirm-button":"confirm"===preset,"cancel-button":"cancel"===preset,"button-with-label":label}),img:icon,label,title:toolTipTitle,dataElement,onClick:handleClick,disabled,forceTooltipPosition,isActive:isButtonActive,color,fillColor,strokeColor,ariaCurrent:isButtonActive,ariaPressed:isButtonActive,style})}));ToolButton.propTypes={dataElement:prop_types__WEBPACK_IMPORTED_MODULE_18___default().string,title:prop_types__WEBPACK_IMPORTED_MODULE_18___default().string,label:prop_types__WEBPACK_IMPORTED_MODULE_18___default().string,img:prop_types__WEBPACK_IMPORTED_MODULE_18___default().string,onClick:prop_types__WEBPACK_IMPORTED_MODULE_18___default().func,disabled:prop_types__WEBPACK_IMPORTED_MODULE_18___default().bool,groupedItem:prop_types__WEBPACK_IMPORTED_MODULE_18___default().string,allFlyoutItems:prop_types__WEBPACK_IMPORTED_MODULE_18___default().array,style:prop_types__WEBPACK_IMPORTED_MODULE_18___default().object},ToolButton.displayName="ToolButton";const __WEBPACK_DEFAULT_EXPORT__=ToolButton;ToolButton.__docgenInfo={description:"",methods:[],displayName:"ToolButton",props:{dataElement:{description:"",type:{name:"string"},required:!1},title:{description:"",type:{name:"string"},required:!1},label:{description:"",type:{name:"string"},required:!1},img:{description:"",type:{name:"string"},required:!1},onClick:{description:"",type:{name:"func"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},groupedItem:{description:"",type:{name:"string"},required:!1},allFlyoutItems:{description:"",type:{name:"array"},required:!1},style:{description:"",type:{name:"object"},required:!1}}}},"./src/components/ModularComponents/ToolButton/ToolButton.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[13].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/ModularComponents/ToolButton/ToolButton.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/ModularComponents/ToolButton/ToolButton.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AllToolButtons:()=>AllToolButtons,ChangingToolStylesShouldRerender:()=>ChangingToolStylesShouldRerender,OverrideToolButtonProps:()=>OverrideToolButtonProps,WithCustomStyle:()=>WithCustomStyle,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-redux/es/index.js"),_ToolButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ModularComponents/ToolButton/ToolButton.js"),_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),src_redux_initialState__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/redux/initialState.js"),storybook_test__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("storybook/test"),core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/core/index.js"),actions__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/redux/actions/index.js");const __WEBPACK_DEFAULT_EXPORT__={title:"ModularComponents/ToolButton",component:_ToolButton__WEBPACK_IMPORTED_MODULE_3__.A},allToolsProps=Object.values(window.Core.Tools.ToolNames).map((toolName=>({dataElement:toolName,toolName}))),WithProvider=({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_redux__WEBPACK_IMPORTED_MODULE_2__.Kq,{store:(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_8__.U1)({reducer:()=>src_redux_initialState__WEBPACK_IMPORTED_MODULE_4__.A}),children});function AllToolButtons(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(WithProvider,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{display:"flex",flexWrap:"wrap",flexDirection:"column",overflowY:"auto"},children:allToolsProps.map((props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[props.toolName,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ToolButton__WEBPACK_IMPORTED_MODULE_3__.A,{...props})]},props.dataElement)))})})}const OverrideToolButtonProps=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(WithProvider,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ToolButton__WEBPACK_IMPORTED_MODULE_3__.A,{dataElement:"AnnotationCreateSticky",toolName:"AnnotationCreateSticky",img:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/></svg>',title:"This is not a sticky or is it?"})}),WithCustomStyle=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(WithProvider,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ToolButton__WEBPACK_IMPORTED_MODULE_3__.A,{dataElement:"AnnotationCreateSticky",toolName:"AnnotationCreateSticky",img:"icon-tool-measurement-arc",title:"Arc measurement",className:"arc-measurement-class",style:{backgroundColor:"darksalmon",color:"white",borderRadius:"50%"}})});let toolStyles;WithCustomStyle.play=async({canvasElement})=>{const button=(0,storybook_test__WEBPACK_IMPORTED_MODULE_5__.within)(canvasElement).getByRole("button",{name:/Arc measurement/i});(0,storybook_test__WEBPACK_IMPORTED_MODULE_5__.expect)(button.classList.contains("arc-measurement-class")).toBe(!0)};const ReduxStory=()=>{toolStyles={StrokeColor:{R:0,G:122,B:59,A:1,toHexString:()=>"#007a3b"},StrokeThickness:1,Opacity:1};const originalGetTool=core__WEBPACK_IMPORTED_MODULE_6__.A.getTool;return core__WEBPACK_IMPORTED_MODULE_6__.A.getTool=()=>({...originalGetTool(),defaults:toolStyles}),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>()=>core__WEBPACK_IMPORTED_MODULE_6__.A.getTool=originalGetTool),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ToolButton__WEBPACK_IMPORTED_MODULE_3__.A,{dataElement:"AnnotationCreateRectangle",toolName:"AnnotationCreateRectangle"})},store=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_8__.U1)({reducer:()=>({...src_redux_initialState__WEBPACK_IMPORTED_MODULE_4__.A,viewer:{...src_redux_initialState__WEBPACK_IMPORTED_MODULE_4__.A.viewer,activeToolStyles:{...toolStyles}}})}),ChangingToolStylesShouldRerender=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_redux__WEBPACK_IMPORTED_MODULE_2__.Kq,{store,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ReduxStory,{})});ChangingToolStylesShouldRerender.play=async({canvasElement})=>{const button=(0,storybook_test__WEBPACK_IMPORTED_MODULE_5__.within)(canvasElement).getByRole("button",{name:/Rectangle/i});await(0,storybook_test__WEBPACK_IMPORTED_MODULE_5__.expect)(button.firstChild.style.color).toBe("rgb(0, 122, 59)"),toolStyles.StrokeColor={R:100,G:0,B:100,A:1,toHexString:()=>"#640064"},store.dispatch(actions__WEBPACK_IMPORTED_MODULE_7__.A.setActiveToolStyles(toolStyles)),await(0,storybook_test__WEBPACK_IMPORTED_MODULE_5__.expect)(button.firstChild.style.color).toBe("rgb(100, 0, 100)")};const __namedExportsOrder=["AllToolButtons","OverrideToolButtonProps","WithCustomStyle","ChangingToolStylesShouldRerender"]}}]);