(self.webpackChunkwebviewer_ui=self.webpackChunkwebviewer_ui||[]).push([[4450],{"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/FilterAnnotModal/FilterAnnotModal.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".open.FilterAnnotModal{visibility:visible}.closed.FilterAnnotModal{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.FilterAnnotModal{position:fixed;left:0;bottom:0;z-index:100;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:var(--modal-negative-space)}.FilterAnnotModal .modal-container .wrapper .modal-content{padding:10px}.FilterAnnotModal .footer{display:flex;flex-direction:row;justify-content:flex-end;width:100%;margin-top:13px}.FilterAnnotModal .footer.modal-footer{padding:16px;margin:0;border-top:1px solid var(--divider)}.FilterAnnotModal .footer .modal-button{display:flex;justify-content:center;align-items:center;padding:6px 18px;margin:8px 0 0;width:auto;width:-moz-fit-content;width:fit-content;border-radius:4px;height:30px;cursor:pointer}.FilterAnnotModal .footer .modal-button.cancel{color:var(--secondary-button-text);border:1px solid var(--secondary-button-text)}.FilterAnnotModal .footer .modal-button.cancel:hover{background-color:var(--document-background-color);color:var(--secondary-button-hover);border:1px solid var(--secondary-button-hover)}.FilterAnnotModal .footer .modal-button.confirm{margin-left:4px;color:var(--primary-button-text);font-weight:600;background:var(--primary-button)}.FilterAnnotModal .footer .modal-button.confirm:hover{background:var(--primary-button-hover)}.FilterAnnotModal .footer .modal-button.confirm.disabled{background:var(--primary-button)!important;opacity:.5}.FilterAnnotModal .footer .modal-button.secondary-btn-custom{border-radius:4px;border:1px solid var(--primary-button);color:var(--primary-button);padding:2px 20px 4px;cursor:pointer;background-color:#fff}.FilterAnnotModal .footer .modal-button.secondary-btn-custom:hover{color:var(--secondary-button-hover)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .FilterAnnotModal .footer .modal-button{padding:23px 8px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .FilterAnnotModal .footer .modal-button{padding:23px 8px}}.FilterAnnotModal .swipe-indicator{background:var(--divider);border-radius:2px;height:4px;width:38px;position:absolute;top:12px;margin-left:auto;margin-right:auto;left:0;right:0}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .FilterAnnotModal .swipe-indicator{display:none}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .FilterAnnotModal .swipe-indicator{display:none}}.FilterAnnotModal .container{overflow-y:auto;max-height:100%}@media(max-height:500px){.App:not(.is-web-component) .FilterAnnotModal .container,.FilterAnnotModal .App:not(.is-web-component) .container{overflow:auto;max-height:100%}}@container (max-height: 500px){.App.is-web-component .FilterAnnotModal .container,.FilterAnnotModal .App.is-web-component .container{overflow:auto;max-height:100%}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .FilterAnnotModal .container,.FilterAnnotModal .App:not(.is-in-desktop-only-mode):not(.is-web-component) .container{width:100%;position:fixed;left:0;bottom:0;padding-top:4px;min-width:100px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .FilterAnnotModal .container,.FilterAnnotModal .App.is-web-component:not(.is-in-desktop-only-mode) .container{width:100%;position:fixed;left:0;bottom:0;padding-top:4px;min-width:100px}}.FilterAnnotModal .container .filter-modal .body .tab-list{width:100%;height:28px;display:flex;border-radius:4px;color:var(--text-color)}.FilterAnnotModal .container .filter-modal .body .tab-list .tab-options-button{background-color:transparent;text-align:center;vertical-align:middle;line-height:24px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;flex:1;border-radius:0;cursor:pointer}.FilterAnnotModal .container .filter-modal .body .tab-list .tab-options-button:first-child{border-bottom-left-radius:4px;border-top-left-radius:4px}.FilterAnnotModal .container .filter-modal .body .tab-list .tab-options-button:last-child{border-bottom-right-radius:4px;border-top-right-radius:4px}.FilterAnnotModal .container .filter-modal .body .tab-list .tab-options-button:hover{background:var(--popup-button-hover)}.FilterAnnotModal .container .filter-modal .body .tab-list .tab-options-button.selected{background:var(--popup-button-active);cursor:default}.FilterAnnotModal{font-size:.9em}.FilterAnnotModal .container{display:flex;flex-direction:column;align-items:center;border-radius:4px;box-shadow:0 0 3px 0 var(--document-box-shadow);background:var(--component-background);width:360px}.FilterAnnotModal .container .message{font-size:14px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .FilterAnnotModal .container .message{font-size:16px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .FilterAnnotModal .container .message{font-size:16px}}.FilterAnnotModal .container .filter-modal{display:flex;flex-direction:column;width:100%}.FilterAnnotModal .container .filter-modal .divider{height:1px;width:100%;background:var(--divider)}.FilterAnnotModal .container .filter-modal .header{display:flex;justify-content:space-between;margin:16px;font-size:16px;font-weight:700;align-items:center;height:24px}.FilterAnnotModal .container .filter-modal .header .Button{height:24px}.FilterAnnotModal .container .filter-modal .body{padding:16px}.FilterAnnotModal .container .filter-modal .body .filter-options{height:200px;width:100%}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel{height:100%;width:100%;display:flex;flex-direction:column}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel .include-replies{display:flex;height:20px;margin-top:12px}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel .include-replies label{color:var(--gray-7)}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel .three-column-filter{margin-top:20px;overflow-y:scroll;display:grid;grid-gap:5px 16px;grid-template-columns:repeat(3,minmax(0,1fr))}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel .color-filters{margin-top:20px;overflow-y:scroll;display:grid;grid-gap:16px;grid-template-columns:repeat(5,minmax(0,1fr))}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel .buttons{display:grid;padding:6px 0;grid-template-columns:100px 100px}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel .colorSelect{display:flex;flex-direction:row}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel .colorSelect .colorCell{width:22px;height:22px;border-radius:10000000px;margin-left:4px}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel label{overflow:hidden}.FilterAnnotModal .container .filter-modal .body .filter-options .tab-panel label div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.FilterAnnotModal .container .filter-modal .settings-body{display:flex;flex-direction:column;padding:16px;font-size:var(--font-size-default);grid-gap:12px;gap:12px}.FilterAnnotModal .container .filter-modal .settings-body .settings-header{font-weight:var(--font-weight-bold)}.FilterAnnotModal .container .filter-modal .settings-body .settings{display:flex;flex-direction:column;grid-gap:8px;gap:8px}.FilterAnnotModal .container .filter-modal .settings-body .settings .setting{display:flex;flex-direction:row;grid-gap:16px;gap:16px}.FilterAnnotModal .container .filter-modal .footer{display:flex;justify-content:space-between;width:100%;padding:16px;margin-top:0}.FilterAnnotModal .container .filter-modal .footer .Button{display:flex;justify-content:center;align-items:center;color:var(--primary-button-text);padding:6px 18px;width:auto;width:-moz-fit-content;width:fit-content;background:var(--primary-button);border-radius:4px;height:32px;cursor:pointer}.FilterAnnotModal .container .filter-modal .footer .Button:hover{background:var(--primary-button-hover)}.FilterAnnotModal .container .filter-modal .footer .Button.disabled{background:var(--gray-6);border-color:var(--gray-6);cursor:not-allowed}.FilterAnnotModal .container .filter-modal .footer .filter-annot-clear{color:var(--secondary-button-text);background:none}.FilterAnnotModal .container .filter-modal .footer .filter-annot-clear:hover{color:var(--secondary-button-hover);background:none}.FilterAnnotModal .container .tab-list .tab-options-divider+.tab-options-button{border-left:none!important}.FilterAnnotModal .container .tab-list .tab-options-button{border-top:1px solid var(--tab-border-color);border-bottom:1px solid var(--tab-border-color)}.FilterAnnotModal .container .tab-list .tab-options-button:first-child{border-left:1px solid var(--tab-border-color)}.FilterAnnotModal .container .tab-list .tab-options-button:last-child{border-right:1px solid var(--tab-border-color)}.FilterAnnotModal .container .tab-list .tab-options-button:hover{background:var(--tab-background-color-hover);border-top:1px solid var(--tab-border-color-hover);border-bottom:1px solid var(--tab-border-color-hover);border-right:1px solid var(--tab-border-color-hover)}.FilterAnnotModal .container .tab-list .tab-options-button:hover+button,.FilterAnnotModal .container .tab-list .tab-options-button:hover+div{border-left:none}.FilterAnnotModal .container .tab-list .tab-options-button.selected{border:1px solid var(--tab-border-color-selected);color:var(--tab-text-color-selected)}.FilterAnnotModal .container .tab-list .tab-options-button.selected+button,.FilterAnnotModal .container .tab-list .tab-options-button.selected+div{border-left:none!important}.FilterAnnotModal .container .tab-list .tab-options-button:not(.selected){border-right:1px solid var(--tab-border-color)}",""]),exports.locals={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"},module.exports=exports},"./src/components/FilterAnnotModal/FilterAnnotModal.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[14].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/components/FilterAnnotModal/FilterAnnotModal.scss");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.id,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./src/components/FilterAnnotModal/FilterAnnotModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),react_redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-redux/es/index.js"),react_i18next__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/core/index.js"),actions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/redux/actions/index.js"),selectors__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/redux/selectors/index.js"),helpers_fireEvent__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/helpers/fireEvent.js"),react_swipeable__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-swipeable/es/index.js"),_pdftron_webviewer_react_toolkit__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./node_modules/@pdftron/webviewer-react-toolkit/dist/esm/components/FocusTrap/FocusTrap.js"),constants_defaultTool__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/constants/defaultTool.js"),constants_events__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/constants/events.js"),constants_map__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/constants/map.js"),constants_dataElement__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/constants/dataElement.js"),helpers_color__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./src/helpers/color.js"),helpers_getAnnotationClass__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./src/helpers/getAnnotationClass.js"),components_Choice__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/components/Choice/index.js"),components_Button__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/components/Button/index.js"),components_Tabs__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/components/Tabs/index.js"),components_Tooltip__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/components/Tooltip/index.js"),constants_commonColors__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/constants/commonColors.js");__webpack_require__("./src/components/FilterAnnotModal/FilterAnnotModal.scss");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _instanceof(left,right){return null!=right&&"undefined"!=typeof Symbol&&right[Symbol.hasInstance]?!!right[Symbol.hasInstance](left):left instanceof right}function _sliced_to_array(arr,i){return function _array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function _iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||_unsupported_iterable_to_array(arr,i)||function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _to_consumable_array(arr){return function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}(arr)||function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupported_iterable_to_array(arr)||function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_array_like_to_array(o,minLen):void 0}}var TABS_ID="filterAnnotModal",FilterAnnotModal=function(){var _useSelector=_sliced_to_array((0,react_redux__WEBPACK_IMPORTED_MODULE_2__.d4)((function(state){return[selectors__WEBPACK_IMPORTED_MODULE_5__.A.isElementDisabled(state,constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.FILTER_MODAL),selectors__WEBPACK_IMPORTED_MODULE_5__.A.isElementOpen(state,constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.FILTER_MODAL),selectors__WEBPACK_IMPORTED_MODULE_5__.A.getColorMap(state),selectors__WEBPACK_IMPORTED_MODULE_5__.A.getSelectedTab(state,TABS_ID),selectors__WEBPACK_IMPORTED_MODULE_5__.A.getAnnotationFilters(state),selectors__WEBPACK_IMPORTED_MODULE_5__.A.getIsMeasurementAnnotationFilterEnabled(state)]})),6),isDisabled=_useSelector[0],isOpen=_useSelector[1],colorMap=_useSelector[2],selectedTab=_useSelector[3],annotationFilters=_useSelector[4],isMeasurementAnnotationFilterEnabled=_useSelector[5],t=_sliced_to_array((0,react_i18next__WEBPACK_IMPORTED_MODULE_18__.B)(),1)[0],dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.wA)(),_useState=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),2),authors=_useState[0],setAuthors=_useState[1],_useState1=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),2),annotTypes=_useState1[0],setAnnotTypes=_useState1[1],_useState2=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),2),colors=_useState2[0],setColorTypes=_useState2[1],_useState3=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),2),statuses=_useState3[0],setStatusTypes=_useState3[1],_useState4=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),2),authorFilter=_useState4[0],setAuthorFilter=_useState4[1],_useState5=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),2),typesFilter=_useState5[0],setTypesFilter=_useState5[1],_useState6=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),2),colorFilter=_useState6[0],setColorFilter=_useState6[1],_useState7=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),2),checkRepliesForAuthorFilter=_useState7[0],setCheckRepliesForAuthorFilter=_useState7[1],_useState8=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),isDocumentFilterActive=_useState8[0],setIsDocumentFilterActive=_useState8[1],_useState9=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),2),statusFilter=_useState9[0],setStatusFilter=_useState9[1],_useState10=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),2),filterCount=_useState10[0],setFilterCount=_useState10[1],_useState11=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),ifShowAnnotationStatus=_useState11[0],setIfShowAnnotationStatus=_useState11[1],getIconColor=function(annot){var _colorMap_key,key=(0,constants_map__WEBPACK_IMPORTED_MODULE_10__.c7)(annot);return annot[null===(_colorMap_key=colorMap[key])||void 0===_colorMap_key?void 0:_colorMap_key.iconColor]},similarColorExist=function(currColors,newColor){var colorObject=currColors.map((function(c){return Object.assign({R:parseInt("".concat(c[1]).concat(c[2]),16),G:parseInt("".concat(c[3]).concat(c[4]),16),B:parseInt("".concat(c[5]).concat(c[6]),16)})}));return!!colorObject.filter((function(c){return Math.abs(newColor.R-c.R)<10&&Math.abs(newColor.G-c.G)<10&&Math.abs(newColor.B-c.B)<10})).length},filterApply=function(){var newFilter=function(annot){var documentViewerKey=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,type=!0,author=!0,color=!0,status=!0;if(typesFilter.length>0){var isMeasurementAnnotation=annot.IT||annot.getCustomData("trn-is-count");if(isMeasurementAnnotationFilterEnabled&&isMeasurementAnnotation){var measurementKey=(0,constants_map__WEBPACK_IMPORTED_MODULE_10__.c7)(annot);type=typesFilter.includes(measurementKey)}else type=typesFilter.includes((0,helpers_getAnnotationClass__WEBPACK_IMPORTED_MODULE_19__.u)(annot))}if(authorFilter.length>0&&!(author=authorFilter.includes(core__WEBPACK_IMPORTED_MODULE_3__.A.getDisplayAuthor(annot.Author,documentViewerKey)))&&checkRepliesForAuthorFilter){var allReplies=annot.getReplies(),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=allReplies[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var reply=_step.value;if(authorFilter.includes(core__WEBPACK_IMPORTED_MODULE_3__.A.getDisplayAuthor(reply.Author,documentViewerKey))){author=!0;break}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}if(colorFilter.length>0){var iconColor=getIconColor(annot);color=iconColor?similarColorExist(colorFilter,iconColor):colorFilter.includes(constants_commonColors__WEBPACK_IMPORTED_MODULE_16__.z.gray8)}return statusFilter.length>0&&(status=annot.getStatus()?statusFilter.includes(annot.getStatus()):statusFilter.includes("None")),type&&author&&color&&status};dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.setCustomNoteFilter(newFilter)),dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.setAnnotationFilters({isDocumentFilterActive,includeReplies:checkRepliesForAuthorFilter,authorFilter,colorFilter,typeFilter:typesFilter,statusFilter}));var redrawList=[];isDocumentFilterActive?core__WEBPACK_IMPORTED_MODULE_3__.A.getDocumentViewers().forEach((function(documentViewer,index){return documentViewer.getAnnotationManager().getAnnotationsList().forEach((function(annot){var shouldHide=!newFilter(annot,index+1);shouldHide!==annot.NoView&&(annot.NoView=shouldHide,redrawList.push(annot))}))})):core__WEBPACK_IMPORTED_MODULE_3__.A.getDocumentViewers().forEach((function(documentViewer){return documentViewer.getAnnotationManager().getAnnotationsList().forEach((function(annot){!0===annot.NoView&&(annot.NoView=!1,redrawList.push(annot))}))})),core__WEBPACK_IMPORTED_MODULE_3__.A.getDocumentViewers().forEach((function(documentViewer){return documentViewer.getAnnotationManager().drawAnnotationsFromList(redrawList)})),(0,helpers_fireEvent__WEBPACK_IMPORTED_MODULE_6__.A)(constants_events__WEBPACK_IMPORTED_MODULE_9__.A.ANNOTATION_FILTER_CHANGED,{types:typesFilter,authors:authorFilter,colors:colorFilter,statuses:statusFilter,checkRepliesForAuthorFilter}),closeModal()},filterClear=function(){setCheckRepliesForAuthorFilter(!1),setIsDocumentFilterActive(!1),setAuthorFilter([]),setTypesFilter([]),setColorFilter([]),setStatusFilter([]);var redrawList=[];core__WEBPACK_IMPORTED_MODULE_3__.A.getDocumentViewers().forEach((function(documentViewer){return documentViewer.getAnnotationManager().getAnnotationsList().forEach((function(annot){!0===annot.NoView&&(annot.NoView=!1,redrawList.push(annot))}))})),core__WEBPACK_IMPORTED_MODULE_3__.A.getDocumentViewers().forEach((function(documentViewer){return documentViewer.getAnnotationManager().drawAnnotationsFromList(redrawList)}))},closeModal=function(){dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.closeElement(constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.FILTER_MODAL)),core__WEBPACK_IMPORTED_MODULE_3__.A.setToolMode(constants_defaultTool__WEBPACK_IMPORTED_MODULE_8__.A)};(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var clearAllFilters=function(){filterClear(),filterApply()};return core__WEBPACK_IMPORTED_MODULE_3__.A.addEventListener("documentUnloaded",clearAllFilters),function(){core__WEBPACK_IMPORTED_MODULE_3__.A.removeEventListener("documentUnloaded",clearAllFilters)}}),[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var _instance,annotLists=core__WEBPACK_IMPORTED_MODULE_3__.A.getDocumentViewers().map((function(documentViewer){return documentViewer.getAnnotationManager().getAnnotationsList()})),annots=(_instance=[]).concat.apply(_instance,_to_consumable_array(annotLists)).filter((function(annot){return!annot.Hidden})),authorsToBeAdded=new Set,annotTypesToBeAdded=new Set,annotColorsToBeAdded=new Set,annotStatusesToBeAdded=new Set;return annots.forEach((function(annot){var displayAuthor=core__WEBPACK_IMPORTED_MODULE_3__.A.getDisplayAuthor(annot.Author);if(displayAuthor&&""!==displayAuthor&&authorsToBeAdded.add(displayAuthor),!(_instanceof(annot,window.Core.Annotations.WidgetAnnotation)||_instanceof(annot,window.Core.Annotations.StickyAnnotation)&&annot.isReply()||_instanceof(annot,window.Core.Annotations.Link))){var isMeasurementAnnotation=annot.IT||annot.getCustomData("trn-is-count");if(isMeasurementAnnotationFilterEnabled&&isMeasurementAnnotation){var measurementKey=(0,constants_map__WEBPACK_IMPORTED_MODULE_10__.c7)(annot);annotTypesToBeAdded.add(measurementKey)}else annotTypesToBeAdded.add((0,helpers_getAnnotationClass__WEBPACK_IMPORTED_MODULE_19__.u)(annot));var iconColor=getIconColor(annot);iconColor&&!similarColorExist(_to_consumable_array(annotColorsToBeAdded),iconColor)&&annotColorsToBeAdded.add((0,helpers_color__WEBPACK_IMPORTED_MODULE_20__.H)(iconColor.R,iconColor.G,iconColor.B,iconColor.A)),annot.getStatus()?annotStatusesToBeAdded.add(annot.getStatus()):annotStatusesToBeAdded.add("None")}})),setAuthors(_to_consumable_array(authorsToBeAdded)),setAnnotTypes(_to_consumable_array(annotTypesToBeAdded)),setColorTypes(_to_consumable_array(annotColorsToBeAdded)),setStatusTypes(_to_consumable_array(annotStatusesToBeAdded)),core__WEBPACK_IMPORTED_MODULE_3__.A.addEventListener("documentUnloaded",closeModal),function(){core__WEBPACK_IMPORTED_MODULE_3__.A.removeEventListener("documentUnloaded",closeModal)}}),[isOpen,isMeasurementAnnotationFilterEnabled]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){selectedTab!==constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.ANNOTATION_STATUS_FILTER_PANEL_BUTTON||ifShowAnnotationStatus||dispatch(actions__WEBPACK_IMPORTED_MODULE_4__.A.setSelectedTab(TABS_ID,constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.ANNOTATION_USER_FILTER_PANEL_BUTTON))}),[isOpen,selectedTab,ifShowAnnotationStatus]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){setFilterCount((checkRepliesForAuthorFilter?1:0)+(isDocumentFilterActive?1:0)+authorFilter.length+colorFilter.length+typesFilter.length+statusFilter.length)}),[checkRepliesForAuthorFilter,isDocumentFilterActive,authorFilter,colorFilter,typesFilter,statusFilter]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){setIfShowAnnotationStatus(statuses.length>1||1===statuses.length&&"None"!==statuses[0])}),[statuses]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){isOpen&&(setIsDocumentFilterActive(annotationFilters.isDocumentFilterActive),setCheckRepliesForAuthorFilter(annotationFilters.includeReplies),setAuthorFilter(annotationFilters.authorFilter),setColorFilter(annotationFilters.colorFilter),setTypesFilter(annotationFilters.typeFilter),setStatusFilter(annotationFilters.statusFilter))}),[isOpen]);var modalClass=classnames__WEBPACK_IMPORTED_MODULE_1___default()({Modal:!0,FilterAnnotModal:!0,open:isOpen,closed:!isOpen});return isDisabled?null:react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:modalClass,"data-element":constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.FILTER_MODAL,onMouseDown:closeModal},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_pdftron_webviewer_react_toolkit__WEBPACK_IMPORTED_MODULE_21__.s,{locked:isOpen,focusLastOnUnlock:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"container",onMouseDown:function(e){return e.stopPropagation()}},core__WEBPACK_IMPORTED_MODULE_3__.A.getAnnotationsList().length>0?react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"filter-modal"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_swipeable__WEBPACK_IMPORTED_MODULE_7__.Hx,{onSwipedDown:closeModal,preventDefaultTouchmoveEvent:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"swipe-indicator"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,"".concat(t("option.filterAnnotModal.filters")," (").concat(filterCount,")")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Button__WEBPACK_IMPORTED_MODULE_13__.A,{img:"icon-close",onClick:closeModal,title:"action.close"}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"divider"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"body"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.tU,{id:TABS_ID},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"tab-list"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.oz,{dataElement:constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.ANNOTATION_USER_FILTER_PANEL_BUTTON},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"tab-options-button"},t("option.filterAnnotModal.user"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"tab-options-divider"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.oz,{dataElement:constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.ANNOTATION_COLOR_FILTER_PANEL_BUTTON},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"tab-options-button"},t("option.filterAnnotModal.color"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"tab-options-divider"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.oz,{dataElement:constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.ANNOTATION_TYPE_FILTER_PANEL_BUTTON},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"tab-options-button"},t("option.filterAnnotModal.type"))),ifShowAnnotationStatus&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"tab-options-divider"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.oz,{dataElement:constants_dataElement__WEBPACK_IMPORTED_MODULE_11__.A.ANNOTATION_STATUS_FILTER_PANEL_BUTTON},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"tab-options-button"},t("option.filterAnnotModal.status"))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"filter-options"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.Kp,{dataElement:"annotationUserFilterPanel"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"user-filters three-column-filter"},_to_consumable_array(authors).map((function(val,index){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Choice__WEBPACK_IMPORTED_MODULE_12__.A,{type:"checkbox",key:index,label:react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Tooltip__WEBPACK_IMPORTED_MODULE_15__.A,{content:val},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,val)),checked:authorFilter.includes(val),id:val,onChange:function(e){-1===authorFilter.indexOf(e.target.getAttribute("id"))?setAuthorFilter(_to_consumable_array(authorFilter).concat([e.target.getAttribute("id")])):setAuthorFilter(authorFilter.filter((function(author){return author!==e.target.getAttribute("id")})))}})})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.Kp,{dataElement:"annotationColorFilterPanel"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"color-filters"},_to_consumable_array(colors).map((function(val,index){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"colorSelect",key:"color".concat(index)},react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Choice__WEBPACK_IMPORTED_MODULE_12__.A,{type:"checkbox",checked:colorFilter.includes(val),id:val,onChange:function(e){-1===colorFilter.indexOf(e.target.getAttribute("id"))?setColorFilter(_to_consumable_array(colorFilter).concat([e.target.getAttribute("id")])):setColorFilter(colorFilter.filter((function(color){return color!==e.target.getAttribute("id")})))}}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"colorCell",style:{background:(0,helpers_color__WEBPACK_IMPORTED_MODULE_20__.o_)(val)}}))})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.Kp,{dataElement:"annotationTypeFilterPanel"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"type-filters three-column-filter"},_to_consumable_array(annotTypes).sort((function(type1,type2){return t("annotation.".concat(type1))<=t("annotation.".concat(type2))?-1:1})).map((function(val,index){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Choice__WEBPACK_IMPORTED_MODULE_12__.A,{type:"checkbox",key:index,label:react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Tooltip__WEBPACK_IMPORTED_MODULE_15__.A,{content:t("annotation.".concat(val))},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,t("annotation.".concat(val)))),checked:typesFilter.includes(val),id:val,onChange:function(e){-1===typesFilter.indexOf(e.target.getAttribute("id"))?setTypesFilter(_to_consumable_array(typesFilter).concat([e.target.getAttribute("id")])):setTypesFilter(typesFilter.filter((function(type){return type!==e.target.getAttribute("id")})))}})})))),ifShowAnnotationStatus&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Tabs__WEBPACK_IMPORTED_MODULE_14__.Kp,{dataElement:"annotationStatusFilterPanel"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"status-filters three-column-filter"},_to_consumable_array(statuses).map((function(val,index){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Choice__WEBPACK_IMPORTED_MODULE_12__.A,{type:"checkbox",key:index,checked:statusFilter.includes(val),label:t("option.state.".concat(val.toLocaleLowerCase())),id:val,onChange:function(e){-1===statusFilter.indexOf(e.target.getAttribute("id"))?setStatusFilter(_to_consumable_array(statusFilter).concat([e.target.getAttribute("id")])):setStatusFilter(statusFilter.filter((function(status){return status!==e.target.getAttribute("id")})))}})}))))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"divider"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"settings-body"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"settings-header"},t("option.filterAnnotModal.filterSettings")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"settings"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Choice__WEBPACK_IMPORTED_MODULE_12__.A,{label:t("option.filterAnnotModal.includeReplies"),checked:checkRepliesForAuthorFilter,onChange:function(e){return setCheckRepliesForAuthorFilter(e.target.checked)},id:"filter-annot-modal-include-replies"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Choice__WEBPACK_IMPORTED_MODULE_12__.A,{label:t("option.filterAnnotModal.filterDocument"),checked:isDocumentFilterActive,onChange:function(e){return setIsDocumentFilterActive(e.target.checked)},id:"filter-annot-modal-filter-document"}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"divider"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"footer"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Button__WEBPACK_IMPORTED_MODULE_13__.A,{className:"filter-annot-clear",onClick:filterClear,label:t("action.clearAll"),disabled:0===filterCount}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_Button__WEBPACK_IMPORTED_MODULE_13__.A,{className:"filter-annot-apply",onClick:filterApply,label:t("action.apply")}))):react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"swipe-indicator"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"message"},t("message.noAnnotationsFilter"))))))};const __WEBPACK_DEFAULT_EXPORT__=FilterAnnotModal;FilterAnnotModal.__docgenInfo={description:"",methods:[],displayName:"FilterAnnotModal"}}}]);